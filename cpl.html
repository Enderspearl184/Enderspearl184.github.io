<html lang="en" class="wf-arialnarrow-n4-active wf-arial-n4-active wf-arialnarrow-n7-active wf-burbanksmall-n4-active wf-ccfacefront-i7-active wf-cccomiccrazy-n4-active wf-burbanksmall-n7-active wf-arial-n7-active wf-asterisk-n4-inactive wf-active"><head>
        <meta charset="utf-8">
        <title>Play Now! | CPL</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="favicon.ico">
        <link rel="canonical" href="https://play.cplegacy.com/">
        <meta name="keywords" content="Club Penguin, Club Penguin Legacy, CPL, cpps, penguins, disney, virtual world, mmo, online game, free, club penguin island, free game">
        <meta name="description" content="Welcome to CPL! A free-to-play, safe, online virtual world, where you can meet new friends, play fun mini-games, and more!">

        <meta property="og:title" content="Play Now! | CPL">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://play.cplegacy.com">
        <meta property="og:image" content="https://cplegacy.com/preview.png">
        <meta property="og:image:alt" content="Collection of fun, cheerful, emojis!">
        <meta property="og:description" content="Welcome to CPL! A free-to-play, safe, online virtual world, where you can meet new friends, play fun mini-games, and more!">

        <meta name="twitter:site" content="@realcplegacy">
        <meta name="twitter:creator" content="@realcplegacy">

        <!-- Google Analytics -->
        <script async="" src="https://www.google-analytics.com/analytics.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-223733104-1', 'auto');
            ga('send', 'pageview', '/play');
        </script>
        <!-- End Google Analytics -->

        <!-- Adinplay -->
        <script>
            var aiptag = aiptag || {};
            aiptag.cmd = aiptag.cmd || [];
            aiptag.cmd.display = aiptag.cmd.display || [];
            aiptag.cmd.player = aiptag.cmd.player || [];

            //CMP tool settings
            aiptag.cmp = {
                show: true,
                position: "centered", //centered or bottom
                button: true,
                buttonText: "Privacy settings",
                buttonPosition: "bottom-left", //bottom-left, bottom-right, top-left, top-right
            };
        </script>
        <script async="" src="//api.adinplay.com/libs/aiptag/pub/CPG/cplegacy.com/tag.min.js"></script>
        <!-- End Adinplay -->

        <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
    <script defer="">/*MIT License

Copyright (c) 2022 wizguin <https://github.com/wizguin>

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
(()=>{var __webpack_modules__={2991:(rt,m,C)=>{"use strict";C.d(m,{R:()=>f,Y:()=>r});var t=C(2176),e={};function f(){return(0,t.KV)()?C.g:typeof window!="undefined"?window:typeof self!="undefined"?self:e}function r(o,a,s){var n=s||f(),l=n.__SENTRY__=n.__SENTRY__||{},i=l[o]||(l[o]=a());return i}},2176:(rt,m,C)=>{"use strict";C.d(m,{l$:()=>f,KV:()=>e});function t(){return typeof __SENTRY_BROWSER_BUNDLE__!="undefined"&&!!__SENTRY_BROWSER_BUNDLE__}rt=C.hmd(rt);function e(){return!t()&&Object.prototype.toString.call(typeof process!="undefined"?process:0)==="[object process]"}function f(o,a){return o.require(a)}function r(o){var a;try{a=f(rt,o)}catch(n){}try{var s=f(rt,"process").cwd;a=f(rt,s()+"/node_modules/"+o)}catch(n){}return a}},1170:(rt,m,C)=>{"use strict";C.d(m,{ph:()=>l,yW:()=>n});var t=C(2991),e=C(2176);rt=C.hmd(rt);var f={nowSeconds:function(){return Date.now()/1e3}};function r(){var c=(0,t.R)().performance;if(!(!c||!c.now)){var p=Date.now()-c.now();return{now:function(){return c.now()},timeOrigin:p}}}function o(){try{var c=(0,e.l$)(rt,"perf_hooks");return c.performance}catch(p){return}}var a=(0,e.KV)()?o():r(),s=a===void 0?f:{nowSeconds:function(){return(a.timeOrigin+a.now())/1e3}},n=f.nowSeconds.bind(f),l=s.nowSeconds.bind(s),i=null,h=a!==void 0,u,d=function(){var c=(0,t.R)().performance;if(!c||!c.now){u="none";return}var p=3600*1e3,g=c.now(),x=Date.now(),y=c.timeOrigin?Math.abs(c.timeOrigin+g-x):p,T=y<p,E=c.timing&&c.timing.navigationStart,w=typeof E=="number",A=w?Math.abs(E+g-x):p,b=A<p;return T||b?y<=A?(u="timeOrigin",c.timeOrigin):(u="navigationStart",E):(u="dateNow",x)}()},3063:(rt,m)=>{m.Q=C;function C(e){if(e)return t(e)}function t(e){for(var f in C.prototype)e[f]=C.prototype[f];return e}C.prototype.on=C.prototype.addEventListener=function(e,f){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(f),this},C.prototype.once=function(e,f){function r(){this.off(e,r),f.apply(this,arguments)}return r.fn=f,this.on(e,r),this},C.prototype.off=C.prototype.removeListener=C.prototype.removeAllListeners=C.prototype.removeEventListener=function(e,f){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var o,a=0;a<r.length;a++)if(o=r[a],o===f||o.fn===f){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this},C.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var f=new Array(arguments.length-1),r=this._callbacks["$"+e],o=1;o<arguments.length;o++)f[o-1]=arguments[o];if(r){r=r.slice(0);for(var o=0,a=r.length;o<a;++o)r[o].apply(this,f)}return this},C.prototype.emitReserved=C.prototype.emit,C.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},C.prototype.hasListeners=function(e){return!!this.listeners(e).length}},9669:(rt,m,C)=>{rt.exports=C(1609)},5448:(rt,m,C)=>{"use strict";var t=C(4867),e=C(6026),f=C(4372),r=C(5327),o=C(4097),a=C(4109),s=C(7985),n=C(5061),l=C(7874),i=C(5263);rt.exports=function(u){return new Promise(function(c,p){var g=u.data,x=u.headers,y=u.responseType,T;function E(){u.cancelToken&&u.cancelToken.unsubscribe(T),u.signal&&u.signal.removeEventListener("abort",T)}t.isFormData(g)&&delete x["Content-Type"];var w=new XMLHttpRequest;if(u.auth){var A=u.auth.username||"",b=u.auth.password?unescape(encodeURIComponent(u.auth.password)):"";x.Authorization="Basic "+btoa(A+":"+b)}var R=o(u.baseURL,u.url);w.open(u.method.toUpperCase(),r(R,u.params,u.paramsSerializer),!0),w.timeout=u.timeout;function L(){if(!!w){var D="getAllResponseHeaders"in w?a(w.getAllResponseHeaders()):null,G=!y||y==="text"||y==="json"?w.responseText:w.response,X={data:G,status:w.status,statusText:w.statusText,headers:D,config:u,request:w};e(function(K){c(K),E()},function(K){p(K),E()},X),w=null}}if("onloadend"in w?w.onloadend=L:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(L)},w.onabort=function(){!w||(p(n("Request aborted",u,"ECONNABORTED",w)),w=null)},w.onerror=function(){p(n("Network Error",u,null,w)),w=null},w.ontimeout=function(){var G=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded",X=u.transitional||l;u.timeoutErrorMessage&&(G=u.timeoutErrorMessage),p(n(G,u,X.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",w)),w=null},t.isStandardBrowserEnv()){var B=(u.withCredentials||s(R))&&u.xsrfCookieName?f.read(u.xsrfCookieName):void 0;B&&(x[u.xsrfHeaderName]=B)}"setRequestHeader"in w&&t.forEach(x,function(G,X){typeof g=="undefined"&&X.toLowerCase()==="content-type"?delete x[X]:w.setRequestHeader(X,G)}),t.isUndefined(u.withCredentials)||(w.withCredentials=!!u.withCredentials),y&&y!=="json"&&(w.responseType=u.responseType),typeof u.onDownloadProgress=="function"&&w.addEventListener("progress",u.onDownloadProgress),typeof u.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",u.onUploadProgress),(u.cancelToken||u.signal)&&(T=function(D){!w||(p(!D||D&&D.type?new i("canceled"):D),w.abort(),w=null)},u.cancelToken&&u.cancelToken.subscribe(T),u.signal&&(u.signal.aborted?T():u.signal.addEventListener("abort",T))),g||(g=null),w.send(g)})}},1609:(rt,m,C)=>{"use strict";var t=C(4867),e=C(1849),f=C(321),r=C(7185),o=C(5546);function a(n){var l=new f(n),i=e(f.prototype.request,l);return t.extend(i,f.prototype,l),t.extend(i,l),i.create=function(u){return a(r(n,u))},i}var s=a(o);s.Axios=f,s.Cancel=C(5263),s.CancelToken=C(4972),s.isCancel=C(6502),s.VERSION=C(7288).version,s.all=function(l){return Promise.all(l)},s.spread=C(8713),s.isAxiosError=C(6268),rt.exports=s,rt.exports.default=s},5263:rt=>{"use strict";function m(C){this.message=C}m.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},m.prototype.__CANCEL__=!0,rt.exports=m},4972:(rt,m,C)=>{"use strict";var t=C(5263);function e(f){if(typeof f!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(s){r=s});var o=this;this.promise.then(function(a){if(!!o._listeners){var s,n=o._listeners.length;for(s=0;s<n;s++)o._listeners[s](a);o._listeners=null}}),this.promise.then=function(a){var s,n=new Promise(function(l){o.subscribe(l),s=l}).then(a);return n.cancel=function(){o.unsubscribe(s)},n},f(function(s){o.reason||(o.reason=new t(s),r(o.reason))})}e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(!!this._listeners){var o=this._listeners.indexOf(r);o!==-1&&this._listeners.splice(o,1)}},e.source=function(){var r,o=new e(function(s){r=s});return{token:o,cancel:r}},rt.exports=e},6502:rt=>{"use strict";rt.exports=function(C){return!!(C&&C.__CANCEL__)}},321:(rt,m,C)=>{"use strict";var t=C(4867),e=C(5327),f=C(782),r=C(3572),o=C(7185),a=C(4875),s=a.validators;function n(l){this.defaults=l,this.interceptors={request:new f,response:new f}}n.prototype.request=function(i,h){typeof i=="string"?(h=h||{},h.url=i):h=i||{},h=o(this.defaults,h),h.method?h.method=h.method.toLowerCase():this.defaults.method?h.method=this.defaults.method.toLowerCase():h.method="get";var u=h.transitional;u!==void 0&&a.assertOptions(u,{silentJSONParsing:s.transitional(s.boolean),forcedJSONParsing:s.transitional(s.boolean),clarifyTimeoutError:s.transitional(s.boolean)},!1);var d=[],c=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(h)===!1||(c=c&&A.synchronous,d.unshift(A.fulfilled,A.rejected))});var p=[];this.interceptors.response.forEach(function(A){p.push(A.fulfilled,A.rejected)});var g;if(!c){var x=[r,void 0];for(Array.prototype.unshift.apply(x,d),x=x.concat(p),g=Promise.resolve(h);x.length;)g=g.then(x.shift(),x.shift());return g}for(var y=h;d.length;){var T=d.shift(),E=d.shift();try{y=T(y)}catch(w){E(w);break}}try{g=r(y)}catch(w){return Promise.reject(w)}for(;p.length;)g=g.then(p.shift(),p.shift());return g},n.prototype.getUri=function(i){return i=o(this.defaults,i),e(i.url,i.params,i.paramsSerializer).replace(/^\?/,"")},t.forEach(["delete","get","head","options"],function(i){n.prototype[i]=function(h,u){return this.request(o(u||{},{method:i,url:h,data:(u||{}).data}))}}),t.forEach(["post","put","patch"],function(i){n.prototype[i]=function(h,u,d){return this.request(o(d||{},{method:i,url:h,data:u}))}}),rt.exports=n},782:(rt,m,C)=>{"use strict";var t=C(4867);function e(){this.handlers=[]}e.prototype.use=function(r,o,a){return this.handlers.push({fulfilled:r,rejected:o,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1},e.prototype.eject=function(r){this.handlers[r]&&(this.handlers[r]=null)},e.prototype.forEach=function(r){t.forEach(this.handlers,function(a){a!==null&&r(a)})},rt.exports=e},4097:(rt,m,C)=>{"use strict";var t=C(1793),e=C(7303);rt.exports=function(r,o){return r&&!t(o)?e(r,o):o}},5061:(rt,m,C)=>{"use strict";var t=C(481);rt.exports=function(f,r,o,a,s){var n=new Error(f);return t(n,r,o,a,s)}},3572:(rt,m,C)=>{"use strict";var t=C(4867),e=C(8527),f=C(6502),r=C(5546),o=C(5263);function a(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new o("canceled")}rt.exports=function(n){a(n),n.headers=n.headers||{},n.data=e.call(n,n.data,n.headers,n.transformRequest),n.headers=t.merge(n.headers.common||{},n.headers[n.method]||{},n.headers),t.forEach(["delete","get","head","post","put","patch","common"],function(h){delete n.headers[h]});var l=n.adapter||r.adapter;return l(n).then(function(h){return a(n),h.data=e.call(n,h.data,h.headers,n.transformResponse),h},function(h){return f(h)||(a(n),h&&h.response&&(h.response.data=e.call(n,h.response.data,h.response.headers,n.transformResponse))),Promise.reject(h)})}},481:rt=>{"use strict";rt.exports=function(C,t,e,f,r){return C.config=t,e&&(C.code=e),C.request=f,C.response=r,C.isAxiosError=!0,C.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},C}},7185:(rt,m,C)=>{"use strict";var t=C(4867);rt.exports=function(f,r){r=r||{};var o={};function a(u,d){return t.isPlainObject(u)&&t.isPlainObject(d)?t.merge(u,d):t.isPlainObject(d)?t.merge({},d):t.isArray(d)?d.slice():d}function s(u){if(t.isUndefined(r[u])){if(!t.isUndefined(f[u]))return a(void 0,f[u])}else return a(f[u],r[u])}function n(u){if(!t.isUndefined(r[u]))return a(void 0,r[u])}function l(u){if(t.isUndefined(r[u])){if(!t.isUndefined(f[u]))return a(void 0,f[u])}else return a(void 0,r[u])}function i(u){if(u in r)return a(f[u],r[u]);if(u in f)return a(void 0,f[u])}var h={url:n,method:n,data:n,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:i};return t.forEach(Object.keys(f).concat(Object.keys(r)),function(d){var c=h[d]||s,p=c(d);t.isUndefined(p)&&c!==i||(o[d]=p)}),o}},6026:(rt,m,C)=>{"use strict";var t=C(5061);rt.exports=function(f,r,o){var a=o.config.validateStatus;!o.status||!a||a(o.status)?f(o):r(t("Request failed with status code "+o.status,o.config,null,o.request,o))}},8527:(rt,m,C)=>{"use strict";var t=C(4867),e=C(5546);rt.exports=function(r,o,a){var s=this||e;return t.forEach(a,function(l){r=l.call(s,r,o)}),r}},5546:(rt,m,C)=>{"use strict";var t=C(4867),e=C(6016),f=C(481),r=C(7874),o={"Content-Type":"application/x-www-form-urlencoded"};function a(i,h){!t.isUndefined(i)&&t.isUndefined(i["Content-Type"])&&(i["Content-Type"]=h)}function s(){var i;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(i=C(5448)),i}function n(i,h,u){if(t.isString(i))try{return(h||JSON.parse)(i),t.trim(i)}catch(d){if(d.name!=="SyntaxError")throw d}return(u||JSON.stringify)(i)}var l={transitional:r,adapter:s(),transformRequest:[function(h,u){return e(u,"Accept"),e(u,"Content-Type"),t.isFormData(h)||t.isArrayBuffer(h)||t.isBuffer(h)||t.isStream(h)||t.isFile(h)||t.isBlob(h)?h:t.isArrayBufferView(h)?h.buffer:t.isURLSearchParams(h)?(a(u,"application/x-www-form-urlencoded;charset=utf-8"),h.toString()):t.isObject(h)||u&&u["Content-Type"]==="application/json"?(a(u,"application/json"),n(h)):h}],transformResponse:[function(h){var u=this.transitional||l.transitional,d=u&&u.silentJSONParsing,c=u&&u.forcedJSONParsing,p=!d&&this.responseType==="json";if(p||c&&t.isString(h)&&h.length)try{return JSON.parse(h)}catch(g){if(p)throw g.name==="SyntaxError"?f(g,this,"E_JSON_PARSE"):g}return h}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(h){return h>=200&&h<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};t.forEach(["delete","get","head"],function(h){l.headers[h]={}}),t.forEach(["post","put","patch"],function(h){l.headers[h]=t.merge(o)}),rt.exports=l},7874:rt=>{"use strict";rt.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:rt=>{rt.exports={version:"0.26.1"}},1849:rt=>{"use strict";rt.exports=function(C,t){return function(){for(var f=new Array(arguments.length),r=0;r<f.length;r++)f[r]=arguments[r];return C.apply(t,f)}}},5327:(rt,m,C)=>{"use strict";var t=C(4867);function e(f){return encodeURIComponent(f).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}rt.exports=function(r,o,a){if(!o)return r;var s;if(a)s=a(o);else if(t.isURLSearchParams(o))s=o.toString();else{var n=[];t.forEach(o,function(h,u){h===null||typeof h=="undefined"||(t.isArray(h)?u=u+"[]":h=[h],t.forEach(h,function(c){t.isDate(c)?c=c.toISOString():t.isObject(c)&&(c=JSON.stringify(c)),n.push(e(u)+"="+e(c))}))}),s=n.join("&")}if(s){var l=r.indexOf("#");l!==-1&&(r=r.slice(0,l)),r+=(r.indexOf("?")===-1?"?":"&")+s}return r}},7303:rt=>{"use strict";rt.exports=function(C,t){return t?C.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):C}},4372:(rt,m,C)=>{"use strict";var t=C(4867);rt.exports=t.isStandardBrowserEnv()?function(){return{write:function(r,o,a,s,n,l){var i=[];i.push(r+"="+encodeURIComponent(o)),t.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),t.isString(s)&&i.push("path="+s),t.isString(n)&&i.push("domain="+n),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read:function(r){var o=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:rt=>{"use strict";rt.exports=function(C){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(C)}},6268:(rt,m,C)=>{"use strict";var t=C(4867);rt.exports=function(f){return t.isObject(f)&&f.isAxiosError===!0}},7985:(rt,m,C)=>{"use strict";var t=C(4867);rt.exports=t.isStandardBrowserEnv()?function(){var f=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),o;function a(s){var n=s;return f&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return o=a(window.location.href),function(n){var l=t.isString(n)?a(n):n;return l.protocol===o.protocol&&l.host===o.host}}():function(){return function(){return!0}}()},6016:(rt,m,C)=>{"use strict";var t=C(4867);rt.exports=function(f,r){t.forEach(f,function(a,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(f[r]=a,delete f[s])})}},4109:(rt,m,C)=>{"use strict";var t=C(4867),e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];rt.exports=function(r){var o={},a,s,n;return r&&t.forEach(r.split(`
`),function(i){if(n=i.indexOf(":"),a=t.trim(i.substr(0,n)).toLowerCase(),s=t.trim(i.substr(n+1)),a){if(o[a]&&e.indexOf(a)>=0)return;a==="set-cookie"?o[a]=(o[a]?o[a]:[]).concat([s]):o[a]=o[a]?o[a]+", "+s:s}}),o}},8713:rt=>{"use strict";rt.exports=function(C){return function(e){return C.apply(null,e)}}},4875:(rt,m,C)=>{"use strict";var t=C(7288).version,e={};["object","boolean","number","function","string","symbol"].forEach(function(o,a){e[o]=function(n){return typeof n===o||"a"+(a<1?"n ":" ")+o}});var f={};e.transitional=function(a,s,n){function l(i,h){return"[Axios v"+t+"] Transitional option '"+i+"'"+h+(n?". "+n:"")}return function(i,h,u){if(a===!1)throw new Error(l(h," has been removed"+(s?" in "+s:"")));return s&&!f[h]&&(f[h]=!0,console.warn(l(h," has been deprecated since v"+s+" and will be removed in the near future"))),a?a(i,h,u):!0}};function r(o,a,s){if(typeof o!="object")throw new TypeError("options must be an object");for(var n=Object.keys(o),l=n.length;l-- >0;){var i=n[l],h=a[i];if(h){var u=o[i],d=u===void 0||h(u,i,o);if(d!==!0)throw new TypeError("option "+i+" must be "+d);continue}if(s!==!0)throw Error("Unknown option "+i)}}rt.exports={assertOptions:r,validators:e}},4867:(rt,m,C)=>{"use strict";var t=C(1849),e=Object.prototype.toString;function f(L){return Array.isArray(L)}function r(L){return typeof L=="undefined"}function o(L){return L!==null&&!r(L)&&L.constructor!==null&&!r(L.constructor)&&typeof L.constructor.isBuffer=="function"&&L.constructor.isBuffer(L)}function a(L){return e.call(L)==="[object ArrayBuffer]"}function s(L){return e.call(L)==="[object FormData]"}function n(L){var B;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?B=ArrayBuffer.isView(L):B=L&&L.buffer&&a(L.buffer),B}function l(L){return typeof L=="string"}function i(L){return typeof L=="number"}function h(L){return L!==null&&typeof L=="object"}function u(L){if(e.call(L)!=="[object Object]")return!1;var B=Object.getPrototypeOf(L);return B===null||B===Object.prototype}function d(L){return e.call(L)==="[object Date]"}function c(L){return e.call(L)==="[object File]"}function p(L){return e.call(L)==="[object Blob]"}function g(L){return e.call(L)==="[object Function]"}function x(L){return h(L)&&g(L.pipe)}function y(L){return e.call(L)==="[object URLSearchParams]"}function T(L){return L.trim?L.trim():L.replace(/^\s+|\s+$/g,"")}function E(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function w(L,B){if(!(L===null||typeof L=="undefined"))if(typeof L!="object"&&(L=[L]),f(L))for(var D=0,G=L.length;D<G;D++)B.call(null,L[D],D,L);else for(var X in L)Object.prototype.hasOwnProperty.call(L,X)&&B.call(null,L[X],X,L)}function A(){var L={};function B(X,H){u(L[H])&&u(X)?L[H]=A(L[H],X):u(X)?L[H]=A({},X):f(X)?L[H]=X.slice():L[H]=X}for(var D=0,G=arguments.length;D<G;D++)w(arguments[D],B);return L}function b(L,B,D){return w(B,function(X,H){D&&typeof X=="function"?L[H]=t(X,D):L[H]=X}),L}function R(L){return L.charCodeAt(0)===65279&&(L=L.slice(1)),L}rt.exports={isArray:f,isArrayBuffer:a,isBuffer:o,isFormData:s,isArrayBufferView:n,isString:l,isNumber:i,isObject:h,isPlainObject:u,isUndefined:r,isDate:d,isFile:c,isBlob:p,isFunction:g,isStream:x,isURLSearchParams:y,isStandardBrowserEnv:E,forEach:w,merge:A,extend:b,trim:T,stripBOM:R}},3010:rt=>{rt.exports=m;function m(C){C=C||{},this.ms=C.min||100,this.max=C.max||1e4,this.factor=C.factor||2,this.jitter=C.jitter>0&&C.jitter<=1?C.jitter:0,this.attempts=0}m.prototype.duration=function(){var C=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),e=Math.floor(t*this.jitter*C);C=(Math.floor(t*10)&1)==0?C-e:C+e}return Math.min(C,this.max)|0},m.prototype.reset=function(){this.attempts=0},m.prototype.setMin=function(C){this.ms=C},m.prototype.setMax=function(C){this.max=C},m.prototype.setJitter=function(C){this.jitter=C}},8767:rt=>{rt.exports=m;function m(t){if(t)return C(t)}function C(t){for(var e in m.prototype)t[e]=m.prototype[e];return t}m.prototype.on=m.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},m.prototype.once=function(t,e){function f(){this.off(t,f),e.apply(this,arguments)}return f.fn=e,this.on(t,f),this},m.prototype.off=m.prototype.removeListener=m.prototype.removeAllListeners=m.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var f=this._callbacks["$"+t];if(!f)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,o=0;o<f.length;o++)if(r=f[o],r===e||r.fn===e){f.splice(o,1);break}return f.length===0&&delete this._callbacks["$"+t],this},m.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),f=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(f){f=f.slice(0);for(var r=0,o=f.length;r<o;++r)f[r].apply(this,e)}return this},m.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},m.prototype.hasListeners=function(t){return!!this.listeners(t).length}},556:(rt,m,C)=>{"use strict";C.d(m,{I:()=>e,U:()=>t});const t={GAME_COOKIE:"gameCookie_",UPDATE_COINS:"shell:update_coins",ROOM_DESTROYED:"shell:room_destroyed",PLAYERS_STAMP_BOOK_CATEGORIES:"shell:players_stamp_book_categories",STAMP_BOOK_COVER_DETAILS:"shell:stamp_book_cover_details",PLAYERS_STAMPS:"shell:player_stamps",MY_RECENTLY_EARNED_STAMPS:"shell:my_recently_earned_stamps",GET_NINJA_RANKS:"shell:get_ninja_ranks",GET_CARDS:"shell:get_cards",GET_FIRE_LEVEL:"shell:get_fire_level",GET_WATER_LEVEL:"shell:get_water_level",GET_NINJA_LEVEL:"shell:get_ninja_level"},e={stampbook_category:"stampbook/category/",stampbook_colour:"stampbook/colour/",stampbook_pattern:"stampbook/pattern/",stampbook_highlight:"stampbook/highlight/",stampbook_clasp:"stampbook/clasp/",stampbook_stamps:"stampbook/stamps/",stampbook_wordmark:"stampbook/wordmark/",stampbook_polaroids:"stampbook/polaroids/",stampbook_colourThumb:"stampbook/colourThumb/",stampbook_categoryHeader:"stampbook/categoryHeader/",stampbook_highlightThumb:"stampbook/highlightThumb/",stampbook_claspThumb:"stampbook/claspThumb/",stampbook_patternThumb:"stampbook/patternThumb/",stampbook_insidePagesBackground:"stampbook/insidePagesBackground/",stampbook_claspHighlightThumb:"stampbook/claspHighlightThumb/",clothing_icons:"stampbook/clothing/icons/"}},2908:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>t});class t{constructor(f){this.network=f,this.game=f.game,this.scene=this.game.scene}get crumbs(){return this.game.crumbs}get interface(){return this.scene.getScene("InterfaceController")}get world(){return this.scene.getScene("WorldController")}get flash(){return this.scene.getScene("FlashController")}getString(...f){return this.world.getString(...f)}getFormatString(f,...r){return this.world.getFormatString(f,...r)}}},1875:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={send_position:this.sendPosition,send_frame:this.sendFrame,snowball:this.snowball}}get room(){return this.world.room}sendPosition(r){if(!this.room.isReady)return this.room.updateWaiting(r.id,{x:r.x,y:r.y,frame:1});this.room.penguins[r.id].move(r.x,r.y)}sendFrame(r){if(!this.room.isReady)return this.room.updateWaiting(r.id,{frame:r.set?r.frame:1});let o=this.room.penguins[r.id],a=()=>o.playFrame(r.frame,r.set);if(o.isTweening)return o.afterMove=a;a()}snowball(r){if(!this.room.isReady)return;let o=this.room.penguins[r.id],a=()=>this.interface.main.snowballFactory.throwBall(r.id,r.x,r.y);if(o.isTweening)return o.afterMove=a;a()}}},27:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={airtower_response:this.airtowerResponse}}get player(){return this.flash.player}airtowerResponse(r){this.player["airtower.onAirtowerResponse"]([r.action,r.res])}}},7446:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>a});var t=C(2908),e=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(s,n)=>{var l={};for(var i in s)f.call(s,i)&&n.indexOf(i)<0&&(l[i]=s[i]);if(s!=null&&e)for(var i of e(s))n.indexOf(i)<0&&r.call(s,i)&&(l[i]=s[i]);return l};class a extends t.Z{constructor(n){super(n),this.events={buddy_add:this.buddyAdd,buddy_request:this.buddyRequest,buddy_accept:this.buddyAccept,buddy_remove:this.buddyRemove,buddy_find:this.buddyFind,buddy_online:this.buddyOnline,buddy_offline:this.buddyOffline}}buddyAdd(n){this.world.client.buddies.push(n.buddy),this.interface.main.scene.isActive()&&this.interface.updateBuddies()}buddyRequest(n){this.interface.main.addRequest(n)}buddyAccept(n){n.requester&&this.interface.main.addRequest(n);let l=n,{requester:i}=l,h=o(l,["requester"]);this.world.client.buddies.push(h),this.interface.updateBuddies(),this.interface.main.showOnlinePopup(h.username)}buddyRemove(n){this.world.client.buddies=this.world.client.buddies.filter(l=>l.id!=n.id),this.interface.updateBuddies()}buddyFind(n){let l=this.interface.main.playerCard.username.text,i=this.interface.main.playerCard.id,h=this.getRoomName(n,i);this.interface.prompt.showWindow(`${l} ${this.getString(`${h}_find`)}`,"single")}buddyOnline(n){let l=this.world.client.buddies.find(i=>i.id==n.id);!l||(l.online=!0,this.interface.main.scene.isActive()&&(this.interface.updateBuddies(),this.interface.main.showOnlinePopup(l.username)))}buddyOffline(n){let l=this.world.client.buddies.find(i=>i.id==n.id);l&&(l.online=!1,this.interface.updateBuddies())}getRoomName(n,l){if(!n.igloo&&!n.game)return this.crumbs.scenes.rooms[n.find].key;if(n.game)return this.crumbs.games[n.find].key;let i=n.find-this.crumbs.iglooIdOffset;return i==l?"igloo_theirs":i==this.world.client.id?"igloo_yours":"igloo"}}},1252:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={send_message:this.sendMessage,send_safe:this.sendSafe,send_emote:this.sendEmote}}sendMessage(r){this.world.room.isReady&&!this.world.client.ignores.includes(r.id)&&this.interface.showTextBalloon(r.id,r.message)}sendSafe(r){if(this.world.room.isReady&&!this.world.client.ignores.includes(r.id)){const o=this.interface.main.safe.safeMessagesMap[r.safe];o&&this.interface.showTextBalloon(r.id,o)}}sendEmote(r){this.world.room.isReady&&!this.world.client.ignores.includes(r.id)&&this.interface.showEmoteBalloon(r.id,r.emote)}}},2151:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={error:this.error,info:this.info,kick:this.kick},this.customErrorHandlers={"Sorry this room is currently full":()=>this.fullRoom()},this.customInfoHandlers={"Email changed successfully!\nPlease check your inbox to verify and enable chat.":()=>this.emailChanged()}}error(r){if(r.error in this.customErrorHandlers)return this.customErrorHandlers[r.error]();this.interface.prompt.showError(r.error)}info(r){if(r.message in this.customInfoHandlers)return this.customInfoHandlers[r.message]();this.interface.prompt.showWindow(r.message)}kick(r){this.network.kickMessage=r.reason}fullRoom(){this.interface.prompt.showError("Sorry this room is currently full","Okay",()=>{this.interface.showInterface(),this.interface.prompt.error.visible=!1,this.interface.main.map.visible=!0})}emailChanged(){this.world.client.penguin.emailVerified=!1,this.interface.main.showChatbox(!1),this.interface.main.manage.setVerificationState(),this.interface.prompt.showWindow(`Email changed successfully!
Please check your inbox to verify and enable chat.`,"single",()=>{this.interface.prompt.window.visible=!1})}}},8165:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={get_player:this.getPlayer}}getPlayer(r){this.interface.main.playerCard._showCard(r.penguin)}}},608:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={add_igloo:this.addIgloo,add_furniture:this.addFurniture,update_flooring:this.updateFlooring,update_music:this.updateMusic,get_igloos:this.getIgloos,get_igloo_open:this.getIglooOpen}}get client(){return this.world.client}addIgloo(r){var o;let a=this.client.igloos;this.client.coins=r.coins,a.push(r.igloo),a.sort((n,l)=>n-l),this.interface.refreshPlayerCard(),(o=this.interface.iglooEdit.gridView)!=null&&o.visible&&this.interface.iglooEdit.showGridView(),this.world.events.emit("COINS_CHANGED",r.coins);let s=`${this.crumbs.igloos[r.igloo].name}
has been added to your inventory.`;this.interface.prompt.showWindow(s,"single",()=>{this.interface.prompt.window.visible=!1,this.flash.bookBridge.handleItemAdded()})}addFurniture(r){var o;let a=this.client.furniture;this.client.coins=r.coins,a[r.furniture]=a[r.furniture]+1||1,this.interface.refreshPlayerCard(),(o=this.interface.iglooEdit.gridView)!=null&&o.visible&&this.interface.iglooEdit.showGridView(),this.world.events.emit("COINS_CHANGED",r.coins);let s=`${this.crumbs.furniture[r.furniture].name}
has been added to your inventory.`;this.interface.prompt.showWindow(s,"single",()=>{this.interface.prompt.window.visible=!1,this.flash.bookBridge.handleItemAdded()})}updateFlooring(r){!this.world.room.isIgloo||(this.world.room.updateFlooring(r.flooring),this.client.coins=r.coins,this.interface.refreshPlayerCard())}updateMusic(r){!this.world.room.isIgloo||this.world.room.updateMusic(r.music)}getIgloos(r){this.interface.main.map.iglooMap.setIgloos(r.igloos)}getIglooOpen(r){r.open&&this.interface.main.playerCard.buttons.enableButton("igloo")}}},7389:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={ignore_add:this.ignoreAdd,ignore_remove:this.ignoreRemove}}ignoreAdd(r){this.world.client.ignores.push(r),this.interface.updateBuddies()}ignoreRemove(r){this.world.client.ignores=this.world.client.ignores.filter(o=>o.id!=r.id),this.interface.updateBuddies()}}},6703:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={update_player:this.updatePlayer,add_item:this.addItem}}get client(){return this.world.client}updatePlayer(r){if(!this.world.room.isReady)return this.world.room.updateWaiting(r.id,{[r.slot]:r.item});this.world.room.penguins[r.id].update(r.item,r.slot)}addItem(r){if(this.client.inventory[r.slot].includes(r.item))return;this.client.coins=r.coins,this.client.inventory[r.slot].push(r.item),this.client.inventory[r.slot].sort((a,s)=>a-s),this.interface.refreshPlayerCard(),this.world.events.emit("COINS_CHANGED",r.coins);let o=`${r.name}
has been added to your inventory.`;this.interface.prompt.showWindow(o,"single",()=>{this.interface.prompt.window.visible=!1,this.flash.bookBridge.handleItemAdded()})}}},4150:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>a});var t=C(2908),e=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(s,n)=>{var l={};for(var i in s)f.call(s,i)&&n.indexOf(i)<0&&(l[i]=s[i]);if(s!=null&&e)for(var i of e(s))n.indexOf(i)<0&&r.call(s,i)&&(l[i]=s[i]);return l};class a extends t.Z{constructor(n){super(n),this.events={load_player:this.loadPlayer,join_room:this.joinRoom,join_igloo:this.joinIgloo,join_game:this.joinGame,add_player:this.addPlayer,remove_player:this.removePlayer}}loadPlayer(n){this.network.saveUsername?this.savePlayer(n):this.unsavePlayer(n),this.scene.start("WorldController"),this.world.setClient(n),this.network.send("join_server")}joinRoom(n){this.interface.showLoading(this.getString("loading",this.crumbs.scenes.rooms[n.room].key)),this.world.joinRoom(n)}joinIgloo(n){this.interface.showLoading(this.getString("loading","igloo")),this.world.joinRoom(n)}joinGame(n){this.interface.showLoading(this.getString("loading",this.crumbs.games[n.game].key)),this.world.joinRoom(n)}addPlayer(n){this.world.addPenguin(n.user)}removePlayer(n){this.world.removePenguin(n.user)}savePlayer(n){let l=this.network.savedPenguins;if(Object.keys(l).length>6&&!(n.user.realUsername in l))return;let i=n.user,{photo:h,flag:u,x:d,y:c,frame:p,coins:g,id:x}=i,y=o(i,["photo","flag","x","y","frame","coins","id"]);this.network.token&&(y.token=this.network.token),l[n.user.realUsername.toLowerCase()]=y,localStorage.setItem("saved_penguins",JSON.stringify(l))}unsavePlayer(n){let l=this.network.savedPenguins;n.user.realUsername.toLowerCase()in l&&(delete l[n.user.realUsername.toLowerCase()],localStorage.setItem("saved_penguins",JSON.stringify(l)))}}},7752:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={game_auth:this.gameAuth,auth_token:this.authToken}}gameAuth(r){r.success&&this.network.send("load_player")}authToken(r){r.token&&(this.network.token=r.token)}}},3462:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={start_game:this.startGame,send_move:this.sendMove,game_over:this.gameOver}}startGame(r){this.world.room.handleStartGame(r)}sendMove(r){this.world.room.handleSendMove(r)}gameOver(r){this.interface.prompt.showCoin(r.earned),this.world.client.coins=r.coins,this.interface.refreshPlayerCard(),this.world.events.emit("COINS_CHANGED",r.coins)}}},1369:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>f});var t=C(556),e=C(2908);class f extends e.Z{constructor(o){super(o),this.events={ninja_ranks:this.ninjaRanks,ninja_level:this.ninjaLevel,ninja_cards:this.ninjaCards}}get player(){return this.flash.player}ninjaRanks(o){this.player["shell.onShellEvent"]([t.U.GET_NINJA_RANKS,{playerId:o.playerId,cardJitsuRank:o.ninjaRank,firePathRank:o.fireRank,waterPathRank:o.WaterRank}])}ninjaLevel(o){this.player["shell.onShellEvent"]([t.U.GET_NINJA_LEVEL,{currentNinjaLevel:o.currLevel,percentageToNextLevel:o.nextLevel}])}ninjaCards(o){this.player["shell.onShellEvent"]([t.U.GET_CARDS,{cards:o.cards}])}}},9442:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={set_stamps:this.setStamps,stamp_earned:this.stampEarned,stampbook_categories:this.stampbookCategories,stampbook_cover:this.stampbookCover,stampbook_players_stamps:this.playerStamps,stampbook_players_awards:this.playerAwards,stampbook_recently_earned:this.recentlyEarned}}get client(){return this.world.client}get player(){return this.flash.player}setStamps(r){this.client.stamps=r.stamps}stampEarned(r){this.world.client.stamps.includes(r.id)||(this.world.client.stamps.push(r.id),this.player.showStamp(r.name,r.category,r.difficulty))}stampbookCategories(r){this.player["stampManager.pinsService"]("stamp:query_players_pins",r.res)}stampbookCover(r){this.player["stampManager.stampsService"]("stamp:get_stamp_book_cover_details",r.res)}playerStamps(r){this.player["stampManager.stampsService"]("stamp:get_players_stamps",r.res)}playerAwards(r){this.player["stampManager.awardsService"]("stamp:query_players_awards",r.res)}recentlyEarned(r){this.player["stampManager.stampsService"]("stamp:get_my_recently_earned_stamps",r.res)}}},2062:(rt,m,C)=>{"use strict";C.r(m),C.d(m,{default:()=>e});var t=C(2908);class e extends t.Z{constructor(r){super(r),this.events={get_waddles:this.getWaddles,join_waddle:this.joinWaddle,update_waddle:this.updateWaddle}}getWaddles(r){this.world.room.setWaddles(r.waddles)}joinWaddle(r){const o=this.crumbs.games[r.room];o?this.world.flash.playGame(o):console.log(`Missing crumb for game: ${r.name}`)}updateWaddle(r){this.world.room.isReady&&this.interface.main.waddle.updateWaddle(r.waddle,r.seat,r.username)}}},1288:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>t});class t extends Phaser.GameObjects.Container{get crumbs(){return this.scene.crumbs}get network(){return this.scene.network}get interface(){return this.scene.interface}get world(){return this.scene.world}get flash(){return this.scene.flash}getString(...f){return this.scene.getString(...f)}getFormatString(f,...r){return this.scene.getFormatString(f,...r)}}},8018:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>t});class t extends Phaser.Scene{get crumbs(){return this.game.crumbs}get network(){return this.game.network}get interface(){return this.scene.get("InterfaceController")}get world(){return this.scene.get("WorldController")}get flash(){return this.scene.get("FlashController")}getString(...f){return f.map(r=>this.crumbs.strings[r.toLowerCase()]).join(" ")}getFormatString(f,...r){return Phaser.Utils.String.Format(this.crumbs.strings[f.toLowerCase()],r)}}},1215:(rt,m,C)=>{"use strict";C.d(m,{fw:()=>o,zx:()=>s,K$:()=>n,vj:()=>l,$X:()=>i,X7:()=>h,lO:()=>c,tk:()=>u,rF:()=>a,ld:()=>d});class t{constructor(g){this.gameObject,this.gameObject=g,g.__EventComponent=this,this.scene=g.scene,this.scene.events.once("create",this.start,this),this.scene.events.on("update",this.update,this),g.on("destroy",this.destroy,this)}static getComponent(g){return g.__EventComponent}start(){}update(){}destroy(){this.scene.events.off("create",this.start,this),this.scene.events.off("update",this.update,this)}}const e=Phaser.Utils.Objects.GetValue,f=Phaser.Utils.Array.NumberArray,r=Phaser.Utils.String.Pad;class o extends t{constructor(g){super(g),this.gameObject,this.key="",this.start=1,this.end=1,this.frameRate=24,this.repeat=-1,this.repeatDelay=0,this.autoPlay=!0,this.onHover=!1,this.stopOnOut=!0,this.showOnStart=!1,this.hideOnComplete=!1,this.gameObject=g,g.__Animation=this,this.scene=g.scene,this.atlas=g.texture.key,this.initialFrame=g.frame.name,this.animation}static getComponent(g){return g.__Animation}start(){this.animation=this.createAnim(),this.onHover?(this.gameObject.on("pointerover",()=>this.onOver()),this.gameObject.on("pointerout",()=>this.onOut())):this.autoPlay&&this.play()}onOver(){this.play()}onOut(){this.stopOnOut&&this.stop()}play(){this.gameObject.play(this.animation)}stop(){this.gameObject.anims.stop(),this.hideOnComplete?this.gameObject.visible=!1:this.stopOnOut&&this.gameObject.setFrame(this.initialFrame)}createAnim(){let g=`${this.atlas}/${this.key}`;return this.scene.anims.exists(g)?this.scene.anims.get(g):this.scene.anims.create({key:g,frames:this.generateFrameNames(this.atlas,{prefix:`${this.key}`,start:this.start,end:this.end,zeroPad:4}),frameRate:this.frameRate,repeat:this.repeat,repeatDelay:this.repeatDelay,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete})}generateFrameNames(g,x){let y=e(x,"prefix",""),T=e(x,"start",0),E=e(x,"end",0),w=e(x,"suffix",""),A=e(x,"zeroPad",0),b=e(x,"outputArray",[]),R=e(x,"frames",!1),L=this.scene.anims.textureManager.get(g);if(!L)return b;R||(R=f(T,E));for(let B=0;B<R.length;B++){let D=y+r(R[B],A,"0",1)+w;L.has(D)?b.push({key:g,frame:D}):b.push({key:"__DEFAULT",frame:"__BASE"})}return b}}class a extends t{constructor(g){super(g),this.gameObject,this.hoverCallback=null,this.hoverOutCallback=null,this.callback=()=>{},this.pixelPerfect=!1,this.gameObject=g,g.__SimpleButton=this,g.isButton=!0}static getComponent(g){return g.__SimpleButton}start(){this.gameObject.setInteractive({cursor:"pointer",pixelPerfect:this.pixelPerfect}),this.gameObject.on("pointerover",()=>this.onOver()),this.gameObject.on("pointerout",()=>this.onOut()),this.gameObject.on("pointerup",g=>this.onUp(g))}onOver(){this.hoverCallback&&this.hoverCallback()}onOut(){this.hoverOutCallback&&this.hoverOutCallback()}onUp(g){g.button==0&&this.callback()}}class s extends a{constructor(g){super(g),this.gameObject,this.spriteName="",this.hoverCallback=null,this.hoverOutCallback=null,this.callback=()=>{},this.activeFrame=!0,this.pixelPerfect=!1,this.gameObject=g,g.__Button=this}static getComponent(g){return g.__Button}start(){super.start(),this.gameObject.on("pointerdown",g=>this.onDown(g))}onOver(){this.gameObject.setFrame(`${this.spriteName}-hover`),super.onOver()}onOut(){this.gameObject.setFrame(this.spriteName),super.onOut()}onDown(g){g.button==0&&(this.activeFrame?this.gameObject.setFrame(`${this.spriteName}-active`):this.gameObject.setFrame(`${this.spriteName}-hover`))}onUp(g){g.button==0&&(this.activeFrame?this.gameObject.setFrame(this.spriteName):this.gameObject.setFrame(`${this.spriteName}-hover`),super.onUp(g))}}class n extends t{constructor(g){super(g),this.gameObject,this.handle,this.depth=0,this.gameObject=g,g.__DraggableContainer=this,this.offsetX=0,this.offsetY=0,this.widgetLayer}static getComponent(g){return g.__DraggableContainer}start(){let g=this.scene.add.zone(this.handle.x,this.handle.y,this.handle.width,this.handle.height);this.gameObject.addAt(g,this.depth),g.setInteractive({draggable:!0}),g.on("pointerdown",x=>this.onDown(x)),g.on("dragstart",x=>this.onDragStart(x)),g.on("drag",x=>this.onDrag(x))}onDown(g){this.widgetLayer&&g.button==0&&this.widgetLayer.bringToTop(this.gameObject)}onDragStart(g){this.offsetX=this.gameObject.x-g.x,this.offsetY=this.gameObject.y-g.y}onDrag(g){this.gameObject.x=Math.round(g.x+this.offsetX),this.gameObject.y=Math.round(g.y+this.offsetY)}}class l{constructor(g){this.gameObject,this.gameObject=g,g.__Interactive=this,this.gameObject.setInteractive()}static getComponent(g){return g.__Interactive}}class i{constructor(g){this.gameObject,this.x=0,this.y=0,this.gameObject=g,g.__MoveTo=this,this.x=this.x?this.x:g.x,this.y=this.y?this.y:g.y,this.gameObject.on("pointerup",x=>this.onPointerUp(x))}static getComponent(g){return g.__MoveTo}onPointerUp(g){g.button==0&&this.gameObject.scene.world.client.penguin.move(this.x,this.y)}}class h extends t{constructor(g){super(g),this.gameObject,this.texture={key:"prompt",frame:"window"},this.corner=10,this.gameObject=g,g.__NineSlice=this}static getComponent(g){return g.__NineSlice}start(){if(this.gameObject.visible==!1)return;let g=this.scene.add.nineslice(this.gameObject.x,this.gameObject.y,this.gameObject.width,this.gameObject.height,this.texture,this.corner);if(g.setOrigin(this.gameObject.originX,this.gameObject.originY),this.gameObject.parentContainer){let x=this.gameObject.parentContainer,y=x.getIndex(this.gameObject);x.addAt(g,y)}this.gameObject.visible=!1}}class u{constructor(g){this.gameObject,this.text="",this.gameObject=g,g.__ShowHint=this,this.gameObject.on("pointerover",()=>this.onOver()),this.gameObject.on("pointerout",()=>this.onOut()),this.gameObject.on("pointerup",()=>this.onOut())}static getComponent(g){return g.__ShowHint}get hint(){return this.gameObject.scene.interface.main.hint}onOver(){!this.text||this.hint.showHint(this.gameObject,this.gameObject.scene.getString(this.text)||this.text)}onOut(){this.hint.hideHint()}}class d extends a{constructor(g){super(g),this.gameObject,this.hoverCallback=null,this.hoverOutCallback=null,this.callback=()=>{},this.gameObject=g,g.__Zone=this}static getComponent(g){return g.__Zone}start(){this.gameObject.visible=!1;let g=this.scene.add.zone(this.gameObject.x,this.gameObject.y,this.gameObject.width,this.gameObject.height);g.isButton=!0,g.angle=this.gameObject.angle,g.setInteractive({cursor:"pointer"}),g.on("pointerover",()=>this.onOver()),g.on("pointerout",()=>this.onOut()),g.on("pointerup",x=>this.onUp(x))}}class c extends t{constructor(g){super(g),this.gameObject,this.id=0,this.gameObject=g,g.__Pin=this,this.gameObject.visible=!1,this.load=new Phaser.Loader.LoaderPlugin(g.scene),this.load.on("filecomplete",this.onFileComplete,this)}static getComponent(g){return g.__Pin}start(){if(!this.id)return;const g=`icon/${this.id}`;if(this.gameObject.scene.textures.exists(g))return this.onFileComplete(g);this.load.image({key:g,url:`assets/media/clothing/icon/${this.id}.png`}),this.load.start()}onFileComplete(g){if(!this.gameObject.scene.textures.exists(g))return;const x=this.gameObject.scene.add.image(this.gameObject.x,this.gameObject.y,g);x.setScale(.5),x.setInteractive({useHandCursor:!0,pixelPerfect:!0}),this.gameObject.on("pointerup",y=>this.onPointerUp(y))}onPointerUp(g){g.button===0&&this.gameObject.scene.world.client.penguin.move(this.gameObject.x,this.gameObject.y)}}},9555:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>g});var t=C(8018);class e extends t.Z{constructor(y){super(y),this.key=y}get client(){return this.world.client}getColor(y){return this.world.getColor(y)}init(y){this.id=y.id}create(){this._create(),this.sound.pauseOnBlur=!1,this.music&&this.addMusic(),this.interface.hideLoading()}addMusic(){this.sound.play(this.music,{loop:!0})}stop(){this.sound.stopAll(),this.scene.stop()}}var f=C(1288);class r extends f.Z{constructor(y,T,E){super(y,T,E);const w=y.add.image(-2.799923880965366,-13.713563346765511,"sled","player/shadow");this.add(w);const A=y.add.container(-2.799923880965366,-13.713563346765511);this.add(A);const b=y.add.sprite(0,0,"sled","player/tube/1/sled");b.visible=!1,A.add(b);const R=y.add.sprite(0,0,"sled","player/tube/1/body");A.add(R);const L=y.add.sprite(0,0,"sled","player/tube/1/penguin");A.add(L);const B=y.add.text(3,-50,"",{});B.setOrigin(.5,1),B.text="Username",B.setStyle({align:"center",color:"#000000ff",fixedWidth:200,fontFamily:"Arial",fontSize:"24px"}),A.add(B),this.shadow=w,this.art=A,this.sled=b,this.body=R,this.penguin=L,this.username=B,this.fixedX=0,this.fixedY=0,this.currentX=0,this.id,this.isClient=!1,this.sledType,this.isTube=!1,this.scene=y,this.speed=0,this.turnSpeed=40,this.boostSpeed=60,this.maxSpeed=20,this.isJumping=!1,this.isCrashed=!1,this.isFinished=!1,this.isStopped=!1,this.lastX=0,this.height=0,this.jumpDropOff=0,this.targetDelta=16.666666666666668,this.gravity=2/this.targetDelta,this.jumpGravity=1/this.targetDelta,this.decay=.98,this.crashDecay=.96,this.finishDecay=.75,this.shadowDefaultY=this.shadow.y,this.map}get isWaiting(){return this.scene.isWaiting}get myMap(){return this.scene.myMap}get mapX(){return Math.round(this.fixedX/40)}get mapY(){return Math.min(Math.round(this.fixedY/40),this.myMap.length-1)}get percentComplete(){return this.mapY/this.myMap.length}get delta(){return this.scene.delta}setSled(y,T,E){switch(T){case 5021:this.sledType="toboggan";break;case 5046:this.sledType="green";break;case 5047:this.sledType="pink";break;default:this.sledType="tube",this.isTube=!0,this.sled.visible=!0;break}this.setFrame(1),this.username.text=y,this.body.tint=this.scene.getColor(E)}update(){!this.isWaiting&&!this.isStopped&&(this.updateSpeed(),this.updatePosition(),this.checkMap(),this.move())}updateSpeed(){this.isFinished?this.updateFinishDecay():this.isCrashed?this.updateCrashDecay():this.speed<this.maxSpeed?this.speed=Math.min(this.speed+this.gravity*this.delta,this.maxSpeed):this.speed>this.maxSpeed?this.speed=Math.max(this.speed*this.getDecay(this.decay),this.maxSpeed):this.speed=this.maxSpeed}getDecay(y){let T=this.targetDelta/y;return Math.pow(y,this.delta/T)}updateFinishDecay(){this.speed=this.speed*this.getDecay(this.finishDecay),this.speed<1&&(this.isStopped=!0,this.sendGameOver())}updateCrashDecay(){this.speed=this.speed*this.getDecay(this.crashDecay),this.speed<1&&this.endCrash()}updatePosition(){let y=this.delta/20*this.speed;this.fixedY=Math.round(this.fixedY+y);let T=this.myMap[this.mapY][this.mapX];this.map=T<0?T*10:T*20}checkMap(){let y=this.map;if(y<=180)return this.checkJump(y);y==200?this.isFinished=!0:y==220&&!this.isCrashed?this.startCrash():y==240&&(this.speed=this.boostSpeed)}checkJump(y){this.height>y?this.startJump():this.endJump()}startCrash(){this.speed=this.maxSpeed,this.isCrashed=!0,this.playCrash()}endCrash(){this.speed=0,this.isCrashed=!1,this.setFrame(1),this.isTube||(this.sled.visible=!1)}startJump(){this.isJumping=!0,this.jumpDropOff+=this.jumpGravity*this.delta,this.height-=this.jumpDropOff}endJump(){this.isJumping=!1,this.jumpDropOff=0,this.height=this.map}move(){!this.isWaiting&&!this.isCrashed&&this.updateFrame(),this.lastX=this.fixedX,this.x=this.fixedY+this.fixedX,this.y=this.fixedY*.6-this.fixedX*.6-this.height,this.shadow.y=this.isCrashed?this.shadowDefaultY:this.height,this.depth=this.mapX*10+1+1e3,this.icon.x=this.percentComplete*this.scene.bar.width}updateFrame(){this.fixedX<this.lastX?this.playLeft():this.fixedX>this.lastX?this.playRight():this.isJumping?this.setFrame(4):this.setFrame(1)}setFrame(y){this.isTube&&this.sled.setFrame(`player/tube/${y}/sled`),this.body.setFrame(`player/${this.sledType}/${y}/body`),this.penguin.setFrame(`player/${this.sledType}/${y}/penguin`)}playLeft(){if(this.isTube)return this.setFrame(3);this.body.anims.play(`${this.sledType}_left_body`),this.penguin.anims.play(`${this.sledType}_left_penguin`)}playRight(){if(this.isTube)return this.setFrame(2);this.body.anims.play(`${this.sledType}_right_body`),this.penguin.anims.play(`${this.sledType}_right_penguin`)}playCrash(){this.body.anims.play(`${this.sledType}_crash_body`),this.penguin.anims.play(`${this.sledType}_crash_penguin`),this.sled.visible=!0,this.sled.anims.play(`${this.sledType}_crash_sled`)}moveUp(){!this.isCrashed&&!this.isFinished&&(this.fixedX=Math.min(this.fixedX+this.turnSpeed,360),this.sendMove())}moveDown(){!this.isCrashed&&!this.isFinished&&(this.fixedX=Math.max(this.fixedX-this.turnSpeed,0),this.sendMove())}sendMove(){this.isClient&&this.fixedX!=this.currentX&&(this.currentX=this.fixedX,this.network.send("send_move",{id:this.id,x:this.fixedX,y:this.fixedY,time:this.scene.gameTime}))}sendGameOver(){this.isClient&&this.network.send("game_over",{score:this.scene.finishPos}),this.scene.finishPos++}}const o=r;var a=Object.defineProperty,s=Object.defineProperties,n=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,u=(x,y,T)=>y in x?a(x,y,{enumerable:!0,configurable:!0,writable:!0,value:T}):x[y]=T,d=(x,y)=>{for(var T in y||(y={}))i.call(y,T)&&u(x,T,y[T]);if(l)for(var T of l(y))h.call(y,T)&&u(x,T,y[T]);return x},c=(x,y)=>s(x,n(y));class p extends e{constructor(){super("Sled"),this.bg,this.hill,this.progress,this.bar,this.text,this.spinner,this.note}preload(){this.load.pack("sled-pack","assets/media/games/sled/sled-pack.json")}_create(){this.add.image(0,0,"sled","sky").setOrigin(0,0);const T=this.add.container(0,101),E=this.add.image(4142,0,"sled","bg_3");E.setOrigin(0,0),T.add(E);const w=this.add.image(2071,0,"sled","bg_2");w.setOrigin(0,0),T.add(w);const A=this.add.image(0,0,"sled","bg_1");A.setOrigin(0,0),T.add(A),this.add.image(0,240,"sled","fg").setOrigin(0,0);const R=this.add.container(200,400),L=this.add.container(762.3364439073046,50),B=this.add.image(303.66355609269544,0,"sled","progress/bar");L.add(B);const D=this.add.image(760,600,"sled","text/waiting");D.setOrigin(.5,.5046728971962616);const G=this.add.image(760,685,"sled","spinner");G.setOrigin(.5076923076923077,.5);const X=this.add.image(1253,783,"sled","note");X.setOrigin(.5,.4050179211469534),this.bg=T,this.hill=R,this.progress=L,this.bar=B,this.text=D,this.spinner=G,this.note=X}create(){super.create(),this.music=117,this.isWaiting=!0,this.players=[],this.maxPlayers=0,this.myPlayer=null,this.finishPos=0,this.startX=400,this.lastTime=0,this.startTime=0,this.gameTime=0,this.delta,this.currentTile=0,this.lastTileY=0,this.isGameHidden=!1,this.anims.fromJSON(this.cache.json.get("sled-anims")),this.myHill=this.cache.json.get("sledmap").hills["105"],this.myMap=this.createMap(),this.input.keyboard.on("keydown-UP",()=>this.onMoveUp()),this.input.keyboard.on("keydown-RIGHT",()=>this.onMoveUp()),this.input.keyboard.on("keydown-DOWN",()=>this.onMoveDown()),this.input.keyboard.on("keydown-LEFT",()=>this.onMoveDown()),this.spinnerTween=this.tweens.add({targets:this.spinner,angle:{from:0,to:180},duration:900,repeat:-1,ease:"Cubic"}),this.startGame()}createMap(){let y=this.cache.json.get("map").tiles;return this.myHill.map(T=>y[T]).flat()}onMoveUp(){this.myPlayer&&this.myPlayer.moveUp()}onMoveDown(){this.myPlayer&&this.myPlayer.moveDown()}update(y,T){let E=Date.now();this.gameTime=E-this.startTime,this.delta=T,this.players.map(w=>w.update()),this.myPlayer&&this.updateHill(),this.sortHill(),this.lastTime=E}updateHill(){this.hill.x=200-this.myPlayer.fixedY,this.hill.y=400-this.myPlayer.fixedY*.6,this.bg.x=-this.myPlayer.fixedY/25;let y=Math.round(this.myPlayer.fixedY/400);this.lastTileY<y&&(this.lastTileY=y,this.addTile(),this.removeTile())}startGame(){this.startTime=Date.now(),this.lastTime=this.startTime;for(let y=0;y<4;y++)this.addTile();this.network.send("start_game")}addTile(){let y=this.currentTile;this.currentTile++;let T=this.myHill[y];if(T==null)return;let E=y*400,w=y*400*.6;this.addTileSprite(y,T,E,w),T==99&&this.addFinish(y,E,w)}addFinish(y,T,E){this.addTileSprite(y,100,T,E);let w=this.add.sprite(T,E,"sled","clap/clap0001");this.hill.add(w),w.depth=y+1,w.play("clap")}addTileSprite(y,T,E,w){let A=this.add.image(E,w,"sled",`tiles/${T}`);this.hill.add(A);let b=T==100?2e3:1;return A.depth=y+b,A}removeTile(){let y=this.hill.list.filter(T=>T.constructor.name!="SledPlayer");y.length>8&&this.hill.remove(y[0],!0)}sortHill(){this.hill.sort("depth")}addPlayer(y,T){let E=new o(this,-500,0);E.id=T,E.fixedX=this.startX-=80,E.icon=this.add.image(0,0,"sled","progress/icon_1"),E.setSled(y.username,y.hand,y.color),this.hill.add(E),this.progress.add(E.icon),this.players.push(E),E.move(),y.username.toLowerCase()==this.client.penguin.username.toLowerCase()&&(E.icon.setTexture("sled","progress/icon_2"),this.myPlayer=E,E.isClient=!0)}playText(){this.hideWaiting();let y={scale:{from:.45,to:1}},T={scale:{from:1,to:.45},delay:600};this.tweens.timeline({targets:this.text,duration:100,ease:Phaser.Math.Easing.Back.InOut,onComplete:()=>this.onTextComplete(),tweens:[c(d({},y),{onStart:()=>this.text.setTexture("sled","text/ready")}),T,c(d({},y),{onStart:()=>this.text.setTexture("sled","text/set")}),T,c(d({},y),{onStart:()=>this.text.setTexture("sled","text/go")}),T]})}hideWaiting(){this.spinnerTween.remove(),this.spinner.visible=!1,this.tweens.add({targets:this.note,scale:{from:1,to:.45},duration:100,ease:Phaser.Math.Easing.Back.InOut,onComplete:()=>this.note.visible=!1})}onTextComplete(){this.text.visible=!1,this.isWaiting=!1}handleStartGame(y){this.maxPlayers=y.seats,y.users.map((T,E)=>this.addPlayer(T,E)),this.myPlayer&&this.progress.bringToTop(this.myPlayer.icon),this.playText()}handleSendMove(y){let T=this.players[y.id];T&&(T.fixedX=y.x,T.fixedY=y.y)}}const g=p},3500:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>n});var t=C(4267);class e extends Phaser.GameObjects.Sprite{constructor(i,h,u,d,c,p,g){super(i,u,d,c,"1_1_1"),this.id=parseInt(c.split("/")[1]),this.frames=this.texture.getFrameNames(),this.visible=!h,this.crumb=i.crumbs.furniture[c.split("/")[1]],this.isWall=this.crumb.type==2,this.trashIcon,this.trashed=!1,this.safeArea=this.isWall?i.wall:i.room,this.validatePos(),this.depth=this.y-1,this.safeX=this.x,this.safeY=this.y,this.offsetX=0,this.offsetY=0,this.maxFrames=[this.getFrameCount(0),this.getFrameCount(1)],this.crumb.fps&&(this._anims=this.getAnims(),this.setAnim(this.frame.name)),this.isWall&&h&&this.maxFrames[0]>1?this.updateFrame(0,2,!0):this.updateFrame(0,p,!0),this.updateFrame(1,g,!0),this.setInteractive({draggable:!0,pixelPerfect:!0}),this.on("dragend",()=>this.drop()),this.editing||this.disableInteractive(),h&&h.drop(this)}get iglooEdit(){return this.scene.interface.iglooEdit}get editing(){return!this.iglooEdit||!this.iglooEdit.controls?!1:this.iglooEdit.controls.visible}get currentFrame(){return this.frame.name.split("_")}get wallBounds(){return this.scene.wallBounds}get isSafe(){if(this.safeArea)return this.scene.matter.containsPoint(this.safeArea,this.x,this.y)}get isTrash(){if(this.scene.trash)return this.scene.matter.containsPoint(this.scene.trash,this.x,this.y)||this.x<0||this.x>1520||this.y<0||this.y>960}getFrameCount(i){let h=this.getSplitFrames(i);return Math.max.apply(Math,h)}getSplitFrames(i){return this.frames.map(h=>h.split("_")[i])}validatePos(){if(!this.isSafe){let i=this.isWall?this.scene.wallSpawn:this.scene.floorSpawn;this.x=i[0],this.y=i[1]}}drag(i){this.x=Math.round(i.x+this.offsetX),this.y=Math.round(i.y+this.offsetY),this.depth=this.y,this.checkPos(),!(!this.isWall||!this.wallBounds)&&(this.x<this.wallBounds[0]?this.updateFrame(0,1,!0):this.x>this.wallBounds[1]?this.updateFrame(0,3,!0):this.updateFrame(0,2,!0))}hover(i){if(!this.trashed){if(!this.isWall){let h=this.currentFrame;h.splice(2,0,"hover"),this.setFrame(h.join("_"))}this.offsetX=this.x-i.x,this.offsetY=this.y-i.y,this.scene.setSelected(this)}}drop(){if(!(!this.editing||this.trashed)){if(this.scene.setSelected(),!this.isSafe){if(this.isTrash)return this.sendToTrash();this.x=this.safeX,this.y=this.safeY,this.depth=this.y,this.alpha=1}this.safeX=this.x,this.safeY=this.y,this.setFrame(this.frame.name.replace("_hover",""))}}updateFrame(i,h,u=!1){if(this.isWall&&i==0&&!u)return;let d=this.currentFrame;if(u&&d[i]==h)return;let c=u?h:parseInt(d[i])+h;d[i]=c,d[i]>this.maxFrames[i]?d[i]=1:d[i]<1&&(d[i]=this.maxFrames[i]),this.setFrame(d.join("_"))}checkPos(){this.isSafe?this.alpha=1:this.alpha=.5,this.checkTrash()}checkTrash(){let i=this.trashIcon?this.trashIcon:this.addTrashIcon();this.isTrash?(i.visible=!0,i.x=this.x+this.frame.width/2,i.y=this.y,i.depth=this.y+1,this.iglooEdit.button_furniture.setFrame("button/furniture-hover")):(i.visible=!1,this.iglooEdit.button_furniture.setFrame("button/furniture"))}addTrashIcon(){return this.trashIcon=this.scene.add.image(0,0,"iglooedit","remove"),this.trashIcon.visible=!1,this.trashIcon}sendToTrash(){this.trashed=!0,this.scene.quantities[this.id]--,this.trashIcon.destroy(),this.scene.tweens.add({targets:this,duration:600,x:1430,y:460,scale:.5,ease:this.easeOutBack,onComplete:()=>this.onTrashComplete()})}easeOutBack(i){return Phaser.Math.Easing.Back.Out(i,.5)}onTrashComplete(){this.active&&(this.iglooEdit.button_furniture.setFrame("button/furniture"),this.destroy())}getAnims(){let i={};this.frames.map(h=>{h=this.splitAnim(h),(!i[h.key]&&h.num>1||h.num>i[h.key])&&(i[h.key]=parseInt(h.num))});for(let h in i)i[h]=this.createAnim(h,i[h]);return i}createAnim(i,h){let u=`${this.texture.key}_${i}`;return this.scene.anims.exists(u)?this.scene.anims.get(u):this.scene.anims.create({key:u,frames:this.scene.anims.generateFrameNames(this.texture.key,{prefix:`${i}_`,start:1,end:h}),frameRate:24,repeat:-1})}setFrame(i){this.frame&&this.frame.name==i||(this._anims?this.setAnim(i):super.setFrame(i))}setAnim(i){this.stop(),i=this.splitAnim(i),super.setFrame(`${i.key}_1`),i.anim&&(this.play(i.anim),i.anim.frames[i.num]&&this.anims.setCurrentFrame(i.anim.frames[i.num]))}splitAnim(i){i=i.split("_");let h=i.pop();return i=i.join("_"),{key:i,anim:this._anims?this._anims[i]:null,num:h}}}class f{constructor(i){this.scene=i,this.load=new Phaser.Loader.LoaderPlugin(i),this.url="assets/media/furniture/sprites",this.prefix="furniture"}start(){this.load.start()}loadFurniture(i,h=null,u,d,c=1,p=1){let g=`${this.prefix}/${i}`;if(this.scene.textures.exists(g))return this.onFileComplete(g,h,u,d,c,p);this.load.once(`filecomplete-json-${g}`,()=>{this.onFileComplete(g,h,u,d,c,p)}),this.load.multiatlas({key:g,atlasURL:`${this.url}/${i}.json`,path:`${this.url}`})}onFileComplete(i,h,u,d,c,p){if(!this.scene.textures.exists(i))return;let g=new e(this.scene,h,u,d,i,c,p);this.scene.add.existing(g)}}class r extends Phaser.GameObjects.Graphics{constructor(i,h){super(i),this.beginPath(),h.map(u=>{u.vertices.map(d=>{this.fillPoints(d)})})}fillPoints(i){let h=i.length;this.moveTo(i[0].x,i[0].y);for(var u=1;u<h;u++)this.lineTo(i[u].x,i[u].y);this.lineTo(i[0].x,i[0].y),this.fillPath()}}class o extends Phaser.GameObjects.Container{constructor(i,h,u){super(i,h!=null?h:760,u!=null?u:480),this.explosion;const d=i.add.sprite(0,-35,"iglooedit","crate/explode0001");d.setOrigin(.5020080321285141,.5034013605442177),d.visible=!1,this.add(d),this.explosion=d,this.scene=i,this.tween,this.defaultX=h,this.defaultY=u,this.items=[],i.anims.create({key:"explode",frames:this.scene.anims.generateFrameNames("iglooedit",{prefix:"crate/explode",start:1,end:8,zeroPad:4}),frameRate:24,hideOnComplete:!0})}explode(){for(this.explosion.visible=!0,this.explosion.play("explode");this.items.length;)this.items.pop().visible=!0}}class a extends o{constructor(i,h,u){super(i,h!=null?h:760,u!=null?u:480),this.crate,this.spinner;const d=i.add.image(0,-44,"iglooedit","crate/room_box");d.visible=!1,this.add(d);const c=i.add.sprite(42,-35,"iglooedit","crate/spinner0001");c.setOrigin(.5,.5094339622641509),c.visible=!1,this.add(c),this.crate=d,this.spinner=c,this.explosion.scale=1.47,i.anims.create({key:"crate_spinner",frames:this.scene.anims.generateFrameNames("iglooedit",{prefix:"crate/spinner",start:1,end:20,zeroPad:4}),repeat:-1,frameRate:24}),c.anims.play("crate_spinner")}drop(i){this.items.push(i),this.spinner.visible=!0,this.crate.visible=!0,this.explosion.visible=!1,this.scale=1,this.tween&&(this.tween.remove(),this.tween=null),this.tween=this.scene.tweens.add({targets:this,y:{from:this.defaultY-700,to:this.defaultY},duration:800,ease:"Cubic",onComplete:()=>this.onComplete()})}onComplete(){this.tween=this.scene.tweens.add({targets:this,scale:{from:1,to:.68},duration:100,onComplete:()=>{this.spinner.visible=!1,this.crate.visible=!1,this.explode()}})}}class s extends o{constructor(i,h,u){super(i,h!=null?h:760,u!=null?u:480),this.crate;const d=i.add.sprite(0,0,"iglooedit","crate/wall_box0001");d.visible=!1,this.add(d),this.crate=d,this.crate.on("animationcomplete",()=>this.onComplete()),i.anims.create({key:"wall_crate",frames:this.scene.anims.generateFrameNames("iglooedit",{prefix:"crate/wall_box",start:1,end:14,zeroPad:4}),frameRate:24})}drop(i){this.items.push(i),this.crate.visible=!0,this.explosion.visible=!1,this.crate.scale=1,this.tween&&(this.tween.remove(),this.tween=null),this.crate.play("wall_crate")}onComplete(){this.tween=this.scene.tweens.add({targets:this.crate,scale:{from:1,to:.68},duration:100,onComplete:()=>{this.crate.visible=!1,this.explode()}})}}class n extends t.Z{constructor(i){super(i),this.isIgloo=!0,this.editBg,this.roomCrate,this.wallCrate,this.pet,this.room,this.trash,this.wall,this.selected}init(i){this.args=i.args,this.id=i.args.igloo,this.music=i.args.music,this.loader=new f(this),this.quantities={},this.events.once("shutdown",()=>this.onShutdown())}preload(){super.preload(),this.load.image(`locations/${this.args.location}`,`assets/media/igloos/locations/${this.args.location}.png`),this.args.flooring&&this.loadFlooring(this.args.flooring)}get editing(){if(this.interface.iglooEdit.controls)return this.interface.iglooEdit.controls.visible}get furnitureSprites(){return this.children.list.filter(i=>i instanceof e)}getQuantity(i){let h=this.world.client.furniture[i],u=this.quantities[i]?this.quantities[i]:0;return Math.max(h-u,0)}onShutdown(){this.interface.hideIglooEdit()}create(){var i;this.id===this.world.client.id&&(this.addEditBg(),this.addCrates(),this.interface.showIglooEdit()),super.create(),(i=this.floor)==null||i.setDepth(-2),this.args.flooring&&this.addFlooring(this.args.flooring),this.addLocation(),this.loadAllFurniture()}addEditBg(){this.editBg=this.add.image(786,501,"iglooedit","bg"),this.editBg.depth=-3,this.editBg.visible=!1}addCrates(){this.roomCrate=new a(this,this.floorSpawn[0],this.floorSpawn[1]),this.roomCrate.depth=this.roomCrate.y,this.wallCrate=new s(this,this.wallSpawn[0],this.wallSpawn[1]),this.wallCrate.depth=this.wallCrate.y,this.add.existing(this.roomCrate),this.add.existing(this.wallCrate)}addFlooring(i){if(this.flooring&&this.flooring.destroy(),this.flooring=this.add.image(0,0,`flooring/${i}`,`${this.floorFrame}_1`),this.flooring.depth=-1,this.roomPhysics.mask){let h=this.createMask();this.flooring.setMask(h)}}addLocation(){let i=this.add.image(760,480,`locations/${this.args.location}`);i.depth=-4}showEditBg(){this.editBg&&(this.editBg.visible=!0)}hideEditBg(){this.editBg&&(this.editBg.visible=!1)}hidePenguins(){for(let i of Object.values(this.penguins))i.visible=!1,i.nameTag.visible=!1,i.balloon&&(i.balloon.visible=!1)}showPenguins(){for(let i of Object.values(this.penguins))i.visible=!0,i.nameTag.visible=!0}loadFlooring(i){if(this.textures.exists(`flooring/${i}`))return;let h="assets/media/igloos/flooring";this.load.multiatlas({key:`flooring/${i}`,atlasURL:`${h}/${i}.json`,path:h})}updateFlooring(i){if(this.args.flooring=i,i==0&&this.flooring)return this.flooring.destroy();if(this.textures.exists(`flooring/${i}`))return this.addFlooring(i);this.loadFlooring(i),this.load.start(),this.load.once(`filecomplete-json-flooring/${i}`,()=>{this.addFlooring(i)})}updateMusic(i){if(this.stopMusic(),this.music=i,!!i){if(this.cache.audio.exists(i))return this.addMusic();this.load.audio(i,`assets/media/music/${i}.mp3`),this.load.start(),this.load.once(`filecomplete-audio-${i}`,()=>{this.addMusic()})}}loadAllFurniture(){for(let i of this.args.furniture)this.updateQuantity(i.furnitureId),this.loader.loadFurniture(i.furnitureId,null,i.x,i.y,i.rotation,i.frame);this.loader.start()}loadFurniture(i){let h=this.crumbs.furniture[i].type==2?this.wallCrate:this.roomCrate;this.updateQuantity(i),this.loader.loadFurniture(i,h,h.defaultX,h.defaultY),this.loader.start()}updateIgloo(i){if(this.id!=this.world.client.id||this.args.type==i||!(i in this.crumbs.scenes.igloos))return;let h=`Are you sure you want to change your igloo?
Your flooring will be lost.
Igloo items will be saved in your inventory.`;this.interface.prompt.showWindow(h,"dual",()=>{this.interface.showLoading(this.getString("joining","igloo")),this.network.send("update_igloo",{type:i}),this.interface.prompt.window.visible=!1})}updateQuantity(i){this.quantities[i]=this.quantities[i]?this.quantities[i]+1:1}addPhysics(){super.addPhysics(),this.pet=this.addBody("pet"),this.room=this.addBody("room"),this.trash=this.addBody("trash"),this.wall=this.addBody("wall")}createMask(){let i=this.roomPhysics.mask.fixtures;return new r(this,i).createGeometryMask()}enableFurnitureInput(){for(let i of this.furnitureSprites)i.setInteractive()}disableFurnitureInput(){for(let i of this.furnitureSprites)i.disableInteractive()}addInput(){super.addInput(),this.id==this.world.client.id&&(this.input.dragDistanceThreshold=1,this.input.on("pointerdown",(i,h)=>this.onPointerDown(i,h)),this.input.on("pointermove",i=>this.onPointerMove(i)),this.input.keyboard.on("keydown-UP",()=>this.updateFrame(1,1)),this.input.keyboard.on("keydown-LEFT",()=>this.updateFrame(0,1)),this.input.keyboard.on("keydown-DOWN",()=>this.updateFrame(1,-1)),this.input.keyboard.on("keydown-RIGHT",()=>this.updateFrame(0,-1)))}onPointerMove(i){this.editing&&this.selected&&this.selected.drag(i)}onPointerDown(i,h){i.button!=0||!this.editing||(!this.selected&&h[0]&&h[0]instanceof e?h[0].hover(i):this.selected&&this.selected.drop())}updateFrame(i,h){this.editing&&this.selected&&this.selected.updateFrame(i,h)}setSelected(i=null){this.selected=i,this.interface.iglooEdit.setControlsInteractive(i==null)}}},7964:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Backyard"),this.grass,this.floor,this.floorSpawn=[1080,490],this.wallSpawn=[970,200],this.wallBounds=[410,1110],this.floorFrame=3}_preload(){this.load.pack("backyard-pack","assets/media/igloos/buildings/sprites/backyard/backyard-pack.json")}_create(){const r=this.add.image(-307,275,"backyard","grass");r.setOrigin(0,0);const o=this.add.container(-30,-21),a=this.add.image(430,293,"backyard","floor");a.setOrigin(0,0),o.add(a);const s=this.add.image(709,568,"backyard","stair_top");s.setOrigin(0,0),o.add(s),this.add.image(5,-19,"backyard","wall_1").setOrigin(0,0),this.add.image(630,537,"backyard","stairs").setOrigin(0,0),this.add.image(890,651,"backyard","wall_2").setOrigin(0,0),this.add.image(614,95,"backyard","door").setOrigin(0,0),this.grass=r,this.floor=o,this.events.emit("scene-awake")}create(){super.create(),this.grass.setDepth(-3)}}},4364:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("BambooHut"),this.floor,this.floorSpawn=[770,750],this.wallSpawn=[790,400],this.wallBounds=[520,1050],this.floorFrame=4}_preload(){this.load.pack("bamboohut-pack","assets/media/igloos/buildings/sprites/bamboohut/bamboohut-pack.json")}_create(){const r=this.add.image(769,691,"bamboohut","floor");r.setOrigin(.5004468275245755,.5017421602787456),this.add.image(424,474,"bamboohut","door").setOrigin(.5054945054945055,.5),this.add.image(760,402,"bamboohut","wall").setOrigin(.5004101722723544,.5),this.floor=r,this.events.emit("scene-awake")}}},5625:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Basic"),this.floor,this.floorSpawn=[760,760],this.wallSpawn=[750,320],this.wallBounds=[580,1e3],this.floorFrame=1}_preload(){this.load.pack("basic-pack","assets/media/igloos/buildings/sprites/basic/basic-pack.json")}_create(){const r=this.add.image(765,639,"basic","floor");r.setOrigin(.5006337135614702,.5),this.add.image(570,378,"basic","wall_1").setOrigin(.5010266940451745,.5),this.add.image(972,388,"basic","wall_2"),this.add.image(887,120,"basic","chimney").setOrigin(.5050505050505051,.5),this.add.image(828,476,"basic","window").setOrigin(.5014164305949008,.5),this.add.image(491,467,"basic","door"),this.floor=r,this.events.emit("scene-awake")}}},7537:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("BigCandy"),this.floor,this.floorSpawn=[720,720],this.wallSpawn=[720,260],this.wallBounds=[350,1200],this.floorFrame=2}_preload(){this.load.pack("bigcandy-pack","assets/media/igloos/buildings/sprites/bigcandy/bigcandy-pack.json")}_create(){const r=this.add.image(760,636,"bigcandy","floor");r.setOrigin(.5003940110323088,.5013477088948787),this.add.image(243,478,"bigcandy","door"),this.add.image(321,389,"bigcandy","wall_1").setOrigin(.5010266940451745,.5),this.add.image(762,295,"bigcandy","wall_2").setOrigin(.5008695652173913,.5),this.add.image(1210,401,"bigcandy","wall_3"),this.add.image(1072,485,"bigcandy","window").setOrigin(.5014164305949008,.5);const n=this.add.image(529,481,"bigcandy","window");n.setOrigin(.5014164305949008,.5),n.flipX=!0,this.add.image(1127,133,"bigcandy","chimney").setOrigin(.5050505050505051,.5),this.floor=r,this.events.emit("scene-awake")}}},1804:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Candy"),this.floor,this.floorSpawn=[760,760],this.wallSpawn=[750,320],this.wallBounds=[580,1e3],this.floorFrame=1}_preload(){this.load.pack("candy-pack","assets/media/igloos/buildings/sprites/candy/candy-pack.json")}_create(){const r=this.add.image(765,639,"candy","floor");r.setOrigin(.5006337135614702,.5),this.add.image(570,378,"candy","wall_1").setOrigin(.5010266940451745,.5),this.add.image(972,388,"candy","wall_2"),this.add.image(887,120,"candy","chimney").setOrigin(.5050505050505051,.5),this.add.image(828,476,"candy","window").setOrigin(.5014164305949008,.5),this.add.image(491,467,"candy","door"),this.floor=r,this.events.emit("scene-awake")}}},8172:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("CozyCottage"),this.floor,this.floorSpawn=[656,614],this.wallSpawn=[672,266],this.wallBounds=[410,874],this.floorFrame=13}_preload(){this.load.pack("cozycottage-pack","assets/media/igloos/buildings/sprites/cozycottage/cozycottage-pack.json")}_create(){const r=this.add.container(0,0),o=this.add.image(592,571,"cozycottage","floor");r.add(o),this.add.image(-433,-325,"cozycottage","igloo").setOrigin(0,0),this.add.image(130,173,"cozycottage","door").setOrigin(0,0),this.floor=r,this.events.emit("scene-awake")}}},8541:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("DeluxeBlue"),this.floor,this.floorSpawn=[720,720],this.wallSpawn=[720,260],this.wallBounds=[350,1200],this.floorFrame=2}_preload(){this.load.pack("deluxeblue-pack","assets/media/igloos/buildings/sprites/deluxeblue/deluxeblue-pack.json")}_create(){const r=this.add.image(760,636,"deluxeblue","floor");r.setOrigin(.5003940110323088,.5013477088948787),this.add.image(243,478,"deluxeblue","door"),this.add.image(321,389,"deluxeblue","wall_1").setOrigin(.5010266940451745,.5),this.add.image(762,295,"deluxeblue","wall_2").setOrigin(.5008695652173913,.5),this.add.image(1210,401,"deluxeblue","wall_3"),this.add.image(1072,485,"deluxeblue","window").setOrigin(.5014164305949008,.5);const n=this.add.image(529,481,"deluxeblue","window");n.setOrigin(.5014164305949008,.5),n.flipX=!0,this.add.image(1127,133,"deluxeblue","chimney").setOrigin(.5050505050505051,.5),this.floor=r,this.events.emit("scene-awake")}}},9542:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("DeluxeSnow"),this.floor,this.floorSpawn=[720,720],this.wallSpawn=[720,260],this.wallBounds=[350,1200],this.floorFrame=2}_preload(){this.load.pack("deluxesnow-pack","assets/media/igloos/buildings/sprites/deluxesnow/deluxesnow-pack.json")}_create(){const r=this.add.image(760,636,"deluxesnow","floor");r.setOrigin(.5003940110323088,.5013477088948787),this.add.image(243,478,"deluxesnow","door"),this.add.image(321,389,"deluxesnow","wall_1").setOrigin(.5010266940451745,.5),this.add.image(762,295,"deluxesnow","wall_2").setOrigin(.5008695652173913,.5),this.add.image(1210,401,"deluxesnow","wall_3"),this.floor=r,this.events.emit("scene-awake")}}},7968:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("DeluxeStone"),this.floor,this.floorSpawn=[720,720],this.wallSpawn=[720,260],this.wallBounds=[350,1200],this.floorFrame=2}_preload(){this.load.pack("deluxestone-pack","assets/media/igloos/buildings/sprites/deluxestone/deluxestone-pack.json")}_create(){const r=this.add.image(760,636,"deluxestone","floor");r.setOrigin(.5003940110323088,.5013477088948787),this.add.image(243,478,"deluxestone","door"),this.add.image(321,389,"deluxestone","wall_1").setOrigin(.5010266940451745,.5),this.add.image(762,295,"deluxestone","wall_2").setOrigin(.5008695652173913,.5),this.add.image(1210,401,"deluxestone","wall_3"),this.floor=r,this.events.emit("scene-awake")}}},503:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("DragonsLair"),this.floorSpawn=[760,800],this.wallSpawn=[760,430],this.wallBounds=[420,1110],this.floorFrame=8}_preload(){this.load.pack("dragonslair-pack","assets/media/igloos/buildings/sprites/dragonslair/dragonslair-pack.json")}_create(){this.add.image(10,-95,"dragonslair","palace").setOrigin(0,0),this.add.image(759,584,"dragonslair","door"),this.add.image(266,490,"dragonslair","door-outline").setOrigin(0,0),this.events.emit("scene-awake")}}},4085:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Estate"),this.floorSpawn=[760,800],this.wallSpawn=[760,430],this.wallBounds=[420,1110],this.floorFrame=11}_preload(){this.load.pack("estate-pack","assets/media/igloos/buildings/sprites/estate/estate-pack.json")}_create(){this.add.image(0,-250,"estate","igloo").setOrigin(0,0),this.add.image(314,605,"estate","door"),this.events.emit("scene-awake")}}},8009:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("FishBowl"),this.bowl,this.floor,this.bowl_top,this.sort,this.floorSpawn=[760,720],this.wallSpawn=[760,330],this.wallBounds=[436,1124],this.floorFrame=9}_preload(){this.load.pack("fishbowl-pack","assets/media/igloos/buildings/sprites/fishbowl/fishbowl-pack.json")}_create(){const r=this.add.image(240,130,"fishbowl","bowl");r.setOrigin(0,0);const o=this.add.container(-35,14),a=this.add.image(331,511,"fishbowl","floor");a.setOrigin(0,0),o.add(a);const s=this.add.image(225,10,"fishbowl","bowl-top");s.setOrigin(0,0);const n=[s,r];this.bowl=r,this.floor=o,this.bowl_top=s,this.sort=n,this.events.emit("scene-awake")}create(){super.create(),this.bowl.setDepth(-3),this.bowl_top.setDepth(2e3)}}},5655:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("GreyIcePalace"),this.floorSpawn=[760,800],this.wallSpawn=[760,430],this.wallBounds=[420,1110],this.floorFrame=8}_preload(){this.load.pack("greyicepalace-pack","assets/media/igloos/buildings/sprites/greyicepalace/greyicepalace-pack.json")}_create(){this.add.image(755,560,"greyicepalace","door"),this.add.image(0,0,"greyicepalace","palace").setOrigin(0,0),this.events.emit("scene-awake")}}},8794:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Gym"),this.floor,this.floorSpawn=[760,780],this.wallSpawn=[760,480],this.wallBounds=[510,1110],this.floorFrame=6}_preload(){this.load.pack("gym-pack","assets/media/igloos/buildings/sprites/gym/gym-pack.json")}_create(){const r=this.add.layer(),o=this.add.image(1342,742,"gym","wood");o.setOrigin(.5084745762711864,.5185185185185185),o.flipX=!0,r.add(o);const a=this.add.image(177,742,"gym","wood");a.setOrigin(.5084745762711864,.5185185185185185),r.add(a);const s=this.add.image(760,753,"gym","floor");s.setOrigin(.5004095004095004,.5),r.add(s),this.add.image(760,400,"gym","wall").setOrigin(.5003903200624512,.5),this.add.image(339,571,"gym","door").setOrigin(.5084745762711864,.5),this.floor=r,this.events.emit("scene-awake")}}},107:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("HalfIgloo"),this.floor,this.sort,this.floorSpawn=[940,620],this.wallSpawn=[680,376],this.wallBounds=[646,920],this.floorFrame=2}_preload(){this.load.pack("halfigloo-pack","assets/media/igloos/buildings/sprites/halfigloo/halfigloo-pack.json")}_create(){const r=this.add.container(0,0),o=this.add.image(720,645,"halfigloo","floor");r.add(o),this.add.image(260,100,"halfigloo","igloo").setOrigin(0,0);const s=this.add.image(745,792.4559017213213,"halfigloo","midsection");s.setOrigin(.21803542857420155,.9952207359427306);const n=this.add.image(376.41987047096865,672.1951196873426,"halfigloo","entrance");n.setOrigin(.7859515934449159,.956626142241164);const l=[s,n];this.floor=r,this.sort=l,this.events.emit("scene-awake")}}},3230:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("IcePalace"),this.floorSpawn=[760,800],this.wallSpawn=[760,430],this.wallBounds=[420,1110],this.floorFrame=8}_preload(){this.load.pack("icepalace-pack","assets/media/igloos/buildings/sprites/icepalace/icepalace-pack.json")}_create(){this.add.image(0,0,"icepalace","palace").setOrigin(0,0),this.add.image(755,560,"icepalace","door"),this.events.emit("scene-awake")}}},1885:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("LogCabin"),this.floor,this.floorSpawn=[760,728],this.wallSpawn=[760,450],this.wallBounds=[490,1030],this.floorFrame=5}_preload(){this.load.pack("logcabin-pack","assets/media/igloos/buildings/sprites/logcabin/logcabin-pack.json")}_create(){const r=this.add.layer(),o=this.add.image(760,703,"logcabin","floor_1");r.add(o);const a=this.add.image(748,838,"logcabin","floor_2");a.setOrigin(.5,.5070422535211268),r.add(a),this.add.image(760,426,"logcabin","wall").setOrigin(.5003441156228493,.5006896551724138),this.add.image(421,555,"logcabin","door"),this.floor=r,this.events.emit("scene-awake")}}},5620:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("MermaidCove"),this.floor,this.floorSpawn=[616,512],this.wallSpawn=[850,216],this.wallBounds=[360,1140],this.floorFrame=14}_preload(){this.load.pack("mermaidcove-pack","assets/media/igloos/buildings/sprites/mermaidcove/mermaidcove-pack.json")}_create(){const r=this.add.container(0,0);this.add.image(-60,-185,"mermaidcove","igloo").setOrigin(0,0),this.floor=r,this.events.emit("scene-awake")}}},4876:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("PinkIcePalace"),this.floorSpawn=[760,800],this.wallSpawn=[760,430],this.wallBounds=[420,1110],this.floorFrame=8}_preload(){this.load.pack("pinkicepalace-pack","assets/media/igloos/buildings/sprites/pinkicepalace/pinkicepalace-pack.json")}_create(){this.add.image(755,560,"pinkicepalace","door"),this.add.image(0,0,"pinkicepalace","palace").setOrigin(0,0),this.events.emit("scene-awake")}}},3374:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Pumpkin"),this.floorSpawn=[760,760],this.wallSpawn=[760,330],this.wallBounds=[380,1160],this.floorFrame=11}_preload(){this.load.pack("pumpkin-pack","assets/media/igloos/buildings/sprites/pumpkin/pumpkin-pack.json")}_create(){this.add.image(0,-75,"pumpkin","pumpkin").setOrigin(0,0),this.events.emit("scene-awake")}}},2003:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Restaurant"),this.floorSpawn=[760,780],this.wallSpawn=[760,480],this.wallBounds=[410,1110],this.floorFrame=12}_preload(){this.load.pack("restaurant-pack","assets/media/igloos/buildings/sprites/restaurant/restaurant-pack.json")}_create(){const r=this.add.container(0,0),o=this.add.image(797,672,"restaurant","floor");r.add(o),this.add.image(6,0,"restaurant","igloo").setOrigin(0,0),this.add.image(257,571,"restaurant","door"),this.events.emit("scene-awake")}}},8884:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Ship"),this.sort,this.floorSpawn=[768,720],this.wallSpawn=[756,436],this.wallBounds=[390,1100],this.floorFrame=7}_preload(){this.load.pack("ship-pack","assets/media/igloos/buildings/sprites/ship/ship-pack.json")}_create(){this.add.image(-21,8,"ship","igloo").setOrigin(0,0);const o=this.add.image(167.27177599621965,433.87457604347395,"ship","rail");o.setOrigin(.509356030842901,.9754077073739781);const a=[o];this.sort=a,this.events.emit("scene-awake")}}},9892:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Snow"),this.floor,this.floorSpawn=[760,760],this.wallSpawn=[750,320],this.wallBounds=[580,1e3],this.floorFrame=1}_preload(){this.load.pack("snow-pack","assets/media/igloos/buildings/sprites/snow/snow-pack.json")}_create(){const r=this.add.image(765,639,"snow","floor");r.setOrigin(.5006337135614702,.5),this.add.image(570,378,"snow","wall_1").setOrigin(.5010266940451745,.5),this.add.image(972,388,"snow","wall_2"),this.add.image(491,467,"snow","door"),this.floor=r,this.events.emit("scene-awake")}}},6847:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("SplitCandy"),this.floor,this.floorSpawn=[1080,490],this.wallSpawn=[970,200],this.wallBounds=[410,1110],this.floorFrame=3}_preload(){this.load.pack("splitcandy-pack","assets/media/igloos/buildings/sprites/splitcandy/splitcandy-pack.json")}_create(){const r=this.add.container(0,0),o=this.add.image(760,630,"splitcandy","floor");r.add(o),this.add.image(235,561,"splitcandy","door"),this.add.image(757,380,"splitcandy","wall_1"),this.add.image(777,665,"splitcandy","stairs"),this.add.image(925,811,"splitcandy","wall_2"),this.floor=r,this.events.emit("scene-awake")}}},8417:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("SplitLevel"),this.floor,this.floorSpawn=[1080,490],this.wallSpawn=[970,200],this.wallBounds=[410,1110],this.floorFrame=3}_preload(){this.load.pack("splitlevel-pack","assets/media/igloos/buildings/sprites/splitlevel/splitlevel-pack.json")}_create(){const r=this.add.layer(),o=this.add.image(760,630,"splitlevel","floor");o.setOrigin(.5003861003861004,.5),r.add(o);const a=this.add.image(763,667,"splitlevel","stairs_top");a.setOrigin(.5,.5035971223021583),r.add(a),this.add.image(235,556,"splitlevel","door"),this.add.image(757,380,"splitlevel","wall_1").setOrigin(.5003615328994938,.5),this.add.image(777,667,"splitlevel","stairs"),this.add.image(925,811,"splitlevel","wall_2").setOrigin(.5,.5015197568389058),this.floor=r,this.events.emit("scene-awake")}}},9334:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Stone"),this.floor,this.floorSpawn=[760,760],this.wallSpawn=[750,320],this.wallBounds=[580,1e3],this.floorFrame=1}_preload(){this.load.pack("stone-pack","assets/media/igloos/buildings/sprites/stone/stone-pack.json")}_create(){const r=this.add.image(765,639,"stone","floor");r.setOrigin(.5006337135614702,.5),this.add.image(570,378,"stone","wall_1").setOrigin(.5010266940451745,.5),this.add.image(972,388,"stone","wall_2"),this.add.image(491,467,"stone","door"),this.floor=r,this.events.emit("scene-awake")}}},4389:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("Theatre"),this.floor,this.floorSpawn=[754,696],this.wallSpawn=[804,472],this.wallBounds=[510,1044],this.floorFrame=12}_preload(){this.load.pack("theatre-pack","assets/media/igloos/buildings/sprites/theatre/theatre-pack.json")}_create(){const r=this.add.container(0,0),o=this.add.image(762,665,"theatre","floor");r.add(o),this.add.image(20,25,"theatre","igloo").setOrigin(0,0),this.add.image(147,506,"theatre","door").setOrigin(0,0),this.floor=r,this.events.emit("scene-awake")}}},8998:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(3500);class e extends t.Z{constructor(){super("TreeHouse"),this.floor,this.floorSpawn=[670,570],this.wallSpawn=[650,310],this.wallBounds=[280,1250],this.floorFrame=7}_preload(){this.load.pack("treehouse-pack","assets/media/igloos/buildings/sprites/treehouse/treehouse-pack.json")}_create(){const r=this.add.container(0,0),o=this.add.image(771,622,"treehouse","floor");r.add(o),this.add.image(-18,4,"treehouse","inside").setOrigin(0,0),this.add.image(10,0,"treehouse","igloo").setOrigin(0,0),this.floor=r,this.events.emit("scene-awake")}}},4267:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>e});var t=C(8018);class e extends t.Z{constructor(r){super(r),this.key=r,this.penguins=null,this.block=null,this.triggers=null,this.isReady=!1,this.waiting=[]}get client(){return this.world.client}init(r){this.id=r.id}create(){this._create(),this.sortChildren(),this.roomPhysics&&this.addPhysics(),this.roomAnims&&this.addAnims(),this.addInput(),this.sound.pauseOnBlur=!1,this.music&&this.addMusic(),this.waddles&&this.getWaddles(),this.interface.showInterface()}preload(){this.load.on("progress",this.onProgress,this),this.events.once("create",()=>this.isReady=!0),this.music&&!this.cache.audio.exists(this.music)&&this.load.audio(this.music,`assets/media/music/${this.music}.mp3`),this._preload()}onProgress(r){this.interface.loading.progress.scaleX=r}sortChildren(){if(!!this.sort)for(let r of this.sort)r.depth=r.y}addPenguin(r,o){this.penguins[r]=o,this.interface.main.buddy.showPage()}removePenguin(r){let o=this.penguins[r];o.isTweening&&o.removeTween(),o.balloon&&o.balloon.destroy(),o.nameTag.destroy(),o.destroy(),delete this.penguins[r],this.interface.main.buddy.showPage()}addInput(){this.input.on("pointerup",(r,o)=>this.client.onPointerUp(r,o))}addMusic(){!this.world.muteMusic&&this.cache.audio.exists(this.music)&&this.sound.play(this.music,{loop:!0})}stopMusic(){this.sound.stopByKey(this.music)}getWaddles(){this.network.send("get_waddles")}setWaddles(r){this.waddles=r;for(let[o,a]of Object.entries(r))this.setSeats(o,a)}setSeats(r,o){for(let[a,s]of o.entries())s&&(this.world.room[`seats${r}`][a].visible=!0)}onSnowballComplete(r,o){}stop(){this.interface.main.snowballFactory.clearBalls(),this.sound.stopAll(),this.scene.stop()}getWaiting(r){return this.waiting.find(o=>o.id===r)}updateWaiting(r,o){let a=this.getWaiting(r);a&&(a=Object.assign(a,o))}removeWaiting(r){this.waiting=this.waiting.filter(o=>o.id!==r)}get roomPhysics(){let r=this.key.toLowerCase();return this.cache.json.get(`${r}-physics`)}addPhysics(){this.matter.world.setBounds(0,0,this.game.config.width,this.game.config.height),this.block=this.addBody("block",1118481),this.triggers=this.addTriggers()}addBody(r,o=null){if(!this.roomPhysics[r])return null;let a=this.matter.add.fromPhysicsEditor(0,0,this.roomPhysics[r]);return this.matter.body.setPosition(a,a.centerOffset),o=o||a.render.fillColor,a.render.lineColor=o,a.render.fillColor=o,a.render.fillOpacity=.5,a}addTriggers(){if(!this.roomTriggers)return null;let r=[];for(let o in this.roomTriggers){let a=this.addBody(o,65280);a.callback=this.roomTriggers[o],r.push(a)}return r}triggerRoom(r,o,a,s=40){let n=this.crumbs.scenes.rooms[r];this.world.client.sendJoinRoom(r,n.key,o,a,s)}triggerGame(r){let o=this.getString(`${this.crumbs.games[r].key}_prompt`);this.interface.prompt.showWindow(o,"dual",()=>{this.world.client.sendJoinRoom(r,""),this.interface.prompt.window.visible=!1})}triggerWaddle(r){}addAnims(){let r=this.key.toLowerCase(),o=this.cache.json.get(`${r}-anims`);this.anims.fromJSON(o)}}},2733:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Attic"),this.sort,this.roomTriggers={lodge:()=>this.triggerRoom(220,1146,562)},this.music="884"}_preload(){this.load.pack("attic-pack","assets/media/rooms/attic/attic-pack.json")}_create(){this.add.image(0,0,"attic","bg").setOrigin(0,0);const a=this.add.image(225,611,"attic","arm");a.setOrigin(.497143,.649402);const s=this.add.sprite(1369,639,"attic","horse0001");s.setOrigin(.544,.503185);const n=this.add.image(438,751,"attic","table2");n.setOrigin(.47058824,.56034483);const l=this.add.image(810,762,"attic","table1");l.setOrigin(.54362416,.56818182);const i=this.add.image(606,618,"attic","table3");i.setOrigin(.49342105,.50735294);const h=this.add.image(873,582,"attic","table1");h.setOrigin(.54362416,.56818182);const u=this.add.image(1135,802,"attic","table4");u.setOrigin(.4251497005988024,.6060606060606061);const d=this.add.image(-1,970,"attic","box");d.setOrigin(0,1);const c=[d,n,a,i,l,h,u,s];new e.rF(s);const p=new e.fw(s);p.key="horse",p.end=67,p.repeat=0,p.onHover=!0,p.stopOnOut=!1;const g=new e.zx(n);g.spriteName="table2",g.activeFrame=!1,new e.$X(n);const x=new e.tk(n);x.text="Coming Soon";const y=new e.zx(l);y.spriteName="table1",y.activeFrame=!1,new e.$X(l);const T=new e.tk(l);T.text="Coming Soon";const E=new e.zx(i);E.spriteName="table3",E.activeFrame=!1,new e.$X(i);const w=new e.tk(i);w.text="Coming Soon";const A=new e.zx(h);A.spriteName="table1",A.activeFrame=!1,new e.$X(h);const b=new e.tk(h);b.text="Coming Soon";const R=new e.zx(u);R.spriteName="table4",R.activeFrame=!1,new e.$X(u);const L=new e.tk(u);L.text="four_hint",this.sort=c,this.events.emit("scene-awake")}}},8966:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Beach"),this.bucket,this.sort,this.roomTriggers={village:()=>this.triggerRoom(200,450,750),dock:()=>this.triggerRoom(800,240,420),light:()=>this.triggerRoom(410,522,518,5)},this.roomAnims=!0}_preload(){this.load.pack("beach-pack","assets/media/rooms/beach/beach-pack.json")}_create(){this.add.image(-20,-20,"beach","bg").setOrigin(0,0);const a=this.add.image(388,216,"beach","lighthouse_door");a.setOrigin(0,0);const s=this.add.image(232,352,"beach","cage");s.setOrigin(.4935064935064935,.5);const n=this.add.image(194,428,"beach","buoy");n.setOrigin(.5185185185185185,.4965034965034965);const l=this.add.image(297,392,"beach","fish");l.setOrigin(.4782608695652174,.4956521739130435);const i=this.add.image(290,465,"beach","net");i.setOrigin(.49767441860465117,.5),this.add.image(1217,293,"beach","fg").setOrigin(0,0),this.add.image(1146,323,"beach","sign").setOrigin(0,0),this.add.image(906,524,"beach","chair_ground").setOrigin(0,0);const c=this.add.image(1060,501,"beach","chair_2");c.setOrigin(.5185185185185185,.6060606060606061);const p=this.add.image(1053,522,"beach","chair_2_front");p.setOrigin(.5,.6764705882352942);const g=this.add.image(961,526,"beach","chair_1");g.setOrigin(.5,.58778626);const x=this.add.image(943,542,"beach","chair_1_front");x.setOrigin(.4,.67054264);const y=this.add.sprite(1078,612,"beach","bucket/bucket0001");y.setOrigin(.8863109,.94611727),this.add.image(667,546,"beach","shadow");const T=this.add.image(811,389.0498876501515,"beach","box_1");T.setOrigin(.5,.7544192687853675);const E=this.add.image(619.8459810002331,478.52276580041956,"beach","box_2");E.setOrigin(.517123948906811,.7124176860358635);const w=this.add.image(490.5,541.5,"beach","bucket_1"),A=this.add.image(420,474.5,"beach","bucket_2");this.add.image(650,556,"beach","plank").setOrigin(0,0);const R=[y,x,g,p,c,i,l,n,s,T,E,w,A],L=new e.zx(a);L.spriteName="lighthouse_door",L.activeFrame=!1;const B=new e.$X(a);B.x=480,B.y=400;const D=new e.rF(y);D.hoverCallback=()=>this.onBucketOver(),D.pixelPerfect=!0,this.bucket=y,this.sort=R,this.events.emit("scene-awake")}onBucketOver(){let o=this.bucket.frame.name;switch(o=o.substr(o.length-4),o){case"0001":case"0346":this.bucket.play("bucket1");break;case"0070":this.bucket.play("bucket2");break;case"0137":this.bucket.play("bucket3");break;case"0210":this.bucket.play("bucket4");break;case"0269":this.bucket.play("bucket5");break;default:break}}}},4522:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Beacon"),this.launch,this.launchActive,this.sort,this.roomTriggers={light:()=>this.triggerRoom(410,454,185,5),jetpack:()=>this.triggerGame(906),telescope:()=>this.interface.showBook("telescope")}}_preload(){this.load.pack("beacon-pack","assets/media/rooms/beacon/beacon-pack.json")}_create(){this.add.image(0,0,"beacon","bg").setOrigin(0,0);const a=this.add.image(688.6894422954724,555.9710578661634,"beacon","beacon");a.setOrigin(.6309839947998837,.8038810334259991);const s=this.add.image(1321,570,"beacon","launch"),n=this.add.sprite(1321,570,"beacon","launch/launch0001");n.visible=!1;const l=this.add.image(680,846,"beacon","railing");l.setOrigin(.5,.7486553607307954);const i=this.add.image(230.2762147789686,563.4632225414601,"beacon","railing_2");i.setOrigin(.8421959359650598,.3415237313641213);const h=this.add.rectangle(320,373,50,50);h.alpha=.5,h.isFilled=!0,h.fillColor=65280;const u=this.add.rectangle(1323,587,245,150);u.angle=-5,u.alpha=.5,u.isFilled=!0,u.fillColor=65280;const d=[i,l,a],c=new e.ld(h);c.hoverCallback=()=>{},c.hoverOutCallback=()=>{},c.callback=()=>this.world.client.penguin.move(356,441);const p=new e.ld(u);p.hoverCallback=()=>this.onJetpackOver(),p.hoverOutCallback=()=>this.onJetpackOut(),p.callback=()=>this.world.client.penguin.move(1342,565),this.launch=s,this.launchActive=n,this.sort=d,this.events.emit("scene-awake")}onJetpackOver(){this.launch.setVisible(!1),this.launchActive.setVisible(!0),this.launchActive.play("launch-active")}onJetpackOut(){this.launchActive.stop(),this.launch.setVisible(!0),this.launchActive.setVisible(!1)}onSwitchClick(){this.switch_0001.__Animation.play(),this.beacon1.__Animation.play(),this.beacon2.__Animation.play(),this.lighthouse.__Animation.play(),this.fg.__Animation.play()}}},6745:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Berg"),this.aqua,this.sort,this.roomTriggers={aqua:()=>this.triggerGame(916)},this.roomAnims=!0}_preload(){this.load.pack("berg-pack","assets/media/rooms/berg/berg-pack.json")}_create(){this.add.image(0,0,"berg","bg").setOrigin(0,0),this.add.image(693,546,"berg","shadow");const a=this.add.sprite(1255,325,"berg","aqua_0001");a.setOrigin(.5,.4014336917562724);const s=this.add.image(621,439,"berg","box_1"),n=this.add.sprite(619,521.7143464050946,"berg","speaker_0001");n.setOrigin(.5,.9961297852467714);const l=this.add.image(620.3796485808917,531.908051750318,"berg","box_2");l.setOrigin(.5067299930775206,.7455918939807226);const i=this.add.image(890.1761343898088,438.00981596061155,"berg","box1");i.setOrigin(.5948508399363049,.7598039535445424);const h=this.add.image(439.5557829707005,445.35226877961753,"berg","box2");h.setOrigin(.6126243739503434,.7122536278294932);const u=this.add.image(920.9726201987258,575.3150801324839,"berg","construction_1");u.setOrigin(.7040325366107454,.6485775394806453);const d=this.add.image(1009,515,"berg","cone"),p=[this.add.image(823,640,"berg","cone"),d,u,i,h,l,s,n],g=new e.rF(a);g.hoverCallback=()=>this.onAquaOver(),g.callback=()=>this.onAquaClick(),g.pixelPerfect=!0,new e.$X(a);const x=new e.tk(a);x.text="sub_hint";const y=new e.fw(n);y.key="speaker_",y.end=10,this.aqua=a,this.sort=p,this.events.emit("scene-awake")}get aquaFrame(){let o=this.aqua.frame.name;return parseInt(o.substr(o.length-4))}create(){super.create(),this.aqua.on("animationcomplete",o=>this.onAquaAnimComplete(o)),this.aqua.play("aqua_float")}onAquaAnimComplete(o){switch(o.key){case"aqua_lights_on":this.aqua.play("aqua_lights_float");break;case"aqua_open":this.aqua.play("aqua_float");break;default:break}}onAquaOver(){let o=this.aquaFrame;(o<=81||o>=400)&&this.aqua.play("aqua_lights_on")}onAquaClick(){let o=this.aquaFrame;(o<=180||o>=348)&&this.aqua.play("aqua_open")}}},6331:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Boiler"),this.drawer,this.roomTriggers={dance:()=>this.triggerRoom(120,935,520),cave:()=>this.triggerRoom(806,285,630)},this.roomAnims=!0,this.music="6"}_preload(){this.load.pack("boiler-pack","assets/media/rooms/boiler/boiler-pack.json")}_create(){this.add.image(0,-4,"boiler","bg").setOrigin(0,0);const a=this.add.image(590,365,"boiler","door");this.add.image(871,465,"boiler","cabinet");const s=this.add.sprite(264,194,"boiler","smoke0001"),n=this.add.sprite(830,396,"boiler","drawer0001");n.scaleX=1.2,n.scaleY=1.2;const l=this.add.rectangle(825,386,105,80);l.alpha=.5,l.isFilled=!0,l.fillColor=65280;const i=new e.zx(a);i.spriteName="door",i.activeFrame=!1;const h=new e.$X(a);h.x=600,h.y=525;const u=new e.fw(s);u.key="smoke",u.end=5;const d=new e.ld(l);d.hoverCallback=()=>this.onDrawerOver(),d.hoverOutCallback=()=>this.onDrawerOut(),this.drawer=n,this.events.emit("scene-awake")}onDrawerOver(){this.drawer.play("drawer_open")}onDrawerOut(){this.drawer.play("drawer_close")}}},9588:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Book"),this.sort,this.roomTriggers={coffee:()=>this.triggerRoom(110,1120,800)},this.music="MUS_Evergreen_KingofKingston_CoffeeShop"}_preload(){this.load.pack("book-pack","assets/media/rooms/book/book-pack.json")}_create(){this.add.image(0,-6,"book","bg").setOrigin(0,0);const a=this.add.image(241,267,"book","books");a.setOrigin(.35501355013550134,.28205128205128205);const s=this.add.image(175,590,"book","chair_back");s.setOrigin(.5052631578947369,.46808510638297873);const n=this.add.image(180,652,"book","chair_front");n.setOrigin(.5022026431718062,.5178571428571429);const l=this.add.image(132,722,"book","chair_table");l.setOrigin(.5069124423963134,.5103734439834025);const i=this.add.image(720,97,"book","poster");i.setOrigin(0,0);const h=this.add.image(951,446,"book","table");h.setOrigin(.5043478260869565,.46);const u=this.add.image(652,444,"book","table");u.setOrigin(.5043478260869565,.46);const d=this.add.image(426,646,"book","table");d.setOrigin(.5043478260869565,.46);const c=this.add.image(806,684,"book","table");c.setOrigin(.5043478260869565,.46);const p=this.add.image(1208,748,"book","table");p.setOrigin(.5043478260869565,.46);const g=[p,c,d,u,h,n,s,l],x=new e.zx(a);x.spriteName="books",x.activeFrame=!1;const y=new e.zx(i);y.spriteName="poster",y.activeFrame=!1,y.pixelPerfect=!0;const T=new e.zx(h);T.spriteName="table",T.activeFrame=!1,T.pixelPerfect=!0,new e.$X(h);const E=new e.tk(h);E.text="Coming Soon";const w=new e.zx(u);w.spriteName="table",w.activeFrame=!1,w.pixelPerfect=!0,new e.$X(u);const A=new e.tk(u);A.text="Coming Soon";const b=new e.zx(d);b.spriteName="table",b.activeFrame=!1,b.pixelPerfect=!0,new e.$X(d);const R=new e.tk(d);R.text="Coming Soon";const L=new e.zx(c);L.spriteName="table",L.activeFrame=!1,L.pixelPerfect=!0,new e.$X(c);const B=new e.tk(c);B.text="Coming Soon";const D=new e.zx(p);D.spriteName="table",D.activeFrame=!1,D.pixelPerfect=!0,new e.$X(p);const G=new e.tk(p);G.text="Coming Soon",this.sort=g,this.events.emit("scene-awake")}}},6986:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Cave"),this.sort,this.roomTriggers={boiler:()=>this.triggerRoom(804,610,620),plaza:()=>this.triggerRoom(300,582,588),mine:()=>this.triggerRoom(808,360,565)}}_preload(){this.load.pack("cave-pack","assets/media/rooms/cave/cave-pack.json")}_create(){this.add.image(515,265,"cave","window").setOrigin(0,0),this.add.image(0,-14,"cave","bg").setOrigin(0,0);const s=this.add.image(1360,743,"cave","ceiling");s.setOrigin(.8945998698763825,.9345911949685535);const n=this.add.image(-15,880,"cave","fg_1");n.setOrigin(0,1);const l=this.add.image(1381,830,"cave","fg_2");l.setOrigin(.06493506493506493,.46387832699619774);const i=this.add.image(0,960,"cave","fg_3");i.setOrigin(0,1),this.add.image(357,399,"cave","chair_back").setOrigin(0,0);const u=this.add.image(391,490,"cave","chair_front");u.setOrigin(.5909090909090909,.7115384615384616);const d=this.add.image(104,291,"cave","door");d.setOrigin(0,0),this.add.image(376,288,"cave","ring").setOrigin(0,0),this.add.image(669,455,"cave","board_1").setOrigin(0,0);const g=this.add.image(930,440,"cave","board_1");g.angle=10,g.setOrigin(0,0),this.add.image(693,457,"cave","board_2").setOrigin(0,0);const y=this.add.image(349,756,"cave","ladder_back");y.setOrigin(.5068493150684932,.5);const T=this.add.image(317,778,"cave","ladder_front"),E=this.add.image(813,639,"cave","water/water_1");E.setOrigin(.5,2.8333333333333335);const w=this.add.image(811,656,"cave","water/water_2");w.setOrigin(.5,1.8571428571428572);const A=this.add.image(809,677,"cave","water/water_3");A.setOrigin(.5,1.8571428571428572);const b=this.add.image(807,698,"cave","water/water_4");b.setOrigin(.5006675567423231,1.8571428571428572);const R=this.add.image(805,719,"cave","water/water_5");R.setOrigin(.5006385696040868,1.8571428571428572);const L=this.add.image(803,740,"cave","water/water_6");L.setOrigin(.5,1.8571428571428572);const B=this.add.image(801,761,"cave","water/water_7");B.setOrigin(.5,1.8571428571428572);const D=this.add.image(799,782,"cave","water/water_8");D.setOrigin(.5,1.8571428571428572);const G=this.add.image(798,803,"cave","water/water_9");G.setOrigin(.5,1.8571428571428572);const X=this.add.image(797,824,"cave","water/water_10");X.setOrigin(.5005313496280552,1.8571428571428572);const H=this.add.image(796,845,"cave","water/water_11");H.setOrigin(.5,1.8571428571428572);const K=this.add.image(807,724,"cave","line");K.setOrigin(.5006337135614702,2.0555555555555554);const $=this.add.rectangle(1319,295,115,400);$.alpha=.5,$.isFilled=!0,$.fillColor=65280;const N=[K,H,X,G,D,B,L,R,b,A,w,E,T,y,u,l,s,i,n],I=new e.zx(d);I.spriteName="door",I.activeFrame=!1;const z=new e.$X(d);z.x=190,z.y=600;const U=new e.ld($);U.callback=()=>this.onZoneClick(),this.sort=N,this.events.emit("scene-awake")}onZoneClick(){this.world.client.penguin.move(1266,572)}}},3301:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("CaveMine"),this.waterfall,this.snowball,this.hitbox,this.sort,this.roomTriggers={mine:()=>this.triggerRoom(808,816,408),lake:()=>this.triggerRoom(814,192,588),item:()=>this.interface.prompt.showItem(429)},this.music="CM_Ambient"}_preload(){this.load.pack("cavemine-pack","assets/media/rooms/cavemine/cavemine-pack.json")}_create(){this.add.image(113,-112,"cavemine","bg_2").setOrigin(0,0);const a=this.add.sprite(1248,290,"cavemine","waterfall_0001"),s=this.add.sprite(1213,124,"cavemine","fall1_0001");s.scaleX=.7,s.scaleY=.7;const n=this.add.sprite(1228,243,"cavemine","fall3_0001");n.scaleX=.5,n.scaleY=.5;const l=this.add.sprite(1226,348,"cavemine","steam1_0001");this.add.image(0,0,"cavemine","bg_1").setOrigin(0,0),this.add.image(62,274,"cavemine","fg_6"),this.add.image(695,93,"cavemine","fg_5").setOrigin(0,0);const u=this.add.sprite(933,222,"cavemine","snowballmachine_0001");this.add.image(1084,289,"cavemine","machine"),this.add.image(1077,242,"cavemine","bulb2_0002"),this.add.image(1079,165,"cavemine","bulb1_0004"),this.add.image(491,239,"cavemine","deck"),this.add.image(1047,204,"cavemine","bulb3_0002");const d=this.add.image(337,173,"cavemine","coffee");d.setOrigin(.7779379689250946,.7873927107574689),this.add.image(1145,209,"cavemine","bulb3_0002"),this.add.image(1126,226,"cavemine","bulb3_0002"),this.add.image(1024,217,"cavemine","bulb3_0002");const c=this.add.image(475,137,"cavemine","chair");this.add.image(742,402.7820498459735,"cavemine","fg_1").setOrigin(.5,.584035511823228),this.add.image(268,235.39444776787897,"cavemine","railing_2").setOrigin(.5,.787108304716397),this.add.image(135,470.6124789727397,"cavemine","support").setOrigin(.5,.9479114188846377);const y=this.add.image(443,234.6963563476706,"cavemine","railing_1");y.setOrigin(.5,.6985994101036566),this.add.image(82,396,"cavemine","fg_3");const T=this.add.image(434,618,"cavemine","sign");T.setOrigin(.58282,.75349);const E=this.add.image(906.4269304551663,572.3410034179688,"cavemine","shovel");E.setOrigin(.4285559476902477,.6793958944630657);const w=this.add.image(1355,812,"cavemine","desk");this.add.image(0,737,"cavemine","fg_4").setOrigin(0,0);const b=this.add.sprite(1289,243,"cavemine","fall4_0001");b.scaleX=.5,b.scaleY=.5;const R=this.add.image(558,128,"cavemine","chair_2"),L=this.add.sprite(1283,123,"cavemine","fall2_0001");L.scaleX=.7,L.scaleY=.7;const B=this.add.image(777,477,"cavemine","fg_2");this.add.image(790,18,"cavemine","hanging");const D=this.add.rectangle(938,135,128,128);D.scaleX=1.64858254167513,D.fillColor=59904,D.fillAlpha=100;const G=[T,E,w,c,R,d,B,y],X=new e.fw(a);X.key="waterfall_",X.end=30;const H=new e.fw(s);H.key="fall1_",H.end=12;const K=new e.fw(n);K.key="fall3_",K.end=12;const $=new e.fw(l);$.key="steam1_",$.end=12;const N=new e.fw(u);N.key="snowballmachine_",N.end=11,N.repeat=0,N.autoPlay=!1;const I=new e.zx(T);I.spriteName="sign",I.callback=()=>this.interface.showBook("dig_poster"),I.activeFrame=!1;const z=new e.fw(b);z.key="fall4_",z.end=12;const U=new e.fw(L);U.key="fall2_",U.end=12,this.waterfall=a,this.snowball=u,this.hitbox=D,this.sort=G,this.events.emit("scene-awake")}create(){super.create(),this.bounds=this.hitbox.getBounds(),this.snowball.on("animationcomplete",()=>this.onSnowballAnimComplete())}onSnowballComplete(o,a){this.bounds.contains(o,a)&&this.snowball.__Animation.play()}onSnowballAnimComplete(){this.snowball.setFrame("snowballmachine_0001")}}},9051:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Coffee"),this.board,this.sort,this.roomTriggers={town:()=>this.triggerRoom(100,580,520),beans:()=>this.triggerGame(901),book:()=>this.triggerRoom(111,1200,580),pin:()=>this.interface.prompt.showItem(35005)},this.roomAnims=!0,this.music="MUS_Evergreen_KingofKingston_CoffeeShop",this.boardToggle=!0}_preload(){this.load.pack("coffee-pack","assets/media/rooms/coffee/coffee-pack.json")}_create(){this.add.image(0,-7,"coffee","bg").setOrigin(0,0),this.add.image(379,593,"coffee","shadow-1");const a=this.add.image(1277,538,"coffee","light"),s=this.add.sprite(1069,358,"coffee","board0001");this.add.image(1008,531,"coffee","desk");const n=this.add.image(1261,834,"coffee","table");n.setOrigin(.5217391304347826,.5368421052631579);const l=this.add.image(1007,648,"coffee","beans");l.setOrigin(.30588,.58537);const i=this.add.image(783,257,"coffee","door");this.add.image(346,405,"coffee","construction_1"),this.add.image(260,479,"coffee","wire");const h=this.add.image(373.3152226522499,785.8477734775013,"coffee","construction_2");h.setOrigin(.5102443480188047,.35346692074367897),this.add.image(430,508,"coffee","shadow");const u=this.add.image(397,454,"coffee","construction_7"),d=this.add.image(562,410.5634388512902,"coffee","construction_9");d.setOrigin(.5,.7277970152999189),this.add.image(286,520,"coffee","papers"),this.add.image(434,535,"coffee","plank");const c=this.add.image(422,690.6983154541672,"coffee","construction_4");c.setOrigin(.5,.6449719242361198);const p=this.add.image(473,710.745788635418,"coffee","construction_3");p.setOrigin(.5,.747111234493386),this.add.image(512,739,"coffee","paintbrush"),this.add.image(104,818,"coffee","construction_5");const g=this.add.image(44.364169891874084,729.3426306773695,"coffee","plant");g.setOrigin(.7117581694130986,.8945416879302227);const x=this.add.image(805,794,"coffee","construction_8"),y=this.add.image(621.7657744552785,747.2744473653001,"coffee","chair_1");y.setOrigin(.5433251329578876,.5021112230806046);const T=this.add.image(979.6736708950727,773.4312466817064,"coffee","chair_2");T.setOrigin(.4152152040901507,.5110097808223635);const E=this.add.image(867.2295491616368,458.1894786531513,"coffee","counter_2");E.setOrigin(.5870507686948587,.8526635273902446);const w=this.add.image(836,600,"coffee","counter_1");w.setOrigin(.5,.8003561344218307),this.add.image(1058,203,"coffee","hanging_light"),this.add.image(192,176,"coffee","light_1"),this.add.image(391,54,"coffee","light_3");const A=this.add.sprite(895,249,"coffee","smoke_0001"),b=this.add.image(1404,802,"coffee","couch");b.flipX=!0,this.add.image(1365,248,"coffee","light_2"),this.add.image(1007,410,"coffee","coffeemachine"),this.add.image(1033,420,"coffee","utensils"),this.add.image(136,910,"coffee","plank_2");const R=this.add.image(888,631,"coffee","stand_2"),L=this.add.image(864,638,"coffee","stand_1"),B=this.add.rectangle(474,375,50,50);B.isFilled=!0,B.fillColor=2799125,B.fillAlpha=.7;const D=this.add.image(251.3095799032136,619.7917648306238,"coffee","construction_6");D.setOrigin(.8332335290050992,.9323730991608219);const G=[l,n,w,T,y,E,u,d,L,R,c,p,h,x,g,D],X=new e.zx(a);X.spriteName="light",X.activeFrame=!1;const H=new e.$X(a);H.x=1280,H.y=750;const K=new e.rF(s);K.callback=()=>this.onBoardClick();const $=new e.zx(l);$.spriteName="beans",$.activeFrame=!1,$.pixelPerfect=!0,new e.$X(l);const N=new e.tk(l);N.text="beans_hint";const I=new e.zx(i);I.spriteName="door",I.activeFrame=!1,I.pixelPerfect=!0;const z=new e.$X(i);z.x=750,z.y=392;const U=new e.fw(A);U.key="smoke_",U.end=5;const W=new e.lO(B);W.id=35005,this.board=s,this.sort=G,this.events.emit("scene-awake")}onBoardClick(){let o=this.boardToggle?"board1":"board2";this.board.play(o),this.boardToggle=!this.boardToggle}}},4334:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Cove"),this.sort,this.roomTriggers={forest:()=>this.triggerRoom(809,1190,750),waves:()=>this.triggerGame(912)},this.music="377"}_preload(){this.load.pack("cove-pack","assets/media/rooms/cove/cove-pack.json")}_create(){this.add.image(-2,-15,"cove","bg").setOrigin(0,0),this.add.image(-5,5,"cove","cliff_1").setOrigin(0,0);const s=this.add.image(1109,673,"cove","water/water_15");s.setOrigin(.5011135857461024,2.909090909090909);const n=this.add.image(1034,695,"cove","water/water_14");n.setOrigin(.5,1.9545454545454546);const l=this.add.image(1002,717,"cove","water/water_13");l.setOrigin(.5006993006993007,1.9545454545454546);const i=this.add.image(995,739,"cove","water/water_12");i.setOrigin(.5,1.9545454545454546);const h=this.add.image(1011,761,"cove","water/water_11");h.setOrigin(.5005662514156285,1.9545454545454546);const u=this.add.image(1031,783,"cove","water/water_10");u.setOrigin(.5005045408678103,1.9545454545454546);const d=this.add.image(1024,805,"cove","water/water_9");d.setOrigin(.5,1.9545454545454546);const c=this.add.image(1014,827,"cove","water/water_8");c.setOrigin(.5,1.65625);const p=this.add.image(1008,849,"cove","water/water_7");p.setOrigin(.5004821600771456,1.9545454545454546);const g=this.add.image(1008,871,"cove","water/water_6");g.setOrigin(.5004812319538018,1.9545454545454546);const x=this.add.image(1018,893,"cove","water/water_5");x.setOrigin(.5,1.9545454545454546);const y=this.add.image(1026,915,"cove","water/water_4");y.setOrigin(.5005015045135406,1.9545454545454546);const T=this.add.image(1005,937,"cove","water/water_3");T.setOrigin(.5,1.9545454545454546);const E=this.add.image(1005,959,"cove","water/water_2");E.setOrigin(.5,1.9545454545454546);const w=this.add.image(1005,981,"cove","water/water_1");w.setOrigin(.5,1.9545454545454546);const A=this.add.image(1326,423,"cove","hut");A.setOrigin(.5537459283387622,.43842364532019706);const b=this.add.image(1440,545,"cove","hut_wall");b.setOrigin(.5210526315789473,.8577777777777778);const R=this.add.image(1101,485,"cove","boards");R.setOrigin(.502262443438914,.8586956521739131);const L=this.add.image(461,884,"cove","rock_1");L.setOrigin(.456,.6329113924050633);const B=this.add.image(-12,963,"cove","fg");B.setOrigin(0,1),this.add.image(108,285,"cove","log_1").setOrigin(0,0);const G=this.add.sprite(435,600,"cove","fire0001");G.setOrigin(.5029239766081871,.7318840579710145);const X=this.add.image(633,283,"cove","chair_arm");X.setOrigin(.40298507462686567,.7115384615384616);const H=this.add.image(651,300,"cove","binoculars0001");H.setOrigin(1.0597014925373134,1.1666666666666667);const K=this.add.image(1463,557,"cove","silver_board");K.setOrigin(.5167785234899329,.8613445378151261);const $=this.add.image(1497,583,"cove","rock_4");$.setOrigin(.5094339622641509,.5423728813559322);const N=this.add.image(1292,697,"cove","rock_2");N.setOrigin(.4935064935064935,.6458333333333334);const I=this.add.image(1447,690,"cove","rock_3");I.setOrigin(.5588235294117647,.5949367088607594),this.add.image(1310,493,"cove","hut_stool").setOrigin(.5,.5185185185185185);const U=this.add.image(1358,1050,"cove","catalog");U.setOrigin(0,2),this.add.image(826,484,"cove","shadow");const W=this.add.image(752.4066353453244,494.5829418165552,"cove","box1");W.setOrigin(.5254226518307791,.74614417235003);const V=this.add.image(912.6649295269799,439.698106253602,"cove","box2");V.setOrigin(.5696811775179992,.7147661413356697);const Z=[s,w,E,T,y,x,g,p,c,d,u,h,i,l,n,b,R,L,G,X,H,K,I,N,$,B,U,W,V],J=new e.zx(A);J.spriteName="hut",J.activeFrame=!1;const tt=new e.$X(A);tt.x=1250,tt.y=500;const st=new e.fw(G);st.key="fire",st.end=10;const at=new e.zx(U);at.spriteName="catalog",at.callback=()=>this.interface.showBook("cove"),at.activeFrame=!1,at.pixelPerfect=!0,this.sort=Z,this.events.emit("scene-awake")}}},7005:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Dance"),this.boiler_door,this.table,this.dance_poster,this.puffle,this.dj_speaker_sound,this.dj_mixer_wave,this.dj_mixer_tables_under,this.dj_mixer_tables,this.dj_mixer_lights,this.dj_mixer_slider,this.dj_box_headphones_back,this.dj_box_sliders,this.dj_box_lights,this.dj_box_headphones_front,this.sort,this.animate,this.roomTriggers={town:()=>this.triggerRoom(100,680,520),boiler:()=>this.triggerRoom(804,1125,675),lounge:()=>this.triggerRoom(121,1200,760),dance:()=>this.triggerGame(952),mix:null},this.roomAnims=!0,this.music="MUS_Evergreen_CrossingOver_NightClub"}_preload(){this.load.pack("dance-pack","assets/media/rooms/dance/dance-pack.json")}_create(){this.add.image(760,480,"dance","bg"),this.add.image(1284,726,"dance","wire").setOrigin(.5,.5070422535211268),this.add.image(646,696,"dance","floor/frame").setOrigin(.5006273525721455,.5);const s=this.add.sprite(646,693,"dance","floor/floor0001");this.add.image(660,388,"dance","stage").setOrigin(.5008576329331046,.5028248587570622),this.add.image(217,32,"dance","fg/fg_wire").setOrigin(.5106382978723404,.5063291139240507);const i=this.add.sprite(268,151,"dance","fg/fg_speaker_10001"),h=this.add.sprite(170,131,"dance","fg/fg_speaker_20001");h.setOrigin(.503448275862069,.5026455026455027);const u=this.add.image(1130,32,"dance","fg/fg_wire");u.setOrigin(.5106382978723404,.5063291139240507),u.flipX=!0;const d=this.add.sprite(1080,151,"dance","fg/fg_speaker_10001");d.flipX=!0;const c=this.add.image(119,827,"dance","speaker_3");c.setOrigin(.5297297297297298,.8456140350877193);const p=this.add.sprite(1178,131,"dance","fg/fg_speaker_20001");p.setOrigin(.503448275862069,.5026455026455027),p.flipX=!0;const g=this.add.sprite(350,424,"dance","speaker_10001");g.setOrigin(.5655737704918032,.770949720670391),this.add.image(1457,227,"dance","lamp").setOrigin(.5045045045045045,.5),this.add.image(154,434,"dance","door/behind");const y=this.add.sprite(154,440,"dance","door/door0001");y.setOrigin(.5,.5016722408026756),this.add.image(152,437,"dance","door/frame").setOrigin(.5031446540880503,.5);const E=this.add.sprite(666,94,"dance","lights/lights0001"),w=this.add.image(1361,433,"dance","stairs");w.setOrigin(.5026455026455027,.5010141987829615);const A=this.add.container(979.3584381110322,418.96573398979467),b=this.add.sprite(.6415522983123765,-.9657361633013579,"dance","speaker_10001");b.setOrigin(.5655737704918032,.770949720670391),b.flipX=!0,A.add(b);const R=this.add.image(25.641552298312376,-51.96573616330136,"dance","boiler-hover");R.setOrigin(.5,.4236453201970443),R.flipX=!0,R.visible=!1,A.add(R);const L=this.add.sprite(1123,415,"dance","table/table0001"),B=this.add.image(1169,363,"dance","dance-poster"),D=this.add.container(1164,735.5295257801258),G=this.add.image(2,1.4705234832657652,"dance","speaker_4");G.setOrigin(.45918367346938777,.8421052631578947),D.add(G);const X=this.add.sprite(0,-199.52947651673423,"dance","puffle/puffle0001");X.setOrigin(.5,.7933884297520661),D.add(X);const H=this.add.container(790.7929422877853,305.10866987575673),K=this.add.image(1.2070577122146915,-.10866987575673193,"dance","dj/speaker");K.setOrigin(.4,.6923076923076923),H.add(K);const $=this.add.sprite(6.2070577122146915,-39.10866987575673,"dance","dj/speaker_sound0001");$.setOrigin(.5,.5061728395061729),H.add($);const N=this.add.container(656.758588457557,340.0371580227643),I=this.add.image(0,12,"dance","dj/mixer/wave/green");N.add(I);const z=this.add.sprite(0,12,"dance","dj/mixer/wave/wave0001");N.add(z);const U=this.add.image(.24141154244296104,2.962841977235712,"dance","dj/mixer/mixer");N.add(U);const W=this.add.sprite(1.241411542442961,-4.037158022764288,"dance","dj/mixer/tables/tables_under0001");W.setOrigin(.5027027027027027,.5128205128205128),N.add(W);const V=this.add.sprite(.24141154244296104,-7.037158022764288,"dance","dj/mixer/tables/tables0001");V.setOrigin(.5,.5161290322580645),N.add(V);const Z=this.add.sprite(.24141154244296104,-20.037158022764288,"dance","dj/mixer/lights/lights0001");N.add(Z);const J=this.add.sprite(.24141154244296104,-20.037158022764288,"dance","dj/mixer/slider/slider0001");N.add(J);const tt=this.add.image(5.241411542442961,29.962841977235712,"dance","dj/wires");tt.setOrigin(.5014836795252225,.5050505050505051),N.add(tt);const st=this.add.container(520.6001395292443,310.6122881275866),at=this.add.sprite(-52.600168515674795,-58.61229112964787,"dance","dj/box/headphones/back0001");at.setOrigin(.5135135135135135,.5),st.add(at);const lt=this.add.image(1.3998314843252047,2.387708870352128,"dance","dj/box/box");lt.setOrigin(.5,.75),st.add(lt);const ut=this.add.sprite(30.399831484325205,2.387708870352128,"dance","dj/box/sliders/sliders0001");ut.setOrigin(.5,.5151515151515151),st.add(ut);const mt=this.add.sprite(43.399831484325205,-44.61229112964787,"dance","dj/box/lights/lights0001");mt.setOrigin(.5,.5072463768115942),st.add(mt);const dt=this.add.sprite(-26.600168515674795,-70.61229112964787,"dance","dj/box/headphones/front0001");dt.setOrigin(.5,.509090909090909),st.add(dt);const xt=this.add.rectangle(1164,537,60,50);xt.alpha=.5,xt.isFilled=!0,xt.fillColor=65280;const Tt=this.add.rectangle(1093,472,120,140);Tt.angle=-32.00000000000006,Tt.alpha=.5,Tt.isFilled=!0,Tt.fillColor=65280;const Ct=this.add.rectangle(1162,364,110,245);Ct.angle=10,Ct.alpha=.5,Ct.isFilled=!0,Ct.fillColor=65280;const Et=this.add.rectangle(978,382,100,150);Et.angle=15,Et.alpha=.5,Et.isFilled=!0,Et.fillColor=65280;const vt=[c,g,A,st,H,N,D],It=[dt,mt,J,Z,V,W,$,at],Pt=new e.fw(s);Pt.key="floor/floor",Pt.end=60;const Rt=new e.fw(i);Rt.key="fg/fg_speaker_1",Rt.end=10;const Jt=new e.fw(h);Jt.key="fg/fg_speaker_2",Jt.end=10;const qt=new e.fw(d);qt.key="fg/fg_speaker_1",qt.end=10;const zt=new e.fw(p);zt.key="fg/fg_speaker_2",zt.end=10;const Nt=new e.fw(g);Nt.key="speaker_1",Nt.end=10,new e.rF(y);const Vt=new e.fw(y);Vt.key="door/door",Vt.end=5,Vt.repeat=0,Vt.autoPlay=!1,Vt.onHover=!0;const $t=new e.$X(y);$t.x=220,$t.y=540;const Wt=new e.fw(E);Wt.key="lights/lights",Wt.end=80;const de=new e.zx(w);de.spriteName="stairs",de.activeFrame=!1;const Ce=new e.$X(w);Ce.x=1324,Ce.y=769;const ve=new e.fw(b);ve.key="speaker_1",ve.end=10;const pe=new e.fw(L);pe.key="table/table",pe.end=55,pe.repeat=0,pe.autoPlay=!1;const me=new e.fw($);me.key="dj/speaker_sound",me.end=2,me.repeatDelay=250,me.autoPlay=!1;const Oe=new e.fw(W);Oe.key="dj/mixer/tables/tables_under",Oe.end=23,Oe.autoPlay=!1;const q=new e.fw(V);q.key="dj/mixer/tables/tables",q.end=6,q.autoPlay=!1;const ot=new e.fw(Z);ot.key="dj/mixer/lights/lights",ot.end=23,ot.autoPlay=!1;const pt=new e.fw(J);pt.key="dj/mixer/slider/slider",pt.end=23,pt.autoPlay=!1;const ct=new e.fw(at);ct.key="dj/box/headphones/back",ct.end=30,ct.autoPlay=!1;const St=new e.rF(lt);St.hoverCallback=()=>this.onBoxOver(),St.hoverOutCallback=()=>this.onBoxOut();const wt=new e.$X(lt);wt.x=520,wt.y=300;const Ft=new e.fw(mt);Ft.key="dj/box/lights/lights",Ft.end=30,Ft.autoPlay=!1;const Yt=new e.fw(dt);Yt.key="dj/box/headphones/front",Yt.end=30,Yt.autoPlay=!1;const Ht=new e.ld(xt);Ht.hoverCallback=()=>this.onPuffleOver();const ne=new e.ld(Tt);ne.hoverCallback=()=>this.onDanceOver(),ne.hoverOutCallback=()=>this.onDanceOut(),ne.callback=()=>this.world.client.penguin.move(1025,535);const ee=new e.ld(Ct);ee.hoverCallback=()=>this.onDanceOver(),ee.hoverOutCallback=()=>this.onDanceOut(),ee.callback=()=>this.world.client.penguin.move(1025,535);const ge=new e.ld(Et);ge.hoverCallback=()=>this.onBoilerOver(),ge.hoverOutCallback=()=>this.onBoilerOut(),ge.callback=()=>this.world.client.penguin.move(960,420),this.boiler_door=R,this.table=L,this.dance_poster=B,this.puffle=X,this.dj_speaker_sound=$,this.dj_mixer_wave=z,this.dj_mixer_tables_under=W,this.dj_mixer_tables=V,this.dj_mixer_lights=Z,this.dj_mixer_slider=J,this.dj_box_headphones_back=at,this.dj_box_sliders=ut,this.dj_box_lights=mt,this.dj_box_headphones_front=dt,this.sort=vt,this.animate=It,this.events.emit("scene-awake")}create(){super.create(),this.puffle.on("animationcomplete",()=>this.onPuffleAnimComplete()),this.dj_box_sliders.on("animationcomplete",()=>this.onSlidersAnimComplete()),this.dj_mixer_wave.on("animationcomplete",()=>this.onWaveAnimComplete()),this.puffle.play("dj_puffle_idle")}onPuffleAnimComplete(){this.puffle.play("dj_puffle_idle")}onSlidersAnimComplete(){this.dj_box_sliders.play("dj_sliders_move")}onWaveAnimComplete(){this.dj_mixer_wave.play("dj_wave_move")}onPuffleOver(){this.puffle.play("dj_puffle_jump")}onBoxOver(){for(let o of this.animate)o.__Animation.play();this.dj_box_sliders.play("dj_sliders_on"),this.dj_mixer_wave.play("dj_wave_on")}onBoxOut(){for(let o of this.animate)o.__Animation.stop();this.dj_box_sliders.stop(),this.dj_mixer_wave.stop(),this.dj_box_sliders.setFrame("dj/box/sliders/sliders0001"),this.dj_mixer_wave.setFrame("dj/mixer/wave/wave0001")}onBoilerOver(){this.boiler_door.setVisible(!0)}onBoilerOut(){this.boiler_door.setVisible(!1)}onDanceOver(){this.dance_poster.setFrame("dance-poster-hover"),this.table.__Animation.play()}onDanceOut(){this.dance_poster.setFrame("dance-poster"),this.table.__Animation.stop()}}},6652:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Dock"),this.boat,this.rings,this.sort,this.roomTriggers={beach:()=>this.triggerRoom(400,950,430),village:()=>this.triggerRoom(200,1300,760),town:()=>this.triggerRoom(100,368,640),hydro:()=>this.triggerGame(903)}}_preload(){this.load.pack("dock-pack","assets/media/rooms/dock/dock-pack.json")}_create(){this.add.image(-48,0,"dock","bg").setOrigin(0,0);const a=this.add.image(443,592,"dock","post_1");a.setOrigin(.55,.54782609);const s=this.add.sprite(231,639,"dock","boat");s.setOrigin(.49477351916376305,.5091743119266054);const n=this.add.image(187,593,"dock","dock");n.setOrigin(0,0);const l=this.add.image(572,619,"dock","post_2");l.setOrigin(.43243243243243246,.49137931034482757);const i=this.add.image(367,882,"dock","post_3");i.setOrigin(.5384615384615384,.806282722513089);const h=this.add.image(164,832,"dock","post_4");h.setOrigin(.4943820224719101,.7960526315789473);const u=this.add.image(434,652,"dock","box");u.setOrigin(.4915254237288136,.7142857142857143);const d=this.add.image(353,689,"dock","bollard_1");d.setOrigin(.5,.9302325581395349);const c=this.add.image(279,732,"dock","bollard_2");c.setOrigin(.5,.9215686274509803);const p=this.add.sprite(632,668,"dock","rings0001");p.setOrigin(.4975124378109453,.8127659574468085),this.add.image(1366,270,"dock","right_sign"),this.add.image(120,345,"dock","left_sign");const g=this.add.image(740,746,"dock","boards");g.setOrigin(.5,.7721088435374149);const x=this.add.rectangle(631,633,135,160);x.alpha=.5,x.isFilled=!0,x.fillColor=65280;const y=this.add.image(1362,1052,"dock","catalog");y.setOrigin(0,2),this.add.image(772,294,"dock","shadow_1"),this.add.image(777,238,"dock","construction_1");const T=this.add.image(704,234,"dock","pylon"),E=this.add.image(890,182,"dock","pylon");this.add.image(908,529,"dock","shadow_2");const w=this.add.image(864,549.2025152173045,"dock","construction_4");w.setOrigin(.5,.792030587874669);const A=this.add.image(661,450.22150413871753,"dock","construction_3");A.setOrigin(.5,.8535943656523115);const b=this.add.image(1100,571.2404930601306,"dock","construction_2");b.setOrigin(.5,.7672366652134605);const R=[i,h,a,l,p,c,d,n,u,g,y,A,w,b,T,E],L=new e.zx(s);L.spriteName="boat",L.activeFrame=!1,L.pixelPerfect=!0,new e.$X(s);const B=new e.tk(s);B.text="hydro_hint";const D=new e.fw(p);D.key="rings",D.end=34,D.repeat=0,D.autoPlay=!1,D.stopOnOut=!1;const G=new e.ld(x);G.hoverCallback=()=>this.onRingsOver();const X=new e.zx(y);X.spriteName="catalog",X.callback=()=>this.interface.showBook("dock"),X.activeFrame=!1,X.pixelPerfect=!0,this.boat=s,this.rings=p,this.sort=R,this.events.emit("scene-awake")}create(){super.create(),this.up=!1,this.time.addEvent({delay:1500,callback:()=>this.floatBoat(),loop:!0})}onRingsOver(){this.rings.__Animation.play()}floatBoat(){let o=this.up?-2:2;this.boat.y+=o,this.up=!this.up}}},7235:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Dojo"),this.sort,this.roomTriggers={dojoext:()=>this.triggerRoom(321,703,354,0),hardhat:()=>this.interface.prompt.showItem(429)}}_preload(){this.load.pack("dojo-pack","assets/media/rooms/dojo/dojo-pack.json")}_create(){this.add.image(0,0,"dojo","bg").setOrigin(0,0);const a=this.add.image(358,420,"dojo","door");a.setOrigin(0,0);const s=this.add.image(1045,416,"dojo","support_4");s.setOrigin(0,0);const n=this.add.image(1164,412,"dojo","support_3");n.setOrigin(0,0);const l=this.add.image(805.2061590478318,590.3622003271682,"dojo","support_2");l.setOrigin(.22484433674784376,.5699150719065776);const i=this.add.image(890.0245723131086,686.3886701001799,"dojo","support_1");i.setOrigin(.7110254879946294,.6691648772996706);const h=this.add.image(752.5689049635082,698.7090005292246,"dojo","hardhat");h.setOrigin(.45009495051776716,.32462733262518556),this.add.image(1044,735,"dojo","wood_3").setOrigin(0,0),this.add.image(219,731,"dojo","wood_4").setOrigin(0,0),this.add.image(-30,450,"dojo","wood_5").setOrigin(0,0);const p=this.add.image(219.47068330493067,658.5493500737246,"dojo","wood_1");p.setOrigin(.6932331092310403,.8087723520057349);const g=this.add.image(289.27293663534977,607.5992757310966,"dojo","wood_2");g.setOrigin(.7210964638602259,.8274388292860962),this.add.image(1341,556,"dojo","construction_cone").setOrigin(0,0);const y=this.add.image(679.2062078967069,571.7939204598467,"dojo","construction_sign");y.setOrigin(.5871872271663708,.7214915880882201);const T=this.add.image(1113.0144326096447,380.7282787526866,"dojo","railings");T.setOrigin(.9028969475985572,.8890942651168503);const E=[h,i,l,s,n,p,g,y,T],w=new e.zx(a);w.spriteName="door",w.activeFrame=!1,w.pixelPerfect=!0;const A=new e.$X(a);A.x=405,A.y=580,this.sort=E,this.events.emit("scene-awake")}}},4974:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("DojoExt"),this.sort,this.roomTriggers={dojo:()=>this.triggerRoom(320,516,236)}}_preload(){this.load.pack("dojoext-pack","assets/media/rooms/dojoext/dojoext-pack.json")}_create(){this.add.image(1520,960,"dojoext","bg").setOrigin(1,1);const a=this.add.image(467,182,"dojoext","light");a.setOrigin(0,0),this.add.image(0,0,"dojoext","dojo").setOrigin(0,0);const n=this.add.image(740.643114054548,744.4301129308312,"dojoext","fg");n.setOrigin(.47721849649924253,.7333695962520258);const l=this.add.sprite(1374,760.7411305488773,"dojoext","sensei_0001");l.setOrigin(.5,3.354744456245813);const i=[n,l],h=new e.zx(a);h.spriteName="light",h.activeFrame=!1;const u=new e.$X(a);u.x=560,u.y=240;const d=new e.fw(l);d.key="sensei_",d.end=14,d.repeatDelay=500,this.sort=i,this.events.emit("scene-awake")}}},6585:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Eco"),this.machine2,this.machine1,this.bulb,this.computer,this.machine,this.switchbox,this.lever,this.button,this.light,this.sort,this.roomTriggers={shack:()=>this.triggerRoom(807,160,520)}}_preload(){this.load.pack("eco-pack","assets/media/rooms/eco/eco-pack.json")}_create(){this.add.image(0,0,"eco","bg").setOrigin(0,0);const a=this.add.sprite(735,271,"eco","machine2_0001"),s=this.add.sprite(175,231,"eco","machine_0001");this.add.image(832,438,"eco","box");const n=this.add.sprite(45,240,"eco","bulb_0001"),l=this.add.image(909,844,"eco","boxes"),i=this.add.sprite(1348,790,"eco","desk_0001");this.add.image(1396,883,"eco","chair_1");const h=this.add.image(1426,889.5,"eco","chair_2");h.setOrigin(.5,1);const u=this.add.sprite(1379,798.6138578934509,"eco","computer_0001");u.setOrigin(.5,1);const d=this.add.sprite(377.5345153808594,730.0662841796875,"eco","machine3_0001");d.setOrigin(.7230395942579695,.9268360690635601),this.add.image(351,824,"eco","stool");const c=this.add.image(40,731,"eco","sink"),p=this.add.image(60,422,"eco","shack_door"),g=this.add.sprite(1102,143,"eco","indicator_0001");this.add.image(1366,430,"eco","platform");const x=this.add.image(1322,428.99999717805656,"eco","bar_2"),y=this.add.image(1337,163,"eco","railing_3"),T=this.add.image(1298,238,"eco","bar_3"),E=this.add.sprite(1477,118,"eco","switchbox_0001"),w=this.add.image(1387,523,"eco","bar_1"),A=this.add.image(1382.8037145587941,538.5516015321259,"eco","railing_1");A.setOrigin(.4474146576584225,.5153346810659594);const b=this.add.image(1304,439.2065816499978,"eco","railing_2");b.setOrigin(.5,.751155921345855);const R=this.add.sprite(823,417,"eco","lever_0001"),L=this.add.sprite(843,426,"eco","redbutton_0001"),B=this.add.sprite(841,401,"eco","light_0001"),D=this.add.rectangle(1378,684,128,128);D.scaleX=.7959670388975684,D.scaleY=.7646293677648471,D.fillColor=2883382,D.fillAlpha=100;const G=this.add.rectangle(1462,183,128,128);G.scaleX=.7959670388975684,G.scaleY=1.0974511803380387,G.fillColor=2883382,G.fillAlpha=100;const X=this.add.rectangle(843,426,128,128);X.scaleX=.24659862473830696,X.scaleY=.23785316902055723,X.fillColor=2883382,X.fillAlpha=100;const H=this.add.rectangle(807,408,128,128);H.scaleX=.28650371711146083,H.scaleY=.566794917192315,H.fillColor=2883382,H.fillAlpha=100;const K=this.add.image(41,927,"eco","trashcan"),$=[X,B,d,c,K,l,i,D,h,u,A,y,b,T,x,w,L],N=new e.fw(a);N.key="machine2_",N.end=2,N.autoPlay=!1;const I=new e.fw(s);I.key="machine_",I.end=3,I.autoPlay=!1;const z=new e.fw(n);z.key="bulb_",z.end=35,z.autoPlay=!1;const U=new e.fw(i);U.key="desk_",U.end=20;const W=new e.fw(u);W.key="computer_",W.end=16,W.frameRate=22,W.repeat=0,W.autoPlay=!1;const V=new e.fw(d);V.key="machine3_",V.end=3,V.repeat=0,V.autoPlay=!1;const Z=new e.zx(p);Z.spriteName="shack_door",Z.activeFrame=!1;const J=new e.$X(p);J.x=112,J.y=512;const tt=new e.fw(g);tt.key="indicator_",tt.end=200;const st=new e.fw(E);st.key="switchbox_",st.end=16,st.repeat=0,st.autoPlay=!1;const at=new e.fw(R);at.key="lever_",at.end=20,at.repeat=0,at.autoPlay=!1;const lt=new e.fw(L);lt.key="redbutton_",lt.end=9,lt.repeat=0,lt.autoPlay=!1;const ut=new e.fw(B);ut.key="light_",ut.end=5,ut.repeat=0,ut.autoPlay=!1;const mt=new e.rF(D);mt.callback=()=>this.onComputerClick();const dt=new e.rF(G);dt.callback=()=>this.onSwitchBoxClick();const xt=new e.rF(X);xt.callback=()=>this.onButtonClick();const Tt=new e.rF(H);Tt.callback=()=>this.onLeverClick(),this.machine2=a,this.machine1=s,this.bulb=n,this.computer=u,this.machine=d,this.switchbox=E,this.lever=R,this.button=L,this.light=B,this.sort=$,this.events.emit("scene-awake")}onComputerClick(){this.computer.__Animation.play()}onSwitchBoxClick(){this.switchbox.__Animation.play()}onButtonClick(){this.button.__Animation.play(),this.light.__Animation.play()}onLeverClick(){this.lever.__Animation.play(),this.machine1.__Animation.play(),this.machine2.__Animation.play(),this.bulb.__Animation.play()}}},6398:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Forest"),this.rock,this.sort,this.roomTriggers={plaza:()=>this.triggerRoom(300,1240,660),shack:()=>this.triggerRoom(807,500,800),cove:()=>this.triggerRoom(810,520,416),lake:()=>this.triggerRoom(814,480,300)},this.roomAnims=!0}_preload(){this.load.pack("forest-pack","assets/media/rooms/forest/forest-pack.json")}_create(){this.add.image(-24,-13,"forest","bg").setOrigin(0,0),this.add.image(263,346,"forest","shadow").setOrigin(0,0);const s=this.add.image(1234,390,"forest","construction_9"),n=this.add.image(403,362,"forest","construction_1"),l=this.add.image(1208,414,"forest","construction_8");l.setOrigin(.47223388925574894,.6112260831680879);const i=this.add.image(482,452,"forest","cones");i.setOrigin(.5,.82);const h=this.add.sprite(302,657,"forest","rock0001");h.setOrigin(.74713,.62832),this.add.image(77,443,"forest","fg_4");const u=this.add.image(-1,969,"forest","fg_1");u.setOrigin(0,1);const d=this.add.image(781,548,"forest","fg_2");d.setOrigin(.5,.608540925266904);const c=this.add.image(1443.049442219343,566.6304944589389,"forest","fg_3");c.setOrigin(.793054147018543,.3979405931713366);const p=this.add.image(1441,831,"forest","railing");p.setOrigin(.5,.5885714285714285);const g=this.add.rectangle(299,642,250,250);g.scaleX=.6749754657062242,g.scaleY=.6251856433871313,g.alpha=.5,g.isFilled=!0,g.fillColor=65280,this.add.image(673,158,"forest","construction_2").setOrigin(0,0),this.add.image(639,322.5,"forest","construction_5"),this.add.image(730,341.5,"forest","construction_4"),this.add.image(855,329.5,"forest","construction_3");const y=this.add.image(288,405,"forest","cones");y.setOrigin(.5,.75);const T=this.add.image(1113,595,"forest","cone_3"),E=this.add.image(538,353,"forest","cones");E.setOrigin(.5,.89);const w=this.add.image(1076.4186786942835,692.1222886395633,"forest","construction_6");w.setOrigin(.6958351624493486,.674738297690739);const A=this.add.image(930.5,677,"forest","cone_1"),b=this.add.image(1007,761.5,"forest","cone_2"),R=this.add.image(1216,696.5,"forest","cone_4"),L=[p,d,u,w,A,b,R,T,y,E,i,n,s,c,l],B=new e.fw(h);B.key="rock",B.end=14,B.repeat=0,B.autoPlay=!1;const D=new e.ld(g);D.hoverCallback=()=>this.onBoulderOver(),D.hoverOutCallback=()=>this.onBoulderOut(),D.callback=()=>this.world.client.penguin.move(300,640),this.rock=h,this.sort=L,this.events.emit("scene-awake")}onBoulderOver(){this.rock.play("rock_open")}onBoulderOut(){this.rock.play("rock_close")}}},6468:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Forts"),this.tower,this.hitbox,this.sort,this.roomTriggers={town:()=>this.triggerRoom(100,1240,660),rink:()=>this.triggerRoom(802,780,340),plaza:()=>this.triggerRoom(300,340,660)}}_preload(){this.load.pack("forts-pack","assets/media/rooms/forts/forts-pack.json")}_create(){this.add.image(-35,-18,"forts","bg").setOrigin(0,0);const a=this.add.image(603,655,"forts","fort_2");a.setOrigin(.5,.65116279);const s=this.add.image(662,657,"forts","pole_2");s.setOrigin(.47058824,1);const n=this.add.image(698,693,"forts","fort_1");n.setOrigin(.5,.6473684210526316);const l=this.add.image(1004,459,"forts","pole_2");l.setOrigin(.5,1);const i=this.add.image(1023,477,"forts","fort_3");i.setOrigin(.49803922,.81818182),this.add.image(1065,304,"forts","shadow").setOrigin(0,0);const u=this.add.sprite(1232,187,"forts","clock_0001");this.add.image(1084,42,"forts","time").setOrigin(0,0),this.add.image(1252,327,"forts","secretmessage0001").setOrigin(0,0);const p=this.add.image(1420.5,343.5,"forts","button"),g=this.add.image(676,786,"forts","snowballs");g.setOrigin(.49230769,.57777778);const x=this.add.sprite(968,343,"forts","flag1_0001");x.setOrigin(.5,2);const y=this.add.sprite(626,544,"forts","flag2_0001");y.setOrigin(.5,2);const T=this.add.rectangle(1347,156,70,75);T.visible=!1;const E=this.add.image(1144,725,"forts","construction2_"),w=this.add.image(211,677.083485548083,"forts","construction3");w.setOrigin(.5,.6992283811131323);const A=this.add.image(1262,580.5716895109995,"forts","construction1_");A.setOrigin(.5,.8033628794764676);const b=this.add.image(1120,482,"forts","bucket_1"),R=this.add.image(480,742,"forts","bucket_2"),L=[y,s,l,x,i,n,a,g,R,b,w,E,A],B=new e.fw(u);B.key="clock_",B.end=24,B.repeat=0,B.autoPlay=!1;const D=new e.zx(p);D.spriteName="button",D.activeFrame=!1;const G=new e.fw(x);G.key="flag1_",G.end=16;const X=new e.fw(y);X.key="flag2_",X.end=16,this.tower=u,this.hitbox=T,this.sort=L,this.events.emit("scene-awake")}create(){super.create(),this.bounds=this.hitbox.getBounds(),this.tower.on("animationcomplete",()=>this.onTowerAnimComplete())}onSnowballComplete(o,a){this.bounds.contains(o,a)&&this.tower.__Animation.play()}onTowerAnimComplete(){this.tower.setFrame("clock_0001")}}},2291:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Lake"),this.gate,this.sort,this.roomTriggers={forest:()=>this.triggerRoom(809,308,504),cavemine:()=>this.triggerRoom(813,1392,528)},this.music="Lake"}_preload(){this.load.pack("lake-pack","assets/media/rooms/lake/lake-pack.json")}_create(){this.add.sprite(-11,-8,"lake","bg").setOrigin(0,0);const a=this.add.sprite(1129,163,"lake","fall6_0001"),s=this.add.sprite(1076,161,"lake","fall5_0001"),n=this.add.sprite(762,150,"lake","fall4_0001"),l=this.add.sprite(707,149,"lake","fall3_0001"),i=this.add.sprite(745,436,"lake","steam2_0001"),h=this.add.sprite(1082,433,"lake","steam1_0001"),u=this.add.sprite(765,358,"lake","gate_0001"),d=this.add.image(965,880,"lake","water");d.setOrigin(.5,1.0379805582297568),this.add.image(-9,-11,"lake","fg_1").setOrigin(0,0);const p=this.add.image(600,335,"lake","rock_4");this.add.image(57,488,"lake","rock_1"),this.add.image(108,666,"lake","coins_2");const g=this.add.image(59.009830474853516,671.4233721549222,"lake","rock_7");g.setOrigin(.39108866205013326,.6575701131306944);const x=this.add.image(220,750,"lake","aquagrabber_1"),y=this.add.image(103.21112699179491,850.6408081054688,"lake","aquagrabber_2");y.setOrigin(.25794833354097607,.7495578581766524),this.add.image(0,0,"lake","fg_2").setOrigin(0,0);const E=this.add.image(588,382,"lake","rock_3"),w=this.add.image(529,477,"lake","rock_6");this.add.image(346,335,"lake","coins_1");const A=this.add.image(313,268,"lake","barrel");this.add.image(340,367,"lake","rock_5");const b=this.add.image(242,308,"lake","rock_2"),R=this.add.image(1432.2077936970643,915.3424810523576,"lake","fg_3");R.setOrigin(.928798828597318,.9321206528028081);const L=this.add.rectangle(1406,571,250,250);L.scaleX=.701069953121673,L.scaleY=.9221728370521455,L.alpha=.5,L.fillColor=65280;const B=this.add.sprite(1083,196,"lake","falls_0001");B.scaleX=.8,B.scaleY=.8;const D=this.add.sprite(728,186,"lake","falls_0001");D.scaleX=.7,D.scaleY=.7,D.flipX=!0;const G=[d,y,A,g,R,E,w,p,x,b],X=new e.fw(a);X.key="fall6_",X.end=30;const H=new e.fw(s);H.key="fall5_",H.end=30;const K=new e.fw(n);K.key="fall4_",K.end=30;const $=new e.fw(l);$.key="fall3_",$.end=30;const N=new e.fw(i);N.key="steam2_",N.end=12;const I=new e.fw(h);I.key="steam1_",I.end=12;const z=new e.fw(u);z.key="gate_",z.end=8,z.repeat=0,z.autoPlay=!1;const U=new e.ld(L);U.hoverCallback=()=>this.onGateOver();const W=new e.fw(B);W.key="falls_",W.end=6;const V=new e.fw(D);V.key="falls_",V.end=6,this.gate=u,this.sort=G,this.events.emit("scene-awake")}onGateOver(){this.gate.__Animation.play()}}},994:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Light"),this.instruments,this.sign,this.sort,this.roomTriggers={beach:()=>this.triggerRoom(400,510,450),beacon:()=>this.triggerRoom(411,273,717),drums:null},this.music="Lighthouse"}_preload(){this.load.pack("light-pack","assets/media/rooms/light/light-pack.json")}_create(){this.add.image(0,0,"light","bg").setOrigin(0,0);const a=this.add.image(717.702414598927,643.22225871604,"light","railing");a.setOrigin(.5445922646817206,.9989061217506493);const s=this.add.image(391,287,"light","door");s.setOrigin(0,0);const n=this.add.sprite(16,871.5,"light","speakers3_0001"),l=this.add.image(1355,1062,"light","catalog");l.setOrigin(0,2);const i=this.add.sprite(122,300.5,"light","speakers1_0001"),h=this.add.sprite(347.5,334.5,"light","speakers2_0001");this.add.image(604,275,"light","pole").setOrigin(0,0);const d=this.add.sprite(628,304.5,"light","speakers4_0001"),c=this.add.image(1256,410,"light","instruments");c.angle=-5,c.setOrigin(0,0),c.flipX=!0;const p=this.add.rectangle(1183,565,165,235);p.alpha=.5,p.isFilled=!0,p.fillColor=65280;const g=this.add.sprite(234,-11,"light","totop_0001");g.setOrigin(0,0);const x=this.add.rectangle(321,54,165,235);x.scaleX=.8414379726690489,x.scaleY=.3861454935584283,x.alpha=.5,x.isFilled=!0,x.fillColor=65280;const y=this.add.image(69,667.9504383107716,"light","box");y.setOrigin(.5,.7710129697381467);const T=this.add.image(503,581,"light","bucket"),E=[a,l,d,h,i,n,T,y],w=new e.zx(s);w.spriteName="door",w.activeFrame=!1;const A=new e.$X(s);A.x=482,A.y=496;const b=new e.fw(n);b.key="speakers3_",b.end=10;const R=new e.zx(l);R.spriteName="catalog",R.callback=()=>this.interface.showBook("light"),R.activeFrame=!1;const L=new e.fw(i);L.key="speakers1_",L.end=10;const B=new e.fw(h);B.key="speakers2_",B.end=10;const D=new e.fw(d);D.key="speakers4_",D.end=10;const G=new e.ld(p);G.hoverCallback=()=>this.onInstrumentsOver(),G.hoverOutCallback=()=>this.onInstrumentsOut(),G.callback=()=>this.interface.showBook("light");const X=new e.fw(g);X.key="totop_",X.end=26,X.repeat=0,X.autoPlay=!1;const H=new e.ld(x);H.hoverCallback=()=>this.onToTopOver(),H.callback=()=>this.onToTopClick(),this.instruments=c,this.sign=g,this.sort=E,this.events.emit("scene-awake")}onInstrumentsOver(){this.instruments.setFrame("instruments-hover")}onInstrumentsOut(){this.instruments.setFrame("instruments")}onToTopOver(){this.sign.__Animation.play()}onToTopClick(){this.triggerRoom(411,224,700)}onDrumsClick(){this.drumkit.__Animation.play()}}},781:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Lodge"),this.flame,this.flame_out,this.fish,this.sort,this.roomTriggers={attic:()=>this.triggerRoom(221,966,560),village:()=>this.triggerRoom(200,940,540),fish:()=>this.triggerGame(904)},this.music="589"}_preload(){this.load.pack("lodge-pack","assets/media/rooms/lodge/lodge-pack.json")}_create(){this.add.image(-17,-2,"lodge","bg").setOrigin(0,0);const a=this.add.image(136,461,"lodge","door"),s=this.add.image(1279,747,"lodge","footrest");s.setOrigin(.49295775,.47222222);const n=this.add.image(1365,763,"lodge","chair");n.setOrigin(.5017064846416383,.5018450184501845);const l=this.add.sprite(1334,473,"lodge","fire0001");l.setOrigin(.5061728395061729,.5);const i=this.add.image(949,249,"lodge","fishing_door");i.setOrigin(.2916666666666667,.3961218836565097),this.add.image(820,328,"lodge","rods");const h=this.add.image(838,416,"lodge","bait");h.setOrigin(.5060240963855421,.5);const u=this.add.sprite(830,240,"lodge","catalog_small0001");u.setOrigin(0,0),this.add.image(847,238,"lodge","catalog_small_tape").setOrigin(0,0);const c=this.add.image(600,515,"lodge","table3");c.setOrigin(.5,.6985294117647058);const p=this.add.image(583,792,"lodge","table2");p.setOrigin(.5,.7586206896551724);const g=this.add.image(1020,812,"lodge","table4");g.setOrigin(.5,.7727272727272727);const x=this.add.image(453,259,"lodge","candle");x.setOrigin(0,0);const y=this.add.sprite(518,230,"lodge","flame0001");y.setOrigin(0,0);const T=this.add.sprite(518,198,"lodge","flame_out0001");T.setOrigin(0,0),T.visible=!1;const E=this.add.sprite(1010,365,"lodge","fish0001");E.setOrigin(0,0),E.visible=!1;const w=this.add.rectangle(1227,215,115,430);w.alpha=.5,w.isFilled=!0,w.fillColor=65280;const A=this.add.image(1361,1049,"lodge","catalog");A.setOrigin(0,2);const b=[a,c,p,g,s,n,A],R=new e.zx(a);R.spriteName="door",R.activeFrame=!1;const L=new e.$X(a);L.x=184,L.y=626;const B=new e.fw(l);B.key="fire",B.end=10;const D=new e.zx(i);D.spriteName="fishing_door",D.hoverCallback=()=>this.onFishOver(),D.hoverOutCallback=()=>this.onFishOut(),D.activeFrame=!1;const G=new e.$X(i);G.x=960,G.y=460;const X=new e.tk(i);X.text="fish_hint";const H=new e.zx(h);H.spriteName="bait",H.activeFrame=!1;const K=new e.fw(u);K.key="catalog_small",K.end=7,K.repeat=0,K.autoPlay=!1,K.onHover=!0;const $=new e.rF(u);$.pixelPerfect=!0;const N=new e.zx(c);N.spriteName="table3",N.activeFrame=!1,new e.$X(c);const I=new e.tk(c);I.text="Coming Soon";const z=new e.zx(p);z.spriteName="table2",z.activeFrame=!1,new e.$X(p);const U=new e.tk(p);U.text="Coming Soon";const W=new e.zx(g);W.spriteName="table4",W.activeFrame=!1,new e.$X(g);const V=new e.tk(g);V.text="Coming Soon";const Z=new e.rF(x);Z.hoverCallback=()=>this.onCandleOver(),Z.pixelPerfect=!0;const J=new e.fw(y);J.key="flame",J.end=14;const tt=new e.fw(T);tt.key="flame_out",tt.end=30,tt.repeat=0,tt.autoPlay=!1,tt.showOnStart=!0,tt.hideOnComplete=!0;const st=new e.fw(E);st.key="fish",st.end=18,st.repeat=0,st.autoPlay=!1,st.showOnStart=!0;const at=new e.ld(w);at.callback=()=>this.onZoneClick();const lt=new e.zx(A);lt.spriteName="catalog",lt.callback=()=>this.interface.showBook("lodge"),lt.activeFrame=!1,lt.pixelPerfect=!0,this.flame=y,this.flame_out=T,this.fish=E,this.sort=b,this.events.emit("scene-awake")}create(){super.create(),this.flame_out.on("animationcomplete",()=>this.onFlameOutComplete())}onCandleOver(){!this.flame.visible||(this.flame.visible=!1,this.flame_out.__Animation.play())}onFlameOutComplete(){this.flame.visible=!0}onFishOver(){this.fish.__Animation.play()}onFishOut(){this.fish.__Animation.stop(),this.fish.visible=!1}onZoneClick(){this.world.client.penguin.move(1210,460)}}},784:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Lounge"),this.sort,this.roomTriggers={dance:()=>this.triggerRoom(120,1200,792),ice:()=>this.triggerGame(909),astro:()=>this.triggerGame(900)}}_preload(){this.load.pack("lounge-pack","assets/media/rooms/lounge/lounge-pack.json")}_create(){this.add.image(-2,0,"lounge","bg").setOrigin(0,0);const a=this.add.image(1033,380,"lounge","astro");a.setOrigin(.5022222222222222,.501577287066246);const s=this.add.image(626,377,"lounge","ice");s.setOrigin(.5026178010471204,.5);const n=this.add.image(30,701,"lounge","plant");n.setOrigin(.45652173913043476,.9061224489795918);const l=this.add.image(264,478,"lounge","chair_1");l.setOrigin(.5225225225225225,.4567901234567901);const i=this.add.image(431,456,"lounge","chair_2");i.setOrigin(.3867924528301887,.38181818181818183);const h=this.add.image(356,540,"lounge","table_1");h.setOrigin(.5,.6330935251798561);const u=this.add.image(164,680,"lounge","chair_1");u.setOrigin(.5225225225225225,.4567901234567901);const d=this.add.image(371,657,"lounge","chair_2");d.setOrigin(.3867924528301887,.38181818181818183);const c=this.add.image(274,761,"lounge","table_2");c.setOrigin(.4824120603015075,.7052631578947368);const p=this.add.image(627,718,"lounge","chair_1");p.setOrigin(.5225225225225225,.4567901234567901);const g=this.add.image(841,729,"lounge","chair_1");g.setOrigin(.5225225225225225,.4567901234567901),g.flipX=!0;const x=this.add.image(733,778,"lounge","table_3");x.setOrigin(.4691358024691358,.5379310344827586);const y=this.add.image(1512,698,"lounge","rail_2");y.setOrigin(.5142857142857142,.5);const T=this.add.image(1419,627,"lounge","rail_3");T.setOrigin(.5,.5038167938931297);const E=this.add.image(1343,573,"lounge","rail_4");E.setOrigin(.5121951219512195,.5);const w=this.add.image(1438,636,"lounge","rail_1");w.setOrigin(.5027932960893855,1);const A=[p,g,x,c,d,u,l,h,i,n,E,T,y,w],b=new e.zx(a);b.spriteName="astro",b.activeFrame=!1,b.pixelPerfect=!0;const R=new e.$X(a);R.x=940,R.y=520;const L=new e.tk(a);L.text="astro_hint";const B=new e.zx(s);B.spriteName="ice",B.activeFrame=!1,B.pixelPerfect=!0;const D=new e.$X(s);D.x=672,D.y=512;const G=new e.tk(s);G.text="thinice_hint";const X=new e.rF(l);X.pixelPerfect=!0;const H=new e.$X(l);H.y=488;const K=new e.rF(i);K.pixelPerfect=!0;const $=new e.$X(i);$.y=466;const N=new e.rF(u);N.pixelPerfect=!0;const I=new e.$X(u);I.y=690;const z=new e.rF(d);z.pixelPerfect=!0;const U=new e.$X(d);U.y=667;const W=new e.rF(p);W.pixelPerfect=!0;const V=new e.$X(p);V.y=728;const Z=new e.rF(g);Z.pixelPerfect=!0;const J=new e.$X(g);J.y=739,this.sort=A,this.events.emit("scene-awake")}}},8926:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Mine"),this.cart,this.sort,this.roomTriggers={cave:()=>this.triggerRoom(806,1320,650),cart:()=>this.triggerGame(905),cavedig:()=>this.triggerRoom(813,192,544),rescue:()=>this.triggerGame(949)},this.roomAnims=!0}_preload(){this.load.pack("mine-pack","assets/media/rooms/mine/mine-pack.json")}_create(){this.add.image(0,-5,"mine","bg").setOrigin(0,0),this.add.image(764,830,"mine","foreground"),this.add.image(688,244,"mine","overhang"),this.add.image(320,342,"mine","ice"),this.add.image(1124,250,"mine","mine-wood");const a=this.add.sprite(1349,344,"mine","cart0001");a.visible=!1,this.add.image(820,330,"mine","entrance");const s=this.add.image(577,301,"mine","chair"),n=this.add.image(595.1272270936039,385.98372792446594,"mine","table");n.setOrigin(.5651026002647473,.6081977286240331),this.add.image(1305,344,"mine","mine-sign");const l=this.add.sprite(640,391,"mine","puffle0001");l.setOrigin(.5,1.5);const i=this.add.sprite(536.5389552723071,390.3758219731407,"mine","phone0001");i.setOrigin(.5,1.35);const h=this.add.image(939.0042398745616,434.049308820658,"mine","shovel");h.setOrigin(.7468083396507335,.546532918988626);const u=this.add.image(1141.6859931578872,406.6842796616488,"mine","minecart_2");u.setOrigin(.4917873075322333,.4339309596032534);const d=this.add.image(1007.6963730296424,447.4399093342632,"mine","minecart_1");d.setOrigin(.4645455331794754,.4633513186170088);const c=this.add.sprite(321,205,"mine","light0001"),p=this.add.rectangle(1275,300,250,250);p.alpha=.5,p.isFilled=!0,p.fillColor=65280;const g=this.add.image(561,188,"mine","rescue");g.scaleX=.55,g.scaleY=.55;const x=[d,u,n,i,l,h,s],y=new e.fw(l);y.key="puffle",y.end=21,y.repeatDelay=2e4;const T=new e.fw(i);T.key="phone",T.end=28,T.repeatDelay=25e3;const E=new e.fw(c);E.key="light",E.end=14;const w=new e.ld(p);w.hoverCallback=()=>this.showCart(),w.hoverOutCallback=()=>this.hideCart(),w.callback=()=>this.world.client.penguin.move(1230,390);const A=new e.zx(g);A.spriteName="rescue",A.activeFrame=!1;const b=new e.$X(g);b.x=588,b.y=444,this.cart=a,this.sort=x,this.events.emit("scene-awake")}showCart(){this.cart.setVisible(!0),this.cart.play("enter_cart")}hideCart(){this.cart.setVisible(!1)}}},2278:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>r});var t=C(4267),e=C(1215);class f extends Phaser.GameObjects.Image{constructor(a,s,n,l,i){super(a,s!=null?s:760,n!=null?n:480,l||"mtn",i!=null?i:"seat"),this.sitFrame=17,this.offsetX=0,this.offsetY=0,this.setOrigin(.49504950495049505,.5064935064935064)}}class r extends t.Z{constructor(){super("Mtn"),this.sort,this.seats100,this.seats101,this.seats102,this.seats103,this.roomTriggers={village:()=>this.triggerRoom(200,480,560)},this.music="Village",this.waddles={}}_preload(){this.load.pack("mtn-pack","assets/media/rooms/mtn/mtn-pack.json")}_create(){this.add.image(-21,-19,"mtn","bg").setOrigin(0,0);const s=this.add.sprite(846,75,"mtn","chair/chair0001");s.setOrigin(0,0),this.add.image(-21,214,"mtn","mountain").setOrigin(0,0);const l=this.add.image(727,359,"mtn","pole");l.setOrigin(.6204081632653061,.9194630872483222),this.add.image(532,284,"mtn","sled").setOrigin(.8289473684210527,.7647058823529411),this.add.image(520,407,"mtn","catalog_small").setOrigin(.49230769230769234,3.685185185185185),this.add.image(282,533,"mtn","barrier_1").setOrigin(.5,.45901639344262296),this.add.image(341,572,"mtn","barrier_1").setOrigin(.5,.45901639344262296),this.add.image(404,612,"mtn","barrier_1").setOrigin(.5,.45901639344262296);const p=this.add.image(584,697,"mtn","barrier_1");p.angle=-15,p.setOrigin(.5,.45901639344262296),this.add.image(654,707,"mtn","barrier_2").setOrigin(.48,.47761194029850745),this.add.image(902,747,"mtn","barrier_2").setOrigin(.48,.47761194029850745);const y=this.add.image(1120,651,"mtn","barrier_1");y.setOrigin(.5,.45901639344262296),y.flipX=!0;const T=new f(this,1155,638);this.add.existing(T),T.visible=!1;const E=new f(this,1093,676);this.add.existing(E),E.visible=!1;const w=new f(this,955,744);this.add.existing(w),w.visible=!1;const A=new f(this,857,745);this.add.existing(A),A.visible=!1;const b=new f(this,698,703);this.add.existing(b),b.visible=!1;const R=new f(this,561,673);this.add.existing(R),R.visible=!1;const L=new f(this,612,713);this.add.existing(L),L.visible=!1;const B=new f(this,252,519);this.add.existing(B),B.visible=!1;const D=new f(this,307,550);this.add.existing(D),D.visible=!1;const G=new f(this,369,590);this.add.existing(G),G.visible=!1;const X=new f(this,433,618);this.add.existing(X),X.visible=!1;const H=this.add.image(1065,809,"mtn","express");H.setOrigin(.4647887323943662,.875);const K=this.add.image(524,606,"mtn","penguin_run");K.setOrigin(.6390977443609023,.943089430894309);const $=this.add.rectangle(1127,657,180,90);$.angle=-33,$.alpha=.5,$.fillColor=65280;const N=this.add.rectangle(899,753,180,90);N.alpha=.5,N.fillColor=65280;const I=this.add.rectangle(633,709,200,90);I.angle=11,I.alpha=.5,I.fillColor=65280;const z=this.add.rectangle(334,568,230,90);z.angle=33,z.alpha=.5,z.fillColor=65280;const U=[K,H,l],W=[B,D,G,X],V=[R,L,b],Z=[A,w],J=[E,T],tt=new e.fw(s);tt.key="chair/chair",tt.end=87,T.sitFrame=24,T.offsetX=-100,T.offsetY=-70,E.sitFrame=24,E.offsetX=-100,E.offsetY=-70,w.sitFrame=17,w.offsetX=-10,w.offsetY=-90,A.sitFrame=17,A.offsetX=-10,A.offsetY=-90,b.sitFrame=18,b.offsetX=10,b.offsetY=-70,R.sitFrame=18,R.offsetX=10,R.offsetY=-70,L.sitFrame=18,L.offsetX=10,L.offsetY=-110,B.sitFrame=18,B.offsetX=90,B.offsetY=-70,D.sitFrame=18,D.offsetX=90,D.offsetY=-70,G.sitFrame=18,G.offsetX=90,G.offsetY=-70,X.sitFrame=18,X.offsetX=90,X.offsetY=-70,new e.rF($);const st=new e.tk($);st.text="Coming Soon",new e.rF(N);const at=new e.tk(N);at.text="Coming Soon",new e.rF(I);const lt=new e.tk(I);lt.text="Coming Soon",new e.rF(z);const ut=new e.tk(z);ut.text="Coming Soon",this.sort=U,this.seats100=W,this.seats101=V,this.seats102=Z,this.seats103=J,this.events.emit("scene-awake")}triggerWaddle(a){if(this.world.client.activeSeat)return;let s=`Would you like to join this
Sled race?`;this.interface.prompt.showWindow(s,"dual",()=>{this.network.send("join_waddle",{id:a}),this.interface.prompt.window.visible=!1})}}},2747:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Pet"),this.black,this.puffles,this.jump,this.red,this.yellow,this.eyesYellow,this.fish,this.fishIdle,this.eyesRed,this.penEyes,this.sort,this.roomTriggers={plaza:()=>this.triggerRoom(300,384,620),adopt:null,roundup:()=>this.triggerGame(902)},this.roomAnims=!0}_preload(){this.load.pack("pet-pack","assets/media/rooms/pet/pet-pack.json")}_create(){this.add.image(-4,0,"pet","bg").setOrigin(0,0);const a=this.add.sprite(92,375,"pet","black/black0001");a.setOrigin(.56875,.9064039408866995);const s=this.add.image(1084,439,"pet","post");s.setOrigin(.5220125786163522,.8860103626943006);const n=this.add.image(1104,499,"pet","bowls");n.setOrigin(.5116279069767442,.7614678899082569);const l=this.add.image(1427,602,"pet","sack");l.setOrigin(.4557823129251701,.660377358490566);const i=this.add.sprite(1423,688,"pet","os/os0001");i.setOrigin(.395,.6936619718309859);const h=this.add.image(1423,352,"pet","employees");h.setOrigin(.5,.5015479876160991);const u=this.add.image(639,58,"pet","door");u.setOrigin(0,0);const d=this.add.sprite(369,325,"pet","puffles");d.setOrigin(0,0);const c=this.add.sprite(432,288,"pet","jump/jump0001");c.setOrigin(0,0),c.visible=!1;const p=this.add.sprite(-243,-280,"pet","red/red0001");p.setOrigin(0,0);const g=this.add.sprite(554,172,"pet","yellow/yellow");g.setOrigin(0,0);const x=this.add.sprite(600,383,"pet","eyes/black/black0001");x.setOrigin(0,0);const y=this.add.sprite(503,408,"pet","eyes/pink/pink0001");y.setOrigin(0,0);const T=this.add.sprite(438,390,"pet","eyes/blue/blue0001");T.setOrigin(0,0);const E=this.add.sprite(528,365,"pet","eyes/green/green0001");E.setOrigin(0,0);const w=this.add.sprite(481,354,"pet","eyes/purple/purple0001");w.setOrigin(0,0);const A=this.add.sprite(570,241,"pet","eyes/green/green0001");A.setOrigin(0,0);const b=this.add.image(370,323,"pet","pen_front");b.setOrigin(0,0);const R=this.add.sprite(363,473,"pet","fish/fish0001");R.setOrigin(.8174807197943444,.8061420345489443);const L=this.add.sprite(316,380,"pet","fish/idle/idle0001");L.setOrigin(0,0);const B=this.add.image(178,581,"pet","house_3");B.setOrigin(.4897959183673469,.7444933920704846);const D=this.add.image(280,652,"pet","house_2");D.setOrigin(.4724137931034483,.6473029045643154);const G=this.add.image(170,710,"pet","house_1");G.setOrigin(.5288135593220339,.6590038314176245);const X=this.add.image(182,781,"pet","bed_back");X.setOrigin(.5020080321285141,.5);const H=this.add.image(182,860,"pet","bed_front");H.setOrigin(.5020242914979757,.6495726495726496);const K=this.add.sprite(293,112,"pet","eyes/green/green0001");K.setOrigin(0,0);const $=this.add.rectangle(585,248,60,50);$.alpha=.5,$.isFilled=!0,$.fillColor=65280;const N=this.add.rectangle(92,356,150,120);N.alpha=.5,N.isFilled=!0,N.fillColor=65280;const I=[y,T,w,E,x],z=[H,X,G,D,B,n,s,l,i],U=new e.rF(i);U.pixelPerfect=!0;const W=new e.fw(i);W.key="os/os",W.end=74,W.repeat=0,W.autoPlay=!1,W.onHover=!0,W.stopOnOut=!1;const V=new e.zx(h);V.spriteName="employees",V.activeFrame=!1;const Z=new e.$X(h);Z.x=1328,Z.y=572;const J=new e.tk(h);J.text="roundup_hint";const tt=new e.zx(u);tt.spriteName="door",tt.activeFrame=!1;const st=new e.$X(u);st.x=808,st.y=380;const at=new e.fw(c);at.key="jump/jump",at.end=89;const lt=new e.rF(p);lt.hoverCallback=()=>this.onRedOver();const ut=new e.fw(g);ut.key="yellow/yellow",ut.end=11,ut.autoPlay=!1;const mt=new e.fw(x);mt.key="eyes/black/black",mt.end=54;const dt=new e.fw(y);dt.key="eyes/pink/pink",dt.end=50;const xt=new e.fw(T);xt.key="eyes/blue/blue",xt.end=54;const Tt=new e.fw(E);Tt.key="eyes/green/green",Tt.end=56;const Ct=new e.fw(w);Ct.key="eyes/purple/purple",Ct.end=62;const Et=new e.fw(A);Et.key="eyes/green/green",Et.end=56;const vt=new e.rF(b);vt.hoverCallback=()=>this.onPenOver(),vt.hoverOutCallback=()=>this.onPenOut();const It=new e.$X(b);It.x=590,It.y=490;const Pt=new e.rF(R);Pt.hoverCallback=()=>this.onFishOver(),Pt.pixelPerfect=!0;const Rt=new e.fw(R);Rt.key="fish/fish",Rt.start=2,Rt.end=32,Rt.repeat=0,Rt.autoPlay=!1;const Jt=new e.fw(L);Jt.key="fish/idle/idle",Jt.end=95;const qt=new e.fw(K);qt.key="eyes/green/green",qt.end=56;const zt=new e.ld($);zt.hoverCallback=()=>this.onYellowOver(),zt.hoverOutCallback=()=>this.onYellowOut();const Nt=new e.ld(N);Nt.hoverCallback=()=>this.onBlackOver(),this.black=a,this.puffles=d,this.jump=c,this.red=p,this.yellow=g,this.eyesYellow=A,this.fish=R,this.fishIdle=L,this.eyesRed=K,this.penEyes=I,this.sort=z,this.events.emit("scene-awake")}create(){super.create(),this.fish.on("animationcomplete",this.onFishAnimComplete,this),this.black.on("animationcomplete",this.onBlackAnimComplete,this),this.red.on("animationcomplete",this.onRedAnimComplete,this),this.red.on("animationupdate",this.onRedAnimUpdate,this),this.black.play("black_sleep")}onPenOver(){this.penEyes.map(o=>o.visible=!1),this.puffles.visible=!1,this.jump.visible=!0,this.jump.anims.restart()}onPenOut(){this.penEyes.map(o=>{o.visible=!0,o.anims.restart()}),this.puffles.visible=!0,this.jump.visible=!1}onFishOver(){this.fishIdle.visible=!1,this.fish.__Animation.play()}onFishAnimComplete(){this.fishIdle.visible=!0,this.fishIdle.anims.restart(),this.fish.setFrame("fish/fish0001")}onYellowOver(){this.eyesYellow.visible=!1,this.yellow.__Animation.play()}onYellowOut(){this.eyesYellow.visible=!0,this.yellow.__Animation.stop()}onBlackOver(){this.black.play("black_wake")}onBlackAnimComplete(){this.black.play("black_sleep")}onRedOver(){let o=this.red.frame.name;switch(o=o.substr(o.length-4),o){case"0001":this.eyesRed.visible=!1,this.red.play("red_walk");break;case"0050":this.eyesRed.visible=!1,this.red.play("red_down");break;default:break}}onRedAnimComplete(o){switch(o.key){case"red_walk":this.red.play("red_up");break;default:break}}onRedAnimUpdate(){let o=this.red.frame.name;switch(o=o.substr(o.length-4),o){case"0001":this.resetEyesRed(293,112);break;case"0050":this.resetEyesRed(140,63);break;default:break}}resetEyesRed(o,a){this.eyesRed.setPosition(o,a),this.eyesRed.visible=!0,this.eyesRed.anims.restart()}}},155:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Pizza"),this.book,this.register,this.plate3,this.plate6,this.plate2,this.plate4,this.plate5,this.plate1,this.sort,this.roomTriggers={plaza:()=>this.triggerRoom(300,1152,540),pizza:()=>this.triggerGame(910)},this.roomAnims=!0,this.music="Parlor",this.registerOpen=!1}_preload(){this.load.pack("pizza-pack","assets/media/rooms/pizza/pizza-pack.json")}_create(){const o=this.add.image(5,0,"pizza","bg");o.setOrigin(0,0),o.tintTopLeft=8487297,o.tintBottomLeft=8882055,o.tintBottomRight=13224393;const a=this.add.image(264.6151171779252,705.9320867908868,"pizza","oven-paddle");a.setOrigin(.9455527825502302,.9840970356870682),a.tintTopLeft=8684676,a.tintBottomLeft=8684676;const s=this.add.image(205.27097657929255,772.8444775930491,"pizza","oven");s.setOrigin(.8480447948317564,.8663284069311031),s.tintTopLeft=8684676,s.tintBottomLeft=8684676;const n=this.add.image(71.76618330413154,909.2562079392981,"pizza","beans");n.setOrigin(.28791308089295437,.720621432830471),n.tintTopLeft=8684676,n.tintBottomLeft=8684676,this.add.image(1259,393,"pizza","stool");const l=this.add.image(1376,461,"pizza","piano");l.setOrigin(.5124251136101897,.7191201798743873),l.tintTopLeft=12303291,l.tintTopRight=8684676,l.tintBottomLeft=12303291,l.tintBottomRight=8684676;const i=this.add.image(394,238,"pizza","kitchen");i.tintTopLeft=8684676,i.tintBottomLeft=8684676;const h=this.add.image(545,472,"pizza","counter");h.setOrigin(.5139067938247385,.771685398227003),h.tintTopLeft=10329501,h.tintTopRight=10329501,h.tintBottomLeft=10329501,h.tintBottomRight=10329501;const u=this.add.sprite(615,737,"pizza","book0001");u.setOrigin(.5,3),u.tintTopLeft=10329501,u.tintTopRight=10329501,u.tintBottomLeft=10329501,u.tintBottomRight=10329501;const d=this.add.sprite(469,517,"pizza","register0001");d.setOrigin(.5,2),d.tintTopLeft=10329501,d.tintTopRight=10329501,d.tintBottomLeft=10329501,d.tintBottomRight=10329501;const c=this.add.image(856.1796280524795,734.6168048395466,"pizza","chair");c.setOrigin(.6201666840984833,.5145378611354999),c.tintTopLeft=13158600,c.tintTopRight=13158600,c.tintBottomLeft=13158600,c.tintBottomRight=13158600;const p=this.add.image(675.0902545465779,736.457007369544,"pizza","chair");p.setOrigin(.4583922802318096,.5247610770678819),p.flipX=!0,p.tintTopLeft=13158600,p.tintTopRight=13158600,p.tintBottomLeft=13158600,p.tintBottomRight=13158600;const g=this.add.image(767.3953247070312,822.2130424190727,"pizza","table");g.setOrigin(.5142577222059618,.7671709579167737),g.flipX=!0,g.tintTopLeft=11316396,g.tintTopRight=11316396,g.tintBottomLeft=11316396,g.tintBottomRight=11316396;const x=this.add.image(1156,686,"pizza","chair");x.tintTopLeft=13158600,x.tintTopRight=13158600,x.tintBottomLeft=13158600,x.tintBottomRight=13158600;const y=this.add.image(985,686,"pizza","chair");y.flipX=!0,y.tintTopLeft=13158600,y.tintTopRight=13158600,y.tintBottomLeft=13158600,y.tintBottomRight=13158600;const T=this.add.image(1072.4812547760912,780.1822164898948,"pizza","table");T.setOrigin(.5147696927399248,.76697621813434),T.flipX=!0,T.tintTopLeft=11316396,T.tintTopRight=11316396,T.tintBottomLeft=11316396,T.tintBottomRight=11316396;const E=this.add.image(571,611,"pizza","chair");E.tintTopLeft=13158600,E.tintTopRight=13158600,E.tintBottomLeft=13158600,E.tintBottomRight=13158600;const w=this.add.image(407,611,"pizza","chair");w.flipX=!0,w.tintTopLeft=13158600,w.tintTopRight=13158600,w.tintBottomLeft=13158600,w.tintBottomRight=13158600;const A=this.add.image(486.5186916196926,706.2196342159477,"pizza","table");A.setOrigin(.4852303072600751,.7355672512950061),A.tintTopLeft=11316396,A.tintTopRight=11316396,A.tintBottomLeft=11316396,A.tintBottomRight=11316396;const b=this.add.sprite(117.67260831751713,801.8412820195638,"pizza","oven-fire0001");b.setOrigin(.5,1);const R=this.add.image(385,30,"pizza","kitchen-sign");R.tintTopLeft=12303291,R.tintTopRight=12303291,R.tintBottomLeft=12303291,R.tintBottomRight=12303291;const L=this.add.image(840,260,"pizza","door");L.tintTopLeft=11645361,L.tintTopRight=13092807,L.tintBottomLeft=12303291,L.tintBottomRight=12303291;const B=this.add.rectangle(463,343,90,75);B.alpha=.5,B.isFilled=!0,B.fillColor=65280;const D=this.add.rectangle(611,357,125,30);D.alpha=.5,D.isFilled=!0,D.fillColor=65280,this.add.image(1247,320,"pizza","light");const G=this.add.image(1382,110,"pizza","spotlight");G.tintTopRight=5526612;const X=this.add.image(1045,331,"pizza","plant");X.tintTopRight=8684676,X.tintBottomRight=8684676;const H=this.add.sprite(486,599,"pizza","candle0001");H.setOrigin(.5,1.45455);const K=this.add.sprite(773,712,"pizza","candle0001");K.setOrigin(.5,1.45455),K.flipX=!0;const $=this.add.sprite(1079,669,"pizza","candle0001");$.setOrigin(.5,1.45455),$.flipX=!0;const N=this.add.sprite(1126,894,"pizza","plate_0001");N.setOrigin(.5,2.60976),N.tintTopLeft=16632423,N.tintTopRight=11316396,N.tintBottomLeft=11316396,N.tintBottomRight=11316396;const I=this.add.sprite(1031,895,"pizza","plate_0001");I.setOrigin(.5,2.60976),I.flipX=!0,I.tintTopLeft=16632423,I.tintTopRight=11316396,I.tintBottomLeft=11316396,I.tintBottomRight=11316396;const z=this.add.sprite(810,938,"pizza","plate_0001");z.setOrigin(.5,2.60976),z.flipX=!0,z.tintTopLeft=11316396,z.tintTopRight=16632423,z.tintBottomLeft=11316396,z.tintBottomRight=11316396;const U=this.add.sprite(735,937,"pizza","plate_0001");U.setOrigin(.5,2.60976),U.tintTopLeft=11316396,U.tintTopRight=16632423,U.tintBottomLeft=11316396,U.tintBottomRight=11316396;const W=this.add.sprite(451,828,"pizza","plate_0001");W.setOrigin(.5,2.60976),W.tintTopLeft=11316396,W.tintTopRight=16632423,W.tintBottomLeft=11316396,W.tintBottomRight=11316396;const V=this.add.sprite(527,820,"pizza","plate_0001");V.setOrigin(.5,2.60976),V.flipX=!0,V.tintTopLeft=11316396,V.tintTopRight=16632423,V.tintBottomLeft=11316396,V.tintBottomRight=11316396,this.add.image(1085,662,"pizza","glow"),this.add.image(778,703,"pizza","glow"),this.add.image(491,596,"pizza","glow");const Z=this.add.image(774,693,"pizza","glow");Z.alpha=.5,Z.alphaTopLeft=.5,Z.alphaTopRight=.5,Z.alphaBottomLeft=.5,Z.alphaBottomRight=.5;const J=this.add.image(1081,650,"pizza","glow");J.alpha=.5,J.alphaTopLeft=.5,J.alphaTopRight=.5,J.alphaBottomLeft=.5,J.alphaBottomRight=.5;const tt=this.add.image(487,583,"pizza","glow");tt.alpha=.5,tt.alphaTopLeft=.5,tt.alphaTopRight=.5,tt.alphaBottomLeft=.5,tt.alphaBottomRight=.5,this.add.image(122,758,"pizza","glow");const st=this.add.image(128,756,"pizza","glow");st.alpha=.5,st.alphaTopLeft=.5,st.alphaTopRight=.5,st.alphaBottomLeft=.5,st.alphaBottomRight=.5;const at=this.add.rectangle(1180,348,50,50);at.isFilled=!0,at.fillColor=2799125,at.fillAlpha=.7;const lt=this.add.rectangle(1180,524,50,50);lt.scaleX=2.0994000560447716,lt.scaleY=1.9566126421522754,lt.setOrigin(.5,2.3092742701548947),lt.fillColor=2799125,lt.fillAlpha=.7;const ut=[A,g,T,y,x,p,c,w,E,h,d,u,l,s,a,b,U,V,W,z,N,I,H,K,$,n,lt],mt=new e.zx(i);mt.spriteName="kitchen",mt.activeFrame=!1;const dt=new e.$X(i);dt.x=388,dt.y=412;const xt=new e.tk(i);xt.text="Pizzatron 3000";const Tt=new e.fw(b);Tt.key="oven-fire",Tt.end=8;const Ct=new e.zx(L);Ct.spriteName="door",Ct.activeFrame=!1;const Et=new e.$X(L);Et.x=840,Et.y=422;const vt=new e.ld(B);vt.hoverCallback=()=>this.toggleRegister(),vt.hoverOutCallback=()=>{};const It=new e.ld(D);It.hoverCallback=()=>this.flipPage(),It.hoverOutCallback=()=>{};const Pt=new e.fw(H);Pt.key="candle",Pt.end=14;const Rt=new e.fw(K);Rt.key="candle",Rt.end=14;const Jt=new e.fw($);Jt.key="candle",Jt.end=14;const qt=new e.fw(N);qt.key="plate_",qt.end=14,qt.repeat=0,qt.autoPlay=!1;const zt=new e.fw(I);zt.key="plate_",zt.end=14,zt.repeat=0,zt.autoPlay=!1;const Nt=new e.fw(z);Nt.key="plate_",Nt.end=14,Nt.repeat=0,Nt.autoPlay=!1;const Vt=new e.fw(U);Vt.key="plate_",Vt.end=14,Vt.repeat=0,Vt.autoPlay=!1;const $t=new e.fw(W);$t.key="plate_",$t.end=14,$t.repeat=0,$t.autoPlay=!1;const Wt=new e.fw(V);Wt.key="plate_",Wt.end=14,Wt.repeat=0,Wt.autoPlay=!1;const de=new e.lO(at);de.id=552;const Ce=new e.rF(lt);Ce.callback=()=>this.onPinClick(),this.book=u,this.register=d,this.plate3=N,this.plate6=I,this.plate2=z,this.plate4=U,this.plate5=W,this.plate1=V,this.sort=ut,this.events.emit("scene-awake")}toggleRegister(){const o=this.registerOpen?"register_close":"register_open";this.registerOpen=!this.registerOpen,this.register.play(o)}flipPage(){this.book.play("book_flip")}onPinClick(){this.interface.prompt.showItem(552)}}},7066:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Plaza"),this.sort,this.roomTriggers={forts:()=>this.triggerRoom(801,1284,720),pet:()=>this.triggerRoom(310,818,520),cave:()=>this.triggerRoom(806,1180,614),stage1:()=>this.triggerRoom(340,260,660),stage2:()=>this.triggerRoom(340,260,660),pizza:()=>this.triggerRoom(330,820,545),forest:()=>this.triggerRoom(809,270,430)}}_preload(){this.load.pack("plaza-pack","assets/media/rooms/plaza/plaza-pack.json")}_create(){const o=this.add.image(1194,410,"plaza","pizza_door");o.setOrigin(.5311,.442211),this.add.image(0,0,"plaza","bg").setOrigin(0,0);const s=this.add.sprite(848,173,"plaza","lights1_0001"),n=this.add.image(336,450,"plaza","pet_door"),l=this.add.image(1185,418,"plaza","pizza_door"),i=this.add.image(845,446.5164259099866,"plaza","boxoffice");i.setOrigin(.5,.8898732575805731);const h=this.add.image(727,390,"plaza","stage_door"),u=this.add.image(957,391,"plaza","stage_door");u.flipX=!0;const d=this.add.image(564,475,"plaza","underground_door"),c=this.add.image(121.0821528447191,787.2327663933709,"plaza","light");c.setOrigin(.7981996102869348,.8145623581334488),this.add.image(1,2,"plaza","billboard").setOrigin(0,0);const g=this.add.sprite(851,165,"plaza","lights2_0001");this.add.image(848,213,"plaza","playname0001");const x=[c,i],y=new e.zx(o);y.spriteName="pizza_door",y.activeFrame=!1,y.pixelPerfect=!0;const T=new e.$X(o);T.x=1152,T.y=500;const E=new e.fw(s);E.key="lights1_",E.end=16;const w=new e.zx(n);w.spriteName="pet_door",w.activeFrame=!1;const A=new e.$X(n);A.x=352,A.y=544;const b=new e.zx(l);b.spriteName="pizza_door",b.activeFrame=!1;const R=new e.$X(l);R.x=1160,R.y=480;const L=new e.zx(h);L.spriteName="stage_door",L.activeFrame=!1;const B=new e.$X(h);B.x=736,B.y=448;const D=new e.zx(u);D.spriteName="stage_door",D.activeFrame=!1;const G=new e.$X(u);G.x=952,G.y=448;const X=new e.zx(d);X.spriteName="underground_door",X.activeFrame=!1;const H=new e.$X(d);H.x=560,H.y=520;const K=new e.fw(g);K.key="lights2_",K.end=16,this.sort=x,this.events.emit("scene-awake")}}},1491:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Rink"),this.sort,this.roomTriggers={forts:()=>this.triggerRoom(801,560,400)}}_preload(){this.load.pack("rink-pack","assets/media/rooms/rink/rink-pack.json")}_create(){this.add.image(0,0,"rink","bg").setOrigin(0,0);const a=this.add.image(626.7112230878163,327.89825333779476,"rink","fence");a.setOrigin(.4195145957463484,.09930501630514832);const s=this.add.image(1390,250,"rink","booth_2");s.setOrigin(.52966102,.80970149);const n=this.add.image(1327,280,"rink","booth_3");n.setOrigin(.5125,.62962963);const l=this.add.image(166,242,"rink","fishdogs");l.setOrigin(.51492537,.79347826);const i=this.add.image(111.68627573326208,297.1624721519636,"rink","bench_2");i.setOrigin(.47195997799696326,.2687329908454298);const h=this.add.image(38,558,"rink","bench_1");h.setOrigin(.82231405,.78181818);const u=this.add.image(1409.2689065143468,290.47619641870153,"rink","bench_4");u.setOrigin(.5237403531454601,.2533230224084052);const d=this.add.image(1637,559,"rink","bench_3");d.setOrigin(.82231405,.78181818),this.add.image(70,485,"rink","drink").setOrigin(.5,.75510204);const p=this.add.image(-64,1046.9173886139422,"rink","fg");p.setOrigin(0,.9998385876423137);const g=this.add.image(858,214,"rink","can");g.setOrigin(.44117647,.69642857);const x=this.add.image(1049,229,"rink","booth");x.setOrigin(.44080605,.79461279);const y=this.add.image(528,167,"rink","stadium");y.setOrigin(.51265823,.42537313);const T=this.add.image(522,236,"rink","stand_top");T.setOrigin(.50117647,2.57831325);const E=this.add.image(1188,437,"rink","net_2");E.setOrigin(.97183099,.48863636),E.flipX=!0;const w=this.add.image(1249,576,"rink","net_1");w.setOrigin(.58571429,.91902834),w.flipX=!0;const A=this.add.image(333,439,"rink","net_2");A.setOrigin(.97183099,.48863636);const b=this.add.image(275,575,"rink","net_1");b.setOrigin(.58571429,.91902834);const R=this.add.image(1215,215,"rink","stadium_door");R.setOrigin(.5,.71127);const L=this.add.image(1242,337.92510001480065,"rink","light");L.setOrigin(.5,5.734871053021069);const B=this.add.image(1338,328.7865348402555,"rink","sign");B.setOrigin(.5,2.970875458424415);const D=this.add.image(756,333,"rink","gate");this.add.image(740,544,"rink","shadow");const G=this.add.image(1039,437.9269529296462,"rink","construction_5");G.setOrigin(.5,.7389731538810966);const X=this.add.image(901,497.9269529296462,"rink","construction_4");X.setOrigin(.5,.791733460582118);const H=this.add.image(1127,513,"rink","pylon"),K=this.add.image(977,586,"rink","pylon"),$=this.add.image(483,481.9717657884752,"rink","construction_1");$.setOrigin(.5,.7672777080725302);const N=this.add.image(411,583,"rink","construction_3"),I=this.add.image(573,569.1203156714773,"rink","construction_2");I.setOrigin(.5,.7511569372185053);const z=[p,E,w,A,b,x,n,s,u,d,h,i,l,y,T,g,a,R,B,X,G,K,H,I,$,N,L],U=new e.zx(R);U.spriteName="stadium_door",U.activeFrame=!1;const W=new e.zx(D);W.spriteName="gate",W.activeFrame=!1,this.sort=z,this.events.emit("scene-awake")}}},8781:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Shack"),this.sort,this.roomTriggers={forest:()=>this.triggerRoom(809,1234,410),eco:()=>this.triggerRoom(122,240,560),mine:()=>this.triggerRoom(808,360,565)}}_preload(){this.load.pack("shack-pack","assets/media/rooms/shack/shack-pack.json")}_create(){this.add.image(-22,1,"shack","bg").setOrigin(0,0),this.add.image(-28,122,"shack","plant").setOrigin(0,0);const s=this.add.image(196,645,"shack","trees_1");s.setOrigin(.8208955223880597,.36511156186612576);const n=this.add.image(6,355,"shack","plant_doors");n.setOrigin(0,0);const l=this.add.image(206,464,"shack","flowers");l.setOrigin(.5352112676056338,.7903225806451613);const i=this.add.image(290,365,"shack","tree");i.setOrigin(.15776699029126215,.8953488372093024);const h=this.add.image(625,526,"shack","cart_2");h.setOrigin(.5206611570247934,.7475728155339806);const u=this.add.image(519,568,"shack","cart_1");u.setOrigin(.4928571428571429,.7401574803149606);const d=this.add.image(718,584,"shack","fence");d.setOrigin(.5180722891566265,.5562130177514792);const c=this.add.image(1143,470,"shack","shovel");c.setOrigin(.17543859649122806,.856);const p=this.add.image(1252,492,"shack","barrel_2");p.setOrigin(.759493670886076,.8953488372093024);const g=this.add.image(1164,503,"shack","bag");g.setOrigin(.09859154929577464,.7682926829268293);const x=this.add.image(1142,482,"shack","bear");x.setOrigin(.71,.7178423236514523);const y=this.add.image(1003,537,"shack","flowers");y.setOrigin(.5352112676056338,.7903225806451613),this.add.image(1298,332,"shack","house_back").setOrigin(0,0);const E=this.add.image(1367,398,"shack","barrel");E.setOrigin(0,0);const w=this.add.image(1291,500,"shack","house");w.setOrigin(.08679245283018867,.8169014084507042);const A=this.add.image(1004,588,"shack","pipe_10001");A.setOrigin(.44106463878326996,.40707964601769914);const b=this.add.image(1268,681,"shack","pipe_20001");b.setOrigin(.054945054945054944,.3333333333333333);const R=this.add.image(1204,968,"shack","trees_2");R.setOrigin(0,1);const L=[w,A,b,R,E,y,x,g,p,c,d,u,h,i,l,s],B=new e.zx(n);B.spriteName="plant_doors",B.activeFrame=!1;const D=new e.$X(n);D.x=70,D.y=450,this.sort=L,this.events.emit("scene-awake")}}},7283:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Shop"),this.phone,this.register,this.sort,this.roomTriggers={town:()=>this.triggerRoom(100,932,560),catalog:()=>this.interface.showBook("shop_curtains")},this.music="Gift"}_preload(){this.load.pack("shop-pack","assets/media/rooms/shop/shop-pack.json")}_create(){this.add.image(0,0,"shop","bg").setOrigin(0,0);const a=this.add.image(22,933,"shop","box");a.setOrigin(.4098360655737705,.7272727272727273);const s=this.add.image(1028,132,"shop","door");s.setOrigin(0,0);const n=this.add.sprite(-2,175,"shop","speaker/speaker0003");n.setOrigin(0,0);const l=this.add.container(1324.9695028627973,663.5011002882876),i=this.add.image(.030536885885567244,1.4989092534428892,"shop","counter");i.setOrigin(.4,.8102766798418972),l.add(i);const h=this.add.sprite(63.03053688588557,-177.5010907465571,"shop","phone/phone0001");h.setOrigin(0,0),l.add(h);const u=this.add.sprite(-102.96946311411443,-289.5010907465571,"shop","register/register0001");u.setOrigin(0,0),l.add(u);const d=this.add.rectangle(1292,467,110,100);d.alpha=.5,d.isFilled=!0,d.fillColor=65280;const c=this.add.rectangle(1428,541,75,60);c.alpha=.5,c.isFilled=!0,c.fillColor=65280;const p=this.add.image(1316,1055,"shop","catalog");p.setOrigin(0,2);const g=[l,a,p],x=new e.zx(s);x.spriteName="door",x.activeFrame=!1,x.pixelPerfect=!0;const y=new e.$X(s);y.x=1080,y.y=466;const T=new e.rF(n);T.pixelPerfect=!0;const E=new e.fw(n);E.key="speaker/speaker",E.end=30,E.repeat=0,E.autoPlay=!1,E.onHover=!0,E.stopOnOut=!1;const w=new e.fw(h);w.key="phone/phone",w.end=55,w.repeat=0,w.autoPlay=!1,w.onHover=!0,w.stopOnOut=!1;const A=new e.fw(u);A.key="register/register",A.end=35,A.repeat=0,A.autoPlay=!1,A.onHover=!0,A.stopOnOut=!1;const b=new e.ld(d);b.hoverCallback=()=>this.register.__Animation.play();const R=new e.ld(c);R.hoverCallback=()=>this.phone.__Animation.play();const L=new e.zx(p);L.spriteName="catalog",L.callback=()=>this.interface.showBook("shop"),L.activeFrame=!1,L.pixelPerfect=!0,this.phone=h,this.register=u,this.sort=g,this.events.emit("scene-awake")}}},2084:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Sport"),this.register,this.sort,this.roomTriggers={village:()=>this.triggerRoom(200,1220,580)},this.music="Sports"}_preload(){this.load.pack("sport-pack","assets/media/rooms/sport/sport-pack.json")}_create(){this.add.image(0,0,"sport","bg").setOrigin(0,0);const a=this.add.image(1322,686.8236179575223,"sport","desk");a.setOrigin(.5,.8246968966568344);const s=this.add.sprite(1319,979,"sport","phone_0001");s.setOrigin(.50204,2.68571);const n=this.add.image(1423.8363037109375,1006.9495377037431,"sport","ball_0001");n.setOrigin(.5396419914425894,2.767985009374873);const l=this.add.image(1353,1058.4052747709882,"sport","exercisebike");l.setOrigin(.5,1.6726721913288654),this.add.image(1364,-10,"sport","ceilinglight").setOrigin(0,0);const h=this.add.sprite(1261,854,"sport","register_0001");h.setOrigin(.5,2.40299);const u=this.add.sprite(-5,193,"sport","speaker_0001");u.setOrigin(0,0);const d=this.add.image(1019,138,"sport","village_door");d.scaleY=1.0059234860595478,d.setOrigin(0,0);const c=this.add.sprite(1405,1133,"sport","catalog");c.setOrigin(.52288,2.73913);const p=this.add.rectangle(1263,492,128,128);p.scaleX=.8967208710429035,p.scaleY=.8384145157979731,p.isFilled=!0,p.fillColor=2031431,p.fillAlpha=100;const g=this.add.rectangle(182,751,50,50);g.isFilled=!0,g.fillColor=2799125,g.fillAlpha=.7;const x=this.add.rectangle(182,927.0024405137625,50,50);x.scaleX=2.0994000560447716,x.scaleY=1.9566126421522754,x.setOrigin(.5,2.3092742701548947),x.fillColor=2799125,x.fillAlpha=.7;const y=[l,n,a,h,s,c,x],T=new e.fw(s);T.key="phone_",T.end=55;const E=new e.fw(h);E.key="register_",E.end=35,E.repeat=0,E.autoPlay=!1,E.onHover=!0,E.stopOnOut=!1;const w=new e.fw(u);w.key="speaker_",w.end=30;const A=new e.zx(d);A.spriteName="village_door",A.activeFrame=!1;const b=new e.$X(d);b.x=1088,b.y=400;const R=new e.zx(c);R.spriteName="catalog",R.callback=()=>this.interface.showBook("sport"),R.activeFrame=!1;const L=new e.ld(p);L.hoverCallback=()=>this.register.__Animation.play();const B=new e.lO(g);B.id=561;const D=new e.rF(g);D.callback=()=>this.onPinClick();const G=new e.rF(x);G.callback=()=>this.onPinClick(),this.register=h,this.sort=y,this.events.emit("scene-awake")}onPinClick(){this.interface.prompt.showItem(561)}}},5790:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Stage"),this.backdrop,this.snow,this.fan,this.clouds,this.ship,this.flag,this.gears1,this.gears2,this.gears3,this.gears4,this.waves2,this.waves1,this.bush,this.trunk,this.lever,this.switch1,this.switch2,this.redbutton,this.aquabutton,this.bluebutton,this.switch3,this.switch4,this.puffle,this.sort,this.roomTriggers={plaza:()=>this.triggerRoom(300,848,528)},this.roomAnims=!0,this.music="Stage"}_preload(){this.load.pack("stage-pack","assets/media/rooms/stage/stage-pack.json")}_create(){this.add.image(763,413,"stage","bg_1");const o=this.add.sprite(892,-38,"stage","backdrop0001");this.add.image(1179,225,"stage","mountain");const a=this.add.image(1446,257,"stage","fg_5");a.flipX=!0;const s=this.add.sprite(1115,162,"stage","snow_0001");this.add.image(968,404,"stage","grass");const n=this.add.image(1393,221,"stage","fg_4");n.flipX=!0,this.add.image(759,615,"stage","bg_2"),this.add.image(85,257,"stage","fg_5");const l=this.add.sprite(326,134,"stage","fan_0001");this.add.image(139,219,"stage","fg_4"),this.add.image(428,197,"stage","pole_1");const i=this.add.sprite(945,16,"stage","cloud_0001"),h=this.add.sprite(494,401,"stage","ship_0001");h.setOrigin(.5,.8);const u=this.add.image(495,123,"stage","pole_2"),d=this.add.sprite(506,203,"stage","flag_0001"),c=this.add.image(765,422.51856199659954,"stage","fg_2");c.setOrigin(.5,.8374641777890184),c.tintTopLeft=10395294,c.tintTopRight=10395294;const p=this.add.image(1336,457.06779366323536,"stage","fg_6");p.setOrigin(.5,.5674162194743703),p.tintTopLeft=6513507,p.tintBottomRight=16777215;const g=this.add.image(196,444.4618790672258,"stage","fg_1");g.setOrigin(.5,.5504512357305562),g.tintTopLeft=6513507,g.tintBottomRight=11447982;const x=this.add.image(91,314,"stage","fg_chair"),y=this.add.image(75,347,"stage","fg_chair2"),T=this.add.image(108,489.5572137814288,"stage","fg_3");T.setOrigin(.5,1.6067497148144);const E=this.add.image(143,921.514388510939,"stage","support");E.setOrigin(.5,.9648997783133533),E.tintTopLeft=6513507,E.tintBottomRight=6513507;const w=this.add.image(1436,317,"stage","fg_chair");w.flipX=!0;const A=this.add.image(1454,348,"stage","fg_chair2");A.flipX=!0;const b=this.add.image(1420,493.3123063532007,"stage","fg_3");b.setOrigin(.5,1.6205693413637852),b.flipX=!0;const R=this.add.image(1377,926.2889944564167,"stage","support");R.setOrigin(.5,.9688563721713392),R.flipX=!0,R.tintTopLeft=6513507,R.tintBottomRight=6513507;const L=this.add.sprite(616,506,"stage","gears_0001");L.setOrigin(.5,0);const B=this.add.sprite(486,503,"stage","gears_0001");B.setOrigin(.5,0);const D=this.add.sprite(365,466,"stage","gears_0001");D.setOrigin(.5,0);const G=this.add.sprite(483,467,"stage","gears_0001");G.setOrigin(.5,0);const X=this.add.sprite(426,485,"stage","waves2_0001");X.setOrigin(.5,1);const H=this.add.sprite(557,520,"stage","waves1_0001");H.setOrigin(.5,1);const K=this.add.image(876,491,"stage","plank"),$=this.add.image(881,507.865244867477,"stage","screwdriver");$.setOrigin(.5,1.9484205392028002);const N=this.add.image(882,530,"stage","paintbrush"),I=this.add.image(920,519,"stage","paintbucket"),z=this.add.image(312,602,"stage","paintroller_2"),U=this.add.image(229,560,"stage","paintroller_1"),W=this.add.sprite(1126,456,"stage","bush_0001"),V=this.add.image(742,634,"stage","piano");V.tintTopLeft=10395294,V.tintTopRight=10395294,V.tintBottomLeft=10395294,V.tintBottomRight=10395294;const Z=this.add.image(633,660,"stage","stool"),J=this.add.image(1239,752,"stage","chair_14"),tt=this.add.image(535,666,"stage","musicstand_1");tt.tintTopLeft=10395294;const st=this.add.image(439,646,"stage","musicstand_2");st.tintTopLeft=10395294;const at=this.add.image(908,676,"stage","musicstand_3");at.tintTopLeft=10395294;const lt=this.add.image(1035,657,"stage","musicstand_4");lt.tintTopLeft=10395294;const ut=this.add.image(1187,576,"stage","box_2"),mt=this.add.image(1206,596,"stage","box_1"),dt=this.add.sprite(1367,632,"stage","trunk_0001"),xt=this.add.image(119,569,"stage","arch");xt.setOrigin(.5,.42579505300353354);const Tt=this.add.image(1331,734,"stage","chair_15"),Ct=this.add.image(122,589,"stage","plaza_door");Ct.tintTopLeft=10395294,Ct.tintTopRight=10395294,Ct.tintBottomLeft=10395294,Ct.tintBottomRight=10395294;const Et=this.add.image(1382,830,"stage","chair_20"),vt=this.add.image(1284,850,"stage","chair_19"),It=this.add.image(76,620.8800453049496,"stage","light");It.setOrigin(.5,.9455323968611659);const Pt=this.add.image(188,489,"stage","light");Pt.angle=16;const Rt=this.add.image(80,648.864410586358,"stage","glow");Rt.setOrigin(.5,1.7381926437985082);const Jt=this.add.image(197,469,"stage","glow"),qt=this.add.image(1139,770,"stage","chair_13"),zt=this.add.image(1037,789,"stage","chair_12"),Nt=this.add.image(189,719,"stage","chair_5"),Vt=this.add.image(283,744,"stage","chair_4"),$t=this.add.image(382,772,"stage","chair_3"),Wt=this.add.image(485,786,"stage","chair_2"),de=this.add.image(924,805.9999387142599,"stage","chair_11"),Ce=this.add.image(599,801,"stage","chair_1"),ve=this.add.image(145,838,"stage","chair_10");this.add.image(767,870,"stage","switchbox");const pe=this.add.sprite(847,814.5,"stage","lever_0001");pe.setOrigin(.5,1);const me=this.add.sprite(823,798,"stage","switch1_0001"),Oe=this.add.sprite(801,798,"stage","switch2_0001"),q=this.add.sprite(770,787,"stage","button1_0001"),ot=this.add.sprite(733,787,"stage","button3_0001"),pt=this.add.sprite(752,806,"stage","button2_0001"),ct=this.add.sprite(700,798,"stage","switch3_0001"),St=this.add.sprite(678,797,"stage","switch4_0001"),wt=this.add.image(347,865,"stage","chair_8"),Ft=this.add.image(235,851,"stage","chair_9"),Yt=this.add.image(459,872,"stage","chair_7"),Ht=this.add.image(1174,863,"stage","chair_18"),ne=this.add.image(1062,869,"stage","chair_17"),ee=this.add.image(576,889,"stage","chair_6"),ge=this.add.image(945,884,"stage","chair_16"),Re=this.add.image(889,409,"stage","rock"),ze=this.add.image(1405,1111,"stage","costume");ze.setOrigin(.5,2.52174);const ti=this.add.sprite(1321,562,"stage","puffle_0001");ti.setOrigin(.5,2.5);const Ui=this.add.rectangle(770,786,128,128);Ui.scaleX=.2081666030534125,Ui.scaleY=.12594856749260913,Ui.fillColor=2883382,Ui.fillAlpha=100;const Ue=this.add.rectangle(733,787,128,128);Ue.scaleX=.2081666030534125,Ue.scaleY=.12594856749260913,Ue.fillColor=2883382,Ue.fillAlpha=100;const ei=this.add.rectangle(842.0000171661377,785.0000286102295,128,128);ei.scaleX=.2081666030534125,ei.scaleY=.42246624663682275,ei.angle=-15,ei.fillColor=2883382,ei.fillAlpha=100;const gi=this.add.rectangle(679,798,128,128);gi.scaleX=.1583659922105759,gi.scaleY=.3495464438798911,gi.angle=11,gi.fillColor=2883382,gi.fillAlpha=100;const Fe=this.add.rectangle(1348,619,90,75);Fe.scaleX=1.549635437539624,Fe.scaleY=1.7388372846727806,Fe.alpha=.5,Fe.isFilled=!0,Fe.fillColor=65280;const ii=this.add.rectangle(822,798,128,128);ii.scaleX=.11523373781277776,ii.scaleY=.3495464438798911,ii.angle=-22,ii.fillColor=2883382,ii.fillAlpha=100;const Ve=this.add.rectangle(753,805,128,128);Ve.scaleX=.2081666030534125,Ve.scaleY=.12594856749260913,Ve.fillColor=2883382,Ve.fillAlpha=100;const Si=this.add.rectangle(701,796,128,128);Si.scaleX=.13215964300788094,Si.scaleY=.3495464438798911,Si.angle=5,Si.fillColor=2883382,Si.fillAlpha=100;const Li=this.add.rectangle(800,798,128,128);Li.scaleX=.10620970478853112,Li.scaleY=.2930667996569235,Li.angle=-13,Li.fillColor=2883382,Li.fillAlpha=100,this.add.image(1451,660,"stage","glow").setOrigin(.5,1.7381926437985082),this.add.image(1344,581,"stage","glow").setOrigin(.5,1.7381926437985082);const us=[V,at,lt,Z,st,de,zt,qt,J,Tt,Et,vt,Ht,ne,ge,ee,Yt,wt,Ft,ve,Nt,Vt,$t,Wt,Ce,K,$,I,N,W,Re,h,B,L,G,D,z,U,T,x,A,w,b,dt,mt,ut,c,X,H,E,R,u,d,y,ze,p,g,Ct,Jt,It,Pt,Rt,xt,ti,pe],He=new e.fw(s);He.key="snow_",He.end=28,He.repeat=0,He.autoPlay=!1;const ke=new e.fw(i);ke.key="cloud_",ke.end=25,ke.repeat=0,ke.autoPlay=!1;const Yi=new e.fw(h);Yi.key="ship_",Yi.end=28,Yi.repeat=0,Yi.autoPlay=!1;const fs=new e.zx(Ct);fs.spriteName="plaza_door",fs.activeFrame=!1;const Fi=new e.$X(Ct);Fi.x=132,Fi.y=660;const Bi=new e.fw(pe);Bi.key="lever_",Bi.end=17,Bi.repeat=0,Bi.autoPlay=!1;const Ii=new e.fw(q);Ii.key="button1_",Ii.end=39,Ii.repeat=0,Ii.autoPlay=!1;const Ut=new e.fw(ot);Ut.key="button3_",Ut.end=39,Ut.repeat=0,Ut.autoPlay=!1;const Xi=new e.fw(pt);Xi.key="button2_",Xi.end=12,Xi.repeat=0,Xi.autoPlay=!1;const Wi=new e.zx(ze);Wi.spriteName="costume",Wi.callback=()=>this.interface.showBook("stage"),Wi.activeFrame=!1;const Ye=new e.fw(ti);Ye.key="puffle_",Ye.end=113,Ye.repeat=0,Ye.autoPlay=!1;const Di=new e.rF(Ui);Di.callback=()=>this.onRedButtonClick();const si=new e.rF(Ue);si.callback=()=>this.onAquaButtonClick();const cs=new e.rF(ei);cs.callback=()=>this.onLeverClick();const Vi=new e.rF(gi);Vi.callback=()=>this.toggleClouds();const Hi=new e.ld(Fe);Hi.hoverCallback=()=>this.onTrunkOver(),Hi.hoverOutCallback=()=>this.onTrunkOut(),Hi.callback=()=>this.interface.showBook("stage");const qi=new e.rF(ii);qi.callback=()=>this.toggleBush();const Ns=new e.rF(Ve);Ns.callback=()=>this.toggleFlag();const _i=new e.rF(Si);_i.callback=()=>this.toggleWaves();const Gs=new e.rF(Li);Gs.callback=()=>this.toggleBackdrop(),this.backdrop=o,this.snow=s,this.fan=l,this.clouds=i,this.ship=h,this.flag=d,this.gears1=L,this.gears2=B,this.gears3=D,this.gears4=G,this.waves2=X,this.waves1=H,this.bush=W,this.trunk=dt,this.lever=pe,this.switch1=me,this.switch2=Oe,this.redbutton=q,this.aquabutton=ot,this.bluebutton=pt,this.switch3=ct,this.switch4=St,this.puffle=ti,this.sort=us,this.events.emit("scene-awake")}onRedButtonClick(){this.redbutton.__Animation.play(),this.ship.__Animation.play()}onAquaButtonClick(){this.aquabutton.__Animation.play(),this.snow.__Animation.play()}onLeverClick(){this.lever.__Animation.play(),this.puffle.__Animation.play()}toggleClouds(){const o=this.cloudsOpen?"clouds_close":"clouds_open";this.cloudsOpen=!this.cloudsOpen,this.clouds.play(o);const a=this.switch4Open?"switch4_close":"switch4_open";this.switch4Open=!this.switch4Open,this.switch4.play(a)}toggleBush(){const o=this.bushOpen?"bush_close":"bush_open";this.bushOpen=!this.bushOpen,this.bush.play(o);const a=this.switch1Open?"switch1_close":"switch1_open";this.switch1Open=!this.switch1Open,this.switch1.play(a)}toggleWaves(){const o=this.waves1Open?"waves1_close":"waves1_open";this.waves1Open=!this.waves1Open,this.waves1.play(o);const a=this.waves2Open?"waves2_close":"waves2_open";this.waves2Open=!this.waves2Open,this.waves2.play(a);const s=this.gearsOpen?"gears_close":"gears_open";this.gearsOpen=!this.gearsOpen,this.gears1.play(s);const n=this.gears2Open?"gears_close":"gears_open";this.gears2Open=!this.gears2Open,this.gears2.play(n);const l=this.gears3Open?"gears_close":"gears_open";this.gears3Open=!this.gears3Open,this.gears3.play(l);const i=this.gears4Open?"gears_close":"gears_open";this.gears4Open=!this.gears4Open,this.gears4.play(i);const h=this.switch3Open?"switch3_close":"switch3_open";this.switch3Open=!this.switch3Open,this.switch3.play(h)}toggleFlag(){const o=this.flagOpen?"flag_close":"flag_open";this.flagOpen=!this.flagOpen,this.flag.play(o),this.bluebutton.__Animation.play();const a=this.fanOpen?"fan_close":"fan_open";this.fanOpen=!this.fanOpen,this.fan.play(a)}toggleBackdrop(){const o=this.backdropOpen?"backdrop_close":"backdrop_open";this.backdropOpen=!this.backdropOpen,this.backdrop.play(o);const a=this.switch2Open?"switch2_close":"switch2_open";this.switch2Open=!this.switch2Open,this.switch2.play(a)}onTrunkOver(){this.trunk.play("trunk_open")}onTrunkOut(){this.trunk.play("trunk_close")}}},1909:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Town"),this.canopy_lights,this.disco_lights,this.disco,this.sort,this.roomTriggers={dock:()=>this.triggerRoom(800,1200,400),forts:()=>this.triggerRoom(801,360,520),coffee:()=>this.triggerRoom(110,700,450),dance:()=>this.triggerRoom(120,300,560),gift:()=>this.triggerRoom(130,1036,520)},this.music="Town"}_preload(){this.load.pack("town-pack","assets/media/rooms/town/town-pack.json")}_create(){this.add.image(-10,0,"town","bg").setOrigin(0,0);const a=this.add.image(-63,976,"town","fg");a.setOrigin(0,1),this.add.image(179,450,"town","left_sign").setOrigin(0,0),this.add.image(1286,465,"town","right_sign").setOrigin(0,0);const l=this.add.image(449,305,"town","coffee_door");l.setOrigin(0,0);const i=this.add.image(995,294,"town","gift_door");i.setOrigin(0,0);const h=this.add.image(692,464,"town","canopy");h.setOrigin(.49606299212598426,.9403669724770642);const u=this.add.sprite(648,548,"town","canopy_lights0001");u.setOrigin(0,7.142857142857143),u.visible=!1;const d=this.add.image(647,548,"town","canopy_stars");d.setOrigin(0,7.142857142857143);const c=this.add.sprite(766,332,"town","disco_lights0007");c.setOrigin(0,0),c.visible=!1;const p=this.add.image(648,229,"town","disco");p.setOrigin(0,0);const g=this.add.sprite(518,-75,"town","lights0001");g.setOrigin(0,0);const x=this.add.image(973,432,"town","box_1");x.setOrigin(.49382716049382713,.6268656716417911);const y=this.add.image(954,483,"town","box_2");y.setOrigin(.49504950495049505,.6736842105263158);const T=this.add.image(1148,581,"town","box_3");T.setOrigin(.4943820224719101,.5569620253164557);const E=this.add.image(436,462,"town","chair_2");E.setOrigin(.49382716049382713,.27358490566037735);const w=this.add.image(485,523,"town","table_2");w.setOrigin(.5,.7864077669902912);const A=this.add.image(402,511,"town","chair_1");A.setOrigin(.49411764705882355,.2857142857142857);const b=this.add.image(455,575,"town","table_1");b.setOrigin(.49572649572649574,.7830188679245284);const R=[a,y,x,T,E,A,b,w,h,d,u],L=new e.zx(l);L.spriteName="coffee_door",L.activeFrame=!1,L.pixelPerfect=!0;const B=new e.$X(l);B.x=550,B.y=450;const D=new e.zx(i);D.spriteName="gift_door",D.activeFrame=!1,D.pixelPerfect=!0;const G=new e.$X(i);G.x=1010,G.y=466;const X=new e.rF(h);X.hoverCallback=()=>this.onCanopyOver(),X.hoverOutCallback=()=>this.onCanopyOut();const H=new e.$X(h);H.x=684,H.y=410;const K=new e.fw(u);K.key="canopy_lights",K.end=57,K.autoPlay=!1,K.showOnStart=!0,K.hideOnComplete=!0;const $=new e.fw(c);$.key="disco_lights",$.end=57,$.autoPlay=!1,$.showOnStart=!0,$.hideOnComplete=!0;const N=new e.fw(g);N.key="lights",N.end=69,N.repeatDelay=1,this.canopy_lights=u,this.disco_lights=c,this.disco=p,this.sort=R,this.events.emit("scene-awake")}onCanopyOver(){this.disco.setFrame("disco-hover"),this.canopy_lights.__Animation.play(),this.disco_lights.__Animation.play()}onCanopyOut(){this.disco.setFrame("disco"),this.canopy_lights.__Animation.stop(),this.disco_lights.__Animation.stop()}}},8049:(rt,m,C)=>{"use strict";C.d(m,{Z:()=>f});var t=C(4267),e=C(1215);class f extends t.Z{constructor(){super("Village"),this.rings,this.sort,this.roomTriggers={lodge:()=>this.triggerRoom(220,320,640),dock:()=>this.triggerRoom(800,436,280),beach:()=>this.triggerRoom(400,920,360),mtn:()=>this.triggerRoom(230,840,320),sport:()=>this.triggerRoom(210,1080,520)},this.music="Village"}_preload(){this.load.pack("village-pack","assets/media/rooms/village/village-pack.json")}_create(){this.add.image(-25,-15,"village","bg").setOrigin(0,0);const a=this.add.image(1116.5,305.5,"village","lodge_door");this.add.image(972,444,"village","lodge_stairs"),this.add.image(1087,389,"village","lodge_front").setOrigin(.4807692307692308,.5352112676056338),this.add.image(1104,429,"village","lodge_snow").setOrigin(.5368217054263565,.4838709677419355),this.add.image(348,200,"village","lift");const l=this.add.sprite(1110,32,"village","smoke0001");this.add.image(1355,390,"village","wintersport");const i=this.add.image(1363,393,"village","door");i.setOrigin(.21649,.6145),this.add.image(1432,435,"village","boat"),this.add.image(1477,543,"village","ring"),this.add.image(133,677,"village","left_sign").setOrigin(.4444444444444444,.5217391304347826);const u=this.add.sprite(1356,618,"village","rings_0001");u.setOrigin(.92708,.89736);const d=this.add.image(1471,668,"village","right_sign");d.setOrigin(.4861111111111111,.7831325301204819);const c=this.add.image(792,459,"village","tours");c.setOrigin(.5,.77885);const p=this.add.image(794,505.2201404552512,"village","tours_text");p.setOrigin(.5,3.9212529261510674);const g=this.add.sprite(292,150,"village","chair0001"),x=this.add.rectangle(1361,559,135,160);x.alpha=.5,x.isFilled=!0,x.fillColor=65280,this.add.image(429,633,"village","shadow").setOrigin(0,0);const T=this.add.image(521,680.6457271080992,"village","box1");T.setOrigin(.5,.7677887082561607);const E=this.add.image(638,762.0000080031817,"village","box2"),w=this.add.image(1028,654.754300090899,"village","box3");w.setOrigin(.5,.8271358213477564);const A=this.add.image(1100,761,"village","plank"),b=[c,p,u,d,A,w,E,T],R=new e.zx(a);R.spriteName="lodge_door",R.activeFrame=!1;const L=new e.$X(a);L.x=1e3,L.y=400;const B=new e.fw(l);B.key="smoke",B.end=5;const D=new e.zx(i);D.spriteName="door",D.activeFrame=!1;const G=new e.$X(i);G.x=1360,G.y=464;const X=new e.fw(u);X.key="rings_",X.end=34,X.repeat=0,X.autoPlay=!1;const H=new e.fw(g);H.key="chair",H.end=179,H.repeatDelay=1500;const K=new e.ld(x);K.hoverCallback=()=>this.onRingsOver(),this.rings=u,this.sort=b,this.events.emit("scene-awake")}onRingsOver(){this.rings.__Animation.play()}}},8058:rt=>{try{rt.exports=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch(m){rt.exports=!1}},1852:rt=>{"use strict";function m(e){if(this._offset=0,e instanceof ArrayBuffer)this._buffer=e,this._view=new DataView(this._buffer);else if(ArrayBuffer.isView(e))this._buffer=e.buffer,this._view=new DataView(this._buffer,e.byteOffset,e.byteLength);else throw new Error("Invalid argument")}function C(e,f,r){for(var o="",a=0,s=f,n=f+r;s<n;s++){var l=e.getUint8(s);if((l&128)===0){o+=String.fromCharCode(l);continue}if((l&224)===192){o+=String.fromCharCode((l&31)<<6|e.getUint8(++s)&63);continue}if((l&240)===224){o+=String.fromCharCode((l&15)<<12|(e.getUint8(++s)&63)<<6|(e.getUint8(++s)&63)<<0);continue}if((l&248)===240){a=(l&7)<<18|(e.getUint8(++s)&63)<<12|(e.getUint8(++s)&63)<<6|(e.getUint8(++s)&63)<<0,a>=65536?(a-=65536,o+=String.fromCharCode((a>>>10)+55296,(a&1023)+56320)):o+=String.fromCharCode(a);continue}throw new Error("Invalid byte "+l.toString(16))}return o}m.prototype._array=function(e){for(var f=new Array(e),r=0;r<e;r++)f[r]=this._parse();return f},m.prototype._map=function(e){for(var f="",r={},o=0;o<e;o++)f=this._parse(),r[f]=this._parse();return r},m.prototype._str=function(e){var f=C(this._view,this._offset,e);return this._offset+=e,f},m.prototype._bin=function(e){var f=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,f},m.prototype._parse=function(){var e=this._view.getUint8(this._offset++),f,r=0,o=0,a=0,s=0;if(e<192)return e<128?e:e<144?this._map(e&15):e<160?this._array(e&15):this._str(e&31);if(e>223)return(255-e+1)*-1;switch(e){case 192:return null;case 194:return!1;case 195:return!0;case 196:return r=this._view.getUint8(this._offset),this._offset+=1,this._bin(r);case 197:return r=this._view.getUint16(this._offset),this._offset+=2,this._bin(r);case 198:return r=this._view.getUint32(this._offset),this._offset+=4,this._bin(r);case 199:return r=this._view.getUint8(this._offset),o=this._view.getInt8(this._offset+1),this._offset+=2,[o,this._bin(r)];case 200:return r=this._view.getUint16(this._offset),o=this._view.getInt8(this._offset+2),this._offset+=3,[o,this._bin(r)];case 201:return r=this._view.getUint32(this._offset),o=this._view.getInt8(this._offset+4),this._offset+=5,[o,this._bin(r)];case 202:return f=this._view.getFloat32(this._offset),this._offset+=4,f;case 203:return f=this._view.getFloat64(this._offset),this._offset+=8,f;case 204:return f=this._view.getUint8(this._offset),this._offset+=1,f;case 205:return f=this._view.getUint16(this._offset),this._offset+=2,f;case 206:return f=this._view.getUint32(this._offset),this._offset+=4,f;case 207:return a=this._view.getUint32(this._offset)*Math.pow(2,32),s=this._view.getUint32(this._offset+4),this._offset+=8,a+s;case 208:return f=this._view.getInt8(this._offset),this._offset+=1,f;case 209:return f=this._view.getInt16(this._offset),this._offset+=2,f;case 210:return f=this._view.getInt32(this._offset),this._offset+=4,f;case 211:return a=this._view.getInt32(this._offset)*Math.pow(2,32),s=this._view.getUint32(this._offset+4),this._offset+=8,a+s;case 212:if(o=this._view.getInt8(this._offset),this._offset+=1,o===0){this._offset+=1;return}return[o,this._bin(1)];case 213:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(2)];case 214:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(4)];case 215:return o=this._view.getInt8(this._offset),this._offset+=1,o===0?(a=this._view.getInt32(this._offset)*Math.pow(2,32),s=this._view.getUint32(this._offset+4),this._offset+=8,new Date(a+s)):[o,this._bin(8)];case 216:return o=this._view.getInt8(this._offset),this._offset+=1,[o,this._bin(16)];case 217:return r=this._view.getUint8(this._offset),this._offset+=1,this._str(r);case 218:return r=this._view.getUint16(this._offset),this._offset+=2,this._str(r);case 219:return r=this._view.getUint32(this._offset),this._offset+=4,this._str(r);case 220:return r=this._view.getUint16(this._offset),this._offset+=2,this._array(r);case 221:return r=this._view.getUint32(this._offset),this._offset+=4,this._array(r);case 222:return r=this._view.getUint16(this._offset),this._offset+=2,this._map(r);case 223:return r=this._view.getUint32(this._offset),this._offset+=4,this._map(r)}throw new Error("Could not parse")};function t(e){var f=new m(e),r=f._parse();if(f._offset!==e.byteLength)throw new Error(e.byteLength-f._offset+" trailing bytes");return r}rt.exports=t},5370:rt=>{"use strict";function m(f,r,o){for(var a=0,s=0,n=o.length;s<n;s++)a=o.charCodeAt(s),a<128?f.setUint8(r++,a):a<2048?(f.setUint8(r++,192|a>>6),f.setUint8(r++,128|a&63)):a<55296||a>=57344?(f.setUint8(r++,224|a>>12),f.setUint8(r++,128|a>>6&63),f.setUint8(r++,128|a&63)):(s++,a=65536+((a&1023)<<10|o.charCodeAt(s)&1023),f.setUint8(r++,240|a>>18),f.setUint8(r++,128|a>>12&63),f.setUint8(r++,128|a>>6&63),f.setUint8(r++,128|a&63))}function C(f){for(var r=0,o=0,a=0,s=f.length;a<s;a++)r=f.charCodeAt(a),r<128?o+=1:r<2048?o+=2:r<55296||r>=57344?o+=3:(a++,o+=4);return o}function t(f,r,o){var a=typeof o,s=0,n=0,l=0,i=0,h=0,u=0;if(a==="string"){if(h=C(o),h<32)f.push(h|160),u=1;else if(h<256)f.push(217,h),u=2;else if(h<65536)f.push(218,h>>8,h),u=3;else if(h<4294967296)f.push(219,h>>24,h>>16,h>>8,h),u=5;else throw new Error("String too long");return r.push({_str:o,_length:h,_offset:f.length}),u+h}if(a==="number")return Math.floor(o)!==o||!isFinite(o)?(f.push(203),r.push({_float:o,_length:8,_offset:f.length}),9):o>=0?o<128?(f.push(o),1):o<256?(f.push(204,o),2):o<65536?(f.push(205,o>>8,o),3):o<4294967296?(f.push(206,o>>24,o>>16,o>>8,o),5):(l=o/Math.pow(2,32)>>0,i=o>>>0,f.push(207,l>>24,l>>16,l>>8,l,i>>24,i>>16,i>>8,i),9):o>=-32?(f.push(o),1):o>=-128?(f.push(208,o),2):o>=-32768?(f.push(209,o>>8,o),3):o>=-2147483648?(f.push(210,o>>24,o>>16,o>>8,o),5):(l=Math.floor(o/Math.pow(2,32)),i=o>>>0,f.push(211,l>>24,l>>16,l>>8,l,i>>24,i>>16,i>>8,i),9);if(a==="object"){if(o===null)return f.push(192),1;if(Array.isArray(o)){if(h=o.length,h<16)f.push(h|144),u=1;else if(h<65536)f.push(220,h>>8,h),u=3;else if(h<4294967296)f.push(221,h>>24,h>>16,h>>8,h),u=5;else throw new Error("Array too large");for(s=0;s<h;s++)u+=t(f,r,o[s]);return u}if(o instanceof Date){var d=o.getTime();return l=Math.floor(d/Math.pow(2,32)),i=d>>>0,f.push(215,0,l>>24,l>>16,l>>8,l,i>>24,i>>16,i>>8,i),10}if(o instanceof ArrayBuffer){if(h=o.byteLength,h<256)f.push(196,h),u=2;else if(h<65536)f.push(197,h>>8,h),u=3;else if(h<4294967296)f.push(198,h>>24,h>>16,h>>8,h),u=5;else throw new Error("Buffer too large");return r.push({_bin:o,_length:h,_offset:f.length}),u+h}if(typeof o.toJSON=="function")return t(f,r,o.toJSON());var c=[],p="",g=Object.keys(o);for(s=0,n=g.length;s<n;s++)p=g[s],typeof o[p]!="function"&&c.push(p);if(h=c.length,h<16)f.push(h|128),u=1;else if(h<65536)f.push(222,h>>8,h),u=3;else if(h<4294967296)f.push(223,h>>24,h>>16,h>>8,h),u=5;else throw new Error("Object too large");for(s=0;s<h;s++)p=c[s],u+=t(f,r,p),u+=t(f,r,o[p]);return u}if(a==="boolean")return f.push(o?195:194),1;if(a==="undefined")return f.push(212,0,0),3;throw new Error("Could not encode")}function e(f){var r=[],o=[],a=t(r,o,f),s=new ArrayBuffer(a),n=new DataView(s),l=0,i=0,h=-1;o.length>0&&(h=o[0]._offset);for(var u,d=0,c=0,p=0,g=r.length;p<g;p++)if(n.setUint8(i+p,r[p]),p+1===h){if(u=o[l],d=u._length,c=i+h,u._bin)for(var x=new Uint8Array(u._bin),y=0;y<d;y++)n.setUint8(c+y,x[y]);else u._str?m(n,c,u._str):u._float!==void 0&&n.setFloat64(c,u._float);l++,i+=d,o[l]&&(h=o[l]._offset)}return s}rt.exports=e},8086:(rt,m,C)=>{m.encode=C(5370),m.decode=C(1852)},1830:(rt,m)=>{m.encode=function(C){var t="";for(var e in C)C.hasOwnProperty(e)&&(t.length&&(t+="&"),t+=encodeURIComponent(e)+"="+encodeURIComponent(C[e]));return t},m.decode=function(C){for(var t={},e=C.split("&"),f=0,r=e.length;f<r;f++){var o=e[f].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},4187:rt=>{var m=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,C=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];rt.exports=function(r){var o=r,a=r.indexOf("["),s=r.indexOf("]");a!=-1&&s!=-1&&(r=r.substring(0,a)+r.substring(a,s).replace(/:/g,";")+r.substring(s,r.length));for(var n=m.exec(r||""),l={},i=14;i--;)l[C[i]]=n[i]||"";return a!=-1&&s!=-1&&(l.source=o,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=t(l,l.path),l.queryKey=e(l,l.query),l};function t(f,r){var o=/\/{2,9}/g,a=r.replace(o,"/").split("/");return(r.substr(0,1)=="/"||r.length===0)&&a.splice(0,1),r.substr(r.length-1,1)=="/"&&a.splice(a.length-1,1),a}function e(f,r){var o={};return r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,s,n){s&&(o[s]=n)}),o}},2260:function(rt){(function(C,t){rt.exports=t()})(this,function(){return function(m){var C={};function t(e){if(C[e])return C[e].exports;var f=C[e]={i:e,l:!1,exports:{}};return m[e].call(f.exports,f,f.exports,t),f.l=!0,f.exports}return t.m=m,t.c=C,t.d=function(e,f,r){t.o(e,f)||Object.defineProperty(e,f,{enumerable:!0,get:r})},t.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,f){if(f&1&&(e=t(e)),f&8||f&4&&typeof e=="object"&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),f&2&&typeof e!="string")for(var o in e)t.d(r,o,function(a){return e[a]}.bind(null,o));return r},t.n=function(e){var f=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(f,"a",f),f},t.o=function(e,f){return Object.prototype.hasOwnProperty.call(e,f)},t.p="",t(t.s=1528)}([function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}function e(s,n,l){var i=l?s[n]:Object.getOwnPropertyDescriptor(s,n);return!l&&i.value&&typeof i.value=="object"&&(i=i.value),i&&t(i)?(typeof i.enumerable=="undefined"&&(i.enumerable=!0),typeof i.configurable=="undefined"&&(i.configurable=!0),i):!1}function f(s,n){var l=Object.getOwnPropertyDescriptor(s,n);return l?(l.value&&typeof l.value=="object"&&(l=l.value),l.configurable===!1):!1}function r(s,n,l,i){for(var h in n)if(!!n.hasOwnProperty(h)){var u=e(n,h,l);if(u!==!1){var d=i||s;if(f(d.prototype,h)){if(a.ignoreFinals)continue;throw new Error("cannot override final property '"+h+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(s.prototype,h,u)}else s.prototype[h]=n[h]}}function o(s,n){if(!!n){Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++)r(s,n[l].prototype||n[l])}}function a(s){s||(s={});var n,l;if(s.initialize){if(typeof s.initialize!="function")throw new Error("initialize must be a function");n=s.initialize,delete s.initialize}else if(s.Extends){var i=s.Extends;n=function(){i.apply(this,arguments)}}else n=function(){};s.Extends?(n.prototype=Object.create(s.Extends.prototype),n.prototype.constructor=n,l=s.Extends,delete s.Extends):n.prototype.constructor=n;var h=null;return s.Mixins&&(h=s.Mixins,delete s.Mixins),o(n,h),r(n,s,!0,l),n}a.extend=r,a.mixin=o,a.ignoreFinals=!1,m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=typeof e;return!e||o==="number"||o==="string"?r:e.hasOwnProperty(f)&&e[f]!==void 0?e[f]:r};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(124),r=new e({initialize:function(a,s){this.x=0,this.y=0,typeof a=="object"?(this.x=a.x||0,this.y=a.y||0):(s===void 0&&(s=a),this.x=a||0,this.y=s||0)},clone:function(){return new r(this.x,this.y)},copy:function(o){return this.x=o.x||0,this.y=o.y||0,this},setFromObject:function(o){return this.x=o.x||0,this.y=o.y||0,this},set:function(o,a){return a===void 0&&(a=o),this.x=o,this.y=a,this},setTo:function(o,a){return this.set(o,a)},setToPolar:function(o,a){return a==null&&(a=1),this.x=Math.cos(o)*a,this.y=Math.sin(o)*a,this},equals:function(o){return this.x===o.x&&this.y===o.y},fuzzyEquals:function(o,a){return f(this.x,o.x,a)&&f(this.y,o.y,a)},angle:function(){var o=Math.atan2(this.y,this.x);return o<0&&(o+=2*Math.PI),o},setAngle:function(o){return this.setToPolar(o,this.length())},add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.x-=o.x,this.y-=o.y,this},multiply:function(o){return this.x*=o.x,this.y*=o.y,this},scale:function(o){return isFinite(o)?(this.x*=o,this.y*=o):(this.x=0,this.y=0),this},divide:function(o){return this.x/=o.x,this.y/=o.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(o){var a=o.x-this.x,s=o.y-this.y;return Math.sqrt(a*a+s*s)},distanceSq:function(o){var a=o.x-this.x,s=o.y-this.y;return a*a+s*s},length:function(){var o=this.x,a=this.y;return Math.sqrt(o*o+a*a)},setLength:function(o){return this.normalize().scale(o)},lengthSq:function(){var o=this.x,a=this.y;return o*o+a*a},normalize:function(){var o=this.x,a=this.y,s=o*o+a*a;return s>0&&(s=1/Math.sqrt(s),this.x=o*s,this.y=a*s),this},normalizeRightHand:function(){var o=this.x;return this.x=this.y*-1,this.y=o,this},normalizeLeftHand:function(){var o=this.x;return this.x=this.y,this.y=o*-1,this},dot:function(o){return this.x*o.x+this.y*o.y},cross:function(o){return this.x*o.y-this.y*o.x},lerp:function(o,a){a===void 0&&(a=0);var s=this.x,n=this.y;return this.x=s+a*(o.x-s),this.y=n+a*(o.y-n),this},transformMat3:function(o){var a=this.x,s=this.y,n=o.val;return this.x=n[0]*a+n[3]*s+n[6],this.y=n[1]*a+n[4]*s+n[7],this},transformMat4:function(o){var a=this.x,s=this.y,n=o.val;return this.x=n[0]*a+n[4]*s+n[12],this.y=n[1]*a+n[5]*s+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(o){var a=this.length();return a&&a>o&&this.scale(o/a),this},reflect:function(o){return o=o.clone().normalize(),this.subtract(o.scale(2*this.dot(o)))},mirror:function(o){return this.reflect(o).negate()},rotate:function(o){var a=Math.cos(o),s=Math.sin(o);return this.set(a*this.x-s*this.y,s*this.x+a*this.y)}});r.ZERO=new r,r.RIGHT=new r(1,0),r.LEFT=new r(-1,0),r.UP=new r(0,-1),r.DOWN=new r(0,1),r.ONE=new r(1,1),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(56),r=new e({initialize:function(a,s){a===void 0&&(a=0),s===void 0&&(s=a),this.type=f.POINT,this.x=a,this.y=s},setTo:function(o,a){return o===void 0&&(o=0),a===void 0&&(a=o),this.x=o,this.y=a,this}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(24),r=t(20),o=new e({initialize:function(s){this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},existing:function(a){return(a.renderCanvas||a.renderWebGL)&&this.displayList.add(a),a.preUpdate&&this.updateList.add(a),a},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(a,s){o.prototype.hasOwnProperty(a)||(o.prototype[a]=s)},o.remove=function(a){o.prototype.hasOwnProperty(a)&&delete o.prototype[a]},f.register("GameObjectFactory",o,"add"),m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(!e||typeof e=="number")return r;if(e.hasOwnProperty(f))return e[f];if(f.indexOf(".")!==-1){for(var o=f.split("."),a=e,s=r,n=0;n<o.length;n++)if(a.hasOwnProperty(o[n]))s=a[o[n]],a=a[o[n]];else{s=r;break}return s}else return r};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(typeof e!="object"||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(f){return!1}return!0};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},e={install:function(f){for(var r in t)f[r]=t[r]},register:function(f,r){t[f]=r},destroy:function(){t={}}};m.exports=e},function(m,C,t){"use strict";var e=Object.prototype.hasOwnProperty,f="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(f=!1));function o(l,i,h){this.fn=l,this.context=i,this.once=h||!1}function a(l,i,h,u,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var c=new o(h,u||l,d),p=f?f+i:i;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],c]:l._events[p].push(c):(l._events[p]=c,l._eventsCount++),l}function s(l,i){--l._eventsCount===0?l._events=new r:delete l._events[i]}function n(){this._events=new r,this._eventsCount=0}n.prototype.eventNames=function(){var i=[],h,u;if(this._eventsCount===0)return i;for(u in h=this._events)e.call(h,u)&&i.push(f?u.slice(1):u);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(h)):i},n.prototype.listeners=function(i){var h=f?f+i:i,u=this._events[h];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,c=u.length,p=new Array(c);d<c;d++)p[d]=u[d].fn;return p},n.prototype.listenerCount=function(i){var h=f?f+i:i,u=this._events[h];return u?u.fn?1:u.length:0},n.prototype.emit=function(i,h,u,d,c,p){var g=f?f+i:i;if(!this._events[g])return!1;var x=this._events[g],y=arguments.length,T,E;if(x.fn){switch(x.once&&this.removeListener(i,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,u),!0;case 4:return x.fn.call(x.context,h,u,d),!0;case 5:return x.fn.call(x.context,h,u,d,c),!0;case 6:return x.fn.call(x.context,h,u,d,c,p),!0}for(E=1,T=new Array(y-1);E<y;E++)T[E-1]=arguments[E];x.fn.apply(x.context,T)}else{var w=x.length,A;for(E=0;E<w;E++)switch(x[E].once&&this.removeListener(i,x[E].fn,void 0,!0),y){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,h);break;case 3:x[E].fn.call(x[E].context,h,u);break;case 4:x[E].fn.call(x[E].context,h,u,d);break;default:if(!T)for(A=1,T=new Array(y-1);A<y;A++)T[A-1]=arguments[A];x[E].fn.apply(x[E].context,T)}}return!0},n.prototype.on=function(i,h,u){return a(this,i,h,u,!1)},n.prototype.once=function(i,h,u){return a(this,i,h,u,!0)},n.prototype.removeListener=function(i,h,u,d){var c=f?f+i:i;if(!this._events[c])return this;if(!h)return s(this,c),this;var p=this._events[c];if(p.fn)p.fn===h&&(!d||p.once)&&(!u||p.context===u)&&s(this,c);else{for(var g=0,x=[],y=p.length;g<y;g++)(p[g].fn!==h||d&&!p[g].once||u&&p[g].context!==u)&&x.push(p[g]);x.length?this._events[c]=x.length===1?x[0]:x:s(this,c)}return this},n.prototype.removeAllListeners=function(i){var h;return i?(h=f?f+i:i,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prefixed=f,n.EventEmitter=n,m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(57),r=t(171),o=t(306),a=t(56),s=t(47),n=t(174),l=new e({initialize:function(h,u,d,c){h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),this.type=a.RECTANGLE,this.x=h,this.y=u,this.width=d,this.height=c},contains:function(i,h){return f(this,i,h)},getPoint:function(i,h){return r(this,i,h)},getPoints:function(i,h,u){return o(this,i,h,u)},getRandomPoint:function(i){return n(this,i)},setTo:function(i,h,u,d){return this.x=i,this.y=h,this.width=u,this.height=d,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(i,h){return h===void 0&&(h=i),this.x=i,this.y=h,this},setSize:function(i,h){return h===void 0&&(h=i),this.width=i,this.height=h,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(i){return i===void 0&&(i=new s),i.setTo(this.x,this.y,this.right,this.y),i},getLineB:function(i){return i===void 0&&(i=new s),i.setTo(this.right,this.y,this.right,this.bottom),i},getLineC:function(i){return i===void 0&&(i=new s),i.setTo(this.right,this.bottom,this.x,this.bottom),i},getLineD:function(i){return i===void 0&&(i=new s),i.setTo(this.x,this.bottom,this.x,this.y),i},left:{get:function(){return this.x},set:function(i){i>=this.right?this.width=0:this.width=this.right-i,this.x=i}},right:{get:function(){return this.x+this.width},set:function(i){i<=this.x?this.width=0:this.width=i-this.x}},top:{get:function(){return this.y},set:function(i){i>=this.bottom?this.height=0:this.height=this.bottom-i,this.y=i}},bottom:{get:function(){return this.y+this.height},set:function(i){i<=this.y?this.height=0:this.height=i-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(i){this.x=i-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(i){this.y=i-this.height/2}}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(e){for(var f="",r=0;r<e;++r)r>0&&(f+=`
else `),r<e-1&&(f+="if(test == "+r+".0){}");return f}m.exports={getTintFromFloats:function(e,f,r,o){var a=(e*255|0)&255,s=(f*255|0)&255,n=(r*255|0)&255,l=(o*255|0)&255;return(l<<24|a<<16|s<<8|n)>>>0},getTintAppendFloatAlpha:function(e,f){var r=(f*255|0)&255;return(r<<24|e)>>>0},getTintAppendFloatAlphaAndSwap:function(e,f){var r=(e>>16|0)&255,o=(e>>8|0)&255,a=(e|0)&255,s=(f*255|0)&255;return(s<<24|a<<16|o<<8|r)>>>0},getFloatsFromUintRGB:function(e){var f=(e>>16|0)&255,r=(e>>8|0)&255,o=(e|0)&255;return[f/255,r/255,o/255]},checkShaderMax:function(e,f){(!f||f===-1)&&(f=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));for(var r=e.createShader(e.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);;){var a=o.replace(/%forloop%/gi,t(f));if(e.shaderSource(r,a),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))f=f/2|0;else break}return f},parseFragmentShaderMaxTextures:function(e,f){if(!e)return"";for(var r="",o=0;o<f;o++)o>0&&(r+=`
	else `),o<f-1&&(r+="if (outTexId < "+o+".5)"),r+=`
	{`,r+=`
		texture = texture2D(uMainSampler[`+o+"], outTexCoord);",r+=`
	}`;return e=e.replace(/%count%/gi,f.toString()),e.replace(/%forloop%/gi,r)}}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(193),f=t(6),r=function(o,a,s){var n=f(o,a,null);if(n===null)return s;if(Array.isArray(n))return e.RND.pick(n);if(typeof n=="object"){if(n.hasOwnProperty("randInt"))return e.RND.integerInRange(n.randInt[0],n.randInt[1]);if(n.hasOwnProperty("randFloat"))return e.RND.realInRange(n.randFloat[0],n.randFloat[1])}else if(typeof n=="function")return n(a);return n};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(176),r=t(101),o=t(9),a=t(75),s=t(20),n=new e({Extends:o,initialize:function(i,h){o.call(this),this.scene=i,this.displayList=null,this.type=h,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),i.sys.queueDepthSort()},setActive:function(l){return this.active=l,this},setName:function(l){return this.name=l,this},setState:function(l){return this.state=l,this},setDataEnabled:function(){return this.data||(this.data=new r(this)),this},setData:function(l,i){return this.data||(this.data=new r(this)),this.data.set(l,i),this},incData:function(l,i){return this.data||(this.data=new r(this)),this.data.inc(l,i),this},toggleData:function(l){return this.data||(this.data=new r(this)),this.data.toggle(l),this},getData:function(l){return this.data||(this.data=new r(this)),this.data.get(l)},setInteractive:function(l,i,h){return this.scene.sys.input.enable(this,l,i,h),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return f(this)},willRender:function(l){return!(n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&l.id)},getIndexList:function(){for(var l=this,i=this.parentContainer,h=[];i&&(h.unshift(i.getIndex(l)),l=i,i.parentContainer);)i=i.parentContainer;return this.displayList?h.unshift(this.displayList.getIndex(l)):h.unshift(this.scene.sys.displayList.getIndex(l)),h},addToDisplayList:function(l){return l===void 0&&(l=this.scene.sys.displayList),this.displayList&&this.displayList!==l&&this.removeFromDisplayList(),l.exists(this)||(this.displayList=l,l.add(this,!0),l.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),l.events.emit(s.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var l=this.displayList||this.scene.sys.displayList;return l.exists(this)&&(l.remove(this,!0),l.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),l.events.emit(s.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(l){!this.scene||this.ignoreDestroy||(l===void 0&&(l=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,l),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});n.RENDER_MASK=15,m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(24),r=t(20),o=new e({initialize:function(s){this.scene=s,this.systems=s.sys,this.events=s.sys.events,this.displayList,this.updateList,this.events.once(r.BOOT,this.boot,this),this.events.on(r.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});o.register=function(a,s){o.prototype.hasOwnProperty(a)||(o.prototype[a]=s)},o.remove=function(a){o.prototype.hasOwnProperty(a)&&delete o.prototype[a]},f.register("GameObjectCreator",o,"make"),m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(7),f=function(){var r,o,a,s,n,l,i=arguments[0]||{},h=1,u=arguments.length,d=!1;for(typeof i=="boolean"&&(d=i,i=arguments[1]||{},h=2),u===h&&(i=this,--h);h<u;h++)if((r=arguments[h])!=null)for(o in r)a=i[o],s=r[o],i!==s&&(d&&s&&(e(s)||(n=Array.isArray(s)))?(n?(n=!1,l=a&&Array.isArray(a)?a:[]):l=a&&e(a)?a:{},i[o]=f(d,l,s)):s!==void 0&&(i[o]=s));return i};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return Math.max(f,Math.min(r,e))};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=new e,r=new e,o=new e,a={camera:f,sprite:r,calc:o},s=function(n,l,i){var h=f,u=r,d=o;return u.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),h.copyFrom(l.matrix),i?(h.multiplyWithOffset(i,-l.scrollX*n.scrollFactorX,-l.scrollY*n.scrollFactorY),u.e=n.x,u.f=n.y):(u.e-=l.scrollX*n.scrollFactorX,u.f-=l.scrollY*n.scrollFactorY),h.multiply(u,d),a};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(95),o=t(2),a=t(155),s=t(240),n=t(517),l=t(156),i=new e({initialize:function(u,d){this.loader=u,this.cache=o(d,"cache",!1),this.type=o(d,"type",!1),this.key=o(d,"key",!1);var c=this.key;if(u.prefix&&u.prefix!==""&&(this.key=u.prefix+c),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var p=o(d,"url");p===void 0?p=u.path+c+"."+o(d,"extension",""):typeof p=="string"&&!p.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)&&(p=u.path+p),this.url=p,this.src="",this.xhrSettings=l(o(d,"responseType",void 0)),o(d,"xhrSettings",!1)&&(this.xhrSettings=s(this.xhrSettings,o(d,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?f.FILE_POPULATED:f.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=o(d,"config",{}),this.multiFile,this.linkFile},setLink:function(h){this.linkFile=h,h.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===f.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=f.FILE_LOADING,this.src=a(this,this.loader.baseURL),this.src.indexOf("data:")===0?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=n(this,this.loader.xhr))},onLoad:function(h,u){var d=h.responseURL&&(h.responseURL.indexOf("file://")===0||h.responseURL.indexOf("capacitor://")===0),c=d&&u.target.status===0,p=!(u.target&&u.target.status!==200)||c;h.readyState===4&&h.status>=400&&h.status<=599&&(p=!1),this.state=f.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,p)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(h){h.lengthComputable&&(this.bytesLoaded=h.loaded,this.bytesTotal=h.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(r.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=f.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=f.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=f.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(h){h===void 0&&(h=this.data);var u=this.key,d=this.type;this.loader.emit(r.FILE_COMPLETE,u,d,h),this.loader.emit(r.FILE_KEY_COMPLETE+d+"-"+u,u,d,h),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});i.createObjectURL=function(h,u,d){if(typeof URL=="function")h.src=URL.createObjectURL(u);else{var c=new FileReader;c.onload=function(){h.removeAttribute("crossOrigin"),h.src="data:"+(u.type||d)+";base64,"+c.result.split(",")[1]},c.onerror=h.onerror,c.readAsDataURL(u)}},i.revokeObjectURL=function(h){typeof URL=="function"&&URL.revokeObjectURL(h.src)},m.exports=i},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={},e={},f={};f.register=function(r,o,a,s){s===void 0&&(s=!1),t[r]={plugin:o,mapping:a,custom:s}},f.registerCustom=function(r,o,a,s){e[r]={plugin:o,mapping:a,data:s}},f.hasCore=function(r){return t.hasOwnProperty(r)},f.hasCustom=function(r){return e.hasOwnProperty(r)},f.getCore=function(r){return t[r]},f.getCustom=function(r){return e[r]},f.getCustomClass=function(r){return e.hasOwnProperty(r)?e[r].plugin:null},f.remove=function(r){t.hasOwnProperty(r)&&delete t[r]},f.removeCustom=function(r){e.hasOwnProperty(r)&&delete e[r]},f.destroyCorePlugins=function(){for(var r in t)t.hasOwnProperty(r)&&delete t[r]},f.destroyCustomPlugins=function(){for(var r in e)e.hasOwnProperty(r)&&delete e[r]},m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(14),r=t(3),o=new e({initialize:function(s,n,l,i,h,u){s===void 0&&(s=1),n===void 0&&(n=0),l===void 0&&(l=0),i===void 0&&(i=1),h===void 0&&(h=0),u===void 0&&(u=0),this.matrix=new Float32Array([s,n,l,i,h,u,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(a){this.matrix[0]=a}},b:{get:function(){return this.matrix[1]},set:function(a){this.matrix[1]=a}},c:{get:function(){return this.matrix[2]},set:function(a){this.matrix[2]=a}},d:{get:function(){return this.matrix[3]},set:function(a){this.matrix[3]=a}},e:{get:function(){return this.matrix[4]},set:function(a){this.matrix[4]=a}},f:{get:function(){return this.matrix[5]},set:function(a){this.matrix[5]=a}},tx:{get:function(){return this.matrix[4]},set:function(a){this.matrix[4]=a}},ty:{get:function(){return this.matrix[5]},set:function(a){this.matrix[5]=a}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var a=this.matrix,s=a[0],n=a[1],l=a[2],i=a[3];return s||n?n>0?Math.acos(s/this.scaleX):-Math.acos(s/this.scaleX):l||i?f.TAU-(i>0?Math.acos(-l/this.scaleY):-Math.acos(l/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var a=this.matrix;return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,this},translate:function(a,s){var n=this.matrix;return n[4]=n[0]*a+n[2]*s+n[4],n[5]=n[1]*a+n[3]*s+n[5],this},scale:function(a,s){var n=this.matrix;return n[0]*=a,n[1]*=a,n[2]*=s,n[3]*=s,this},rotate:function(a){var s=Math.sin(a),n=Math.cos(a),l=this.matrix,i=l[0],h=l[1],u=l[2],d=l[3];return l[0]=i*n+u*s,l[1]=h*n+d*s,l[2]=i*-s+u*n,l[3]=h*-s+d*n,this},multiply:function(a,s){var n=this.matrix,l=a.matrix,i=n[0],h=n[1],u=n[2],d=n[3],c=n[4],p=n[5],g=l[0],x=l[1],y=l[2],T=l[3],E=l[4],w=l[5],A=s===void 0?this:s;return A.a=g*i+x*u,A.b=g*h+x*d,A.c=y*i+T*u,A.d=y*h+T*d,A.e=E*i+w*u+c,A.f=E*h+w*d+p,A},multiplyWithOffset:function(a,s,n){var l=this.matrix,i=a.matrix,h=l[0],u=l[1],d=l[2],c=l[3],p=l[4],g=l[5],x=s*h+n*d+p,y=s*u+n*c+g,T=i[0],E=i[1],w=i[2],A=i[3],b=i[4],R=i[5];return l[0]=T*h+E*d,l[1]=T*u+E*c,l[2]=w*h+A*d,l[3]=w*u+A*c,l[4]=b*h+R*d+x,l[5]=b*u+R*c+y,this},transform:function(a,s,n,l,i,h){var u=this.matrix,d=u[0],c=u[1],p=u[2],g=u[3],x=u[4],y=u[5];return u[0]=a*d+s*p,u[1]=a*c+s*g,u[2]=n*d+l*p,u[3]=n*c+l*g,u[4]=i*d+h*p+x,u[5]=i*c+h*g+y,this},transformPoint:function(a,s,n){n===void 0&&(n={x:0,y:0});var l=this.matrix,i=l[0],h=l[1],u=l[2],d=l[3],c=l[4],p=l[5];return n.x=a*i+s*u+c,n.y=a*h+s*d+p,n},invert:function(){var a=this.matrix,s=a[0],n=a[1],l=a[2],i=a[3],h=a[4],u=a[5],d=s*i-n*l;return a[0]=i/d,a[1]=-n/d,a[2]=-l/d,a[3]=s/d,a[4]=(l*u-i*h)/d,a[5]=-(s*u-n*h)/d,this},copyFrom:function(a){var s=this.matrix;return s[0]=a.a,s[1]=a.b,s[2]=a.c,s[3]=a.d,s[4]=a.e,s[5]=a.f,this},copyFromArray:function(a){var s=this.matrix;return s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=a[3],s[4]=a[4],s[5]=a[5],this},copyToContext:function(a){var s=this.matrix;return a.transform(s[0],s[1],s[2],s[3],s[4],s[5]),a},setToContext:function(a){var s=this.matrix;return a.setTransform(s[0],s[1],s[2],s[3],s[4],s[5]),a},copyToArray:function(a){var s=this.matrix;return a===void 0?a=[s[0],s[1],s[2],s[3],s[4],s[5]]:(a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4],a[5]=s[5]),a},setTransform:function(a,s,n,l,i,h){var u=this.matrix;return u[0]=a,u[1]=s,u[2]=n,u[3]=l,u[4]=i,u[5]=h,this},decomposeMatrix:function(){var a=this.decomposedMatrix,s=this.matrix,n=s[0],l=s[1],i=s[2],h=s[3],u=n*h-l*i;if(a.translateX=s[4],a.translateY=s[5],n||l){var d=Math.sqrt(n*n+l*l);a.rotation=l>0?Math.acos(n/d):-Math.acos(n/d),a.scaleX=d,a.scaleY=u/d}else if(i||h){var c=Math.sqrt(i*i+h*h);a.rotation=Math.PI*.5-(h>0?Math.acos(-i/c):-Math.acos(i/c)),a.scaleX=u/c,a.scaleY=c}else a.rotation=0,a.scaleX=0,a.scaleY=0;return a},applyITRS:function(a,s,n,l,i){var h=this.matrix,u=Math.sin(n),d=Math.cos(n);return h[4]=a,h[5]=s,h[0]=d*l,h[1]=u*l,h[2]=-u*i,h[3]=d*i,this},applyInverse:function(a,s,n){n===void 0&&(n=new r);var l=this.matrix,i=l[0],h=l[1],u=l[2],d=l[3],c=l[4],p=l[5],g=1/(i*d+u*-h);return n.x=d*g*a+-u*g*s+(p*u-c*d)*g,n.y=i*g*s+-h*g*a+(-p*i+c*h)*g,n},getX:function(a,s){return a*this.a+s*this.c+this.e},getY:function(a,s){return a*this.b+s*this.d+this.f},getXRound:function(a,s,n){var l=this.getX(a,s);return n&&(l=Math.round(l)),l},getYRound:function(a,s,n){var l=this.getY(a,s);return n&&(l=Math.round(l)),l},getCSSMatrix:function(){var a=this.matrix;return"matrix("+a[0]+","+a[1]+","+a[2]+","+a[3]+","+a[4]+","+a[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(r,o,a,s,n,l){r===void 0&&(r=0),o===void 0&&(o=0),a===void 0&&(a=l.width),s===void 0&&(s=l.height),n||(n={});var i=e(n,"isNotEmpty",!1),h=e(n,"isColliding",!1),u=e(n,"hasInterestingFace",!1);r<0&&(a+=r,r=0),o<0&&(s+=o,o=0),r+a>l.width&&(a=Math.max(l.width-r,0)),o+s>l.height&&(s=Math.max(l.height-o,0));for(var d=[],c=o;c<o+s;c++)for(var p=r;p<r+a;p++){var g=l.data[c][p];if(g!==null){if(i&&g.index===-1||h&&!g.collides||u&&!g.hasInterestingFace)continue;d.push(g)}}return d};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a,s){o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=1);var n,l=0,i=e.length;if(s===1)for(n=a;n<i;n++)e[n][f]=r+l*o,l++;else for(n=a;n>=0;n--)e[n][f]=r+l*o,l++;return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(13),r=function(o,a,s){a.x=f(s,"x",0),a.y=f(s,"y",0),a.depth=f(s,"depth",0),a.flipX=f(s,"flipX",!1),a.flipY=f(s,"flipY",!1);var n=f(s,"scale",null);typeof n=="number"?a.setScale(n):n!==null&&(a.scaleX=f(n,"x",1),a.scaleY=f(n,"y",1));var l=f(s,"scrollFactor",null);typeof l=="number"?a.setScrollFactor(l):l!==null&&(a.scrollFactorX=f(l,"x",1),a.scrollFactorY=f(l,"y",1)),a.rotation=f(s,"rotation",0);var i=f(s,"angle",null);i!==null&&(a.angle=i),a.alpha=f(s,"alpha",1);var h=f(s,"origin",null);if(typeof h=="number")a.setOrigin(h);else if(h!==null){var u=f(h,"x",.5),d=f(h,"y",.5);a.setOrigin(u,d)}a.blendMode=f(s,"blendMode",e.NORMAL),a.visible=f(s,"visible",!0);var c=f(s,"add",!0);return c&&o.sys.displayList.add(a),a.preUpdate&&o.sys.updateList.add(a),a};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(r,o,a,s,n){var l=s.alpha*a.alpha;if(l<=0)return!1;var i=e(a,s,n).calc;return o.globalCompositeOperation=r.blendModes[a.blendMode],o.globalAlpha=l,o.save(),i.setToContext(o),o.imageSmoothingEnabled=!(!r.antialias||a.frame&&a.frame.source.scaleMode),!0};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),f=t(192),r=[],o=!1,a=function(){var s=function(g,x,y,T,E){x===void 0&&(x=1),y===void 0&&(y=1),T===void 0&&(T=e.CANVAS),E===void 0&&(E=!1);var w,A=i(T);return A===null?(A={parent:g,canvas:document.createElement("canvas"),type:T},T===e.CANVAS&&r.push(A),w=A.canvas):(A.parent=g,w=A.canvas),E&&(A.parent=w),w.width=x,w.height=y,o&&T===e.CANVAS&&f.disable(w.getContext("2d")),w},n=function(g,x,y){return s(g,x,y,e.CANVAS)},l=function(g,x,y){return s(g,x,y,e.WEBGL)},i=function(g){if(g===void 0&&(g=e.CANVAS),g===e.WEBGL)return null;for(var x=0;x<r.length;x++){var y=r[x];if(!y.parent&&y.type===g)return y}return null},h=function(g){var x=g instanceof HTMLCanvasElement;r.forEach(function(y){(x&&y.canvas===g||!x&&y.parent===g)&&(y.parent=null,y.canvas.width=1,y.canvas.height=1)})},u=function(){var g=0;return r.forEach(function(x){x.parent&&g++}),g},d=function(){return r.length-u()},c=function(){o=!0},p=function(){o=!1};return{create2D:n,create:s,createWebGL:l,disableSmoothing:c,enableSmoothing:p,first:i,free:d,pool:r,remove:h,total:u}};m.exports=a()},function(m,C){var t={};m.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(f,r){var o,a,s;typeof r=="boolean"?(o=2,s=r):(o=1,s=!0);for(var n=o;n<arguments.length;n++){var l=arguments[n];if(l)for(var i in l)s&&l[i]&&l[i].constructor===Object&&(!f[i]||f[i].constructor===Object)?(f[i]=f[i]||{},t.extend(f[i],s,l[i])):f[i]=l[i]}return f},t.clone=function(f,r){return t.extend({},r,f)},t.keys=function(f){if(Object.keys)return Object.keys(f);var r=[];for(var o in f)r.push(o);return r},t.values=function(f){var r=[];if(Object.keys){for(var o=Object.keys(f),a=0;a<o.length;a++)r.push(f[o[a]]);return r}for(var s in f)r.push(f[s]);return r},t.get=function(f,r,o,a){r=r.split(".").slice(o,a);for(var s=0;s<r.length;s+=1)f=f[r[s]];return f},t.set=function(f,r,o,a,s){var n=r.split(".").slice(a,s);return t.get(f,r,0,-1)[n[n.length-1]]=o,o},t.shuffle=function(f){for(var r=f.length-1;r>0;r--){var o=Math.floor(t.random()*(r+1)),a=f[r];f[r]=f[o],f[o]=a}return f},t.choose=function(f){return f[Math.floor(t.random()*f.length)]},t.isElement=function(f){return typeof HTMLElement!="undefined"?f instanceof HTMLElement:!!(f&&f.nodeType&&f.nodeName)},t.isArray=function(f){return Object.prototype.toString.call(f)==="[object Array]"},t.isFunction=function(f){return typeof f=="function"},t.isPlainObject=function(f){return typeof f=="object"&&f.constructor===Object},t.isString=function(f){return Object.prototype.toString.call(f)==="[object String]"},t.clamp=function(f,r,o){return f<r?r:f>o?o:f},t.sign=function(f){return f<0?-1:1},t.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(f,r){return f=typeof f!="undefined"?f:0,r=typeof r!="undefined"?r:1,f+e()*(r-f)};var e=function(){return t._seed=(t._seed*9301+49297)%233280,t._seed/233280};t.colorToNumber=function(f){return f=f.replace("#",""),f.length==3&&(f=f.charAt(0)+f.charAt(0)+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)),parseInt(f,16)},t.logLevel=1,t.log=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&t.logLevel>0&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&t.logLevel>0&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(f,r){if(f.indexOf)return f.indexOf(r);for(var o=0;o<f.length;o++)if(f[o]===r)return o;return-1},t.map=function(f,r){if(f.map)return f.map(r);for(var o=[],a=0;a<f.length;a+=1)o.push(r(f[a]));return o},t.topologicalSort=function(f){var r=[],o=[],a=[];for(var s in f)!o[s]&&!a[s]&&t._topologicalSort(s,o,a,f,r);return r},t._topologicalSort=function(f,r,o,a,s){var n=a[f]||[];o[f]=!0;for(var l=0;l<n.length;l+=1){var i=n[l];o[i]||r[i]||t._topologicalSort(i,r,o,a,s)}o[f]=!1,r[f]=!0,s.push(f)},t.chain=function(){for(var f=[],r=0;r<arguments.length;r+=1){var o=arguments[r];o._chained?f.push.apply(f,o._chained):f.push(o)}var a=function(){for(var s,n=new Array(arguments.length),l=0,i=arguments.length;l<i;l++)n[l]=arguments[l];for(l=0;l<f.length;l+=1){var h=f[l].apply(s,n);typeof h!="undefined"&&(s=h)}return s};return a._chained=f,a},t.chainPathBefore=function(f,r,o){return t.set(f,r,t.chain(o,t.get(f,r)))},t.chainPathAfter=function(f,r,o){return t.set(f,r,t.chain(t.get(f,r),o))}}()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(15),o=t(47),a=new e({Extends:r,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Transform,f.Visible],initialize:function(n,l,i){l===void 0&&(l="Shape"),r.call(this,n,l),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new o,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(s,n){return n===void 0&&(n=1),s===void 0?this.isFilled=!1:(this.fillColor=s,this.fillAlpha=n,this.isFilled=!0),this},setStrokeStyle:function(s,n,l){return l===void 0&&(l=1),s===void 0?this.isStroked=!1:(this.lineWidth=s,this.strokeColor=n,this.strokeAlpha=l,this.isStroked=!0),this},setClosePath:function(s){return this.closePath=s,this},setSize:function(s,n){return this.width=s,this.height=n,this},setDisplaySize:function(s,n){return this.displayWidth=s,this.displayHeight=n,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(s){this.scaleX=s/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(s){this.scaleY=s/this.height}}});m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=function(r){return r*e.DEG_TO_RAD};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(103),r=t(328),o=t(188),a=t(329),s=new e({initialize:function(l,i,h,u){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(l,i,h,u)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(n,l,i,h,u){return h===void 0&&(h=255),u===void 0&&(u=!0),this._locked=!0,this.red=n,this.green=l,this.blue=i,this.alpha=h,this._locked=!1,this.update(u)},setGLTo:function(n,l,i,h){return h===void 0&&(h=1),this._locked=!0,this.redGL=n,this.greenGL=l,this.blueGL=i,this.alphaGL=h,this._locked=!1,this.update(!0)},setFromRGB:function(n){return this._locked=!0,this.red=n.r,this.green=n.g,this.blue=n.b,n.hasOwnProperty("a")&&(this.alpha=n.a),this._locked=!1,this.update(!0)},setFromHSV:function(n,l,i){return o(n,l,i,this)},update:function(n){if(n===void 0&&(n=!1),this._locked)return this;var l=this.r,i=this.g,h=this.b,u=this.a;return this._color=f(l,i,h),this._color32=r(l,i,h,u),this._rgba="rgba("+l+","+i+","+h+","+u/255+")",n&&a(l,i,h,this),this},updateHSV:function(){var n=this.r,l=this.g,i=this.b;return a(n,l,i,this),this},clone:function(){return new s(this.r,this.g,this.b,this.a)},gray:function(n){return this.setTo(n,n,n)},random:function(n,l){n===void 0&&(n=0),l===void 0&&(l=255);var i=Math.floor(n+Math.random()*(l-n)),h=Math.floor(n+Math.random()*(l-n)),u=Math.floor(n+Math.random()*(l-n));return this.setTo(i,h,u)},randomGray:function(n,l){n===void 0&&(n=0),l===void 0&&(l=255);var i=Math.floor(n+Math.random()*(l-n));return this.setTo(i,i,i)},saturate:function(n){return this.s+=n/100,this},desaturate:function(n){return this.s-=n/100,this},lighten:function(n){return this.v+=n/100,this},darken:function(n){return this.v-=n/100,this},brighten:function(n){var l=this.r,i=this.g,h=this.b;return l=Math.max(0,Math.min(255,l-Math.round(255*-(n/100)))),i=Math.max(0,Math.min(255,i-Math.round(255*-(n/100)))),h=Math.max(0,Math.min(255,h-Math.round(255*-(n/100)))),this.setTo(l,i,h)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(n){this.gl[0]=Math.min(Math.abs(n),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(n){this.gl[1]=Math.min(Math.abs(n),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(n){this.gl[2]=Math.min(Math.abs(n),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(n){this.gl[3]=Math.min(Math.abs(n),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(n){n=Math.floor(Math.abs(n)),this.r=Math.min(n,255),this.gl[0]=n/255,this.update(!0)}},green:{get:function(){return this.g},set:function(n){n=Math.floor(Math.abs(n)),this.g=Math.min(n,255),this.gl[1]=n/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(n){n=Math.floor(Math.abs(n)),this.b=Math.min(n,255),this.gl[2]=n/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(n){n=Math.floor(Math.abs(n)),this.a=Math.min(n,255),this.gl[3]=n/255,this.update()}},h:{get:function(){return this._h},set:function(n){this._h=n,o(n,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(n){this._s=n,o(this._h,n,this._v,this)}},v:{get:function(){return this._v},set:function(n){this._v=n,o(this._h,this._s,n,this)}}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s){this.x=0,this.y=0,this.z=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0):(this.x=o||0,this.y=a||0,this.z=s||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(r){return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},max:function(r){return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},clone:function(){return new f(this.x,this.y,this.z)},addVectors:function(r,o){return this.x=r.x+o.x,this.y=r.y+o.y,this.z=r.z+o.z,this},crossVectors:function(r,o){var a=r.x,s=r.y,n=r.z,l=o.x,i=o.y,h=o.z;return this.x=s*h-n*i,this.y=n*l-a*h,this.z=a*i-s*l,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this},set:function(r,o,a){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=o||0,this.z=a||0),this},setFromMatrixPosition:function(r){return this.fromArray(r.val,12)},setFromMatrixColumn:function(r,o){return this.fromArray(r.val,o*4)},fromArray:function(r,o){return o===void 0&&(o=0),this.x=r[o],this.y=r[o+1],this.z=r[o+2],this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addScale:function(r,o){return this.x+=r.x*o,this.y+=r.y*o,this.z+=r.z*o||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r,this.z*=r):(this.x=0,this.y=0,this.z=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(r){var o=r.x-this.x,a=r.y-this.y,s=r.z-this.z||0;return Math.sqrt(o*o+a*a+s*s)},distanceSq:function(r){var o=r.x-this.x,a=r.y-this.y,s=r.z-this.z||0;return o*o+a*a+s*s},length:function(){var r=this.x,o=this.y,a=this.z;return Math.sqrt(r*r+o*o+a*a)},lengthSq:function(){var r=this.x,o=this.y,a=this.z;return r*r+o*o+a*a},normalize:function(){var r=this.x,o=this.y,a=this.z,s=r*r+o*o+a*a;return s>0&&(s=1/Math.sqrt(s),this.x=r*s,this.y=o*s,this.z=a*s),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},cross:function(r){var o=this.x,a=this.y,s=this.z,n=r.x,l=r.y,i=r.z;return this.x=a*i-s*l,this.y=s*n-o*i,this.z=o*l-a*n,this},lerp:function(r,o){o===void 0&&(o=0);var a=this.x,s=this.y,n=this.z;return this.x=a+o*(r.x-a),this.y=s+o*(r.y-s),this.z=n+o*(r.z-n),this},applyMatrix3:function(r){var o=this.x,a=this.y,s=this.z,n=r.val;return this.x=n[0]*o+n[3]*a+n[6]*s,this.y=n[1]*o+n[4]*a+n[7]*s,this.z=n[2]*o+n[5]*a+n[8]*s,this},applyMatrix4:function(r){var o=this.x,a=this.y,s=this.z,n=r.val,l=1/(n[3]*o+n[7]*a+n[11]*s+n[15]);return this.x=(n[0]*o+n[4]*a+n[8]*s+n[12])*l,this.y=(n[1]*o+n[5]*a+n[9]*s+n[13])*l,this.z=(n[2]*o+n[6]*a+n[10]*s+n[14])*l,this},transformMat3:function(r){var o=this.x,a=this.y,s=this.z,n=r.val;return this.x=o*n[0]+a*n[3]+s*n[6],this.y=o*n[1]+a*n[4]+s*n[7],this.z=o*n[2]+a*n[5]+s*n[8],this},transformMat4:function(r){var o=this.x,a=this.y,s=this.z,n=r.val;return this.x=n[0]*o+n[4]*a+n[8]*s+n[12],this.y=n[1]*o+n[5]*a+n[9]*s+n[13],this.z=n[2]*o+n[6]*a+n[10]*s+n[14],this},transformCoordinates:function(r){var o=this.x,a=this.y,s=this.z,n=r.val,l=o*n[0]+a*n[4]+s*n[8]+n[12],i=o*n[1]+a*n[5]+s*n[9]+n[13],h=o*n[2]+a*n[6]+s*n[10]+n[14],u=o*n[3]+a*n[7]+s*n[11]+n[15];return this.x=l/u,this.y=i/u,this.z=h/u,this},transformQuat:function(r){var o=this.x,a=this.y,s=this.z,n=r.x,l=r.y,i=r.z,h=r.w,u=h*o+l*s-i*a,d=h*a+i*o-n*s,c=h*s+n*a-l*o,p=-n*o-l*a-i*s;return this.x=u*h+p*-n+d*-i-c*-l,this.y=d*h+p*-l+c*-n-u*-i,this.z=c*h+p*-i+u*-l-d*-n,this},project:function(r){var o=this.x,a=this.y,s=this.z,n=r.val,l=n[0],i=n[1],h=n[2],u=n[3],d=n[4],c=n[5],p=n[6],g=n[7],x=n[8],y=n[9],T=n[10],E=n[11],w=n[12],A=n[13],b=n[14],R=n[15],L=1/(o*u+a*g+s*E+R);return this.x=(o*l+a*d+s*x+w)*L,this.y=(o*i+a*c+s*y+A)*L,this.z=(o*h+a*p+s*T+b)*L,this},projectViewMatrix:function(r,o){return this.applyMatrix4(r).applyMatrix4(o)},unprojectViewMatrix:function(r,o){return this.applyMatrix4(r).applyMatrix4(o)},unproject:function(r,o){var a=r.x,s=r.y,n=r.z,l=r.w,i=this.x-a,h=l-this.y-1-s,u=this.z;return this.x=2*i/n-1,this.y=2*h/l-1,this.z=2*u-1,this.project(o)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});f.ZERO=new f,f.RIGHT=new f(1,0,0),f.LEFT=new f(-1,0,0),f.UP=new f(0,-1,0),f.DOWN=new f(0,1,0),f.FORWARD=new f(0,0,1),f.BACK=new f(0,0,-1),f.ONE=new f(1,1,1),m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(m,C,t){var e={};m.exports=e;var f=t(64),r=t(83),o=t(165),a=t(32),s=t(84),n=t(271);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(i){var h={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=f.centre(i.vertices):i.hasOwnProperty("vertices")||(h.vertices=f.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var u=a.extend(h,i);return l(u,i),u.setOnCollideWith=function(d,c){return c?this.onCollideWith[d.id]=c:delete this.onCollideWith[d.id],this},u},e.nextGroup=function(i){return i?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var l=function(i,h){h=h||{},e.set(i,{bounds:i.bounds||s.create(i.vertices),positionPrev:i.positionPrev||r.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i});var u=i.bounds;if(f.rotate(i.vertices,i.angle,i.position),n.rotate(i.axes,i.angle),s.update(u,i.vertices,i.velocity),e.set(i,{axes:h.axes||i.axes,area:h.area||i.area,mass:h.mass||i.mass,inertia:h.inertia||i.inertia}),i.parts.length===1){var d=i.centerOfMass,c=i.centerOffset,p=u.max.x-u.min.x,g=u.max.y-u.min.y;d.x=-(u.min.x-i.position.x)/p,d.y=-(u.min.y-i.position.y)/g,c.x=p*d.x,c.y=g*d.y}};e.set=function(i,h,u){var d;typeof h=="string"&&(d=h,h={},h[d]=u);for(d in h)if(!!Object.prototype.hasOwnProperty.call(h,d))switch(u=h[d],d){case"isStatic":e.setStatic(i,u);break;case"isSleeping":o.set(i,u);break;case"mass":e.setMass(i,u);break;case"density":e.setDensity(i,u);break;case"inertia":e.setInertia(i,u);break;case"vertices":e.setVertices(i,u);break;case"position":e.setPosition(i,u);break;case"angle":e.setAngle(i,u);break;case"velocity":e.setVelocity(i,u);break;case"angularVelocity":e.setAngularVelocity(i,u);break;case"parts":e.setParts(i,u);break;case"centre":e.setCentre(i,u);break;default:i[d]=u}},e.setStatic=function(i,h){for(var u=0;u<i.parts.length;u++){var d=i.parts[u];d.isStatic=h,h?(d._original={restitution:d.restitution,friction:d.friction,mass:d.mass,inertia:d.inertia,density:d.density,inverseMass:d.inverseMass,inverseInertia:d.inverseInertia},d.restitution=0,d.friction=1,d.mass=d.inertia=d.density=1/0,d.inverseMass=d.inverseInertia=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.angularVelocity=0,d.speed=0,d.angularSpeed=0,d.motion=0):d._original&&(d.restitution=d._original.restitution,d.friction=d._original.friction,d.mass=d._original.mass,d.inertia=d._original.inertia,d.density=d._original.density,d.inverseMass=d._original.inverseMass,d.inverseInertia=d._original.inverseInertia,d._original=null)}},e.setMass=function(i,h){var u=i.inertia/(i.mass/6);i.inertia=u*(h/6),i.inverseInertia=1/i.inertia,i.mass=h,i.inverseMass=1/i.mass,i.density=i.mass/i.area},e.setDensity=function(i,h){e.setMass(i,h*i.area),i.density=h},e.setInertia=function(i,h){i.inertia=h,i.inverseInertia=1/i.inertia},e.setVertices=function(i,h){h[0].body===i?i.vertices=h:i.vertices=f.create(h,i),i.axes=n.fromVertices(i.vertices),i.area=f.area(i.vertices),e.setMass(i,i.density*i.area);var u=f.centre(i.vertices);f.translate(i.vertices,u,-1),e.setInertia(i,e._inertiaScale*f.inertia(i.vertices,i.mass)),f.translate(i.vertices,i.position),s.update(i.bounds,i.vertices,i.velocity)},e.setParts=function(i,h,u){var d;for(h=h.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,d=0;d<h.length;d++){var c=h[d];c!==i&&(c.parent=i,i.parts.push(c))}if(i.parts.length!==1){if(u=typeof u!="undefined"?u:!0,u){var p=[];for(d=0;d<h.length;d++)p=p.concat(h[d].vertices);f.clockwiseSort(p);var g=f.hull(p),x=f.centre(g);e.setVertices(i,g),f.translate(i.vertices,x)}var y=e._totalProperties(i),T=y.centre.x,E=y.centre.y,w=i.bounds,A=i.centerOfMass,b=i.centerOffset;s.update(w,i.vertices,i.velocity),A.x=-(w.min.x-T)/(w.max.x-w.min.x),A.y=-(w.min.y-E)/(w.max.y-w.min.y),b.x=T,b.y=E,i.area=y.area,i.parent=i,i.position.x=T,i.position.y=E,i.positionPrev.x=T,i.positionPrev.y=E,e.setMass(i,y.mass),e.setInertia(i,y.inertia),e.setPosition(i,y.centre)}},e.setCentre=function(i,h,u){u?(i.positionPrev.x+=h.x,i.positionPrev.y+=h.y,i.position.x+=h.x,i.position.y+=h.y):(i.positionPrev.x=h.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=h.y-(i.position.y-i.positionPrev.y),i.position.x=h.x,i.position.y=h.y)},e.setPosition=function(i,h){var u=r.sub(h,i.position);i.positionPrev.x+=u.x,i.positionPrev.y+=u.y;for(var d=0;d<i.parts.length;d++){var c=i.parts[d];c.position.x+=u.x,c.position.y+=u.y,f.translate(c.vertices,u),s.update(c.bounds,c.vertices,i.velocity)}},e.setAngle=function(i,h){var u=h-i.angle;i.anglePrev+=u;for(var d=0;d<i.parts.length;d++){var c=i.parts[d];c.angle+=u,f.rotate(c.vertices,u,i.position),n.rotate(c.axes,u),s.update(c.bounds,c.vertices,i.velocity),d>0&&r.rotateAbout(c.position,u,i.position,c.position)}},e.setVelocity=function(i,h){i.positionPrev.x=i.position.x-h.x,i.positionPrev.y=i.position.y-h.y,i.velocity.x=h.x,i.velocity.y=h.y,i.speed=r.magnitude(i.velocity)},e.setAngularVelocity=function(i,h){i.anglePrev=i.angle-h,i.angularVelocity=h,i.angularSpeed=Math.abs(i.angularVelocity)},e.translate=function(i,h){e.setPosition(i,r.add(i.position,h))},e.rotate=function(i,h,u){if(!u)e.setAngle(i,i.angle+h);else{var d=Math.cos(h),c=Math.sin(h),p=i.position.x-u.x,g=i.position.y-u.y;e.setPosition(i,{x:u.x+(p*d-g*c),y:u.y+(p*c+g*d)}),e.setAngle(i,i.angle+h)}},e.scale=function(i,h,u,d){var c=0,p=0;d=d||i.position;for(var g=0;g<i.parts.length;g++){var x=i.parts[g];x.scale.x=h,x.scale.y=u,f.scale(x.vertices,h,u,d),x.axes=n.fromVertices(x.vertices),x.area=f.area(x.vertices),e.setMass(x,i.density*x.area),f.translate(x.vertices,{x:-x.position.x,y:-x.position.y}),e.setInertia(x,e._inertiaScale*f.inertia(x.vertices,x.mass)),f.translate(x.vertices,{x:x.position.x,y:x.position.y}),g>0&&(c+=x.area,p+=x.inertia),x.position.x=d.x+(x.position.x-d.x)*h,x.position.y=d.y+(x.position.y-d.y)*u,s.update(x.bounds,x.vertices,i.velocity)}i.parts.length>1&&(i.area=c,i.isStatic||(e.setMass(i,i.density*c),e.setInertia(i,p))),i.circleRadius&&(h===u?i.circleRadius*=h:i.circleRadius=null)},e.update=function(i,h,u,d){var c=Math.pow(h*u*i.timeScale,2),p=1-i.frictionAir*u*i.timeScale,g=i.position.x-i.positionPrev.x,x=i.position.y-i.positionPrev.y;i.velocity.x=g*p*d+i.force.x/i.mass*c,i.velocity.y=x*p*d+i.force.y/i.mass*c,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.angularVelocity=(i.angle-i.anglePrev)*p*d+i.torque/i.inertia*c,i.anglePrev=i.angle,i.angle+=i.angularVelocity,i.speed=r.magnitude(i.velocity),i.angularSpeed=Math.abs(i.angularVelocity);for(var y=0;y<i.parts.length;y++){var T=i.parts[y];f.translate(T.vertices,i.velocity),y>0&&(T.position.x+=i.velocity.x,T.position.y+=i.velocity.y),i.angularVelocity!==0&&(f.rotate(T.vertices,i.angularVelocity,i.position),n.rotate(T.axes,i.angularVelocity),y>0&&r.rotateAbout(T.position,i.angularVelocity,i.position,T.position)),s.update(T.bounds,T.vertices,i.velocity)}},e.applyForce=function(i,h,u){i.force.x+=u.x,i.force.y+=u.y;var d={x:h.x-i.position.x,y:h.y-i.position.y};i.torque+=d.x*u.y-d.y*u.x},e._totalProperties=function(i){for(var h={mass:0,area:0,inertia:0,centre:{x:0,y:0}},u=i.parts.length===1?0:1;u<i.parts.length;u++){var d=i.parts[u],c=d.mass!==1/0?d.mass:1;h.mass+=c,h.area+=d.area,h.inertia+=d.inertia,h.centre=r.add(h.centre,r.mult(d.position,c))}return h.centre=r.div(h.centre,h.mass),h}})()},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y+e.height-e.height*e.originY};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x-e.width*e.originX};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x+e.width-e.width*e.originX};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y-e.height*e.originY};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a,s){o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=1);var n,l=0,i=e.length;if(s===1)for(n=a;n<i;n++)e[n][f]+=r+l*o,l++;else for(n=a;n>=0;n--)e[n][f]+=r+l*o,l++;return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(307),r=t(172),o=t(56),a=t(173),s=t(3),n=new e({initialize:function(i,h,u,d){i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=0),this.type=o.LINE,this.x1=i,this.y1=h,this.x2=u,this.y2=d},getPoint:function(l,i){return f(this,l,i)},getPoints:function(l,i,h){return r(this,l,i,h)},getRandomPoint:function(l){return a(this,l)},setTo:function(l,i,h,u){return l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=0),this.x1=l,this.y1=i,this.x2=h,this.y2=u,this},getPointA:function(l){return l===void 0&&(l=new s),l.set(this.x1,this.y1),l},getPointB:function(l){return l===void 0&&(l=new s),l.set(this.x2,this.y2),l},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(l){this.x1<=this.x2?this.x1=l:this.x2=l}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(l){this.x1>this.x2?this.x1=l:this.x2=l}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(l){this.y1<=this.y2?this.y1=l:this.y2=l}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(l){this.y1>this.y2?this.y1=l:this.y2=l}}});m.exports=n},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=r||f.fillColor,s=o||f.fillAlpha,n=(a&16711680)>>>16,l=(a&65280)>>>8,i=a&255;e.fillStyle="rgba("+n+","+l+","+i+","+s+")"};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s,n){var l=[];n.forEach(function(h){h&&l.push(h)}),this.loader=o,this.type=a,this.key=s,this.multiKeyIndex=o.multiKeyIndex++,this.files=l,this.complete=!1,this.pending=l.length,this.failed=0,this.config={},this.baseURL=o.baseURL,this.path=o.path,this.prefix=o.prefix;for(var i=0;i<l.length;i++)l[i].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(r){return this.files.push(r),r.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(r){var o=this.files.indexOf(r);o!==-1&&this.pending--},onFileFailed:function(r){var o=this.files.indexOf(r);o!==-1&&this.failed++}});m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=e-r,s=f-o;return Math.sqrt(a*a+s*s)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.y=f+e.height*e.originY,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x=f+e.width*e.originX,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x=f-e.width+e.width*e.originX,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.y=f-e.height+e.height*e.originY,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e.width<=0||e.height<=0?!1:e.x<=f&&e.x+e.width>=f&&e.y<=r&&e.y+e.height>=r};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(175),r=t(9),o=t(374),a=t(2),s=t(69),n=t(91),l=t(141),i=t(12),h=t(375),u=new e({Extends:r,initialize:function(c){r.call(this);var p=c.game,g=p.renderer,x=g.gl;this.name=a(c,"name","WebGLPipeline"),this.game=p,this.renderer=g,this.manager,this.gl=x,this.view=p.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=a(c,"topology",x.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=a(c,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=c,this.glReset=!1},boot:function(){var d,c=this.gl,p=this.config,g=this.renderer;this.isPostFX||(this.projectionMatrix=new s().identity());var x=this.renderTargets,y=a(p,"renderTarget",!1);typeof y=="boolean"&&y&&(y=1);var T=g.width,E=g.height;if(typeof y=="number")for(d=0;d<y;d++)x.push(new l(g,T,E,1,0,!0));else if(Array.isArray(y))for(d=0;d<y.length;d++){var w=a(y[d],"scale",1),A=a(y[d],"minFilter",0),b=a(y[d],"autoClear",1);x.push(new l(g,T,E,w,A,b))}x.length&&(this.currentRenderTarget=x[0]),this.setShadersFromConfig(p);var R=this.shaders,L=0;for(d=0;d<R.length;d++)R[d].vertexSize>L&&(L=R[d].vertexSize);var B=a(p,"batchSize",g.config.batchSize);this.vertexCapacity=B*6;var D=new ArrayBuffer(this.vertexCapacity*L);this.vertexData=D,this.bytes=new Uint8Array(D),this.vertexViewF32=new Float32Array(D),this.vertexViewU32=new Uint32Array(D);var G=a(p,"vertices",null);for(G?(this.vertexViewF32.set(G),this.vertexBuffer=g.createVertexBuffer(D,c.STATIC_DRAW)):this.vertexBuffer=g.createVertexBuffer(D.byteLength,c.DYNAMIC_DRAW),this.setVertexBuffer(),d=R.length-1;d>=0;d--)R[d].rebind();this.hasBooted=!0,g.on(n.RESIZE,this.resize,this),g.on(n.PRE_RENDER,this.onPreRender,this),g.on(n.RENDER,this.onRender,this),g.on(n.POST_RENDER,this.onPostRender,this),this.emit(o.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(d,c){var p=this.renderer;if(d!==this.currentShader||p.currentProgram!==this.currentShader.program){this.flush(),p.resetTextures();var g=this.setVertexBuffer();g&&!c&&(c=!0),d.bind(c,!1),this.currentShader=d}return this},getShaderByName:function(d){for(var c=this.shaders,p=0;p<c.length;p++)if(c[p].name===d)return c[p]},setShadersFromConfig:function(d){var c,p=this.shaders,g=this.renderer;for(c=0;c<p.length;c++)p[c].destroy();var x="vertShader",y="fragShader",T="attributes",E=a(d,x,null),w=i.parseFragmentShaderMaxTextures(a(d,y,null),g.maxTextures),A=a(d,T,null),b=a(d,"shaders",[]),R=b.length;if(R===0)E&&w&&(this.shaders=[new h(this,"default",E,w,f(A))]);else{var L=[];for(c=0;c<R;c++){var B=b[c],D=a(B,"name","default"),G=a(B,x,E),X=i.parseFragmentShaderMaxTextures(a(B,y,w),g.maxTextures),H=a(B,T,A);G&&X&&L.push(new h(this,D,G,X,f(H)))}this.shaders=L}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(d,c){return c===void 0&&(c=d.frame),this.currentUnit=this.renderer.setTextureSource(c.source),this.currentUnit},shouldFlush:function(d){return d===void 0&&(d=0),this.vertexCount+d>this.vertexCapacity},resize:function(d,c){(d!==this.width||c!==this.height)&&this.flush(),this.width=d,this.height=c;for(var p=this.renderTargets,g=0;g<p.length;g++)p[g].resize(d,c);return this.setProjectionMatrix(d,c),this.emit(o.RESIZE,d,c,this),this.onResize(d,c),this},setProjectionMatrix:function(d,c){var p=this.projectionMatrix;if(!p)return this;this.projectionWidth=d,this.projectionHeight=c,p.ortho(0,d,c,0,-1e3,1e3);for(var g=this.shaders,x="uProjectionMatrix",y=0;y<g.length;y++){var T=g[y];T.hasUniform(x)&&(T.resetUniform(x),T.setMatrix4fv(x,!1,p.val,T))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var d=this.renderer.projectionWidth,c=this.renderer.projectionHeight;(this.projectionWidth!==d||this.projectionHeight!==c)&&this.setProjectionMatrix(d,c)}},bind:function(d){if(d===void 0&&(d=this.currentShader),this.glReset)return this.rebind(d);var c=this.setVertexBuffer();return d.bind(c),this.currentShader=d,this.emit(o.BIND,this,d),this.onActive(d),this},rebind:function(d){this.setVertexBuffer();for(var c=this.shaders,p=c.length-1;p>=0;p--){var g=c[p].rebind();(!d||g===d)&&(this.currentShader=g)}return this.emit(o.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var d=this.gl,c=this.vertexBuffer;return d.getParameter(d.ARRAY_BUFFER_BINDING)!==c?(d.bindBuffer(d.ARRAY_BUFFER,c),!0):!1},preBatch:function(d){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(d),this},postBatch:function(d){return this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(d){if(d===void 0&&(d=!1),this.vertexCount>0){this.emit(o.BEFORE_FLUSH,this,d),this.onBeforeFlush(d);var c=this.gl,p=this.vertexCount,g=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),p===this.vertexCapacity?c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.DYNAMIC_DRAW):c.bufferSubData(c.ARRAY_BUFFER,0,this.bytes.subarray(0,p*g)),c.drawArrays(this.topology,0,p)),this.vertexCount=0,this.emit(o.AFTER_FLUSH,this,d),this.onAfterFlush(d)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(d,c,p,g,x,y,T){var E=this.vertexViewF32,w=this.vertexViewU32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;E[++A]=d,E[++A]=c,E[++A]=p,E[++A]=g,E[++A]=x,E[++A]=y,w[++A]=T,this.vertexCount++},batchQuad:function(d,c,p,g,x,y,T,E,w,A,b,R,L,B,D,G,X,H,K,$){$===void 0&&($=this.currentUnit);var N=!1;return this.shouldFlush(6)&&(this.flush(),N=!0,$=this.setTexture2D(K)),this.batchVert(c,p,A,b,$,H,B),this.batchVert(g,x,A,L,$,H,G),this.batchVert(y,T,R,L,$,H,X),this.batchVert(c,p,A,b,$,H,B),this.batchVert(y,T,R,L,$,H,X),this.batchVert(E,w,R,b,$,H,D),this.onBatch(d),N},batchTri:function(d,c,p,g,x,y,T,E,w,A,b,R,L,B,D,G,X){X===void 0&&(X=this.currentUnit);var H=!1;return this.shouldFlush(3)&&(this.flush(),H=!0,X=this.setTexture2D(G)),this.batchVert(c,p,E,w,X,D,R),this.batchVert(g,x,E,b,X,D,L),this.batchVert(y,T,A,b,X,D,B),this.onBatch(d),H},drawFillRect:function(d,c,p,g,x,y,T,E){T===void 0&&(T=this.renderer.whiteTexture.glTexture),E===void 0&&(E=!0),d=Math.floor(d),c=Math.floor(c);var w=Math.floor(d+p),A=Math.floor(c+g),b=this.setTexture2D(T),R=i.getTintAppendFloatAlphaAndSwap(x,y),L=0,B=0,D=1,G=1;E&&(B=1,G=0),this.batchQuad(null,d,c,d,A,w,A,w,c,L,B,D,G,R,R,R,R,0,T,b)},setTexture2D:function(d){return d===void 0&&(d=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(d),this.currentUnit},bindTexture:function(d,c){c===void 0&&(c=0);var p=this.gl;return p.activeTexture(p.TEXTURE0+c),p.bindTexture(p.TEXTURE_2D,d),this},bindRenderTarget:function(d,c){return this.bindTexture(d.texture,c)},setTime:function(d){return this.set1f(d,this.game.loop.getDuration()),this},set1f:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set1f(d,c),this},set2f:function(d,c,p,g){return g===void 0&&(g=this.currentShader),g.set2f(d,c,p),this},set3f:function(d,c,p,g,x){return x===void 0&&(x=this.currentShader),x.set3f(d,c,p,g),this},set4f:function(d,c,p,g,x,y){return y===void 0&&(y=this.currentShader),y.set4f(d,c,p,g,x),this},set1fv:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set1fv(d,c),this},set2fv:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set2fv(d,c),this},set3fv:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set3fv(d,c),this},set4fv:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set4fv(d,c),this},set1iv:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set1iv(d,c),this},set2iv:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set2iv(d,c),this},set3iv:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set3iv(d,c),this},set4iv:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set4iv(d,c),this},set1i:function(d,c,p){return p===void 0&&(p=this.currentShader),p.set1i(d,c),this},set2i:function(d,c,p,g){return g===void 0&&(g=this.currentShader),g.set2i(d,c,p),this},set3i:function(d,c,p,g,x){return x===void 0&&(x=this.currentShader),x.set3i(d,c,p,g),this},set4i:function(d,c,p,g,x,y){return y===void 0&&(y=this.currentShader),y.set4i(d,c,p,g,x),this},setMatrix2fv:function(d,c,p,g){return g===void 0&&(g=this.currentShader),g.setMatrix2fv(d,c,p),this},setMatrix3fv:function(d,c,p,g){return g===void 0&&(g=this.currentShader),g.setMatrix3fv(d,c,p),this},setMatrix4fv:function(d,c,p,g){return g===void 0&&(g=this.currentShader),g.setMatrix4fv(d,c,p),this},destroy:function(){this.emit(o.DESTROY,this);var d,c=this.shaders;for(d=0;d<c.length;d++)c[d].destroy();var p=this.renderTargets;for(d=0;d<p.length;d++)p[d].destroy();this.gl.deleteBuffer(this.vertexBuffer);var g=this.renderer;return g.off(n.RESIZE,this.resize,this),g.off(n.PRE_RENDER,this.onPreRender,this),g.off(n.RENDER,this.onRender,this),g.off(n.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});m.exports=u},function(m,C,t){"use strict";/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function e(I,z,U){U=U||2;var W=z&&z.length,V=W?z[0]*U:I.length,Z=f(I,0,V,U,!0),J=[];if(!Z||Z.next===Z.prev)return J;var tt,st,at,lt,ut,mt,dt;if(W&&(Z=i(I,z,Z,U)),I.length>80*U){tt=at=I[0],st=lt=I[1];for(var xt=U;xt<V;xt+=U)ut=I[xt],mt=I[xt+1],ut<tt&&(tt=ut),mt<st&&(st=mt),ut>at&&(at=ut),mt>lt&&(lt=mt);dt=Math.max(at-tt,lt-st),dt=dt!==0?1/dt:0}return o(Z,J,U,tt,st,dt),J}function f(I,z,U,W,V){var Z,J;if(V===N(I,z,U,W)>0)for(Z=z;Z<U;Z+=W)J=H(Z,I[Z],I[Z+1],J);else for(Z=U-W;Z>=z;Z-=W)J=H(Z,I[Z],I[Z+1],J);return J&&A(J,J.next)&&(K(J),J=J.next),J}function r(I,z){if(!I)return I;z||(z=I);var U=I,W;do if(W=!1,!U.steiner&&(A(U,U.next)||w(U.prev,U,U.next)===0)){if(K(U),U=z=U.prev,U===U.next)break;W=!0}else U=U.next;while(W||U!==z);return z}function o(I,z,U,W,V,Z,J){if(!!I){!J&&Z&&p(I,W,V,Z);for(var tt=I,st,at;I.prev!==I.next;){if(st=I.prev,at=I.next,Z?s(I,W,V,Z):a(I)){z.push(st.i/U),z.push(I.i/U),z.push(at.i/U),K(I),I=at.next,tt=at.next;continue}if(I=at,I===tt){J?J===1?(I=n(r(I),z,U),o(I,z,U,W,V,Z,2)):J===2&&l(I,z,U,W,V,Z):o(r(I),z,U,W,V,Z,1);break}}}}function a(I){var z=I.prev,U=I,W=I.next;if(w(z,U,W)>=0)return!1;for(var V=I.next.next;V!==I.prev;){if(T(z.x,z.y,U.x,U.y,W.x,W.y,V.x,V.y)&&w(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function s(I,z,U,W){var V=I.prev,Z=I,J=I.next;if(w(V,Z,J)>=0)return!1;for(var tt=V.x<Z.x?V.x<J.x?V.x:J.x:Z.x<J.x?Z.x:J.x,st=V.y<Z.y?V.y<J.y?V.y:J.y:Z.y<J.y?Z.y:J.y,at=V.x>Z.x?V.x>J.x?V.x:J.x:Z.x>J.x?Z.x:J.x,lt=V.y>Z.y?V.y>J.y?V.y:J.y:Z.y>J.y?Z.y:J.y,ut=x(tt,st,z,U,W),mt=x(at,lt,z,U,W),dt=I.prevZ,xt=I.nextZ;dt&&dt.z>=ut&&xt&&xt.z<=mt;){if(dt!==I.prev&&dt!==I.next&&T(V.x,V.y,Z.x,Z.y,J.x,J.y,dt.x,dt.y)&&w(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,xt!==I.prev&&xt!==I.next&&T(V.x,V.y,Z.x,Z.y,J.x,J.y,xt.x,xt.y)&&w(xt.prev,xt,xt.next)>=0))return!1;xt=xt.nextZ}for(;dt&&dt.z>=ut;){if(dt!==I.prev&&dt!==I.next&&T(V.x,V.y,Z.x,Z.y,J.x,J.y,dt.x,dt.y)&&w(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;xt&&xt.z<=mt;){if(xt!==I.prev&&xt!==I.next&&T(V.x,V.y,Z.x,Z.y,J.x,J.y,xt.x,xt.y)&&w(xt.prev,xt,xt.next)>=0)return!1;xt=xt.nextZ}return!0}function n(I,z,U){var W=I;do{var V=W.prev,Z=W.next.next;!A(V,Z)&&b(V,W,W.next,Z)&&D(V,Z)&&D(Z,V)&&(z.push(V.i/U),z.push(W.i/U),z.push(Z.i/U),K(W),K(W.next),W=I=Z),W=W.next}while(W!==I);return r(W)}function l(I,z,U,W,V,Z){var J=I;do{for(var tt=J.next.next;tt!==J.prev;){if(J.i!==tt.i&&E(J,tt)){var st=X(J,tt);J=r(J,J.next),st=r(st,st.next),o(J,z,U,W,V,Z),o(st,z,U,W,V,Z);return}tt=tt.next}J=J.next}while(J!==I)}function i(I,z,U,W){var V=[],Z,J,tt,st,at;for(Z=0,J=z.length;Z<J;Z++)tt=z[Z]*W,st=Z<J-1?z[Z+1]*W:I.length,at=f(I,tt,st,W,!1),at===at.next&&(at.steiner=!0),V.push(y(at));for(V.sort(h),Z=0;Z<V.length;Z++)u(V[Z],U),U=r(U,U.next);return U}function h(I,z){return I.x-z.x}function u(I,z){if(z=d(I,z),z){var U=X(z,I);r(z,z.next),r(U,U.next)}}function d(I,z){var U=z,W=I.x,V=I.y,Z=-1/0,J;do{if(V<=U.y&&V>=U.next.y&&U.next.y!==U.y){var tt=U.x+(V-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(tt<=W&&tt>Z){if(Z=tt,tt===W){if(V===U.y)return U;if(V===U.next.y)return U.next}J=U.x<U.next.x?U:U.next}}U=U.next}while(U!==z);if(!J)return null;if(W===Z)return J;var st=J,at=J.x,lt=J.y,ut=1/0,mt;U=J;do W>=U.x&&U.x>=at&&W!==U.x&&T(V<lt?W:Z,V,at,lt,V<lt?Z:W,V,U.x,U.y)&&(mt=Math.abs(V-U.y)/(W-U.x),D(U,I)&&(mt<ut||mt===ut&&(U.x>J.x||U.x===J.x&&c(J,U)))&&(J=U,ut=mt)),U=U.next;while(U!==st);return J}function c(I,z){return w(I.prev,I,z.prev)<0&&w(z.next,I,I.next)<0}function p(I,z,U,W){var V=I;do V.z===null&&(V.z=x(V.x,V.y,z,U,W)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==I);V.prevZ.nextZ=null,V.prevZ=null,g(V)}function g(I){var z,U,W,V,Z,J,tt,st,at=1;do{for(U=I,I=null,Z=null,J=0;U;){for(J++,W=U,tt=0,z=0;z<at&&(tt++,W=W.nextZ,!!W);z++);for(st=at;tt>0||st>0&&W;)tt!==0&&(st===0||!W||U.z<=W.z)?(V=U,U=U.nextZ,tt--):(V=W,W=W.nextZ,st--),Z?Z.nextZ=V:I=V,V.prevZ=Z,Z=V;U=W}Z.nextZ=null,at*=2}while(J>1);return I}function x(I,z,U,W,V){return I=32767*(I-U)*V,z=32767*(z-W)*V,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,I|z<<1}function y(I){var z=I,U=I;do(z.x<U.x||z.x===U.x&&z.y<U.y)&&(U=z),z=z.next;while(z!==I);return U}function T(I,z,U,W,V,Z,J,tt){return(V-J)*(z-tt)-(I-J)*(Z-tt)>=0&&(I-J)*(W-tt)-(U-J)*(z-tt)>=0&&(U-J)*(Z-tt)-(V-J)*(W-tt)>=0}function E(I,z){return I.next.i!==z.i&&I.prev.i!==z.i&&!B(I,z)&&(D(I,z)&&D(z,I)&&G(I,z)&&(w(I.prev,I,z.prev)||w(I,z.prev,z))||A(I,z)&&w(I.prev,I,I.next)>0&&w(z.prev,z,z.next)>0)}function w(I,z,U){return(z.y-I.y)*(U.x-z.x)-(z.x-I.x)*(U.y-z.y)}function A(I,z){return I.x===z.x&&I.y===z.y}function b(I,z,U,W){var V=L(w(I,z,U)),Z=L(w(I,z,W)),J=L(w(U,W,I)),tt=L(w(U,W,z));return!!(V!==Z&&J!==tt||V===0&&R(I,U,z)||Z===0&&R(I,W,z)||J===0&&R(U,I,W)||tt===0&&R(U,z,W))}function R(I,z,U){return z.x<=Math.max(I.x,U.x)&&z.x>=Math.min(I.x,U.x)&&z.y<=Math.max(I.y,U.y)&&z.y>=Math.min(I.y,U.y)}function L(I){return I>0?1:I<0?-1:0}function B(I,z){var U=I;do{if(U.i!==I.i&&U.next.i!==I.i&&U.i!==z.i&&U.next.i!==z.i&&b(U,U.next,I,z))return!0;U=U.next}while(U!==I);return!1}function D(I,z){return w(I.prev,I,I.next)<0?w(I,z,I.next)>=0&&w(I,I.prev,z)>=0:w(I,z,I.prev)<0||w(I,I.next,z)<0}function G(I,z){var U=I,W=!1,V=(I.x+z.x)/2,Z=(I.y+z.y)/2;do U.y>Z!=U.next.y>Z&&U.next.y!==U.y&&V<(U.next.x-U.x)*(Z-U.y)/(U.next.y-U.y)+U.x&&(W=!W),U=U.next;while(U!==I);return W}function X(I,z){var U=new $(I.i,I.x,I.y),W=new $(z.i,z.x,z.y),V=I.next,Z=z.prev;return I.next=z,z.prev=I,U.next=V,V.prev=U,W.next=U,U.prev=W,Z.next=W,W.prev=Z,W}function H(I,z,U,W){var V=new $(I,z,U);return W?(V.next=W.next,V.prev=W,W.next.prev=V,W.next=V):(V.prev=V,V.next=V),V}function K(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function $(I,z,U){this.i=I,this.x=z,this.y=U,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.deviation=function(I,z,U,W){var V=z&&z.length,Z=V?z[0]*U:I.length,J=Math.abs(N(I,0,Z,U));if(V)for(var tt=0,st=z.length;tt<st;tt++){var at=z[tt]*U,lt=tt<st-1?z[tt+1]*U:I.length;J-=Math.abs(N(I,at,lt,U))}var ut=0;for(tt=0;tt<W.length;tt+=3){var mt=W[tt]*U,dt=W[tt+1]*U,xt=W[tt+2]*U;ut+=Math.abs((I[mt]-I[xt])*(I[dt+1]-I[mt+1])-(I[mt]-I[dt])*(I[xt+1]-I[mt+1]))}return J===0&&ut===0?0:Math.abs((ut-J)/J)};function N(I,z,U,W){for(var V=0,Z=z,J=U-W;Z<U;Z+=W)V+=(I[J]-I[Z])*(I[Z+1]+I[J+1]),J=Z;return V}e.flatten=function(I){for(var z=I[0][0].length,U={vertices:[],holes:[],dimensions:z},W=0,V=0;V<I.length;V++){for(var Z=0;Z<I[V].length;Z++)for(var J=0;J<z;J++)U.vertices.push(I[V][Z][J]);V>0&&(W+=I[V-1].length,U.holes.push(W))}return U},m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=r||f.strokeColor,s=o||f.strokeAlpha,n=(a&16711680)>>>16,l=(a&65280)>>>8,i=a&255;e.strokeStyle="rgba("+n+","+l+","+i+","+s+")",e.lineWidth=f.lineWidth};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(6),n=t(7),l=new e({Extends:r,initialize:function(h,u,d,c,p){var g="json";if(n(u)){var x=u;u=a(x,"key"),d=a(x,"url"),c=a(x,"xhrSettings"),g=a(x,"extension",g),p=a(x,"dataKey",p)}var y={type:"json",cache:h.cacheManager.json,extension:g,responseType:"text",key:u,url:d,xhrSettings:c,config:p};r.call(this,h,y),n(d)&&(p?this.data=s(d,p):this.data=d,this.state=f.FILE_POPULATED)},onProcess:function(){if(this.state!==f.FILE_POPULATED){this.state=f.FILE_PROCESSING;try{var i=JSON.parse(this.xhrLoader.responseText)}catch(u){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),u}var h=this.config;typeof h=="string"?this.data=s(i,h,i):this.data=i}this.onProcessComplete()}});o.register("json",function(i,h,u,d){if(Array.isArray(i))for(var c=0;c<i.length;c++)this.addFile(new l(this,i[c]));else this.addFile(new l(this,i,h,d,u));return this}),m.exports=l},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),f=t(26),r=function(o,a,s,n,l){for(var i=null,h=null,u=null,d=null,c=f(o,a,s,n,null,l),p=0;p<c.length;p++){var g=c[p];g&&(g.collides?(i=e(g.x,g.y-1,!0,l),h=e(g.x,g.y+1,!0,l),u=e(g.x-1,g.y,!0,l),d=e(g.x+1,g.y,!0,l),g.faceTop=!(i&&i.collides),g.faceBottom=!(h&&h.collides),g.faceLeft=!(u&&u.collides),g.faceRight=!(d&&d.collides)):g.resetFaces())}};m.exports=r},function(m,C,t){var e={};m.exports=e;var f=t(83),r=t(32);(function(){e.create=function(o,a){for(var s=[],n=0;n<o.length;n++){var l=o[n],i={x:l.x,y:l.y,index:n,body:a,isInternal:!1,contact:null,offset:null};i.contact={vertex:i,normalImpulse:0,tangentImpulse:0},s.push(i)}return s},e.fromPath=function(o,a){var s=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,n=[];return o.replace(s,function(l,i,h){n.push({x:parseFloat(i),y:parseFloat(h)})}),e.create(n,a)},e.centre=function(o){for(var a=e.area(o,!0),s={x:0,y:0},n,l,i,h=0;h<o.length;h++)i=(h+1)%o.length,n=f.cross(o[h],o[i]),l=f.mult(f.add(o[h],o[i]),n),s=f.add(s,l);return f.div(s,6*a)},e.mean=function(o){for(var a={x:0,y:0},s=0;s<o.length;s++)a.x+=o[s].x,a.y+=o[s].y;return f.div(a,o.length)},e.area=function(o,a){for(var s=0,n=o.length-1,l=0;l<o.length;l++)s+=(o[n].x-o[l].x)*(o[n].y+o[l].y),n=l;return a?s/2:Math.abs(s)/2},e.inertia=function(o,a){for(var s=0,n=0,l=o,i,h,u=0;u<l.length;u++)h=(u+1)%l.length,i=Math.abs(f.cross(l[h],l[u])),s+=i*(f.dot(l[h],l[h])+f.dot(l[h],l[u])+f.dot(l[u],l[u])),n+=i;return a/6*(s/n)},e.translate=function(o,a,s){var n;if(s)for(n=0;n<o.length;n++)o[n].x+=a.x*s,o[n].y+=a.y*s;else for(n=0;n<o.length;n++)o[n].x+=a.x,o[n].y+=a.y;return o},e.rotate=function(o,a,s){if(a!==0){for(var n=Math.cos(a),l=Math.sin(a),i=0;i<o.length;i++){var h=o[i],u=h.x-s.x,d=h.y-s.y;h.x=s.x+(u*n-d*l),h.y=s.y+(u*l+d*n)}return o}},e.contains=function(o,a){for(var s=0;s<o.length;s++){var n=o[s],l=o[(s+1)%o.length];if((a.x-n.x)*(l.y-n.y)+(a.y-n.y)*(n.x-l.x)>0)return!1}return!0},e.scale=function(o,a,s,n){if(a===1&&s===1)return o;n=n||e.centre(o);for(var l,i,h=0;h<o.length;h++)l=o[h],i=f.sub(l,n),o[h].x=n.x+i.x*a,o[h].y=n.y+i.y*s;return o},e.chamfer=function(o,a,s,n,l){typeof a=="number"?a=[a]:a=a||[8],s=typeof s!="undefined"?s:-1,n=n||2,l=l||14;for(var i=[],h=0;h<o.length;h++){var u=o[h-1>=0?h-1:o.length-1],d=o[h],c=o[(h+1)%o.length],p=a[h<a.length?h:a.length-1];if(p===0){i.push(d);continue}var g=f.normalise({x:d.y-u.y,y:u.x-d.x}),x=f.normalise({x:c.y-d.y,y:d.x-c.x}),y=Math.sqrt(2*Math.pow(p,2)),T=f.mult(r.clone(g),p),E=f.normalise(f.mult(f.add(g,x),.5)),w=f.sub(d,f.mult(E,y)),A=s;s===-1&&(A=Math.pow(p,.32)*1.75),A=r.clamp(A,n,l),A%2===1&&(A+=1);for(var b=Math.acos(f.dot(g,x)),R=b/A,L=0;L<A;L++)i.push(f.add(f.rotate(T,R*L),w))}return i},e.clockwiseSort=function(o){var a=e.mean(o);return o.sort(function(s,n){return f.angle(a,s)-f.angle(a,n)}),o},e.isConvex=function(o){var a=0,s=o.length,n,l,i,h;if(s<3)return null;for(n=0;n<s;n++)if(l=(n+1)%s,i=(n+2)%s,h=(o[l].x-o[n].x)*(o[i].y-o[l].y),h-=(o[l].y-o[n].y)*(o[i].x-o[l].x),h<0?a|=1:h>0&&(a|=2),a===3)return!1;return a!==0?!0:null},e.hull=function(o){var a=[],s=[],n,l;for(o=o.slice(0),o.sort(function(i,h){var u=i.x-h.x;return u!==0?u:i.y-h.y}),l=0;l<o.length;l+=1){for(n=o[l];s.length>=2&&f.cross3(s[s.length-2],s[s.length-1],n)<=0;)s.pop();s.push(n)}for(l=o.length-1;l>=0;l-=1){for(n=o[l];a.length>=2&&f.cross3(a[a.length-2],a[a.length-1],n)<=0;)a.pop();a.push(n)}return a.pop(),s.pop(),a.concat(s)}})()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(66),r=t(300),o=t(301),a=t(56),s=t(170),n=new e({initialize:function(i,h,u){i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=0),this.type=a.CIRCLE,this.x=i,this.y=h,this._radius=u,this._diameter=u*2},contains:function(l,i){return f(this,l,i)},getPoint:function(l,i){return r(this,l,i)},getPoints:function(l,i,h){return o(this,l,i,h)},getRandomPoint:function(l){return s(this,l)},setTo:function(l,i,h){return this.x=l,this.y=i,this._radius=h,this._diameter=h*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(l,i){return i===void 0&&(i=l),this.x=l,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(l){this._radius=l,this._diameter=l*2}},diameter:{get:function(){return this._diameter},set:function(l){this._diameter=l,this._radius=l*.5}},left:{get:function(){return this.x-this._radius},set:function(l){this.x=l+this._radius}},right:{get:function(){return this.x+this._radius},set:function(l){this.x=l-this._radius}},top:{get:function(){return this.y-this._radius},set:function(l){this.y=l+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(l){this.y=l-this._radius}}});m.exports=n},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(e.radius>0&&f>=e.left&&f<=e.right&&r>=e.top&&r<=e.bottom){var o=(e.x-f)*(e.x-f),a=(e.y-r)*(e.y-r);return o+a<=e.radius*e.radius}else return!1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt((e.x2-e.x1)*(e.x2-e.x1)+(e.y2-e.y1)*(e.y2-e.y1))};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=r-f;return f+((e-f)%o+o)%o};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(39),r=1e-6,o=new e({initialize:function(u){this.val=new Float32Array(16),u?this.copy(u):this.identity()},clone:function(){return new o(this)},set:function(h){return this.copy(h)},setValues:function(h,u,d,c,p,g,x,y,T,E,w,A,b,R,L,B){var D=this.val;return D[0]=h,D[1]=u,D[2]=d,D[3]=c,D[4]=p,D[5]=g,D[6]=x,D[7]=y,D[8]=T,D[9]=E,D[10]=w,D[11]=A,D[12]=b,D[13]=R,D[14]=L,D[15]=B,this},copy:function(h){var u=h.val;return this.setValues(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15])},fromArray:function(h){return this.setValues(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(h,u,d){var c=a.fromQuat(d),p=c.val,g=u.x,x=u.y,y=u.z;return this.setValues(p[0]*g,p[1]*g,p[2]*g,0,p[4]*x,p[5]*x,p[6]*x,0,p[8]*y,p[9]*y,p[10]*y,0,h.x,h.y,h.z,1)},xyz:function(h,u,d){this.identity();var c=this.val;return c[12]=h,c[13]=u,c[14]=d,this},scaling:function(h,u,d){this.zero();var c=this.val;return c[0]=h,c[5]=u,c[10]=d,c[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var h=this.val,u=h[1],d=h[2],c=h[3],p=h[6],g=h[7],x=h[11];return h[1]=h[4],h[2]=h[8],h[3]=h[12],h[4]=u,h[6]=h[9],h[7]=h[13],h[8]=d,h[9]=p,h[11]=h[14],h[12]=c,h[13]=g,h[14]=x,this},getInverse:function(h){return this.copy(h),this.invert()},invert:function(){var h=this.val,u=h[0],d=h[1],c=h[2],p=h[3],g=h[4],x=h[5],y=h[6],T=h[7],E=h[8],w=h[9],A=h[10],b=h[11],R=h[12],L=h[13],B=h[14],D=h[15],G=u*x-d*g,X=u*y-c*g,H=u*T-p*g,K=d*y-c*x,$=d*T-p*x,N=c*T-p*y,I=E*L-w*R,z=E*B-A*R,U=E*D-b*R,W=w*B-A*L,V=w*D-b*L,Z=A*D-b*B,J=G*Z-X*V+H*W+K*U-$*z+N*I;return J?(J=1/J,this.setValues((x*Z-y*V+T*W)*J,(c*V-d*Z-p*W)*J,(L*N-B*$+D*K)*J,(A*$-w*N-b*K)*J,(y*U-g*Z-T*z)*J,(u*Z-c*U+p*z)*J,(B*H-R*N-D*X)*J,(E*N-A*H+b*X)*J,(g*V-x*U+T*I)*J,(d*U-u*V-p*I)*J,(R*$-L*H+D*G)*J,(w*H-E*$-b*G)*J,(x*z-g*W-y*I)*J,(u*W-d*z+c*I)*J,(L*X-R*K-B*G)*J,(E*K-w*X+A*G)*J)):this},adjoint:function(){var h=this.val,u=h[0],d=h[1],c=h[2],p=h[3],g=h[4],x=h[5],y=h[6],T=h[7],E=h[8],w=h[9],A=h[10],b=h[11],R=h[12],L=h[13],B=h[14],D=h[15];return this.setValues(x*(A*D-b*B)-w*(y*D-T*B)+L*(y*b-T*A),-(d*(A*D-b*B)-w*(c*D-p*B)+L*(c*b-p*A)),d*(y*D-T*B)-x*(c*D-p*B)+L*(c*T-p*y),-(d*(y*b-T*A)-x*(c*b-p*A)+w*(c*T-p*y)),-(g*(A*D-b*B)-E*(y*D-T*B)+R*(y*b-T*A)),u*(A*D-b*B)-E*(c*D-p*B)+R*(c*b-p*A),-(u*(y*D-T*B)-g*(c*D-p*B)+R*(c*T-p*y)),u*(y*b-T*A)-g*(c*b-p*A)+E*(c*T-p*y),g*(w*D-b*L)-E*(x*D-T*L)+R*(x*b-T*w),-(u*(w*D-b*L)-E*(d*D-p*L)+R*(d*b-p*w)),u*(x*D-T*L)-g*(d*D-p*L)+R*(d*T-p*x),-(u*(x*b-T*w)-g*(d*b-p*w)+E*(d*T-p*x)),-(g*(w*B-A*L)-E*(x*B-y*L)+R*(x*A-y*w)),u*(w*B-A*L)-E*(d*B-c*L)+R*(d*A-c*w),-(u*(x*B-y*L)-g*(d*B-c*L)+R*(d*y-c*x)),u*(x*A-y*w)-g*(d*A-c*w)+E*(d*y-c*x))},determinant:function(){var h=this.val,u=h[0],d=h[1],c=h[2],p=h[3],g=h[4],x=h[5],y=h[6],T=h[7],E=h[8],w=h[9],A=h[10],b=h[11],R=h[12],L=h[13],B=h[14],D=h[15],G=u*x-d*g,X=u*y-c*g,H=u*T-p*g,K=d*y-c*x,$=d*T-p*x,N=c*T-p*y,I=E*L-w*R,z=E*B-A*R,U=E*D-b*R,W=w*B-A*L,V=w*D-b*L,Z=A*D-b*B;return G*Z-X*V+H*W+K*U-$*z+N*I},multiply:function(h){var u=this.val,d=u[0],c=u[1],p=u[2],g=u[3],x=u[4],y=u[5],T=u[6],E=u[7],w=u[8],A=u[9],b=u[10],R=u[11],L=u[12],B=u[13],D=u[14],G=u[15],X=h.val,H=X[0],K=X[1],$=X[2],N=X[3];return u[0]=H*d+K*x+$*w+N*L,u[1]=H*c+K*y+$*A+N*B,u[2]=H*p+K*T+$*b+N*D,u[3]=H*g+K*E+$*R+N*G,H=X[4],K=X[5],$=X[6],N=X[7],u[4]=H*d+K*x+$*w+N*L,u[5]=H*c+K*y+$*A+N*B,u[6]=H*p+K*T+$*b+N*D,u[7]=H*g+K*E+$*R+N*G,H=X[8],K=X[9],$=X[10],N=X[11],u[8]=H*d+K*x+$*w+N*L,u[9]=H*c+K*y+$*A+N*B,u[10]=H*p+K*T+$*b+N*D,u[11]=H*g+K*E+$*R+N*G,H=X[12],K=X[13],$=X[14],N=X[15],u[12]=H*d+K*x+$*w+N*L,u[13]=H*c+K*y+$*A+N*B,u[14]=H*p+K*T+$*b+N*D,u[15]=H*g+K*E+$*R+N*G,this},multiplyLocal:function(h){var u=this.val,d=h.val;return this.setValues(u[0]*d[0]+u[1]*d[4]+u[2]*d[8]+u[3]*d[12],u[0]*d[1]+u[1]*d[5]+u[2]*d[9]+u[3]*d[13],u[0]*d[2]+u[1]*d[6]+u[2]*d[10]+u[3]*d[14],u[0]*d[3]+u[1]*d[7]+u[2]*d[11]+u[3]*d[15],u[4]*d[0]+u[5]*d[4]+u[6]*d[8]+u[7]*d[12],u[4]*d[1]+u[5]*d[5]+u[6]*d[9]+u[7]*d[13],u[4]*d[2]+u[5]*d[6]+u[6]*d[10]+u[7]*d[14],u[4]*d[3]+u[5]*d[7]+u[6]*d[11]+u[7]*d[15],u[8]*d[0]+u[9]*d[4]+u[10]*d[8]+u[11]*d[12],u[8]*d[1]+u[9]*d[5]+u[10]*d[9]+u[11]*d[13],u[8]*d[2]+u[9]*d[6]+u[10]*d[10]+u[11]*d[14],u[8]*d[3]+u[9]*d[7]+u[10]*d[11]+u[11]*d[15],u[12]*d[0]+u[13]*d[4]+u[14]*d[8]+u[15]*d[12],u[12]*d[1]+u[13]*d[5]+u[14]*d[9]+u[15]*d[13],u[12]*d[2]+u[13]*d[6]+u[14]*d[10]+u[15]*d[14],u[12]*d[3]+u[13]*d[7]+u[14]*d[11]+u[15]*d[15])},premultiply:function(h){return this.multiplyMatrices(h,this)},multiplyMatrices:function(h,u){var d=h.val,c=u.val,p=d[0],g=d[4],x=d[8],y=d[12],T=d[1],E=d[5],w=d[9],A=d[13],b=d[2],R=d[6],L=d[10],B=d[14],D=d[3],G=d[7],X=d[11],H=d[15],K=c[0],$=c[4],N=c[8],I=c[12],z=c[1],U=c[5],W=c[9],V=c[13],Z=c[2],J=c[6],tt=c[10],st=c[14],at=c[3],lt=c[7],ut=c[11],mt=c[15];return this.setValues(p*K+g*z+x*Z+y*at,T*K+E*z+w*Z+A*at,b*K+R*z+L*Z+B*at,D*K+G*z+X*Z+H*at,p*$+g*U+x*J+y*lt,T*$+E*U+w*J+A*lt,b*$+R*U+L*J+B*lt,D*$+G*U+X*J+H*lt,p*N+g*W+x*tt+y*ut,T*N+E*W+w*tt+A*ut,b*N+R*W+L*tt+B*ut,D*N+G*W+X*tt+H*ut,p*I+g*V+x*st+y*mt,T*I+E*V+w*st+A*mt,b*I+R*V+L*st+B*mt,D*I+G*V+X*st+H*mt)},translate:function(h){return this.translateXYZ(h.x,h.y,h.z)},translateXYZ:function(h,u,d){var c=this.val;return c[12]=c[0]*h+c[4]*u+c[8]*d+c[12],c[13]=c[1]*h+c[5]*u+c[9]*d+c[13],c[14]=c[2]*h+c[6]*u+c[10]*d+c[14],c[15]=c[3]*h+c[7]*u+c[11]*d+c[15],this},scale:function(h){return this.scaleXYZ(h.x,h.y,h.z)},scaleXYZ:function(h,u,d){var c=this.val;return c[0]=c[0]*h,c[1]=c[1]*h,c[2]=c[2]*h,c[3]=c[3]*h,c[4]=c[4]*u,c[5]=c[5]*u,c[6]=c[6]*u,c[7]=c[7]*u,c[8]=c[8]*d,c[9]=c[9]*d,c[10]=c[10]*d,c[11]=c[11]*d,this},makeRotationAxis:function(h,u){var d=Math.cos(u),c=Math.sin(u),p=1-d,g=h.x,x=h.y,y=h.z,T=p*g,E=p*x;return this.setValues(T*g+d,T*x-c*y,T*y+c*x,0,T*x+c*y,E*x+d,E*y-c*g,0,T*y-c*x,E*y+c*g,p*y*y+d,0,0,0,0,1)},rotate:function(h,u){var d=this.val,c=u.x,p=u.y,g=u.z,x=Math.sqrt(c*c+p*p+g*g);if(Math.abs(x)<r)return this;x=1/x,c*=x,p*=x,g*=x;var y=Math.sin(h),T=Math.cos(h),E=1-T,w=d[0],A=d[1],b=d[2],R=d[3],L=d[4],B=d[5],D=d[6],G=d[7],X=d[8],H=d[9],K=d[10],$=d[11],N=d[12],I=d[13],z=d[14],U=d[15],W=c*c*E+T,V=p*c*E+g*y,Z=g*c*E-p*y,J=c*p*E-g*y,tt=p*p*E+T,st=g*p*E+c*y,at=c*g*E+p*y,lt=p*g*E-c*y,ut=g*g*E+T;return this.setValues(w*W+L*V+X*Z,A*W+B*V+H*Z,b*W+D*V+K*Z,R*W+G*V+$*Z,w*J+L*tt+X*st,A*J+B*tt+H*st,b*J+D*tt+K*st,R*J+G*tt+$*st,w*at+L*lt+X*ut,A*at+B*lt+H*ut,b*at+D*lt+K*ut,R*at+G*lt+$*ut,N,I,z,U)},rotateX:function(h){var u=this.val,d=Math.sin(h),c=Math.cos(h),p=u[4],g=u[5],x=u[6],y=u[7],T=u[8],E=u[9],w=u[10],A=u[11];return u[4]=p*c+T*d,u[5]=g*c+E*d,u[6]=x*c+w*d,u[7]=y*c+A*d,u[8]=T*c-p*d,u[9]=E*c-g*d,u[10]=w*c-x*d,u[11]=A*c-y*d,this},rotateY:function(h){var u=this.val,d=Math.sin(h),c=Math.cos(h),p=u[0],g=u[1],x=u[2],y=u[3],T=u[8],E=u[9],w=u[10],A=u[11];return u[0]=p*c-T*d,u[1]=g*c-E*d,u[2]=x*c-w*d,u[3]=y*c-A*d,u[8]=p*d+T*c,u[9]=g*d+E*c,u[10]=x*d+w*c,u[11]=y*d+A*c,this},rotateZ:function(h){var u=this.val,d=Math.sin(h),c=Math.cos(h),p=u[0],g=u[1],x=u[2],y=u[3],T=u[4],E=u[5],w=u[6],A=u[7];return u[0]=p*c+T*d,u[1]=g*c+E*d,u[2]=x*c+w*d,u[3]=y*c+A*d,u[4]=T*c-p*d,u[5]=E*c-g*d,u[6]=w*c-x*d,u[7]=A*c-y*d,this},fromRotationTranslation:function(h,u){var d=h.x,c=h.y,p=h.z,g=h.w,x=d+d,y=c+c,T=p+p,E=d*x,w=d*y,A=d*T,b=c*y,R=c*T,L=p*T,B=g*x,D=g*y,G=g*T;return this.setValues(1-(b+L),w+G,A-D,0,w-G,1-(E+L),R+B,0,A+D,R-B,1-(E+b),0,u.x,u.y,u.z,1)},fromQuat:function(h){var u=h.x,d=h.y,c=h.z,p=h.w,g=u+u,x=d+d,y=c+c,T=u*g,E=u*x,w=u*y,A=d*x,b=d*y,R=c*y,L=p*g,B=p*x,D=p*y;return this.setValues(1-(A+R),E+D,w-B,0,E-D,1-(T+R),b+L,0,w+B,b-L,1-(T+A),0,0,0,0,1)},frustum:function(h,u,d,c,p,g){var x=1/(u-h),y=1/(c-d),T=1/(p-g);return this.setValues(p*2*x,0,0,0,0,p*2*y,0,0,(u+h)*x,(c+d)*y,(g+p)*T,-1,0,0,g*p*2*T,0)},perspective:function(h,u,d,c){var p=1/Math.tan(h/2),g=1/(d-c);return this.setValues(p/u,0,0,0,0,p,0,0,0,0,(c+d)*g,-1,0,0,2*c*d*g,0)},perspectiveLH:function(h,u,d,c){return this.setValues(2*d/h,0,0,0,0,2*d/u,0,0,0,0,-c/(d-c),1,0,0,d*c/(d-c),0)},ortho:function(h,u,d,c,p,g){var x=h-u,y=d-c,T=p-g;return x=x===0?x:1/x,y=y===0?y:1/y,T=T===0?T:1/T,this.setValues(-2*x,0,0,0,0,-2*y,0,0,0,0,2*T,0,(h+u)*x,(c+d)*y,(g+p)*T,1)},lookAtRH:function(h,u,d){var c=this.val;return i.subVectors(h,u),i.getLengthSquared()===0&&(i.z=1),i.normalize(),n.crossVectors(d,i),n.getLengthSquared()===0&&(Math.abs(d.z)===1?i.x+=1e-4:i.z+=1e-4,i.normalize(),n.crossVectors(d,i)),n.normalize(),l.crossVectors(i,n),c[0]=n.x,c[1]=n.y,c[2]=n.z,c[4]=l.x,c[5]=l.y,c[6]=l.z,c[8]=i.x,c[9]=i.y,c[10]=i.z,this},lookAt:function(h,u,d){var c=h.x,p=h.y,g=h.z,x=d.x,y=d.y,T=d.z,E=u.x,w=u.y,A=u.z;if(Math.abs(c-E)<r&&Math.abs(p-w)<r&&Math.abs(g-A)<r)return this.identity();var b=c-E,R=p-w,L=g-A,B=1/Math.sqrt(b*b+R*R+L*L);b*=B,R*=B,L*=B;var D=y*L-T*R,G=T*b-x*L,X=x*R-y*b;B=Math.sqrt(D*D+G*G+X*X),B?(B=1/B,D*=B,G*=B,X*=B):(D=0,G=0,X=0);var H=R*X-L*G,K=L*D-b*X,$=b*G-R*D;return B=Math.sqrt(H*H+K*K+$*$),B?(B=1/B,H*=B,K*=B,$*=B):(H=0,K=0,$=0),this.setValues(D,H,b,0,G,K,R,0,X,$,L,0,-(D*c+G*p+X*g),-(H*c+K*p+$*g),-(b*c+R*p+L*g),1)},yawPitchRoll:function(h,u,d){this.zero(),a.zero(),s.zero();var c=this.val,p=a.val,g=s.val,x=Math.sin(d),y=Math.cos(d);return c[10]=1,c[15]=1,c[0]=y,c[1]=x,c[4]=-x,c[5]=y,x=Math.sin(u),y=Math.cos(u),p[0]=1,p[15]=1,p[5]=y,p[10]=y,p[9]=-x,p[6]=x,x=Math.sin(h),y=Math.cos(h),g[5]=1,g[15]=1,g[0]=y,g[2]=-x,g[8]=x,g[10]=y,this.multiplyLocal(a),this.multiplyLocal(s),this},setWorldMatrix:function(h,u,d,c,p){return this.yawPitchRoll(h.y,h.x,h.z),a.scaling(d.x,d.y,d.z),s.xyz(u.x,u.y,u.z),this.multiplyLocal(a),this.multiplyLocal(s),c&&this.multiplyLocal(c),p&&this.multiplyLocal(p),this},multiplyToMat4:function(h,u){var d=this.val,c=h.val,p=d[0],g=d[1],x=d[2],y=d[3],T=d[4],E=d[5],w=d[6],A=d[7],b=d[8],R=d[9],L=d[10],B=d[11],D=d[12],G=d[13],X=d[14],H=d[15],K=c[0],$=c[1],N=c[2],I=c[3],z=c[4],U=c[5],W=c[6],V=c[7],Z=c[8],J=c[9],tt=c[10],st=c[11],at=c[12],lt=c[13],ut=c[14],mt=c[15];return u.setValues(K*p+$*T+N*b+I*D,$*g+$*E+N*R+I*G,N*x+$*w+N*L+I*X,I*y+$*A+N*B+I*H,z*p+U*T+W*b+V*D,z*g+U*E+W*R+V*G,z*x+U*w+W*L+V*X,z*y+U*A+W*B+V*H,Z*p+J*T+tt*b+st*D,Z*g+J*E+tt*R+st*G,Z*x+J*w+tt*L+st*X,Z*y+J*A+tt*B+st*H,at*p+lt*T+ut*b+mt*D,at*g+lt*E+ut*R+mt*G,at*x+lt*w+ut*L+mt*X,at*y+lt*A+ut*B+mt*H)},fromRotationXYTranslation:function(h,u,d){var c=u.x,p=u.y,g=u.z,x=Math.sin(h.x),y=Math.cos(h.x),T=Math.sin(h.y),E=Math.cos(h.y),w=c,A=p,b=g,R=-x,L=0-R*T,B=0-y*T,D=R*E,G=y*E;return d||(w=E*c+T*g,A=L*c+y*p+D*g,b=B*c+x*p+G*g),this.setValues(E,L,B,0,0,y,x,0,T,D,G,0,w,A,b,1)},getMaxScaleOnAxis:function(){var h=this.val,u=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],d=h[4]*h[4]+h[5]*h[5]+h[6]*h[6],c=h[8]*h[8]+h[9]*h[9]+h[10]*h[10];return Math.sqrt(Math.max(u,d,c))}}),a=new o,s=new o,n=new f,l=new f,i=new f;m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function l(i,h,u,d,c){var p="png",g;if(s(h)){var x=h;h=a(x,"key"),u=a(x,"url"),g=a(x,"normalMap"),d=a(x,"xhrSettings"),p=a(x,"extension",p),c=a(x,"frameConfig")}Array.isArray(u)&&(g=u[1],u=u[0]);var y={type:"image",cache:i.textureManager,extension:p,responseType:"blob",key:h,url:u,xhrSettings:d,config:c};if(r.call(this,i,y),g){var T=new l(i,this.key,g,d,c);T.type="normalMap",this.setLink(T),i.addFile(T)}},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){r.revokeObjectURL(l.data),l.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(l.data),l.onProcessError()},r.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var l,i=this.linkFile;i&&i.state===f.FILE_COMPLETE?(this.type==="image"?l=this.cache.addImage(this.key,this.data,i.data):l=this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(l),i.pendingDestroy(l)):i||(l=this.cache.addImage(this.key,this.data),this.pendingDestroy(l))}});o.register("image",function(l,i,h){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new n(this,l[u]));else this.addFile(new n(this,l,i,h));return this}),m.exports=n},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f?e.setCollision(!0,!0,!0,!0,!1):e.resetCollision(!1)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),f=t(0),r=t(11),o=t(15),a=t(1065),s=new f({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,a],initialize:function(l,i,h,u,d){o.call(this,l,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e(this),this.setTexture(u,d),this.setPosition(i,h),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,l){this.anims.update(n,l)},play:function(n,l){return this.anims.play(n,l)},playReverse:function(n,l){return this.anims.playReverse(n,l)},playAfterDelay:function(n,l){return this.anims.playAfterDelay(n,l)},playAfterRepeat:function(n,l){return this.anims.playAfterRepeat(n,l)},chain:function(n){return this.anims.chain(n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(n){return this.anims.stopAfterDelay(n)},stopAfterRepeat:function(n){return this.anims.stopAfterRepeat(n)},stopOnFrame:function(n){return this.anims.stopOnFrame(n)},toJSON:function(){return r.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});m.exports=s},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){if(!(f>=e.length)){for(var r=e.length-1,o=e[f],a=f;a<r;a++)e[a]=e[a+1];return e.length=r,o}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){return r===void 0&&(r=0),f===0?e:(e-=r,e=f*Math.floor(e/f),o?(r+e)/f:r+e)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f={};for(var r in e)Array.isArray(e[r])?f[r]=e[r].slice(0):f[r]=e[r];return f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=e.length;if(f<0||f>a||f>=r||r>a||f+r>a){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Angry Bytes (and contributors)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o,a){return String(o).localeCompare(a)}function e(o,a){var s=o.length;if(s<=1)return o;for(var n=new Array(s),l=1;l<s;l*=2){f(o,a,l,n);var i=o;o=n,n=i}return o}function f(o,a,s,n){var l=o.length,i=0,h=s*2,u,d,c,p,g;for(u=0;u<l;u+=h)for(d=u+s,c=d+s,d>l&&(d=l),c>l&&(c=l),p=u,g=d;;)if(p<d&&g<c)a(o[p],o[g])<=0?n[i++]=o[p++]:n[i++]=o[g++];else if(p<d)n[i++]=o[p++];else if(g<c)n[i++]=o[g++];else break}var r=function(o,a){a===void 0&&(a=t);var s=e(o,a);return s!==o&&f(s,null,o.length,o),o};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(134),f=t(205),r=function(o,a){var s=e.Power0;if(typeof o=="string")if(e.hasOwnProperty(o))s=e[o];else{var n="";o.indexOf(".")&&(n=o.substr(o.indexOf(".")+1),n.toLowerCase()==="in"?n="easeIn":n.toLowerCase()==="out"?n="easeOut":n.toLowerCase()==="inout"&&(n="easeInOut")),o=f(o.substr(0,o.indexOf(".")+1)+n),e.hasOwnProperty(o)&&(s=e[o])}else typeof o=="function"?s=o:Array.isArray(o)&&o.length;if(!a)return s;var l=a.slice(0);return l.unshift(0),function(i){return l[0]=i,s.apply(this,l)}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(r,o,a,s,n){var l=r.strokeTint,i=e.getTintAppendFloatAlpha(o.strokeColor,o.strokeAlpha*a);l.TL=i,l.TR=i,l.BL=i,l.BR=i;var h=o.pathData,u=h.length-1,d=o.lineWidth,c=d/2,p=h[0]-s,g=h[1]-n;o.closePath||(u-=2);for(var x=2;x<u;x+=2){var y=h[x]-s,T=h[x+1]-n;r.batchLine(p,g,y,T,c,c,d,x-2,o.closePath?x===u-1:!1),p=y,g=T}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(115),r=t(476),o=t(477),a=t(56),s=t(47),n=t(181),l=new e({initialize:function(h,u,d,c,p,g){h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),this.type=a.TRIANGLE,this.x1=h,this.y1=u,this.x2=d,this.y2=c,this.x3=p,this.y3=g},contains:function(i,h){return f(this,i,h)},getPoint:function(i,h){return r(this,i,h)},getPoints:function(i,h,u){return o(this,i,h,u)},getRandomPoint:function(i){return n(this,i)},setTo:function(i,h,u,d,c,p){return i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),this.x1=i,this.y1=h,this.x2=u,this.y2=d,this.x3=c,this.y3=p,this},getLineA:function(i){return i===void 0&&(i=new s),i.setTo(this.x1,this.y1,this.x2,this.y2),i},getLineB:function(i){return i===void 0&&(i=new s),i.setTo(this.x2,this.y2,this.x3,this.y3),i},getLineC:function(i){return i===void 0&&(i=new s),i.setTo(this.x3,this.y3,this.x1,this.y1),i},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(i){var h=0;this.x1<=this.x2&&this.x1<=this.x3?h=this.x1-i:this.x2<=this.x1&&this.x2<=this.x3?h=this.x2-i:h=this.x3-i,this.x1-=h,this.x2-=h,this.x3-=h}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(i){var h=0;this.x1>=this.x2&&this.x1>=this.x3?h=this.x1-i:this.x2>=this.x1&&this.x2>=this.x3?h=this.x2-i:h=this.x3-i,this.x1-=h,this.x2-=h,this.x3-=h}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(i){var h=0;this.y1<=this.y2&&this.y1<=this.y3?h=this.y1-i:this.y2<=this.y1&&this.y2<=this.y3?h=this.y2-i:h=this.y3-i,this.y1-=h,this.y2-=h,this.y3-=h}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(i){var h=0;this.y1>=this.y2&&this.y1>=this.y3?h=this.y1-i:this.y2>=this.y1&&this.y2>=this.y3?h=this.y2-i:h=this.y3-i,this.y1-=h,this.y2-=h,this.y3-=h}}});m.exports=l},function(m,C){var t={};m.exports=t,function(){t.create=function(e,f){return{x:e||0,y:f||0}},t.clone=function(e){return{x:e.x,y:e.y}},t.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},t.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},t.rotate=function(e,f,r){var o=Math.cos(f),a=Math.sin(f);r||(r={});var s=e.x*o-e.y*a;return r.y=e.x*a+e.y*o,r.x=s,r},t.rotateAbout=function(e,f,r,o){var a=Math.cos(f),s=Math.sin(f);o||(o={});var n=r.x+((e.x-r.x)*a-(e.y-r.y)*s);return o.y=r.y+((e.x-r.x)*s+(e.y-r.y)*a),o.x=n,o},t.normalise=function(e){var f=t.magnitude(e);return f===0?{x:0,y:0}:{x:e.x/f,y:e.y/f}},t.dot=function(e,f){return e.x*f.x+e.y*f.y},t.cross=function(e,f){return e.x*f.y-e.y*f.x},t.cross3=function(e,f,r){return(f.x-e.x)*(r.y-e.y)-(f.y-e.y)*(r.x-e.x)},t.add=function(e,f,r){return r||(r={}),r.x=e.x+f.x,r.y=e.y+f.y,r},t.sub=function(e,f,r){return r||(r={}),r.x=e.x-f.x,r.y=e.y-f.y,r},t.mult=function(e,f){return{x:e.x*f,y:e.y*f}},t.div=function(e,f){return{x:e.x/f,y:e.y/f}},t.perp=function(e,f){return f=f===!0?-1:1,{x:f*-e.y,y:f*e.x}},t.neg=function(e){return{x:-e.x,y:-e.y}},t.angle=function(e,f){return Math.atan2(f.y-e.y,f.x-e.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]}()},function(m,C){var t={};m.exports=t,function(){t.create=function(e){var f={min:{x:0,y:0},max:{x:0,y:0}};return e&&t.update(f,e),f},t.update=function(e,f,r){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var o=0;o<f.length;o++){var a=f[o];a.x>e.max.x&&(e.max.x=a.x),a.x<e.min.x&&(e.min.x=a.x),a.y>e.max.y&&(e.max.y=a.y),a.y<e.min.y&&(e.min.y=a.y)}r&&(r.x>0?e.max.x+=r.x:e.min.x+=r.x,r.y>0?e.max.y+=r.y:e.min.y+=r.y)},t.contains=function(e,f){return f.x>=e.min.x&&f.x<=e.max.x&&f.y>=e.min.y&&f.y<=e.max.y},t.overlaps=function(e,f){return e.min.x<=f.max.x&&e.max.x>=f.min.x&&e.max.y>=f.min.y&&e.min.y<=f.max.y},t.translate=function(e,f){e.min.x+=f.x,e.max.x+=f.x,e.min.y+=f.y,e.max.y+=f.y},t.shift=function(e,f){var r=e.max.x-e.min.x,o=e.max.y-e.min.y;e.min.x=f.x,e.max.x=f.x+r,e.min.y=f.y,e.max.y=f.y+o}}()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(0),r=t(11),o=t(502),a=new f({Mixins:[r.Alpha,r.Flip,r.Visible],initialize:function(n,l,i,h,u,d,c,p){this.layer=n,this.index=l,this.x=i,this.y=h,this.width=u,this.height=d,this.right,this.bottom,this.baseWidth=c!==void 0?c:u,this.baseHeight=p!==void 0?p:d,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(s,n){return!(s<this.pixelX||n<this.pixelY||s>this.right||n>this.bottom)},copy:function(s){return this.index=s.index,this.alpha=s.alpha,this.properties=s.properties,this.visible=s.visible,this.setFlip(s.flipX,s.flipY),this.tint=s.tint,this.rotation=s.rotation,this.collideUp=s.collideUp,this.collideDown=s.collideDown,this.collideLeft=s.collideLeft,this.collideRight=s.collideRight,this.collisionCallback=s.collisionCallback,this.collisionCallbackContext=s.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(s){var n=this.tilemapLayer;return n?n.tileToWorldX(this.x,s):this.x*this.baseWidth},getRight:function(s){var n=this.tilemapLayer;return n?this.getLeft(s)+this.width*n.scaleX:this.getLeft(s)+this.width},getTop:function(s){var n=this.tilemapLayer;return n?n.tileToWorldY(this.y,s)-(this.height-this.baseHeight)*n.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(s){var n=this.tilemapLayer;return n?this.getTop(s)+this.height*n.scaleY:this.getTop(s)+this.height},getBounds:function(s,n){return n===void 0&&(n=new o),n.x=this.getLeft(),n.y=this.getTop(),n.width=this.getRight()-n.x,n.height=this.getBottom()-n.y,n},getCenterX:function(s){return(this.getLeft(s)+this.getRight(s))/2},getCenterY:function(s){return(this.getTop(s)+this.getBottom(s))/2},intersects:function(s,n,l,i){return!(l<=this.pixelX||i<=this.pixelY||s>=this.right||n>=this.bottom)},isInteresting:function(s,n){return s&&n?this.canCollide||this.hasInterestingFace:s?this.collides:n?this.hasInterestingFace:!1},resetCollision:function(s){if(s===void 0&&(s=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,s){var n=this.tilemapLayer;n&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(s,n,l,i,h){if(n===void 0&&(n=s),l===void 0&&(l=s),i===void 0&&(i=s),h===void 0&&(h=!0),this.collideLeft=s,this.collideRight=n,this.collideUp=l,this.collideDown=i,this.faceLeft=s,this.faceRight=n,this.faceTop=l,this.faceBottom=i,h){var u=this.tilemapLayer;u&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(s,n){return s===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=s,this.collisionCallbackContext=n),this},setSize:function(s,n,l,i){return s!==void 0&&(this.width=s),n!==void 0&&(this.height=n),l!==void 0&&(this.baseWidth=l),i!==void 0&&(this.baseHeight=i),this.updatePixelXY(),this},updatePixelXY:function(){var s=this.layer.orientation;if(s===e.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(s===e.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(s===e.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(s===e.HEXAGONAL){var n=this.layer.hexSideLength,l=(this.baseHeight-n)/2+n;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*l}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var s=this.layer.tilemapLayer;if(s){var n=s.gidMap[this.index];if(n)return n}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var s=this.tilemapLayer;return s?s.tilemap:null}}});m.exports=a},function(m,C,t){var e={};m.exports=e;var f=t(64),r=t(32),o=t(41),a=t(84),s=t(83),n=t(1393);(function(){e.rectangle=function(l,i,h,u,d){d=d||{};var c={label:"Rectangle Body",position:{x:l,y:i},vertices:f.fromPath("L 0 0 L "+h+" 0 L "+h+" "+u+" L 0 "+u)};if(d.chamfer){var p=d.chamfer;c.vertices=f.chamfer(c.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete d.chamfer}return o.create(r.extend({},c,d))},e.trapezoid=function(l,i,h,u,d,c){c=c||{},d*=.5;var p=(1-d*2)*h,g=h*d,x=g+p,y=x+g,T;d<.5?T="L 0 0 L "+g+" "+-u+" L "+x+" "+-u+" L "+y+" 0":T="L 0 0 L "+x+" "+-u+" L "+y+" 0";var E={label:"Trapezoid Body",position:{x:l,y:i},vertices:f.fromPath(T)};if(c.chamfer){var w=c.chamfer;E.vertices=f.chamfer(E.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete c.chamfer}return o.create(r.extend({},E,c))},e.circle=function(l,i,h,u,d){u=u||{};var c={label:"Circle Body",circleRadius:h};d=d||25;var p=Math.ceil(Math.max(10,Math.min(d,h)));return p%2===1&&(p+=1),e.polygon(l,i,p,h,r.extend({},c,u))},e.polygon=function(l,i,h,u,d){if(d=d||{},h<3)return e.circle(l,i,u,d);for(var c=2*Math.PI/h,p="",g=c*.5,x=0;x<h;x+=1){var y=g+x*c,T=Math.cos(y)*u,E=Math.sin(y)*u;p+="L "+T.toFixed(3)+" "+E.toFixed(3)+" "}var w={label:"Polygon Body",position:{x:l,y:i},vertices:f.fromPath(p)};if(d.chamfer){var A=d.chamfer;w.vertices=f.chamfer(w.vertices,A.radius,A.quality,A.qualityMin,A.qualityMax),delete d.chamfer}return o.create(r.extend({},w,d))},e.fromVertices=function(l,i,h,u,d,c,p){var g,x,y,T,E,w,A,b,R;for(u=u||{},x=[],d=typeof d!="undefined"?d:!1,c=typeof c!="undefined"?c:.01,p=typeof p!="undefined"?p:10,n||r.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),r.isArray(h[0])||(h=[h]),b=0;b<h.length;b+=1)if(T=h[b],y=f.isConvex(T),y||!n)y?T=f.clockwiseSort(T):T=f.hull(T),x.push({position:{x:l,y:i},vertices:T});else{var L=T.map(function(X){return[X.x,X.y]});n.makeCCW(L),c!==!1&&n.removeCollinearPoints(L,c);var B=n.quickDecomp(L);for(E=0;E<B.length;E++){var D=B[E],G=D.map(function(X){return{x:X[0],y:X[1]}});p>0&&f.area(G)<p||x.push({position:f.centre(G),vertices:G})}}for(E=0;E<x.length;E++)x[E]=o.create(r.extend(x[E],u));return d&&e.flagCoincidentParts(x,5),x.length>1?(g=o.create(r.extend({parts:x.slice(0)},u)),o.setPosition(g,{x:l,y:i}),g):x[0]},e.flagCoincidentParts=function(l,i){i===void 0&&(i=5);for(var h=0;h<l.length;h++)for(var u=l[h],d=h+1;d<l.length;d++){var c=l[d];if(a.overlaps(u.bounds,c.bounds))for(var p=u.vertices,g=c.vertices,x=0;x<u.vertices.length;x++)for(var y=0;y<c.vertices.length;y++){var T=s.magnitudeSquared(s.sub(p[(x+1)%p.length],g[y])),E=s.magnitudeSquared(s.sub(p[x],g[(y+1)%g.length]));T<i&&E<i&&(p[x].isInternal=!0,g[y].isInternal=!0)}}return l}})()},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x-e.width*e.originX+e.width*.5};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.width*e.originX;return e.x=f+r-e.width*.5,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.y-e.height*e.originY+e.height*.5};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.height*e.originY;return e.y=f+r-e.height*.5,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),f=function(r,o,a,s){s===void 0&&(s=r);var n;if(!Array.isArray(o))return n=r.indexOf(o),n!==-1?(e(r,n),a&&a.call(s,o),o):null;for(var l=o.length-1,i=[];l>=0;){var h=o[l];n=r.indexOf(h),n!==-1&&(e(r,n),i.push(h),a&&a.call(s,h)),l--}return i};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(199),r=t(10),o=t(3),a=new e({initialize:function(n){this.type=n,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new o,this._tmpVec2B=new o},draw:function(s,n){return n===void 0&&(n=32),s.strokePoints(this.getPoints(n))},getBounds:function(s,n){s||(s=new r),n===void 0&&(n=16);var l=this.getLength();n>l&&(n=l/2);var i=Math.max(1,Math.round(l/n));return f(this.getSpacedPoints(i),s)},getDistancePoints:function(s){var n=this.getLength(),l=Math.max(1,n/s);return this.getSpacedPoints(l)},getEndPoint:function(s){return s===void 0&&(s=new o),this.getPointAt(1,s)},getLength:function(){var s=this.getLengths();return s[s.length-1]},getLengths:function(s){if(s===void 0&&(s=this.arcLengthDivisions),this.cacheArcLengths.length===s+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n=[],l,i=this.getPoint(0,this._tmpVec2A),h=0;n.push(0);for(var u=1;u<=s;u++)l=this.getPoint(u/s,this._tmpVec2B),h+=l.distance(i),n.push(h),i.copy(l);return this.cacheArcLengths=n,n},getPointAt:function(s,n){var l=this.getUtoTmapping(s);return this.getPoint(l,n)},getPoints:function(s,n,l){l===void 0&&(l=[]),s||(n?s=this.getLength()/n:s=this.defaultDivisions);for(var i=0;i<=s;i++)l.push(this.getPoint(i/s));return l},getRandomPoint:function(s){return s===void 0&&(s=new o),this.getPoint(Math.random(),s)},getSpacedPoints:function(s,n,l){l===void 0&&(l=[]),s||(n?s=this.getLength()/n:s=this.defaultDivisions);for(var i=0;i<=s;i++){var h=this.getUtoTmapping(i/s,null,s);l.push(this.getPoint(h))}return l},getStartPoint:function(s){return s===void 0&&(s=new o),this.getPointAt(0,s)},getTangent:function(s,n){n===void 0&&(n=new o);var l=1e-4,i=s-l,h=s+l;return i<0&&(i=0),h>1&&(h=1),this.getPoint(i,this._tmpVec2A),this.getPoint(h,n),n.subtract(this._tmpVec2A).normalize()},getTangentAt:function(s,n){var l=this.getUtoTmapping(s);return this.getTangent(l,n)},getTFromDistance:function(s,n){return s<=0?0:this.getUtoTmapping(0,s,n)},getUtoTmapping:function(s,n,l){var i=this.getLengths(l),h=0,u=i.length,d;n?d=Math.min(n,i[u-1]):d=s*i[u-1];for(var c=0,p=u-1,g;c<=p;)if(h=Math.floor(c+(p-c)/2),g=i[h]-d,g<0)c=h+1;else if(g>0)p=h-1;else{p=h;break}if(h=p,i[h]===d)return h/(u-1);var x=i[h],y=i[h+1],T=y-x,E=(d-x)/T;return(h+E)/(u-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o,a){a===void 0&&(a=new e);var s=r.x1,n=r.y1,l=r.x2,i=r.y2,h=o.x1,u=o.y1,d=o.x2,c=o.y2,p=(d-h)*(n-u)-(c-u)*(s-h),g=(l-s)*(n-u)-(i-n)*(s-h),x=(c-u)*(l-s)-(d-h)*(i-n);if(x===0)return!1;var y=p/x,T=g/x;return y>=0&&y<=1&&T>=0&&T<=1?(a.x=s+y*(l-s),a.y=n+y*(i-n),!0):!1};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.atan2(e.y2-e.y1,e.x2-e.x1)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=function(r,o,a){return r=e(r,0,1),(a-o)*r+o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e&&e.hasOwnProperty(f)?e[f]:r};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(315),r=new e({initialize:function(a,s){this.parent=a,this.events=s,s||(this.events=a.events?a.events:a),this.list={},this.values={},this._frozen=!1,!a.hasOwnProperty("sys")&&this.events&&this.events.once(f.DESTROY,this.destroy,this)},get:function(o){var a=this.list;if(Array.isArray(o)){for(var s=[],n=0;n<o.length;n++)s.push(a[o[n]]);return s}else return a[o]},getAll:function(){var o={};for(var a in this.list)this.list.hasOwnProperty(a)&&(o[a]=this.list[a]);return o},query:function(o){var a={};for(var s in this.list)this.list.hasOwnProperty(s)&&s.match(o)&&(a[s]=this.list[s]);return a},set:function(o,a){if(this._frozen)return this;if(typeof o=="string")return this.setValue(o,a);for(var s in o)this.setValue(s,o[s]);return this},inc:function(o,a){if(this._frozen)return this;a===void 0&&(a=1);var s=this.get(o);return s===void 0&&(s=0),this.set(o,s+a),this},toggle:function(o){return this._frozen?this:(this.set(o,!this.get(o)),this)},setValue:function(o,a){if(this._frozen)return this;if(this.has(o))this.values[o]=a;else{var s=this,n=this.list,l=this.events,i=this.parent;Object.defineProperty(this.values,o,{enumerable:!0,configurable:!0,get:function(){return n[o]},set:function(h){if(!s._frozen){var u=n[o];n[o]=h,l.emit(f.CHANGE_DATA,i,o,h,u),l.emit(f.CHANGE_DATA_KEY+o,i,h,u)}}}),n[o]=a,l.emit(f.SET_DATA,i,o,a)}return this},each:function(o,a){for(var s=[this.parent,null,void 0],n=1;n<arguments.length;n++)s.push(arguments[n]);for(var l in this.list)s[1]=l,s[2]=this.list[l],o.apply(a,s);return this},merge:function(o,a){a===void 0&&(a=!0);for(var s in o)o.hasOwnProperty(s)&&(a||!a&&!this.has(s))&&this.setValue(s,o[s]);return this},remove:function(o){if(this._frozen)return this;if(Array.isArray(o))for(var a=0;a<o.length;a++)this.removeValue(o[a]);else return this.removeValue(o);return this},removeValue:function(o){if(this.has(o)){var a=this.list[o];delete this.list[o],delete this.values[o],this.events.emit(f.REMOVE_DATA,this.parent,o,a)}return this},pop:function(o){var a=void 0;return!this._frozen&&this.has(o)&&(a=this.list[o],delete this.list[o],delete this.values[o],this.events.emit(f.REMOVE_DATA,this.parent,o,a)),a},has:function(o){return this.list.hasOwnProperty(o)},setFreeze:function(o){return this._frozen=o,this},reset:function(){for(var o in this.list)delete this.list[o],delete this.values[o];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(f.CHANGE_DATA),this.events.off(f.SET_DATA),this.events.off(f.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(o){this._frozen=!!o}},count:{get:function(){var o=0;for(var a in this.list)this.list[a]!==void 0&&o++;return o}}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o){if(this.entries={},this.size=0,Array.isArray(o))for(var a=0;a<o.length;a++)this.set(o[a][0],o[a][1])},set:function(r,o){return this.has(r)||this.size++,this.entries[r]=o,this},get:function(r){if(this.has(r))return this.entries[r]},getArray:function(){var r=[],o=this.entries;for(var a in o)r.push(o[a]);return r},has:function(r){return this.entries.hasOwnProperty(r)},delete:function(r){return this.has(r)&&(delete this.entries[r],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(r){delete this.entries[r]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var r=[],o=this.entries;for(var a in o)r.push(o[a]);return r},dump:function(){var r=this.entries;console.group("Map");for(var o in r)console.log(o,r[o]);console.groupEnd()},each:function(r){var o=this.entries;for(var a in o)if(r(a,o[a])===!1)break;return this},contains:function(r){var o=this.entries;for(var a in o)if(o[a]===r)return!0;return!1},merge:function(r,o){o===void 0&&(o=!1);var a=this.entries,s=r.entries;for(var n in s)a.hasOwnProperty(n)&&o?a[n]=s[n]:this.set(n,s[n]);return this}});m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e<<16|f<<8|r};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(m,C,t){(function(e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var f={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function r(){if(typeof importScripts=="function")return f;var o=navigator.userAgent;/Windows/.test(o)?f.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(f.iOS=!0,f.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),f.iOSVersion=parseInt(RegExp.$1,10)):f.macOS=!0:/Android/.test(o)?f.android=!0:/Linux/.test(o)?f.linux=!0:/iP[ao]d|iPhone/i.test(o)?(f.iOS=!0,navigator.appVersion.match(/OS (\d+)/),f.iOSVersion=parseInt(RegExp.$1,10),f.iPhone=o.toLowerCase().indexOf("iphone")!==-1,f.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?f.kindle=!0:/CrOS/.test(o)&&(f.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(f.android=!1,f.iOS=!1,f.macOS=!1,f.windows=!0,f.windowsPhone=!0);var a=/Silk/.test(o);return(f.windows||f.macOS||f.linux&&!a||f.chromeOS)&&(f.desktop=!0),(f.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(f.desktop=!1),navigator.standalone&&(f.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(f.cordova=!0),window.ejecta!==void 0&&(f.ejecta=!0)),typeof e!="undefined"&&e.versions&&e.versions.node&&(f.node=!0),f.node&&typeof e.versions=="object"&&(f.nodeWebkit=!!e.versions["node-webkit"],f.electron=!!e.versions.electron),/Crosswalk/.test(o)&&(f.crosswalk=!0),f.pixelRatio=window.devicePixelRatio||1,f}m.exports=r()}).call(this,t(807))},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(59),r=t(2),o=t(878),a=t(879),s=t(25),n=t(12),l=t(107),i=t(58),h=new e({Extends:i,initialize:function(d){var c=d.game.renderer,p=r(d,"fragShader",o);d.fragShader=n.parseFragmentShaderMaxTextures(p,c.maxTextures),d.vertShader=r(d,"vertShader",a),d.attributes=r(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:l.UNSIGNED_BYTE,normalized:!0}]),i.call(this,d),this._tempMatrix1=new s,this._tempMatrix2=new s,this._tempMatrix3=new s,this.calcMatrix=new s,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){i.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(u,d,c){this.manager.set(this,u);var p=this._tempMatrix1,g=this._tempMatrix2,x=this._tempMatrix3,y=u.frame,T=y.glTexture,E=y.u0,w=y.v0,A=y.u1,b=y.v1,R=y.x,L=y.y,B=y.cutWidth,D=y.cutHeight,G=y.customPivot,X=u.displayOriginX,H=u.displayOriginY,K=-X+R,$=-H+L;if(u.isCropped){var N=u._crop;(N.flipX!==u.flipX||N.flipY!==u.flipY)&&y.updateCropUVs(N,u.flipX,u.flipY),E=N.u0,w=N.v0,A=N.u1,b=N.v1,B=N.width,D=N.height,R=N.x,L=N.y,K=-X+R,$=-H+L}var I=1,z=1;u.flipX&&(G||(K+=-y.realWidth+X*2),I=-1),(u.flipY||y.source.isGLTexture&&!T.flipY)&&(G||($+=-y.realHeight+H*2),z=-1),g.applyITRS(u.x,u.y,u.rotation,u.scaleX*I,u.scaleY*z),p.copyFrom(d.matrix),c?(p.multiplyWithOffset(c,-d.scrollX*u.scrollFactorX,-d.scrollY*u.scrollFactorY),g.e=u.x,g.f=u.y):(g.e-=d.scrollX*u.scrollFactorX,g.f-=d.scrollY*u.scrollFactorY),p.multiply(g,x);var U=K+B,W=$+D,V=d.roundPixels,Z=x.getXRound(K,$,V),J=x.getYRound(K,$,V),tt=x.getXRound(K,W,V),st=x.getYRound(K,W,V),at=x.getXRound(U,W,V),lt=x.getYRound(U,W,V),ut=x.getXRound(U,$,V),mt=x.getYRound(U,$,V),dt=n.getTintAppendFloatAlpha,xt=d.alpha,Tt=dt(u.tintTopLeft,xt*u._alphaTL),Ct=dt(u.tintTopRight,xt*u._alphaTR),Et=dt(u.tintBottomLeft,xt*u._alphaBL),vt=dt(u.tintBottomRight,xt*u._alphaBR);this.shouldFlush(6)&&this.flush();var It=this.setGameObject(u,y);this.manager.preBatch(u),this.batchQuad(u,Z,J,tt,st,at,lt,ut,mt,E,w,A,b,Tt,Ct,Et,vt,u.tintFill,T,It),this.manager.postBatch(u)},batchTexture:function(u,d,c,p,g,x,y,T,E,w,A,b,R,L,B,D,G,X,H,K,$,N,I,z,U,W,V,Z,J,tt,st,at){this.manager.set(this,u);var lt=this._tempMatrix1,ut=this._tempMatrix2,mt=this._tempMatrix3,dt=X/c+V,xt=H/p+Z,Tt=(X+K)/c+V,Ct=(H+$)/p+Z,Et=y,vt=T,It=-D,Pt=-G;if(u.isCropped){var Rt=u._crop,Jt=Rt.width,qt=Rt.height;Et=Jt,vt=qt,y=Jt,T=qt,X=Rt.x,H=Rt.y;var zt=X,Nt=H;b&&(zt=K-Rt.x-Jt),R&&(Nt=$-Rt.y-qt),dt=zt/c+V,xt=Nt/p+Z,Tt=(zt+Jt)/c+V,Ct=(Nt+qt)/p+Z,It=-D+X,Pt=-G+H}R=R^(!st&&d.isRenderTexture?1:0),b&&(Et*=-1,It+=y),R&&(vt*=-1,Pt+=T);var Vt=It+Et,$t=Pt+vt;ut.applyITRS(g,x,A,E,w),lt.copyFrom(J.matrix),tt?(lt.multiplyWithOffset(tt,-J.scrollX*L,-J.scrollY*B),ut.e=g,ut.f=x):(ut.e-=J.scrollX*L,ut.f-=J.scrollY*B),lt.multiply(ut,mt);var Wt=J.roundPixels,de=mt.getXRound(It,Pt,Wt),Ce=mt.getYRound(It,Pt,Wt),ve=mt.getXRound(It,$t,Wt),pe=mt.getYRound(It,$t,Wt),me=mt.getXRound(Vt,$t,Wt),Oe=mt.getYRound(Vt,$t,Wt),q=mt.getXRound(Vt,Pt,Wt),ot=mt.getYRound(Vt,Pt,Wt);at===void 0&&(at=this.renderer.setTexture2D(d)),u&&this.manager.preBatch(u),this.batchQuad(u,de,Ce,ve,pe,me,Oe,q,ot,dt,xt,Tt,Ct,N,I,z,U,W,d,at),u&&this.manager.postBatch(u)},batchTextureFrame:function(u,d,c,p,g,x,y){this.manager.set(this);var T=this._tempMatrix1.copyFrom(x),E=this._tempMatrix2,w=d+u.width,A=c+u.height;y?T.multiply(y,E):E=T;var b=E.getX(d,c),R=E.getY(d,c),L=E.getX(d,A),B=E.getY(d,A),D=E.getX(w,A),G=E.getY(w,A),X=E.getX(w,c),H=E.getY(w,c),K=this.renderer.setTextureSource(u.source);p=n.getTintAppendFloatAlpha(p,g),this.batchQuad(null,b,R,L,B,D,G,X,H,u.u0,u.v0,u.u1,u.v1,p,p,p,p,0,u.glTexture,K)},batchFillRect:function(u,d,c,p,g,x){this.renderer.pipelines.set(this);var y=this.calcMatrix;x&&x.multiply(g,y);var T=u+c,E=d+p,w=y.getX(u,d),A=y.getY(u,d),b=y.getX(u,E),R=y.getY(u,E),L=y.getX(T,E),B=y.getY(T,E),D=y.getX(T,d),G=y.getY(T,d),X=this.fillTint;this.batchQuad(null,w,A,b,R,L,B,D,G,0,0,1,1,X.TL,X.TR,X.BL,X.BR,2)},batchFillTriangle:function(u,d,c,p,g,x,y,T){this.renderer.pipelines.set(this);var E=this.calcMatrix;T&&T.multiply(y,E);var w=E.getX(u,d),A=E.getY(u,d),b=E.getX(c,p),R=E.getY(c,p),L=E.getX(g,x),B=E.getY(g,x),D=this.fillTint;this.batchTri(null,w,A,b,R,L,B,0,0,1,1,D.TL,D.TR,D.BL,2)},batchStrokeTriangle:function(u,d,c,p,g,x,y,T,E){var w=this.tempTriangle;w[0].x=u,w[0].y=d,w[0].width=y,w[1].x=c,w[1].y=p,w[1].width=y,w[2].x=g,w[2].y=x,w[2].width=y,w[3].x=u,w[3].y=d,w[3].width=y,this.batchStrokePath(w,y,!1,T,E)},batchFillPath:function(u,d,c){this.renderer.pipelines.set(this);var p=this.calcMatrix;c&&c.multiply(d,p);for(var g=u.length,x=this.polygonCache,y,T,E=this.fillTint.TL,w=this.fillTint.TR,A=this.fillTint.BL,b=0;b<g;++b)T=u[b],x.push(T.x,T.y);y=f(x),g=y.length;for(var R=0;R<g;R+=3){var L=y[R+0]*2,B=y[R+1]*2,D=y[R+2]*2,G=x[L+0],X=x[L+1],H=x[B+0],K=x[B+1],$=x[D+0],N=x[D+1],I=p.getX(G,X),z=p.getY(G,X),U=p.getX(H,K),W=p.getY(H,K),V=p.getX($,N),Z=p.getY($,N);this.batchTri(null,I,z,U,W,V,Z,0,0,1,1,E,w,A,2)}x.length=0},batchStrokePath:function(u,d,c,p,g){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var x=u.length-1,y=0;y<x;y++){var T=u[y],E=u[y+1];this.batchLine(T.x,T.y,E.x,E.y,T.width/2,E.width/2,d,y,!c&&y===x-1,p,g)}},batchLine:function(u,d,c,p,g,x,y,T,E,w,A){this.renderer.pipelines.set(this);var b=this.calcMatrix;A&&A.multiply(w,b);var R=c-u,L=p-d,B=Math.sqrt(R*R+L*L),D=g*(p-d)/B,G=g*(u-c)/B,X=x*(p-d)/B,H=x*(u-c)/B,K=c-X,$=p-H,N=u-D,I=d-G,z=c+X,U=p+H,W=u+D,V=d+G,Z=b.getX(K,$),J=b.getY(K,$),tt=b.getX(N,I),st=b.getY(N,I),at=b.getX(z,U),lt=b.getY(z,U),ut=b.getX(W,V),mt=b.getY(W,V),dt=this.strokeTint,xt=dt.TL,Tt=dt.TR,Ct=dt.BL,Et=dt.BR;if(this.batchQuad(null,ut,mt,tt,st,Z,J,at,lt,0,0,1,1,xt,Tt,Ct,Et,2),!(y<=2)){var vt=this.prevQuad,It=this.firstQuad;T>0&&vt[4]?this.batchQuad(null,ut,mt,tt,st,vt[0],vt[1],vt[2],vt[3],0,0,1,1,xt,Tt,Ct,Et,2):(It[0]=ut,It[1]=mt,It[2]=tt,It[3]=st,It[4]=1),E&&It[4]?this.batchQuad(null,Z,J,at,lt,It[0],It[1],It[2],It[3],0,0,1,1,xt,Tt,Ct,Et,2):(vt[0]=Z,vt[1]=J,vt[2]=at,vt[3]=lt,vt[4]=1)}}});m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(18),r=t(17),o=new e({initialize:function(s,n,l,i,h,u,d){this.texture=s,this.name=n,this.source=s.source[l],this.sourceIndex=l,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(u,d,i,h)},setSize:function(a,s,n,l){n===void 0&&(n=0),l===void 0&&(l=0),this.cutX=n,this.cutY=l,this.cutWidth=a,this.cutHeight=s,this.width=a,this.height=s,this.halfWidth=Math.floor(a*.5),this.halfHeight=Math.floor(s*.5),this.centerX=Math.floor(a/2),this.centerY=Math.floor(s/2);var i=this.data,h=i.cut;h.x=n,h.y=l,h.w=a,h.h=s,h.r=n+a,h.b=l+s,i.sourceSize.w=a,i.sourceSize.h=s,i.spriteSourceSize.w=a,i.spriteSourceSize.h=s,i.radius=.5*Math.sqrt(a*a+s*s);var u=i.drawImage;return u.x=n,u.y=l,u.width=a,u.height=s,this.updateUVs()},setTrim:function(a,s,n,l,i,h){var u=this.data,d=u.spriteSourceSize;return u.trim=!0,u.sourceSize.w=a,u.sourceSize.h=s,d.x=n,d.y=l,d.w=i,d.h=h,d.r=n+i,d.b=l+h,this.x=n,this.y=l,this.width=i,this.height=h,this.halfWidth=i*.5,this.halfHeight=h*.5,this.centerX=Math.floor(i/2),this.centerY=Math.floor(h/2),this.updateUVs()},setCropUVs:function(a,s,n,l,i,h,u){var d=this.cutX,c=this.cutY,p=this.cutWidth,g=this.cutHeight,x=this.realWidth,y=this.realHeight;s=f(s,0,x),n=f(n,0,y),l=f(l,0,x-s),i=f(i,0,y-n);var T=d+s,E=c+n,w=l,A=i,b=this.data;if(b.trim){var R=b.spriteSourceSize;l=f(l,0,p-s),i=f(i,0,g-n);var L=s+l,B=n+i,D=!(R.r<s||R.b<n||R.x>L||R.y>B);if(D){var G=Math.max(R.x,s),X=Math.max(R.y,n),H=Math.min(R.r,L)-G,K=Math.min(R.b,B)-X;w=H,A=K,h?T=d+(p-(G-R.x)-H):T=d+(G-R.x),u?E=c+(g-(X-R.y)-K):E=c+(X-R.y),s=G,n=X,l=H,i=K}else T=0,E=0,w=0,A=0}else h&&(T=d+(p-s-l)),u&&(E=c+(g-n-i));var $=this.source.width,N=this.source.height;return a.u0=Math.max(0,T/$),a.v0=Math.max(0,E/N),a.u1=Math.min(1,(T+w)/$),a.v1=Math.min(1,(E+A)/N),a.x=s,a.y=n,a.cx=T,a.cy=E,a.cw=w,a.ch=A,a.width=l,a.height=i,a.flipX=h,a.flipY=u,a},updateCropUVs:function(a,s,n){return this.setCropUVs(a,a.x,a.y,a.width,a.height,s,n)},setUVs:function(a,s,n,l,i,h){var u=this.data.drawImage;return u.width=a,u.height=s,this.u0=n,this.v0=l,this.u1=i,this.v1=h,this},updateUVs:function(){var a=this.cutX,s=this.cutY,n=this.cutWidth,l=this.cutHeight,i=this.data.drawImage;i.width=n,i.height=l;var h=this.source.width,u=this.source.height;return this.u0=a/h,this.v0=s/u,this.u1=(a+n)/h,this.v1=(s+l)/u,this},updateUVsInverted:function(){var a=this.source.width,s=this.source.height;return this.u0=(this.cutX+this.cutHeight)/a,this.v0=this.cutY/s,this.u1=this.cutX/a,this.v1=(this.cutY+this.cutWidth)/s,this},clone:function(){var a=new o(this.texture,this.name,this.sourceIndex);return a.cutX=this.cutX,a.cutY=this.cutY,a.cutWidth=this.cutWidth,a.cutHeight=this.cutHeight,a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a.halfWidth=this.halfWidth,a.halfHeight=this.halfHeight,a.centerX=this.centerX,a.centerY=this.centerY,a.rotated=this.rotated,a.data=r(!0,a.data,this.data),a.updateUVs(),a},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(208),f=t(0),r=t(1),o=t(79),a=new f({initialize:function(n){this.parent=n,this.list=[],this.position=0,this.addCallback=r,this.removeCallback=r,this._sortKey=""},add:function(s,n){return n?e.Add(this.list,s):e.Add(this.list,s,0,this.addCallback,this)},addAt:function(s,n,l){return l?e.AddAt(this.list,s,n):e.AddAt(this.list,s,n,0,this.addCallback,this)},getAt:function(s){return this.list[s]},getIndex:function(s){return this.list.indexOf(s)},sort:function(s,n){return s?(n===void 0&&(n=function(l,i){return l[s]-i[s]}),o(this.list,n),this):this},getByName:function(s){return e.GetFirst(this.list,"name",s)},getRandom:function(s,n){return e.GetRandom(this.list,s,n)},getFirst:function(s,n,l,i){return e.GetFirst(this.list,s,n,l,i)},getAll:function(s,n,l,i){return e.GetAll(this.list,s,n,l,i)},count:function(s,n){return e.CountAllMatching(this.list,s,n)},swap:function(s,n){e.Swap(this.list,s,n)},moveTo:function(s,n){return e.MoveTo(this.list,s,n)},moveAbove:function(s,n){return e.MoveAbove(this.list,s,n)},moveBelow:function(s,n){return e.MoveBelow(this.list,s,n)},remove:function(s,n){return n?e.Remove(this.list,s):e.Remove(this.list,s,this.removeCallback,this)},removeAt:function(s,n){return n?e.RemoveAt(this.list,s):e.RemoveAt(this.list,s,this.removeCallback,this)},removeBetween:function(s,n,l){return l?e.RemoveBetween(this.list,s,n):e.RemoveBetween(this.list,s,n,this.removeCallback,this)},removeAll:function(s){for(var n=this.list.length;n--;)this.remove(this.list[n],s);return this},bringToTop:function(s){return e.BringToTop(this.list,s)},sendToBack:function(s){return e.SendToBack(this.list,s)},moveUp:function(s){return e.MoveUp(this.list,s),s},moveDown:function(s){return e.MoveDown(this.list,s),s},reverse:function(){return this.list.reverse(),this},shuffle:function(){return e.Shuffle(this.list),this},replace:function(s,n){return e.Replace(this.list,s,n)},exists:function(s){return this.list.indexOf(s)>-1},setAll:function(s,n,l,i){return e.SetAll(this.list,s,n,l,i),this},each:function(s,n){for(var l=[null],i=2;i<arguments.length;i++)l.push(arguments[i]);for(i=0;i<this.list.length;i++)l[0]=this.list[i],s.apply(n,l)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(112),r=t(445),o=t(446),a=t(56),s=t(180),n=new e({initialize:function(i,h,u,d){i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=0),this.type=a.ELLIPSE,this.x=i,this.y=h,this.width=u,this.height=d},contains:function(l,i){return f(this,l,i)},getPoint:function(l,i){return r(this,l,i)},getPoints:function(l,i,h){return o(this,l,i,h)},getRandomPoint:function(l){return s(this,l)},setTo:function(l,i,h,u){return this.x=l,this.y=i,this.width=h,this.height=u,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(l,i){return i===void 0&&(i=l),this.x=l,this.y=i,this},setSize:function(l,i){return i===void 0&&(i=l),this.width=l,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(l){this.x=l+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(l){this.x=l-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(l){this.y=l+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(l){this.y=l-this.height/2}}});m.exports=n},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(e.width<=0||e.height<=0)return!1;var o=(f-e.x)/e.width,a=(r-e.y)/e.height;return o*=o,a*=a,o+a<.25};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(275),f=t(0),r=t(75),o=t(9),a=t(207),s=t(2),n=t(6),l=t(7),i=t(437),h=t(149),u=t(73),d=new f({Extends:o,initialize:function(p,g,x){o.call(this),x?g&&!Array.isArray(g)&&(g=[g]):Array.isArray(g)?l(g[0])&&(x=g,g=null):l(g)&&(x=g,g=null),this.scene=p,this.children=new h,this.isParent=!0,this.type="Group",this.classType=s(x,"classType",u),this.name=s(x,"name",""),this.active=s(x,"active",!0),this.maxSize=s(x,"maxSize",-1),this.defaultKey=s(x,"defaultKey",null),this.defaultFrame=s(x,"defaultFrame",null),this.runChildUpdate=s(x,"runChildUpdate",!1),this.createCallback=s(x,"createCallback",null),this.removeCallback=s(x,"removeCallback",null),this.createMultipleCallback=s(x,"createMultipleCallback",null),this.internalCreateCallback=s(x,"internalCreateCallback",null),this.internalRemoveCallback=s(x,"internalRemoveCallback",null),g&&this.addMultiple(g),x&&this.createMultiple(x),this.on(r.ADDED_TO_SCENE,this.addedToScene,this),this.on(r.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(c,p,g,x,y,T){if(c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=this.defaultKey),x===void 0&&(x=this.defaultFrame),y===void 0&&(y=!0),T===void 0&&(T=!0),this.isFull())return null;var E=new this.classType(this.scene,c,p,g,x);return E.addToDisplayList(this.scene.sys.displayList),E.addToUpdateList(),E.visible=y,E.setActive(T),this.add(E),E},createMultiple:function(c){if(this.isFull())return[];Array.isArray(c)||(c=[c]);var p=[];if(c[0].key)for(var g=0;g<c.length;g++){var x=this.createFromConfig(c[g]);p=p.concat(x)}return p},createFromConfig:function(c){if(this.isFull())return[];this.classType=s(c,"classType",this.classType);var p=s(c,"key",void 0),g=s(c,"frame",null),x=s(c,"visible",!0),y=s(c,"active",!0),T=[];if(p===void 0)return T;Array.isArray(p)||(p=[p]),Array.isArray(g)||(g=[g]);var E=s(c,"repeat",0),w=s(c,"randomKey",!1),A=s(c,"randomFrame",!1),b=s(c,"yoyo",!1),R=s(c,"quantity",!1),L=s(c,"frameQuantity",1),B=s(c,"max",0),D=i(p,g,{max:B,qty:R||L,random:w,randomB:A,repeat:E,yoyo:b});c.createCallback&&(this.createCallback=c.createCallback),c.removeCallback&&(this.removeCallback=c.removeCallback);for(var G=0;G<D.length;G++){var X=this.create(0,0,D[G].a,D[G].b,x,y);if(!X)break;T.push(X)}var H=n(c,"setXY.x",0),K=n(c,"setXY.y",0),$=n(c,"setXY.stepX",0),N=n(c,"setXY.stepY",0);e.SetXY(T,H,K,$,N);var I=n(c,"setRotation.value",0),z=n(c,"setRotation.step",0);e.SetRotation(T,I,z);var U=n(c,"setScale.x",1),W=n(c,"setScale.y",U),V=n(c,"setScale.stepX",0),Z=n(c,"setScale.stepY",0);e.SetScale(T,U,W,V,Z);var J=n(c,"setOrigin.x",.5),tt=n(c,"setOrigin.y",J),st=n(c,"setOrigin.stepX",0),at=n(c,"setOrigin.stepY",0);e.SetOrigin(T,J,tt,st,at);var lt=n(c,"setAlpha.value",1),ut=n(c,"setAlpha.step",0);e.SetAlpha(T,lt,ut);var mt=n(c,"setDepth.value",0),dt=n(c,"setDepth.step",0);e.SetDepth(T,mt,dt);var xt=n(c,"setScrollFactor.x",1),Tt=n(c,"setScrollFactor.y",xt),Ct=n(c,"setScrollFactor.stepX",0),Et=n(c,"setScrollFactor.stepY",0);e.SetScrollFactor(T,xt,Tt,Ct,Et);var vt=s(c,"hitArea",null),It=s(c,"hitAreaCallback",null);vt&&e.SetHitArea(T,vt,It);var Pt=s(c,"gridAlign",!1);return Pt&&e.GridAlign(T,Pt),this.createMultipleCallback&&this.createMultipleCallback.call(this,T),T},preUpdate:function(c,p){if(!(!this.runChildUpdate||this.children.size===0))for(var g=this.children.entries.slice(),x=0;x<g.length;x++){var y=g[x];y.active&&y.update(c,p)}},add:function(c,p){return p===void 0&&(p=!1),this.isFull()?this:(this.children.set(c),this.internalCreateCallback&&this.internalCreateCallback.call(this,c),this.createCallback&&this.createCallback.call(this,c),p&&(c.addToDisplayList(this.scene.sys.displayList),c.addToUpdateList()),c.on(r.DESTROY,this.remove,this),this)},addMultiple:function(c,p){if(p===void 0&&(p=!1),Array.isArray(c))for(var g=0;g<c.length;g++)this.add(c[g],p);return this},remove:function(c,p,g){return p===void 0&&(p=!1),g===void 0&&(g=!1),this.children.contains(c)?(this.children.delete(c),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,c),this.removeCallback&&this.removeCallback.call(this,c),c.off(r.DESTROY,this.remove,this),g?c.destroy():p&&(c.removeFromDisplayList(),c.removeFromUpdateList()),this):this},clear:function(c,p){c===void 0&&(c=!1),p===void 0&&(p=!1);for(var g=this.children,x=0;x<g.size;x++){var y=g.entries[x];y.off(r.DESTROY,this.remove,this),p?y.destroy():c&&(y.removeFromDisplayList(),y.removeFromUpdateList())}return this.children.clear(),this},contains:function(c){return this.children.contains(c)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(c,p,g,x){return a(this.children.entries,c,p,g,x)},getFirst:function(c,p,g,x,y,T,E){return this.getHandler(!0,1,c,p,g,x,y,T,E)},getFirstNth:function(c,p,g,x,y,T,E,w){return this.getHandler(!0,c,p,g,x,y,T,E,w)},getLast:function(c,p,g,x,y,T,E){return this.getHandler(!1,1,c,p,g,x,y,T,E)},getLastNth:function(c,p,g,x,y,T,E,w){return this.getHandler(!1,c,p,g,x,y,T,E,w)},getHandler:function(c,p,g,x,y,T,E,w,A){g===void 0&&(g=!1),x===void 0&&(x=!1);var b,R,L=0,B=this.children.entries;if(c)for(R=0;R<B.length;R++)if(b=B[R],b.active===g){if(L++,L===p)break}else b=null;else for(R=B.length-1;R>=0;R--)if(b=B[R],b.active===g){if(L++,L===p)break}else b=null;return b?(typeof y=="number"&&(b.x=y),typeof T=="number"&&(b.y=T),b):x?this.create(y,T,E,w,A):null},get:function(c,p,g,x,y){return this.getFirst(!1,!0,c,p,g,x,y)},getFirstAlive:function(c,p,g,x,y,T){return this.getFirst(!0,c,p,g,x,y,T)},getFirstDead:function(c,p,g,x,y,T){return this.getFirst(!1,c,p,g,x,y,T)},playAnimation:function(c,p){return e.PlayAnimation(this.children.entries,c,p),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(c){c===void 0&&(c=!0);for(var p=0,g=0;g<this.children.size;g++)this.children.entries[g].active===c&&p++;return p},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var c=this.getTotalUsed(),p=this.maxSize===-1?999999999999:this.maxSize;return p-c},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},propertyValueSet:function(c,p,g,x,y){return e.PropertyValueSet(this.children.entries,c,p,g,x,y),this},propertyValueInc:function(c,p,g,x,y){return e.PropertyValueInc(this.children.entries,c,p,g,x,y),this},setX:function(c,p){return e.SetX(this.children.entries,c,p),this},setY:function(c,p){return e.SetY(this.children.entries,c,p),this},setXY:function(c,p,g,x){return e.SetXY(this.children.entries,c,p,g,x),this},incX:function(c,p){return e.IncX(this.children.entries,c,p),this},incY:function(c,p){return e.IncY(this.children.entries,c,p),this},incXY:function(c,p,g,x){return e.IncXY(this.children.entries,c,p,g,x),this},shiftPosition:function(c,p,g){return e.ShiftPosition(this.children.entries,c,p,g),this},angle:function(c,p){return e.Angle(this.children.entries,c,p),this},rotate:function(c,p){return e.Rotate(this.children.entries,c,p),this},rotateAround:function(c,p){return e.RotateAround(this.children.entries,c,p),this},rotateAroundDistance:function(c,p,g){return e.RotateAroundDistance(this.children.entries,c,p,g),this},setAlpha:function(c,p){return e.SetAlpha(this.children.entries,c,p),this},setTint:function(c,p,g,x){return e.SetTint(this.children.entries,c,p,g,x),this},setOrigin:function(c,p,g,x){return e.SetOrigin(this.children.entries,c,p,g,x),this},scaleX:function(c,p){return e.ScaleX(this.children.entries,c,p),this},scaleY:function(c,p){return e.ScaleY(this.children.entries,c,p),this},scaleXY:function(c,p,g,x){return e.ScaleXY(this.children.entries,c,p,g,x),this},setDepth:function(c,p){return e.SetDepth(this.children.entries,c,p),this},setBlendMode:function(c){return e.SetBlendMode(this.children.entries,c),this},setHitArea:function(c,p){return e.SetHitArea(this.children.entries,c,p),this},shuffle:function(){return e.Shuffle(this.children.entries),this},kill:function(c){this.children.contains(c)&&c.setActive(!1)},killAndHide:function(c){this.children.contains(c)&&(c.setActive(!1),c.setVisible(!1))},setVisible:function(c,p,g){return e.SetVisible(this.children.entries,c,p,g),this},toggleVisible:function(){return e.ToggleVisible(this.children.entries),this},destroy:function(c,p){c===void 0&&(c=!1),p===void 0&&(p=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(r.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(p,c),this.scene=void 0,this.children=void 0)}});m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(r,o,a,s,n,l){for(var i=e.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*s),h=a.pathData,u=a.pathIndexes,d=0;d<u.length;d+=3){var c=u[d]*2,p=u[d+1]*2,g=u[d+2]*2,x=h[c+0]-n,y=h[c+1]-l,T=h[p+0]-n,E=h[p+1]-l,w=h[g+0]-n,A=h[g+1]-l,b=o.getX(x,y),R=o.getY(x,y),L=o.getX(T,E),B=o.getY(T,E),D=o.getX(w,A),G=o.getY(w,A);r.batchTri(a,b,R,L,B,D,G,0,0,1,1,i,i,i,2)}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=e.x3-e.x1,a=e.y3-e.y1,s=e.x2-e.x1,n=e.y2-e.y1,l=f-e.x1,i=r-e.y1,h=o*o+a*a,u=o*s+a*n,d=o*l+a*i,c=s*s+n*n,p=s*l+n*i,g=h*c-u*u,x=g===0?0:1/g,y=(c*d-u*p)*x,T=(h*p-u*d)*x;return y>=0&&T>=0&&y+T<1};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(10),r=t(3);function o(s,n,l,i){var h=s-l,u=n-i,d=h*h+u*u;return Math.sqrt(d)}var a=new e({initialize:function(n,l,i){this.vertex1=n,this.vertex2=l,this.vertex3=i,this.bounds=new f,this._inCenter=new r},getInCenter:function(s){s===void 0&&(s=!0);var n=this.vertex1,l=this.vertex2,i=this.vertex3,h,u,d,c,p,g;s?(h=n.x,u=n.y,d=l.x,c=l.y,p=i.x,g=i.y):(h=n.vx,u=n.vy,d=l.vx,c=l.vy,p=i.vx,g=i.vy);var x=o(p,g,d,c),y=o(h,u,p,g),T=o(d,c,h,u),E=x+y+T;return this._inCenter.set((h*x+d*y+p*T)/E,(u*x+c*y+g*T)/E)},contains:function(s,n,l){var i=this.vertex1,h=this.vertex2,u=this.vertex3,d=i.vx,c=i.vy,p=h.vx,g=h.vy,x=u.vx,y=u.vy;if(l){var T=l.a,E=l.b,w=l.c,A=l.d,b=l.e,R=l.f;d=i.vx*T+i.vy*w+b,c=i.vx*E+i.vy*A+R,p=h.vx*T+h.vy*w+b,g=h.vx*E+h.vy*A+R,x=u.vx*T+u.vy*w+b,y=u.vx*E+u.vy*A+R}var L=x-d,B=y-c,D=p-d,G=g-c,X=s-d,H=n-c,K=L*L+B*B,$=L*D+B*G,N=L*X+B*H,I=D*D+G*G,z=D*X+G*H,U=K*I-$*$,W=U===0?0:1/U,V=(I*N-$*z)*W,Z=(K*z-$*N)*W;return V>=0&&Z>=0&&V+Z<1},isCounterClockwise:function(s){var n=this.vertex1,l=this.vertex2,i=this.vertex3,h=(l.vx-n.vx)*(i.vy-n.vy)-(l.vy-n.vy)*(i.vx-n.vx);return s<=0?h>=0:h<0},load:function(s,n,l,i,h){return l=this.vertex1.load(s,n,l,i,h),l=this.vertex2.load(s,n,l,i,h),l=this.vertex3.load(s,n,l,i,h),l},transformCoordinatesLocal:function(s,n,l,i){return this.vertex1.transformCoordinatesLocal(s,n,l,i),this.vertex2.transformCoordinatesLocal(s,n,l,i),this.vertex3.transformCoordinatesLocal(s,n,l,i),this},updateBounds:function(){var s=this.vertex1,n=this.vertex2,l=this.vertex3,i=this.bounds;return i.x=Math.min(s.vx,n.vx,l.vx),i.y=Math.min(s.vy,n.vy,l.vy),i.width=Math.max(s.vx,n.vx,l.vx)-i.x,i.height=Math.max(s.vy,n.vy,l.vy)-i.y,this},isInView:function(s,n,l,i,h,u,d,c,p,g,x){var y=this.vertex1.update(h,u,d,c,p,g,x,i),T=this.vertex2.update(h,u,d,c,p,g,x,i),E=this.vertex3.update(h,u,d,c,p,g,x,i);if(y.ta<=0&&T.ta<=0&&E.ta<=0||n&&!this.isCounterClockwise(l))return!1;var w=this.bounds;w.x=Math.min(y.tx,T.tx,E.tx),w.y=Math.min(y.ty,T.ty,E.ty),w.width=Math.max(y.tx,T.tx,E.tx)-w.x,w.height=Math.max(y.ty,T.ty,E.ty)-w.y;var A=s.x+s.width,b=s.y+s.height;return w.width<=0||w.height<=0||s.width<=0||s.height<=0?!1:!(w.right<s.x||w.bottom<s.y||w.x>A||w.y>b)},translate:function(s,n){n===void 0&&(n=0);var l=this.vertex1,i=this.vertex2,h=this.vertex3;return l.x+=s,l.y+=n,i.x+=s,i.y+=n,h.x+=s,h.y+=n,this},x:{get:function(){return this.getInCenter().x},set:function(s){var n=this.getInCenter();this.translate(s-n.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(s){var n=this.getInCenter();this.translate(0,s-n.y)}},alpha:{get:function(){var s=this.vertex1,n=this.vertex2,l=this.vertex3;return(s.alpha+n.alpha+l.alpha)/3},set:function(s){this.vertex1.alpha=s,this.vertex2.alpha=s,this.vertex3.alpha=s}},depth:{get:function(){var s=this.vertex1,n=this.vertex2,l=this.vertex3;return(s.vz+n.vz+l.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(12),r=t(39),o=new e({Extends:r,initialize:function(s,n,l,i,h,u,d,c,p,g){u===void 0&&(u=16777215),d===void 0&&(d=1),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),r.call(this,s,n,l),this.vx=0,this.vy=0,this.vz=0,this.nx=c,this.ny=p,this.nz=g,this.u=i,this.v=h,this.color=u,this.alpha=d,this.tx=0,this.ty=0,this.ta=0},setUVs:function(a,s){return this.u=a,this.v=s,this},transformCoordinatesLocal:function(a,s,n,l){var i=this.x,h=this.y,u=this.z,d=a.val,c=i*d[0]+h*d[4]+u*d[8]+d[12],p=i*d[1]+h*d[5]+u*d[9]+d[13],g=i*d[2]+h*d[6]+u*d[10]+d[14],x=i*d[3]+h*d[7]+u*d[11]+d[15];this.vx=c/x*s,this.vy=-(p/x)*n,l<=0?this.vz=g/x:this.vz=-(g/x)},update:function(a,s,n,l,i,h,u,d){var c=this.vx*a+this.vy*n+i,p=this.vx*s+this.vy*l+h;return u&&(c=Math.round(c),p=Math.round(p)),this.tx=c,this.ty=p,this.ta=this.alpha*d,this},load:function(a,s,n,l,i){return a[++n]=this.tx,a[++n]=this.ty,a[++n]=this.u,a[++n]=this.v,a[++n]=l,a[++n]=i,s[++n]=f.getTintAppendFloatAlpha(this.color,this.ta),n}});m.exports=o},function(m,C,t){var e={};m.exports=e;var f=t(166),r=t(32),o=t(84),a=t(41);(function(){e.create=function(s){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},s)},e.setModified=function(s,n,l,i){if(f.trigger(s,"compositeModified",s),s.isModified=n,l&&s.parent&&e.setModified(s.parent,n,l,i),i)for(var h=0;h<s.composites.length;h++){var u=s.composites[h];e.setModified(u,n,l,i)}},e.add=function(s,n){var l=[].concat(n);f.trigger(s,"beforeAdd",{object:n});for(var i=0;i<l.length;i++){var h=l[i];switch(h.type){case"body":if(h.parent!==h){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(s,h);break;case"constraint":e.addConstraint(s,h);break;case"composite":e.addComposite(s,h);break;case"mouseConstraint":e.addConstraint(s,h.constraint);break}}return f.trigger(s,"afterAdd",{object:n}),s},e.remove=function(s,n,l){var i=[].concat(n);f.trigger(s,"beforeRemove",{object:n});for(var h=0;h<i.length;h++){var u=i[h];switch(u.type){case"body":e.removeBody(s,u,l);break;case"constraint":e.removeConstraint(s,u,l);break;case"composite":e.removeComposite(s,u,l);break;case"mouseConstraint":e.removeConstraint(s,u.constraint);break}}return f.trigger(s,"afterRemove",{object:n}),s},e.addComposite=function(s,n){return s.composites.push(n),n.parent=s,e.setModified(s,!0,!0,!1),s},e.removeComposite=function(s,n,l){var i=s.composites.indexOf(n);if(i!==-1&&(e.removeCompositeAt(s,i),e.setModified(s,!0,!0,!1)),l)for(var h=0;h<s.composites.length;h++)e.removeComposite(s.composites[h],n,!0);return s},e.removeCompositeAt=function(s,n){return s.composites.splice(n,1),e.setModified(s,!0,!0,!1),s},e.addBody=function(s,n){return s.bodies.push(n),e.setModified(s,!0,!0,!1),s},e.removeBody=function(s,n,l){var i=s.bodies.indexOf(n);if(i!==-1&&(e.removeBodyAt(s,i),e.setModified(s,!0,!0,!1)),l)for(var h=0;h<s.composites.length;h++)e.removeBody(s.composites[h],n,!0);return s},e.removeBodyAt=function(s,n){return s.bodies.splice(n,1),e.setModified(s,!0,!0,!1),s},e.addConstraint=function(s,n){return s.constraints.push(n),e.setModified(s,!0,!0,!1),s},e.removeConstraint=function(s,n,l){var i=s.constraints.indexOf(n);if(i!==-1&&e.removeConstraintAt(s,i),l)for(var h=0;h<s.composites.length;h++)e.removeConstraint(s.composites[h],n,!0);return s},e.removeConstraintAt=function(s,n){return s.constraints.splice(n,1),e.setModified(s,!0,!0,!1),s},e.clear=function(s,n,l){if(l)for(var i=0;i<s.composites.length;i++)e.clear(s.composites[i],n,!0);return n?s.bodies=s.bodies.filter(function(h){return h.isStatic}):s.bodies.length=0,s.constraints.length=0,s.composites.length=0,e.setModified(s,!0,!0,!1),s},e.allBodies=function(s){for(var n=[].concat(s.bodies),l=0;l<s.composites.length;l++)n=n.concat(e.allBodies(s.composites[l]));return n},e.allConstraints=function(s){for(var n=[].concat(s.constraints),l=0;l<s.composites.length;l++)n=n.concat(e.allConstraints(s.composites[l]));return n},e.allComposites=function(s){for(var n=[].concat(s.composites),l=0;l<s.composites.length;l++)n=n.concat(e.allComposites(s.composites[l]));return n},e.get=function(s,n,l){var i,h;switch(l){case"body":i=e.allBodies(s);break;case"constraint":i=e.allConstraints(s);break;case"composite":i=e.allComposites(s).concat(s);break}return i?(h=i.filter(function(u){return u.id.toString()===n.toString()}),h.length===0?null:h[0]):null},e.move=function(s,n,l){return e.remove(s,n),e.add(l,n),s},e.rebase=function(s){for(var n=e.allBodies(s).concat(e.allConstraints(s)).concat(e.allComposites(s)),l=0;l<n.length;l++)n[l].id=r.nextId();return e.setModified(s,!0,!0,!1),s},e.translate=function(s,n,l){for(var i=l?e.allBodies(s):s.bodies,h=0;h<i.length;h++)a.translate(i[h],n);return e.setModified(s,!0,!0,!1),s},e.rotate=function(s,n,l,i){for(var h=Math.cos(n),u=Math.sin(n),d=i?e.allBodies(s):s.bodies,c=0;c<d.length;c++){var p=d[c],g=p.position.x-l.x,x=p.position.y-l.y;a.setPosition(p,{x:l.x+(g*h-x*u),y:l.y+(g*u+x*h)}),a.rotate(p,n)}return e.setModified(s,!0,!0,!1),s},e.scale=function(s,n,l,i,h){for(var u=h?e.allBodies(s):s.bodies,d=0;d<u.length;d++){var c=u[d],p=c.position.x-i.x,g=c.position.y-i.y;a.setPosition(c,{x:i.x+p*n,y:i.y+g*l}),a.scale(c,n,l)}return e.setModified(s,!0,!0,!1),s},e.bounds=function(s){for(var n=e.allBodies(s),l=[],i=0;i<n.length;i+=1){var h=n[i];l.push(h.bounds.min,h.bounds.max)}return o.create(l)}})()},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e>=0&&e<r.width&&f>=0&&f<r.height};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(29),r=t(2),o=new e({initialize:function(s){s===void 0&&(s={}),this.name=r(s,"name","layer"),this.x=r(s,"x",0),this.y=r(s,"y",0),this.width=r(s,"width",0),this.height=r(s,"height",0),this.tileWidth=r(s,"tileWidth",0),this.tileHeight=r(s,"tileHeight",0),this.baseTileWidth=r(s,"baseTileWidth",this.tileWidth),this.baseTileHeight=r(s,"baseTileHeight",this.tileHeight),this.orientation=r(s,"orientation",f.ORTHOGONAL),this.widthInPixels=r(s,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=r(s,"heightInPixels",this.height*this.baseTileHeight),this.alpha=r(s,"alpha",1),this.visible=r(s,"visible",!0),this.properties=r(s,"properties",[]),this.indexes=r(s,"indexes",[]),this.collideIndexes=r(s,"collideIndexes",[]),this.callbacks=r(s,"callbacks",[]),this.bodies=r(s,"bodies",[]),this.data=r(s,"data",[]),this.tilemapLayer=r(s,"tilemapLayer",null),this.hexSideLength=r(s,"hexSideLength",0)}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(29),r=t(2),o=new e({initialize:function(s){s===void 0&&(s={}),this.name=r(s,"name","map"),this.width=r(s,"width",0),this.height=r(s,"height",0),this.infinite=r(s,"infinite",!1),this.tileWidth=r(s,"tileWidth",0),this.tileHeight=r(s,"tileHeight",0),this.widthInPixels=r(s,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=r(s,"heightInPixels",this.height*this.tileHeight),this.format=r(s,"format",null),this.orientation=r(s,"orientation",f.ORTHOGONAL),this.renderOrder=r(s,"renderOrder","right-down"),this.version=r(s,"version","1"),this.properties=r(s,"properties",{}),this.layers=r(s,"layers",[]),this.images=r(s,"images",[]),this.objects=r(s,"objects",{}),this.collision=r(s,"collision",{}),this.tilesets=r(s,"tilesets",[]),this.imageCollections=r(s,"imageCollections",[]),this.tiles=r(s,"tiles",[]),this.hexSideLength=r(s,"hexSideLength",0)}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s,n,l,i,h,u){(s===void 0||s<=0)&&(s=32),(n===void 0||n<=0)&&(n=32),l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h={}),u===void 0&&(u={}),this.name=o,this.firstgid=a,this.tileWidth=s,this.tileHeight=n,this.tileMargin=l,this.tileSpacing=i,this.tileProperties=h,this.tileData=u,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var o=this.getTileData(r);return o&&o.objectgroup?o.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){return this.image=r,this.glTexture=r.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(r,o){return r!==void 0&&(this.tileWidth=r),o!==void 0&&(this.tileHeight=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,o){return r!==void 0&&(this.tileMargin=r),o!==void 0&&(this.tileSpacing=o),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,o){var a=(o-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),s=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(a%1!==0||s%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),a=Math.floor(a),s=Math.floor(s),this.rows=a,this.columns=s,this.total=a*s,this.texCoordinates.length=0;for(var n=this.tileMargin,l=this.tileMargin,i=0;i<this.rows;i++){for(var h=0;h<this.columns;h++)this.texCoordinates.push({x:n,y:l}),n+=this.tileWidth+this.tileSpacing;n=this.tileMargin,l+=this.tileHeight+this.tileSpacing}return this}});m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return r===void 0&&(r=1e-4),Math.abs(e-f)<r};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(15),o=t(1068),a=new e({Extends:r,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Size,f.TextureCrop,f.Tint,f.Transform,f.Visible,o],initialize:function(n,l,i,h,u){r.call(this,n,"Image"),this._crop=this.resetCropObject(),this.setTexture(h,u),this.setPosition(l,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.hasOwnProperty(f)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=function(r,o){var a=e(r);for(var s in o)a.hasOwnProperty(s)||(a[s]=o[s]);return a};m.exports=f},function(m,C,t){var e={};m.exports=e;var f=t(64),r=t(83),o=t(165),a=t(84),s=t(271),n=t(32);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(l){var i=l;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var h=i.bodyA?r.add(i.bodyA.position,i.pointA):i.pointA,u=i.bodyB?r.add(i.bodyB.position,i.pointB):i.pointB,d=r.magnitude(r.sub(h,u));i.length=typeof i.length!="undefined"?i.length:d,i.id=i.id||n.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var c={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return i.length===0&&i.stiffness>.1?(c.type="pin",c.anchors=!1):i.stiffness<.9&&(c.type="spring"),i.render=n.extend(c,i.render),i},e.preSolveAll=function(l){for(var i=0;i<l.length;i+=1){var h=l[i],u=h.constraintImpulse;h.isStatic||u.x===0&&u.y===0&&u.angle===0||(h.position.x+=u.x,h.position.y+=u.y,h.angle+=u.angle)}},e.solveAll=function(l,i){for(var h=0;h<l.length;h+=1){var u=l[h],d=!u.bodyA||u.bodyA&&u.bodyA.isStatic,c=!u.bodyB||u.bodyB&&u.bodyB.isStatic;(d||c)&&e.solve(l[h],i)}for(h=0;h<l.length;h+=1)u=l[h],d=!u.bodyA||u.bodyA&&u.bodyA.isStatic,c=!u.bodyB||u.bodyB&&u.bodyB.isStatic,!d&&!c&&e.solve(l[h],i)},e.solve=function(l,i){var h=l.bodyA,u=l.bodyB,d=l.pointA,c=l.pointB;if(!(!h&&!u)){h&&!h.isStatic&&(r.rotate(d,h.angle-l.angleA,d),l.angleA=h.angle),u&&!u.isStatic&&(r.rotate(c,u.angle-l.angleB,c),l.angleB=u.angle);var p=d,g=c;if(h&&(p=r.add(h.position,d)),u&&(g=r.add(u.position,c)),!(!p||!g)){var x=r.sub(p,g),y=r.magnitude(x);y<e._minLength&&(y=e._minLength);var T=(y-l.length)/y,E=l.stiffness<1?l.stiffness*i:l.stiffness,w=r.mult(x,T*E),A=(h?h.inverseMass:0)+(u?u.inverseMass:0),b=(h?h.inverseInertia:0)+(u?u.inverseInertia:0),R=A+b,L,B,D,G,X;if(l.damping){var H=r.create();D=r.div(x,y),X=r.sub(u&&r.sub(u.position,u.positionPrev)||H,h&&r.sub(h.position,h.positionPrev)||H),G=r.dot(D,X)}h&&!h.isStatic&&(B=h.inverseMass/A,h.constraintImpulse.x-=w.x*B,h.constraintImpulse.y-=w.y*B,h.position.x-=w.x*B,h.position.y-=w.y*B,l.damping&&(h.positionPrev.x-=l.damping*D.x*G*B,h.positionPrev.y-=l.damping*D.y*G*B),L=r.cross(d,w)/R*e._torqueDampen*h.inverseInertia*(1-l.angularStiffness),h.constraintImpulse.angle-=L,h.angle-=L),u&&!u.isStatic&&(B=u.inverseMass/A,u.constraintImpulse.x+=w.x*B,u.constraintImpulse.y+=w.y*B,u.position.x+=w.x*B,u.position.y+=w.y*B,l.damping&&(u.positionPrev.x+=l.damping*D.x*G*B,u.positionPrev.y+=l.damping*D.y*G*B),L=r.cross(c,w)/R*e._torqueDampen*u.inverseInertia*(1-l.angularStiffness),u.constraintImpulse.angle+=L,u.angle+=L)}}},e.postSolveAll=function(l){for(var i=0;i<l.length;i++){var h=l[i],u=h.constraintImpulse;if(!(h.isStatic||u.x===0&&u.y===0&&u.angle===0)){o.set(h,!1);for(var d=0;d<h.parts.length;d++){var c=h.parts[d];f.translate(c.vertices,u),d>0&&(c.position.x+=u.x,c.position.y+=u.y),u.angle!==0&&(f.rotate(c.vertices,u.angle,h.position),s.rotate(c.axes,u.angle),d>0&&r.rotateAbout(c.position,u.angle,h.position,c.position)),a.update(c.bounds,c.vertices,h.velocity)}u.angle*=e._warming,u.x*=e._warming,u.y*=e._warming}}},e.pointAWorld=function(l){return{x:(l.bodyA?l.bodyA.position.x:0)+l.pointA.x,y:(l.bodyA?l.bodyA.position.y:0)+l.pointA.y}},e.pointBWorld=function(l){return{x:(l.bodyB?l.bodyB.position.x:0)+l.pointB.x,y:(l.bodyB?l.bodyB.position.y:0)+l.pointB.y}}})()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(65),r=t(66),o=t(0),a=t(11),s=t(15),n=t(10),l=t(57),i=new o({Extends:s,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(u,d,c,p,g){p===void 0&&(p=1),g===void 0&&(g=p),s.call(this,u,"Zone"),this.setPosition(d,c),this.width=p,this.height=g,this.blendMode=e.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(h){this.scaleX=h/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(h){this.scaleY=h/this.height}},setSize:function(h,u,d){d===void 0&&(d=!0),this.width=h,this.height=u,this.updateDisplayOrigin();var c=this.input;return d&&c&&!c.customHitArea&&(c.hitArea.width=h,c.hitArea.height=u),this},setDisplaySize:function(h,u){return this.displayWidth=h,this.displayHeight=u,this},setCircleDropZone:function(h){return this.setDropZone(new f(0,0,h),r)},setRectangleDropZone:function(h,u){return this.setDropZone(new n(0,0,h,u),l)},setDropZone:function(h,u){return h===void 0?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(h,u,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(h,u,d){d.addToRenderList(u)},renderWebGL:function(h,u,d){d.addToRenderList(u)}});m.exports=i},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 2*(e.width+e.height)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=e.length-1;f>0;f--){var r=Math.floor(Math.random()*(f+1)),o=e[f];e[f]=e[r],e[r]=o}return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(36),o=t(9),a=t(37),s=t(10),n=t(25),l=t(187),i=t(3),h=new e({Extends:o,Mixins:[f.Alpha,f.Visible],initialize:function(d,c,p,g){d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),o.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new s,this.dirty=!0,this._x=d,this._y=c,this._width=p,this._height=g,this._bounds=new s,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new n,this.transparent=!0,this.backgroundColor=l("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new i(p/2,g/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(u){this.renderList.push(u)},setOrigin:function(u,d){return u===void 0&&(u=.5),d===void 0&&(d=u),this.originX=u,this.originY=d,this},getScroll:function(u,d,c){c===void 0&&(c=new i);var p=this.width*.5,g=this.height*.5;return c.x=u-p,c.y=d-g,this.useBounds&&(c.x=this.clampX(c.x),c.y=this.clampY(c.y)),c},centerOnX:function(u){var d=this.width*.5;return this.midPoint.x=u,this.scrollX=u-d,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(u){var d=this.height*.5;return this.midPoint.y=u,this.scrollY=u-d,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(u,d){return this.centerOnX(u),this.centerOnY(d),this},centerToBounds:function(){if(this.useBounds){var u=this._bounds,d=this.width*.5,c=this.height*.5;this.midPoint.set(u.centerX,u.centerY),this.scrollX=u.centerX-d,this.scrollY=u.centerY-c}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(u){if(this.disableCull)return u;var d=this.matrix.matrix,c=d[0],p=d[1],g=d[2],x=d[3],y=c*x-p*g;if(!y)return u;var T=d[4],E=d[5],w=this.scrollX,A=this.scrollY,b=this.width,R=this.height,L=this.y,B=L+R,D=this.x,G=D+b,X=this.culledObjects,H=u.length;y=1/y,X.length=0;for(var K=0;K<H;++K){var $=u[K];if(!$.hasOwnProperty("width")||$.parentContainer){X.push($);continue}var N=$.width,I=$.height,z=$.x-w*$.scrollFactorX-N*$.originX,U=$.y-A*$.scrollFactorY-I*$.originY,W=z*c+U*g+T,V=z*p+U*x+E,Z=(z+N)*c+(U+I)*g+T,J=(z+N)*p+(U+I)*x+E;Z>D&&W<G&&J>L&&V<B&&X.push($)}return X},getWorldPoint:function(u,d,c){c===void 0&&(c=new i);var p=this.matrix.matrix,g=p[0],x=p[1],y=p[2],T=p[3],E=p[4],w=p[5],A=g*T-x*y;if(!A)return c.x=u,c.y=d,c;A=1/A;var b=T*A,R=-x*A,L=-y*A,B=g*A,D=(y*w-T*E)*A,G=(x*E-g*w)*A,X=Math.cos(this.rotation),H=Math.sin(this.rotation),K=this.zoomX,$=this.zoomY,N=this.scrollX,I=this.scrollY,z=u+(N*X-I*H)*K,U=d+(N*H+I*X)*$;return c.x=z*b+U*L+D,c.y=z*R+U*B+G,c},ignore:function(u){var d=this.id;Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var p=u[c];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=d}return this},preRender:function(){this.renderList.length=0;var u=this.width,d=this.height,c=u*.5,p=d*.5,g=this.zoomX,x=this.zoomY,y=this.matrix,T=u*this.originX,E=d*this.originY,w=this.scrollX,A=this.scrollY;this.useBounds&&(w=this.clampX(w),A=this.clampY(A)),this.roundPixels&&(T=Math.round(T),E=Math.round(E)),this.scrollX=w,this.scrollY=A;var b=w+c,R=A+p;this.midPoint.set(b,R);var L=u/g,B=d/x;this.worldView.setTo(b-L/2,R-B/2,L,B),y.applyITRS(this.x+T,this.y+E,this.rotation,g,x),y.translate(-T,-E)},clampX:function(u){var d=this._bounds,c=this.displayWidth,p=d.x+(c-this.width)/2,g=Math.max(p,p+d.width-c);return u<p?u=p:u>g&&(u=g),u},clampY:function(u){var d=this._bounds,c=this.displayHeight,p=d.y+(c-this.height)/2,g=Math.max(p,p+d.height-c);return u<p?u=p:u>g&&(u=g),u},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(u){return u===void 0&&(u=0),this.rotation=r(u),this},setBackgroundColor:function(u){return u===void 0&&(u="rgba(0,0,0,0)"),this.backgroundColor=l(u),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(u,d,c,p,g){return g===void 0&&(g=!1),this._bounds.setTo(u,d,c,p),this.dirty=!0,this.useBounds=!0,g?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(u){u===void 0&&(u=new s);var d=this._bounds;return u.setTo(d.x,d.y,d.width,d.height),u},setName:function(u){return u===void 0&&(u=""),this.name=u,this},setPosition:function(u,d){return d===void 0&&(d=u),this.x=u,this.y=d,this},setRotation:function(u){return u===void 0&&(u=0),this.rotation=u,this},setRoundPixels:function(u){return this.roundPixels=u,this},setScene:function(u){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=u;var d=u.sys;return this.sceneManager=d.game.scene,this.scaleManager=d.scale,this.cameraManager=d.cameras,this.updateSystem(),this},setScroll:function(u,d){return d===void 0&&(d=u),this.scrollX=u,this.scrollY=d,this},setSize:function(u,d){return d===void 0&&(d=u),this.width=u,this.height=d,this},setViewport:function(u,d,c,p){return this.x=u,this.y=d,this.width=c,this.height=p,this},setZoom:function(u,d){return u===void 0&&(u=1),d===void 0&&(d=u),u===0&&(u=.001),d===0&&(d=.001),this.zoomX=u,this.zoomY=d,this},setMask:function(u,d){return d===void 0&&(d=!0),this.mask=u,this._maskCamera=d?this.cameraManager.default:this,this},clearMask:function(u){return u===void 0&&(u=!1),u&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var u={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(u.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),u},update:function(){},updateSystem:function(){if(!!this.scaleManager){var u=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,d=this.sceneManager;u&&!this._customViewport?d.customViewports++:!u&&this._customViewport&&d.customViewports--,this.dirty=!0,this._customViewport=u}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(u){this._x=u,this.updateSystem()}},y:{get:function(){return this._y},set:function(u){this._y=u,this.updateSystem()}},width:{get:function(){return this._width},set:function(u){this._width=u,this.updateSystem()}},height:{get:function(){return this._height},set:function(u){this._height=u,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(u){this._scrollX=u,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(u){this._scrollY=u,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(u){this._zoomX=u,this._zoomY=u,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(u){this._zoomX=u,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(u){this._zoomY=u,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(u){this._rotation=u,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(334),f=t(335),r=t(336),o=t(337),a=t(338),s=t(339),n=t(340),l=t(341),i=t(342),h=t(343),u=t(344),d=t(345);m.exports={Power0:n,Power1:l.Out,Power2:o.Out,Power3:i.Out,Power4:h.Out,Linear:n,Quad:l.Out,Cubic:o.Out,Quart:i.Out,Quint:h.Out,Sine:u.Out,Expo:s.Out,Circ:r.Out,Elastic:a.Out,Back:e.Out,Bounce:f.Out,Stepped:d,"Quad.easeIn":l.In,"Cubic.easeIn":o.In,"Quart.easeIn":i.In,"Quint.easeIn":h.In,"Sine.easeIn":u.In,"Expo.easeIn":s.In,"Circ.easeIn":r.In,"Elastic.easeIn":a.In,"Back.easeIn":e.In,"Bounce.easeIn":f.In,"Quad.easeOut":l.Out,"Cubic.easeOut":o.Out,"Quart.easeOut":i.Out,"Quint.easeOut":h.Out,"Sine.easeOut":u.Out,"Expo.easeOut":s.Out,"Circ.easeOut":r.Out,"Elastic.easeOut":a.Out,"Back.easeOut":e.Out,"Bounce.easeOut":f.Out,"Quad.easeInOut":l.InOut,"Cubic.easeInOut":o.InOut,"Quart.easeInOut":i.InOut,"Quint.easeInOut":h.InOut,"Sine.easeInOut":u.InOut,"Expo.easeInOut":s.InOut,"Circ.easeInOut":r.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":e.InOut,"Bounce.easeInOut":f.InOut}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return(f-e)*r+e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),f={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function r(){var o=navigator.userAgent;return/Edge\/\d+/.test(o)?f.edge=!0:/Chrome\/(\d+)/.test(o)&&!e.windowsPhone?(f.chrome=!0,f.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(o)?(f.firefox=!0,f.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(o)&&e.iOS?f.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(o)?(f.ie=!0,f.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(o)?f.opera=!0:/Safari/.test(o)&&!e.windowsPhone?f.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(o)&&(f.ie=!0,f.trident=!0,f.tridentVersion=parseInt(RegExp.$1,10),f.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(o)&&(f.silk=!0),f}m.exports=r()},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.random()*(f-e)+e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e>0&&(e&e-1)===0&&f>0&&(f&f-1)===0};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){return r===void 0&&(r=0),f===0?e:(e-=r,e=f*Math.ceil(e/f),o?(r+e)/f:r+e)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s,n){this.x=0,this.y=0,this.z=0,this.w=0,typeof o=="object"?(this.x=o.x||0,this.y=o.y||0,this.z=o.z||0,this.w=o.w||0):(this.x=o||0,this.y=a||0,this.z=s||0,this.w=n||0)},clone:function(){return new f(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z||0,this.w=r.w||0,this},equals:function(r){return this.x===r.x&&this.y===r.y&&this.z===r.z&&this.w===r.w},set:function(r,o,a,s){return typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=o||0,this.z=a||0,this.w=s||0),this},add:function(r){return this.x+=r.x,this.y+=r.y,this.z+=r.z||0,this.w+=r.w||0,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this.z-=r.z||0,this.w-=r.w||0,this},scale:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},length:function(){var r=this.x,o=this.y,a=this.z,s=this.w;return Math.sqrt(r*r+o*o+a*a+s*s)},lengthSq:function(){var r=this.x,o=this.y,a=this.z,s=this.w;return r*r+o*o+a*a+s*s},normalize:function(){var r=this.x,o=this.y,a=this.z,s=this.w,n=r*r+o*o+a*a+s*s;return n>0&&(n=1/Math.sqrt(n),this.x=r*n,this.y=o*n,this.z=a*n,this.w=s*n),this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lerp:function(r,o){o===void 0&&(o=0);var a=this.x,s=this.y,n=this.z,l=this.w;return this.x=a+o*(r.x-a),this.y=s+o*(r.y-s),this.z=n+o*(r.z-n),this.w=l+o*(r.w-l),this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this.z*=r.z||1,this.w*=r.w||1,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z||1,this.w/=r.w||1,this},distance:function(r){var o=r.x-this.x,a=r.y-this.y,s=r.z-this.z||0,n=r.w-this.w||0;return Math.sqrt(o*o+a*a+s*s+n*n)},distanceSq:function(r){var o=r.x-this.x,a=r.y-this.y,s=r.z-this.z||0,n=r.w-this.w||0;return o*o+a*a+s*s+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(r){var o=this.x,a=this.y,s=this.z,n=this.w,l=r.val;return this.x=l[0]*o+l[4]*a+l[8]*s+l[12]*n,this.y=l[1]*o+l[5]*a+l[9]*s+l[13]*n,this.z=l[2]*o+l[6]*a+l[10]*s+l[14]*n,this.w=l[3]*o+l[7]*a+l[11]*s+l[15]*n,this},transformQuat:function(r){var o=this.x,a=this.y,s=this.z,n=r.x,l=r.y,i=r.z,h=r.w,u=h*o+l*s-i*a,d=h*a+i*o-n*s,c=h*s+n*a-l*o,p=-n*o-l*a-i*s;return this.x=u*h+p*-n+d*-i-c*-l,this.y=d*h+p*-l+c*-n-u*-i,this.z=c*h+p*-i+u*-l-d*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});f.prototype.sub=f.prototype.subtract,f.prototype.mul=f.prototype.multiply,f.prototype.div=f.prototype.divide,f.prototype.dist=f.prototype.distance,f.prototype.distSq=f.prototype.distanceSq,f.prototype.len=f.prototype.length,f.prototype.lenSq=f.prototype.lengthSq,m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(91),r=new e({initialize:function(a,s,n,l,i,h,u){l===void 0&&(l=1),i===void 0&&(i=0),h===void 0&&(h=!0),u===void 0&&(u=!1),this.renderer=a,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=l,this.minFilter=i,this.autoClear=h,this.autoResize=!1,this.resize(s,n),u&&this.setAutoResize(!0)},setAutoResize:function(o){return o&&!this.autoResize?(this.renderer.on(f.RESIZE,this.resize,this),this.autoResize=!0):!o&&this.autoResize&&(this.renderer.off(f.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(o,a){var s=o*this.scale,n=a*this.scale;if(s!==this.width||n!==this.height){var l=this.renderer;l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),o*=this.scale,a*=this.scale,o=Math.round(o),a=Math.round(a),o<=0&&(o=1),a<=0&&(a=1),this.texture=l.createTextureFromSource(null,o,a,this.minFilter),this.framebuffer=l.createFramebuffer(o,a,this.texture,!1),this.width=o,this.height=a}return this},bind:function(o,a,s){if(o===void 0&&(o=!1),o&&this.renderer.flush(),a&&s&&this.resize(a,s),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),o&&this.adjustViewport(),this.autoClear){var n=this.renderer.gl;n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT)}},adjustViewport:function(){var o=this.renderer.gl;o.viewport(0,0,this.width,this.height),o.disable(o.SCISSOR_TEST)},clear:function(){var o=this.renderer,a=o.gl;o.pushFramebuffer(this.framebuffer),a.disable(a.SCISSOR_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),o.popFramebuffer(),o.resetScissor()},unbind:function(o){o===void 0&&(o=!1);var a=this.renderer;return o&&a.flush(),a.popFramebuffer()},destroy:function(){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),o.off(f.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r;if(f)typeof f=="string"?r=document.getElementById(f):typeof f=="object"&&f.nodeType===1&&(r=f);else if(e.parentElement||f===null)return e;return r||(r=document.body),r.appendChild(e),e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(77),r=t(9),o=t(70),a=t(22),s=t(1),n=t(207),l=t(428),i=new e({Extends:r,initialize:function(u){r.call(this),this.game=u,this.jsonCache=u.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,u.events.on(a.BLUR,this.onGameBlur,this),u.events.on(a.FOCUS,this.onGameFocus,this),u.events.on(a.PRE_STEP,this.update,this),u.events.once(a.DESTROY,this.destroy,this)},add:s,addAudioSprite:function(h,u){u===void 0&&(u={});var d=this.add(h,u);d.spritemap=this.jsonCache.get(h).spritemap;for(var c in d.spritemap)if(!!d.spritemap.hasOwnProperty(c)){var p=f(u),g=d.spritemap[c];p.loop=g.hasOwnProperty("loop")?g.loop:!1,d.addMarker({name:c,start:g.start,duration:g.end-g.start,config:p})}return d},get:function(h){return l(this.sounds,"key",h)},getAll:function(h){return n(this.sounds,"key",h)},play:function(h,u){var d=this.add(h);return d.once(o.COMPLETE,d.destroy,d),u?u.name?(d.addMarker(u),d.play(u.name)):d.play(u):d.play()},playAudioSprite:function(h,u,d){var c=this.addAudioSprite(h);return c.once(o.COMPLETE,c.destroy,c),c.play(u,d)},remove:function(h){var u=this.sounds.indexOf(h);return u!==-1?(h.destroy(),this.sounds.splice(u,1),!0):!1},removeAll:function(){this.sounds.forEach(function(h){h.destroy()}),this.sounds.length=0},removeByKey:function(h){for(var u=0,d=this.sounds.length-1;d>=0;d--){var c=this.sounds[d];c.key===h&&(c.destroy(),this.sounds.splice(d,1),u++)}return u},pauseAll:function(){this.forEachActiveSound(function(h){h.pause()}),this.emit(o.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(h){h.resume()}),this.emit(o.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(h){h.stop()}),this.emit(o.STOP_ALL,this)},stopByKey:function(h){var u=0;return this.getAll(h).forEach(function(d){d.stop()&&u++}),u},unlock:s,onBlur:s,onFocus:s,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(h,u){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(o.UNLOCKED,this));for(var d=this.sounds.length-1;d>=0;d--)this.sounds[d].pendingRemove&&this.sounds.splice(d,1);this.sounds.forEach(function(c){c.update(h,u)})},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(h,u){var d=this;this.sounds.forEach(function(c,p){c&&!c.pendingRemove&&h.call(u||d,c,p,d.sounds)})},setRate:function(h){return this.rate=h,this},rate:{get:function(){return this._rate},set:function(h){this._rate=h,this.forEachActiveSound(function(u){u.calculateRate()}),this.emit(o.GLOBAL_RATE,this,h)}},setDetune:function(h){return this.detune=h,this},detune:{get:function(){return this._detune},set:function(h){this._detune=h,this.forEachActiveSound(function(u){u.calculateRate()}),this.emit(o.GLOBAL_DETUNE,this,h)}}});m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),r=t(70),o=t(17),a=t(1),s=new e({Extends:f,initialize:function(l,i,h){f.call(this),this.manager=l,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=o(this.config,h),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(console.error("addMarker "+n.name+" already exists in Sound"),!1):(n=o(!0,{name:"",start:0,duration:this.totalDuration-(n.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},n),this.markers[n.name]=n,!0)},updateMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(this.markers[n.name]=o(!0,this.markers[n.name],n),!0):(console.warn("Audio Marker: "+n.name+" missing in Sound: "+this.key),!1)},removeMarker:function(n){var l=this.markers[n];return l?(this.markers[n]=null,l):null},play:function(n,l){if(n===void 0&&(n=""),typeof n=="object"&&(l=n,n=""),typeof n!="string")return!1;if(!n)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[n])return console.warn("Marker: "+n+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[n],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=o(this.currentConfig,l),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var n=1.0005777895065548,l=this.currentConfig.detune+this.manager.detune,i=Math.pow(n,l);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.emit(r.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(209),f=t(435),r=function(o,a){if(a===void 0&&(a=90),!e(o))return null;if(typeof a!="string"&&(a=(a%360+360)%360),a===90||a===-270||a==="rotateLeft")o=f(o),o.reverse();else if(a===-90||a===270||a==="rotateRight")o.reverse(),o=f(o);else if(Math.abs(a)===180||a==="rotate180"){for(var s=0;s<o.length;s++)o[s].reverse();o.reverse()}return o};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(18),r=t(11),o=t(15),a=t(1043),s=t(1044),n=t(212),l=t(10),i=t(1045),h=new e({Extends:o,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Texture,r.Tint,r.Transform,r.Visible,i],initialize:function(d,c,p,g,x,y,T){x===void 0&&(x=""),T===void 0&&(T=0),o.call(this,d,"BitmapText"),this.font=g;var E=this.scene.sys.cache.bitmapFont.get(g);E||console.warn("Invalid BitmapText key: "+g),this.fontData=E.data,this._text="",this._fontSize=y||this.fontData.size,this._letterSpacing=0,this._align=T,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=E.fromAtlas,this.setTexture(E.texture,E.frame),this.setPosition(c,p),this.setOrigin(0,0),this.initPipeline(),this.setText(x)},setLeftAlign:function(){return this._align=h.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=h.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=h.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(u){return this._fontSize=u,this._dirty=!0,this},setLetterSpacing:function(u){return u===void 0&&(u=0),this._letterSpacing=u,this._dirty=!0,this},setText:function(u){return!u&&u!==0&&(u=""),Array.isArray(u)&&(u=u.join(`
`)),u!==this.text&&(this._text=u.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(u,d,c,p){return u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=.5),this.dropShadowX=u,this.dropShadowY=d,this.dropShadowColor=c,this.dropShadowAlpha=p,this},setCharacterTint:function(u,d,c,p,g,x,y){u===void 0&&(u=0),d===void 0&&(d=1),c===void 0&&(c=!1),p===void 0&&(p=-1),g===void 0&&(g=p,x=p,y=p);var T=this.text.length;d===-1&&(d=T),u<0&&(u=T+u),u=f(u,0,T-1);for(var E=f(u+d,u,T),w=this.charColors,A=u;A<E;A++){var b=w[A];if(p===-1)w[A]=null;else{var R=c?1:0;b?(b.tintEffect=R,b.tintTL=p,b.tintTR=g,b.tintBL=x,b.tintBR=y):w[A]={tintEffect:R,tintTL:p,tintTR:g,tintBL:x,tintBR:y}}}return this},setWordTint:function(u,d,c,p,g,x,y){d===void 0&&(d=1);for(var T=this.getTextBounds(),E=T.words,w=typeof u=="number",A=0,b=0;b<E.length;b++){var R=E[b];if((w&&b===u||!w&&R.word===u)&&(this.setCharacterTint(R.i,R.word.length,c,p,g,x,y),A++,A===d))return this}return this},getTextBounds:function(u){var d=this._bounds;return(this._dirty||u||this.scaleX!==d.scaleX||this.scaleY!==d.scaleY)&&(a(this,u,!0,d),this._dirty=!1),d},getCharacterAt:function(u,d,c){for(var p=this.getLocalPoint(u,d,null,c),g=this.getTextBounds(),x=g.characters,y=new l,T=0;T<x.length;T++){var E=x[T];if(y.setTo(E.x,E.t,E.r-E.x,E.b),y.contains(p.x,p.y))return E}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(u,d,c){if(d===void 0&&(d=this._fontSize),c===void 0&&(c=this._align),u!==this.font){var p=this.scene.sys.cache.bitmapFont.get(u);p&&(this.font=u,this.fontData=p.data,this._fontSize=d,this._align=c,this.fromAtlas=p.fromAtlas===!0,this.setTexture(p.texture,p.frame),a(this,!1,!0,this._bounds))}return this},setMaxWidth:function(u,d){return this._maxWidth=u,this._dirty=!0,d!==void 0&&(this.wordWrapCharCode=d),this},align:{set:function(u){this._align=u,this._dirty=!0},get:function(){return this._align}},text:{set:function(u){this.setText(u)},get:function(){return this._text}},fontSize:{set:function(u){this._fontSize=u,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(u){this._letterSpacing=u,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(u){this._maxWidth=u,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var u=r.ToJSON(this),d={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return u.data=d,u},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});h.ALIGN_LEFT=0,h.ALIGN_CENTER=1,h.ALIGN_RIGHT=2,h.ParseFromAtlas=s,h.ParseXMLBitmapFont=n,m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o){if(this.entries=[],Array.isArray(o))for(var a=0;a<o.length;a++)this.set(o[a])},set:function(r){return this.entries.indexOf(r)===-1&&this.entries.push(r),this},get:function(r,o){for(var a=0;a<this.entries.length;a++){var s=this.entries[a];if(s[r]===o)return s}},getArray:function(){return this.entries.slice(0)},delete:function(r){var o=this.entries.indexOf(r);return o>-1&&this.entries.splice(o,1),this},dump:function(){console.group("Set");for(var r=0;r<this.entries.length;r++){var o=this.entries[r];console.log(o)}console.groupEnd()},each:function(r,o){var a,s=this.entries.slice(),n=s.length;if(o)for(a=0;a<n&&r.call(o,s[a],a)!==!1;a++);else for(a=0;a<n&&r(s[a],a)!==!1;a++);return this},iterate:function(r,o){var a,s=this.entries.length;if(o)for(a=0;a<s&&r.call(o,this.entries[a],a)!==!1;a++);else for(a=0;a<s&&r(this.entries[a],a)!==!1;a++);return this},iterateLocal:function(r){var o,a=[];for(o=1;o<arguments.length;o++)a.push(arguments[o]);var s=this.entries.length;for(o=0;o<s;o++){var n=this.entries[o];n[r].apply(n,a)}return this},clear:function(){return this.entries.length=0,this},contains:function(r){return this.entries.indexOf(r)>-1},union:function(r){var o=new f;return r.entries.forEach(function(a){o.set(a)}),this.entries.forEach(function(a){o.set(a)}),o},intersect:function(r){var o=new f;return this.entries.forEach(function(a){r.contains(a)&&o.set(a)}),o},difference:function(r){var o=new f;return this.entries.forEach(function(a){r.contains(a)||o.set(a)}),o},size:{get:function(){return this.entries.length},set:function(r){return r<this.entries.length?this.entries.length=r:this.entries.length}}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(15),o=t(189),a=t(92),s=t(1182),n=new e({Extends:r,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.GetBounds,f.Mask,f.Pipeline,f.ScrollFactor,f.Transform,f.Visible,s],initialize:function(i,h,u,d,c,p,g){d===void 0&&(d=16777215),c===void 0&&(c=128),p===void 0&&(p=1),g===void 0&&(g=.1),r.call(this,i,"PointLight"),this.initPipeline(a.POINTLIGHT_PIPELINE),this.setPosition(h,u),this.color=o(d),this.intensity=p,this.attenuation=g,this.width=c*2,this.height=c*2,this._radius=c},radius:{get:function(){return this._radius},set:function(l){this._radius=l,this.width=l*2,this.height=l*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});m.exports=n},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=f.width/2,o=f.height/2,a=Math.abs(e.x-f.x-r),s=Math.abs(e.y-f.y-o),n=r+e.radius,l=o+e.radius;if(a>n||s>l)return!1;if(a<=r||s<=o)return!0;var i=a-r,h=s-o,u=i*i,d=h*h,c=e.radius*e.radius;return u+d<=c};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.width<=0||e.height<=0||f.width<=0||f.height<=0?!1:!(e.right<f.x||e.bottom<f.y||e.x>f.right||e.y>f.bottom)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f={},r={};r.register=function(o,a,s,n,l){f[o]={plugin:a,mapping:s,settingsKey:n,configKey:l}},r.getPlugin=function(o){return f[o]},r.install=function(o){var a=o.scene.sys,s=a.settings.input,n=a.game.config;for(var l in f){var i=f[l].plugin,h=f[l].mapping,u=f[l].settingsKey,d=f[l].configKey;e(s,u,n[d])&&(o[h]=new i(o))}},r.remove=function(o){f.hasOwnProperty(o)&&delete f[o]},m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.url?e.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e.url:f+e.url:!1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a,s){return e===void 0&&(e=""),f===void 0&&(f=!0),r===void 0&&(r=""),o===void 0&&(o=""),a===void 0&&(a=0),s===void 0&&(s=!1),{responseType:e,async:f,user:r,password:o,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:s}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(243),r=t(73),o=new e({Extends:r,Mixins:[f.Acceleration,f.Angular,f.Bounce,f.Debug,f.Drag,f.Enable,f.Friction,f.Gravity,f.Immovable,f.Mass,f.Pushable,f.Size,f.Velocity],initialize:function(s,n,l,i,h){r.call(this,s,n,l,i,h),this.body=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(119),f=function(r,o,a,s){if(a===void 0&&(a=!1),e(r,o,s)){var n=s.data[o][r]||null;return n?n.index===-1?a?n:null:n:null}else return null};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=e.data,s=e.width,n=e.height,l=e.tilemapLayer,i=Math.max(0,f.left),h=Math.min(s,f.right),u=Math.max(0,f.top),d=Math.min(n,f.bottom),c,p,g;if(r===0)for(p=u;p<d;p++)for(c=i;a[p]&&c<h;c++)g=a[p][c],!(!g||g.index===-1||!g.visible||g.alpha===0)&&o.push(g);else if(r===1)for(p=u;p<d;p++)for(c=h;a[p]&&c>=i;c--)g=a[p][c],!(!g||g.index===-1||!g.visible||g.alpha===0)&&o.push(g);else if(r===2)for(p=d;p>=u;p--)for(c=i;a[p]&&c<h;c++)g=a[p][c],!(!g||g.index===-1||!g.visible||g.alpha===0)&&o.push(g);else if(r===3)for(p=d;p>=u;p--)for(c=h;a[p]&&c>=i;c--)g=a[p][c],!(!g||g.index===-1||!g.visible||g.alpha===0)&&o.push(g);return l.tilesDrawn=o.length,l.tilesTotal=s*n,o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=r.collideIndexes.indexOf(e);f&&o===-1?r.collideIndexes.push(e):!f&&o!==-1&&r.collideIndexes.splice(o,1)};m.exports=t},function(m,C,t){/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(r,o,a){if(!o)return{i:0,layers:r.layers,name:"",opacity:1,visible:!0,x:0,y:0};var s=o.x+e(o,"startx",0)*r.tilewidth+e(o,"offsetx",0),n=o.y+e(o,"starty",0)*r.tileheight+e(o,"offsety",0);return{i:0,layers:o.layers,name:a.name+o.name+"/",opacity:a.opacity*o.opacity,visible:a.visible&&o.visible,x:a.x+s,y:a.y+n}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o;if(e.hasOwnProperty(f)){var a=typeof e[f];a==="function"?o=function(s,n,l,i,h,u){return e[f](s,n,l,i,h,u)}:o=function(){return e[f]}}else typeof r=="function"?o=r:o=function(){return r};return o};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(265),f=t(13),r=t(99),o=t(80),a=t(162),s=t(583),n=t(263),l=t(6),i=t(264),h=t(266),u=t(268),d=function(c,p,g){g===void 0&&(g=e);for(var x=g.targets?g.targets:n(p),y=s(p),T=a(p,"delay",g.delay),E=a(p,"duration",g.duration),w=l(p,"easeParams",g.easeParams),A=o(l(p,"ease",g.ease),w),b=a(p,"hold",g.hold),R=a(p,"repeat",g.repeat),L=a(p,"repeatDelay",g.repeatDelay),B=r(p,"yoyo",g.yoyo),D=r(p,"flipX",g.flipX),G=r(p,"flipY",g.flipY),X=[],H=0;H<y.length;H++)for(var K=y[H].key,$=y[H].value,N=0;N<x.length;N++){var I=i(K,$),z=u(x[N],N,K,I.getEnd,I.getStart,I.getActive,o(l($,"ease",A),l($,"easeParams",w)),a($,"delay",T),a($,"duration",E),r($,"yoyo",B),a($,"hold",b),a($,"repeat",R),a($,"repeatDelay",L),r($,"flipX",D),r($,"flipY",G));X.push(z)}var U=new h(c,X,x);U.offset=f(p,"offset",null),U.completeDelay=f(p,"completeDelay",0),U.loop=Math.round(f(p,"loop",0)),U.loopDelay=Math.round(f(p,"loopDelay",0)),U.paused=r(p,"paused",!1),U.useFrames=r(p,"useFrames",!1);for(var W=l(p,"callbackScope",U),V=[U,null],Z=h.TYPES,J=0;J<Z.length;J++){var tt=Z[J],st=l(p,tt,!1);if(st){var at=l(p,tt+"Scope",W),lt=l(p,tt+"Params",[]);U.setCallback(tt,st,V.concat(lt),at)}}return U};m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(102),r=t(2),o=t(132),a=t(185),s=new e({initialize:function(l){this.parent=l,this.animationManager=l.scene.sys.anims,this.animationManager.on(o.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(n){var l=this.parent;if(n===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,l;Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++){var h=n[i];this.nextAnim===null?this.nextAnim=h:this.nextAnimsQueue.push(h)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(n){this.isPlaying&&this.stop();var l=this.animationManager,i=typeof n=="string"?n:r(n,"key",null),h=this.exists(i)?this.get(i):l.get(i);if(!h)console.warn("Missing animation: "+i);else{this.currentAnim=h;var u=h.getTotalFrames(),d=r(n,"frameRate",h.frameRate),c=r(n,"duration",h.duration);h.calculateDuration(this,u,c,d),this.delay=r(n,"delay",h.delay),this.repeat=r(n,"repeat",h.repeat),this.repeatDelay=r(n,"repeatDelay",h.repeatDelay),this.yoyo=r(n,"yoyo",h.yoyo),this.showOnStart=r(n,"showOnStart",h.showOnStart),this.hideOnComplete=r(n,"hideOnComplete",h.hideOnComplete),this.skipMissedFrames=r(n,"skipMissedFrames",h.skipMissedFrames),this.timeScale=r(n,"timeScale",this.timeScale);var p=r(n,"startFrame",0);p>h.getTotalFrames()&&(p=0);var g=h.frames[p];p===0&&!this.forward&&(g=h.getLastFrame()),this.currentFrame=g}return this.parent},pause:function(n){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),n!==void 0&&this.setCurrentFrame(n),this.parent},resume:function(n){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),n!==void 0&&this.setCurrentFrame(n),this.parent},playAfterDelay:function(n,l){if(!this.isPlaying)this.delayCounter=l,this.play(n,!0);else{var i=this.nextAnim,h=this.nextAnimsQueue;i&&h.unshift(i),this.nextAnim=n,this._pendingStop=1,this._pendingStopValue=l}return this.parent},playAfterRepeat:function(n,l){if(l===void 0&&(l=1),!this.isPlaying)this.play(n);else{var i=this.nextAnim,h=this.nextAnimsQueue;i&&h.unshift(i),this.repeatCounter!==-1&&l>this.repeatCounter&&(l=this.repeatCounter),this.nextAnim=n,this._pendingStop=2,this._pendingStopValue=l}return this.parent},play:function(n,l){l===void 0&&(l=!1);var i=this.currentAnim,h=this.parent,u=typeof n=="string"?n:n.key;if(l&&this.isPlaying&&i.key===u)return h;if(i&&this.isPlaying){var d=this.animationManager.getMix(i.key,n);if(d>0)return this.playAfterDelay(n,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n)},playReverse:function(n,l){l===void 0&&(l=!1);var i=typeof n=="string"?n:n.key;return l&&this.isPlaying&&this.currentAnim.key===i?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(n))},startAnimation:function(n){this.load(n);var l=this.currentAnim,i=this.parent;return l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,l.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0&&this.handleStart()),i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(o.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(o.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(o.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(o.ANIMATION_COMPLETE,o.ANIMATION_COMPLETE_KEY)},emitEvents:function(n,l){var i=this.currentAnim,h=this.currentFrame,u=this.parent,d=h.textureFrame;u.emit(n,i,h,u,d),l&&u.emit(l+i.key,i,h,u,d)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var n=this.currentFrame;if(!n)return 0;var l=n.progress;return this.inReverse&&(l*=-1),l},setProgress:function(n){return this.forward||(n=1-n),this.setCurrentFrame(this.currentAnim.getFrameByProgress(n)),this.parent},setRepeat:function(n){return this.repeatCounter=n===-1?Number.MAX_VALUE:n,this.parent},globalRemove:function(n,l){l===void 0&&(l=this.currentAnim),this.isPlaying&&l.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(n,l){n===void 0&&(n=!1),l===void 0&&(l=!1);var i=this.currentAnim,h=this.parent;return i?(l&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(o.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!n,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):h},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(n)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var n=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(n)}return this.parent},stopAfterDelay:function(n){return this._pendingStop=1,this._pendingStopValue=n,this.parent},stopAfterRepeat:function(n){return n===void 0&&(n=1),this.repeatCounter!==-1&&n>this.repeatCounter&&(n=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=n,this.parent},stopOnFrame:function(n){return this._pendingStop=3,this._pendingStopValue=n,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(n,l){var i=this.currentAnim;if(!(!this.isPlaying||!i||i.paused)){if(this.accumulator+=l*this.timeScale,this._pendingStop===1&&(this._pendingStopValue-=l,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var h=0;do this.forward?i.nextFrame(this):i.previousFrame(this),h++;while(this.isPlaying&&this.accumulator>this.nextTick&&h<60)}}},setCurrentFrame:function(n){var l=this.parent;return this.currentFrame=n,l.texture=n.frame.texture,l.frame=n.frame,l.isCropped&&l.frame.updateCropUVs(l._crop,l.flipX,l.flipY),n.setAlpha&&(l.alpha=n.alpha),l.setSizeToFrame(),l._originComponent&&(n.frame.customPivot?l.setOrigin(n.frame.pivotX,n.frame.pivotY):l.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(o.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===n&&this.stop()),l},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(n){return this.anims?this.anims.get(n):null},exists:function(n){return this.anims?this.anims.has(n):!1},create:function(n){var l=n.key,i=!1;return l&&(i=this.get(l),i||(i=new a(this,l,n),this.anims||(this.anims=new f),this.anims.set(l,i))),i},generateFrameNames:function(n,l){return this.animationManager.generateFrameNames(n,l)},generateFrameNumbers:function(n,l){return this.animationManager.generateFrameNumbers(n,l)},remove:function(n){var l=this.get(n);return l&&(this.currentAnim===l&&this.stop(),this.anims.delete(n)),l},destroy:function(){this.animationManager.off(o.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});m.exports=s},function(m,C,t){var e={};m.exports=e;var f=t(166);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(r,o){for(var a=o*o*o,s=0;s<r.length;s++){var n=r[s],l=n.speed*n.speed+n.angularSpeed*n.angularSpeed;if(n.force.x!==0||n.force.y!==0){e.set(n,!1);continue}var i=Math.min(n.motion,l),h=Math.max(n.motion,l);n.motion=e._minBias*i+(1-e._minBias)*h,n.sleepThreshold>0&&n.motion<e._motionSleepThreshold*a?(n.sleepCounter+=1,n.sleepCounter>=n.sleepThreshold&&e.set(n,!0)):n.sleepCounter>0&&(n.sleepCounter-=1)}},e.afterCollisions=function(r,o){for(var a=o*o*o,s=0;s<r.length;s++){var n=r[s];if(!!n.isActive){var l=n.collision,i=l.bodyA.parent,h=l.bodyB.parent;if(!(i.isSleeping&&h.isSleeping||i.isStatic||h.isStatic)&&(i.isSleeping||h.isSleeping)){var u=i.isSleeping&&!i.isStatic?i:h,d=u===i?h:i;!u.isStatic&&d.motion>e._motionWakeThreshold*a&&e.set(u,!1)}}}},e.set=function(r,o){var a=r.isSleeping;o?(r.isSleeping=!0,r.sleepCounter=r.sleepThreshold,r.positionImpulse.x=0,r.positionImpulse.y=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.speed=0,r.angularSpeed=0,r.motion=0,a||f.trigger(r,"sleepStart")):(r.isSleeping=!1,r.sleepCounter=0,a&&f.trigger(r,"sleepEnd"))}})()},function(m,C,t){var e={};m.exports=e;var f=t(32);(function(){e.on=function(r,o,a){for(var s=o.split(" "),n,l=0;l<s.length;l++)n=s[l],r.events=r.events||{},r.events[n]=r.events[n]||[],r.events[n].push(a);return a},e.off=function(r,o,a){if(!o){r.events={};return}typeof o=="function"&&(a=o,o=f.keys(r.events).join(" "));for(var s=o.split(" "),n=0;n<s.length;n++){var l=r.events[s[n]],i=[];if(a&&l)for(var h=0;h<l.length;h++)l[h]!==a&&i.push(l[h]);r.events[s[n]]=i}},e.trigger=function(r,o,a){var s,n,l,i,h=r.events;if(h&&f.keys(h).length>0){a||(a={}),s=o.split(" ");for(var u=0;u<s.length;u++)if(n=s[u],l=h[n],l){i=f.clone(a,!1),i.name=n,i.source=r;for(var d=0;d<l.length;d++)l[d].apply(r,[i])}}}})()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(175),f=t(92),r=t(74),o={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(a){a===void 0&&(a=f.MULTI_PIPELINE);var s=this.scene.sys.renderer;if(!s)return!1;var n=s.pipelines;if(this.postPipelines=[],this.pipelineData={},n){var l=n.get(a);if(l)return this.defaultPipeline=l,this.pipeline=l,!0}return!1},setPipeline:function(a,s,n){var l=this.scene.sys.renderer;if(!l)return this;var i=l.pipelines;if(i){var h=i.get(a);h&&(this.pipeline=h),s&&(this.pipelineData=n?e(s):s)}return this},setPostPipeline:function(a,s,n){var l=this.scene.sys.renderer;if(!l)return this;var i=l.pipelines;if(i){Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;h++){var u=i.getPostPipeline(a[h],this);u&&this.postPipelines.push(u)}s&&(this.pipelineData=n?e(s):s)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(a,s){var n=this.pipelineData;return s===void 0?delete n[a]:n[a]=s,this},getPostPipeline:function(a){for(var s=this.postPipelines,n=[],l=0;l<s.length;l++){var i=s[l];(typeof a=="string"&&i.name===a||i instanceof a)&&n.push(i)}return n.length===1?n[0]:n},resetPipeline:function(a,s){return a===void 0&&(a=!1),s===void 0&&(s=!1),this.pipeline=this.defaultPipeline,a&&(this.postPipelines=[],this.hasPostPipeline=!1),s&&(this.pipelineData={}),this.pipeline!==null},resetPostPipeline:function(a){a===void 0&&(a=!1);for(var s=this.postPipelines,n=0;n<s.length;n++)s[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,a&&(this.pipelineData={})},removePostPipeline:function(a){for(var s=this.postPipelines,n=s.length-1;n>=0;n--){var l=s[n];(typeof a=="string"&&l.name===a||typeof a!="string"&&l instanceof a)&&(l.destroy(),r(s,n))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={DEFAULT:0,LINEAR:0,NEAREST:1};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o,a){return a===void 0&&(a=new e),a.x=r.x+r.radius*Math.cos(o),a.y=r.y+r.radius*Math.sin(o),a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){o===void 0&&(o=new e);var a=2*Math.PI*Math.random(),s=Math.random()+Math.random(),n=s>1?2-s:s,l=n*Math.cos(a),i=n*Math.sin(a);return o.x=r.x+l*r.radius,o.y=r.y+i*r.radius,o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(130),f=t(4),r=function(o,a,s){if(s===void 0&&(s=new f),a<=0||a>=1)return s.x=o.x,s.y=o.y,s;var n=e(o)*a;return a>.5?(n-=o.width+o.height,n<=o.width?(s.x=o.right-n,s.y=o.bottom):(s.x=o.x,s.y=o.bottom-(n-o.width))):n<=o.width?(s.x=o.x+n,s.y=o.y):(s.x=o.right,s.y=o.y+(n-o.width)),s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=t(4),r=function(o,a,s,n){n===void 0&&(n=[]),!a&&s>0&&(a=e(o)/s);for(var l=o.x1,i=o.y1,h=o.x2,u=o.y2,d=0;d<a;d++){var c=d/a,p=l+(h-l)*c,g=i+(u-i)*c;n.push(new f(p,g))}return n};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){o===void 0&&(o=new e);var a=Math.random();return o.x=r.x1+a*(r.x2-r.x1),o.y=r.y1+a*(r.y2-r.y1),o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){return o===void 0&&(o=new e),o.x=r.x+Math.random()*r.width,o.y=r.y+Math.random()*r.height,o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f,r,o;if(typeof e!="object"||e===null)return e;f=Array.isArray(e)?[]:{};for(o in e)r=e[o],f[o]=t(r);return f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f={name:e.name,type:e.type,x:e.x,y:e.y,depth:e.depth,scale:{x:e.scaleX,y:e.scaleY},origin:{x:e.originX,y:e.originY},flipX:e.flipX,flipY:e.flipY,rotation:e.rotation,alpha:e.alpha,visible:e.visible,blendMode:e.blendMode,textureKey:"",frameKey:"",data:{}};return e.texture&&(f.textureKey=e.texture.key,f.frameKey=e.frame.name),f};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s,n,l,i,h){h===void 0&&(h=new e);var u=Math.sin(n),d=Math.cos(n),c=d*l,p=u*l,g=-u*i,x=d*i,y=1/(c*x+g*-p);return h.x=x*y*r+-g*y*o+(s*g-a*x)*y,h.y=c*y*o+-p*y*r+(-s*c+a*p)*y,h};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1);for(var r=null,o=0;o<f;o++)r=e.shift(),e.push(r);return r};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1);for(var r=null,o=0;o<f;o++)r=e.pop(),e.unshift(r);return r};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){o===void 0&&(o=new e);var a=Math.random()*Math.PI*2,s=Math.sqrt(Math.random());return o.x=r.x+s*Math.cos(a)*r.width/2,o.y=r.y+s*Math.sin(a)*r.height/2,o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){o===void 0&&(o=new e);var a=r.x2-r.x1,s=r.y2-r.y1,n=r.x3-r.x1,l=r.y3-r.y1,i=Math.random(),h=Math.random();return i+h>=1&&(i=1-i,h=1-h),o.x=r.x1+(a*i+n*h),o.y=r.y1+(s*i+l*h),o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a){var s=o+Math.atan2(e.y-r,e.x-f);return e.x=f+a*Math.cos(s),e.y=r+a*Math.sin(s),e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e=Math.max(0,Math.min(1,(e-f)/(r-f))),e*e*e*(e*(e*6-15)+10)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e<=f?0:e>=r?1:(e=(e-f)/(r-f),e*e*(3-2*e))};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(132),o=t(318),a=t(319),s=t(6),n=t(320),l=new f({initialize:function(h,u,d){this.manager=h,this.key=u,this.type="frame",this.frames=this.getFrames(h.textureManager,s(d,"frames",[]),s(d,"defaultTextureKey",null),s(d,"sortFrames",!0)),this.frameRate=s(d,"frameRate",null),this.duration=s(d,"duration",null),this.msPerFrame,this.skipMissedFrames=s(d,"skipMissedFrames",!0),this.delay=s(d,"delay",0),this.repeat=s(d,"repeat",0),this.repeatDelay=s(d,"repeatDelay",0),this.yoyo=s(d,"yoyo",!1),this.showOnStart=s(d,"showOnStart",!1),this.hideOnComplete=s(d,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(r.PAUSE_ALL,this.pause,this),this.manager.on(r.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(i,h,u,d){u===null&&d===null?(i.frameRate=24,i.duration=24/h*1e3):u&&d===null?(i.duration=u,i.frameRate=h/(u/1e3)):(i.frameRate=d,i.duration=h/d*1e3),i.msPerFrame=1e3/i.frameRate},addFrame:function(i){return this.addFrameAt(this.frames.length,i)},addFrameAt:function(i,h){var u=this.getFrames(this.manager.textureManager,h);if(u.length>0){if(i===0)this.frames=u.concat(this.frames);else if(i===this.frames.length)this.frames=this.frames.concat(u);else{var d=this.frames.slice(0,i),c=this.frames.slice(i);this.frames=d.concat(u,c)}this.updateFrameSequence()}return this},checkFrame:function(i){return i>=0&&i<this.frames.length},getFirstTick:function(i){i.accumulator=0,i.nextTick=i.msPerFrame+i.currentFrame.duration},getFrameAt:function(i){return this.frames[i]},getFrames:function(i,h,u,d){d===void 0&&(d=!0);var c=[],p,g,x=1,y,T;if(typeof h=="string"){T=h;var E=i.get(T),w=E.getFrameNames();d&&n(w),h=[],w.forEach(function(D){h.push({key:T,frame:D})})}if(!Array.isArray(h)||h.length===0)return c;for(y=0;y<h.length;y++){var A=h[y],b=s(A,"key",u);if(!!b){var R=s(A,"frame",0),L=i.getFrame(b,R);g=new a(b,R,x,L),g.duration=s(A,"duration",0),g.isFirst=!p,p&&(p.nextFrame=g,g.prevFrame=p),c.push(g),p=g,x++}}if(c.length>0){g.isLast=!0,g.nextFrame=c[0],c[0].prevFrame=g;var B=1/(c.length-1);for(y=0;y<c.length;y++)c[y].progress=y*B}return c},getNextTick:function(i){i.accumulator-=i.nextTick,i.nextTick=i.msPerFrame+i.currentFrame.duration},getFrameByProgress:function(i){return i=e(i,0,1),o(i,this.frames,"progress")},nextFrame:function(i){var h=i.currentFrame;h.isLast?i.yoyo?this.handleYoyoFrame(i,!1):i.repeatCounter>0?i.inReverse&&i.forward?i.forward=!1:this.repeatAnimation(i):i.complete():this.updateAndGetNextTick(i,h.nextFrame)},handleYoyoFrame:function(i,h){if(h||(h=!1),i.inReverse===!h&&i.repeatCounter>0){(i.repeatDelay===0||i.pendingRepeat)&&(i.forward=h),this.repeatAnimation(i);return}if(i.inReverse!==h&&i.repeatCounter===0){i.complete();return}i.forward=h;var u=h?i.currentFrame.nextFrame:i.currentFrame.prevFrame;this.updateAndGetNextTick(i,u)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(i){var h=i.currentFrame;h.isFirst?i.yoyo?this.handleYoyoFrame(i,!0):i.repeatCounter>0?i.inReverse&&!i.forward?this.repeatAnimation(i):(i.forward=!0,this.repeatAnimation(i)):i.complete():this.updateAndGetNextTick(i,h.prevFrame)},updateAndGetNextTick:function(i,h){i.setCurrentFrame(h),this.getNextTick(i)},removeFrame:function(i){var h=this.frames.indexOf(i);return h!==-1&&this.removeFrameAt(h),this},removeFrameAt:function(i){return this.frames.splice(i,1),this.updateFrameSequence(),this},repeatAnimation:function(i){if(i._pendingStop===2){if(i._pendingStopValue===0)return i.stop();i._pendingStopValue--}i.repeatDelay>0&&!i.pendingRepeat?(i.pendingRepeat=!0,i.accumulator-=i.nextTick,i.nextTick+=i.repeatDelay):(i.repeatCounter--,i.forward?i.setCurrentFrame(i.currentFrame.nextFrame):i.setCurrentFrame(i.currentFrame.prevFrame),i.isPlaying&&(this.getNextTick(i),i.handleRepeat()))},toJSON:function(){var i={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(h){i.frames.push(h.toJSON())}),i},updateFrameSequence:function(){for(var i=this.frames.length,h=1/(i-1),u,d=0;d<i;d++)u=this.frames[d],u.index=d+1,u.isFirst=!1,u.isLast=!1,u.progress=d*h,d===0?(u.isFirst=!0,i===1?(u.isLast=!0,u.nextFrame=u,u.prevFrame=u):(u.isLast=!1,u.prevFrame=this.frames[i-1],u.nextFrame=this.frames[d+1])):d===i-1&&i>1?(u.isLast=!0,u.prevFrame=this.frames[i-2],u.nextFrame=this.frames[0]):i>1&&(u.prevFrame=this.frames[d-1],u.nextFrame=this.frames[d+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(r.PAUSE_ALL,this.pause,this),this.manager.off(r.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var i=0;i<this.frames.length;i++)this.frames[i].destroy();this.frames=[],this.manager=null}});m.exports=l},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f===void 0&&(f=0),r===void 0&&(r=" "),o===void 0&&(o=3),e=e.toString();var a=0;if(f+1>=e.length)switch(o){case 1:e=new Array(f+1-e.length).join(r)+e;break;case 3:var s=Math.ceil((a=f-e.length)/2),n=a-s;e=new Array(n+1).join(r)+e+new Array(s+1).join(r);break;default:e=e+new Array(f+1-e.length).join(r);break}return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(327),f=t(189),r=t(331),o=t(332),a=function(s){var n=typeof s;switch(n){case"string":return s.substr(0,3).toLowerCase()==="rgb"?o(s):e(s);case"number":return f(s);case"object":return r(s)}};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103);function f(o,a,s,n){var l=(o+a*6)%6,i=Math.min(l,4-l,1);return Math.round(255*(n-n*s*Math.max(0,i)))}var r=function(o,a,s,n){a===void 0&&(a=1),s===void 0&&(s=1);var l=f(5,o,a,s),i=f(3,o,a,s),h=f(1,o,a,s);return n?n.setTo?n.setTo(l,i,h,n.alpha,!1):(n.r=l,n.g=i,n.b=h,n.color=e(l,i,h),n):{r:l,g:i,b:h,color:e(l,i,h)}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=t(330),r=function(o){var a=f(o);return new e(a.r,a.g,a.b,a.a)};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e.x=f-e.width/2,e.y=r-e.height/2,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),f=t(136),r=t(31),o={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function a(){var n=new ArrayBuffer(4),l=new Uint8Array(n),i=new Uint32Array(n);return l[0]=161,l[1]=178,l[2]=195,l[3]=212,i[0]===3569595041?!0:i[0]===2712847316?!1:null}function s(){if(typeof importScripts=="function")return o;o.canvas=!!window.CanvasRenderingContext2D;try{o.localStorage=!!localStorage.getItem}catch(i){o.localStorage=!1}o.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,o.fileSystem=!!window.requestFileSystem;var n=!1,l=function(){if(window.WebGLRenderingContext)try{var i=r.createWebGL(this),h=i.getContext("webgl")||i.getContext("experimental-webgl"),u=r.create2D(this),d=u.getContext("2d"),c=d.createImageData(1,1);return n=c.data instanceof Uint8ClampedArray,r.remove(i),r.remove(u),!!h}catch(p){return!1}return!1};return o.webGL=l(),o.worker=!!window.Worker,o.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,o.getUserMedia=o.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,f.firefox&&f.firefoxVersion<21&&(o.getUserMedia=!1),!e.iOS&&(f.ie||f.firefox||f.chrome)&&(o.canvasBitBltShift=!0),(f.safari||f.mobileSafari)&&(o.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(o.vibration=!0),typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined"&&typeof Uint32Array!="undefined"&&(o.littleEndian=a()),o.support32bit=typeof ArrayBuffer!="undefined"&&typeof Uint8ClampedArray!="undefined"&&typeof Int32Array!="undefined"&&o.littleEndian!==null&&n,o}m.exports=s()},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="",e=function(){var f=function(s){for(var n=["i","webkitI","msI","mozI","oI"],l=0;l<n.length;l++){var i=n[l]+"mageSmoothingEnabled";if(i in s)return i}return null},r=function(s){return t===""&&(t=f(s)),t&&(s[t]=!0),s},o=function(s){return t===""&&(t=f(s)),t&&(s[t]=!1),s},a=function(s){return t!==null?s[t]:null};return{disable:o,enable:r,getPrefix:f,isEnabled:a}};m.exports=e()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(17),r={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)};r=f(!1,r,e),m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a){var s=(o-f)*.5,n=(a-r)*.5,l=e*e,i=e*l;return(2*r-2*o+s+n)*i+(-3*r+3*o-2*s-n)*l+s*e+r};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.floor(Math.random()*(f-e+1)+e)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=function(r){return r*e.RAD_TO_DEG};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(r){return this._matrix=r,this._dirty=!0,this},reset:function(){var r=this._matrix;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=1,r[7]=0,r[8]=0,r[9]=0,r[10]=0,r[11]=0,r[12]=1,r[13]=0,r[14]=0,r[15]=0,r[16]=0,r[17]=0,r[18]=1,r[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var r=new Float32Array(this._matrix);r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._data=r,this._dirty=!1}return this._data},brightness:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var a=r;return this.multiply([a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0],o)},saturate:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var a=r*2/3+1,s=(a-1)*-.5;return this.multiply([a,s,s,0,0,s,a,s,0,0,s,s,a,0,0,0,0,0,1,0],o)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1),r=r/180*Math.PI;var a=Math.cos(r),s=Math.sin(r),n=.213,l=.715,i=.072;return this.multiply([n+a*(1-n)+s*-n,l+a*-l+s*-l,i+a*-i+s*(1-i),0,0,n+a*-n+s*.143,l+a*(1-l)+s*.14,i+a*-i+s*-.283,0,0,n+a*-n+s*-(1-n),l+a*-l+s*l,i+a*(1-i)+s*i,0,0,0,0,0,1,0],o)},grayscale:function(r,o){return r===void 0&&(r=1),o===void 0&&(o=!1),this.saturate(-r,o)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],r)},contrast:function(r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var a=r+1,s=-.5*(a-1);return this.multiply([a,0,0,0,s,0,a,0,0,s,0,0,a,0,s,0,0,0,1,0],o)},negative:function(r){return r===void 0&&(r=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],r)},night:function(r,o){return r===void 0&&(r=.1),o===void 0&&(o=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],o)},lsd:function(r){return r===void 0&&(r=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],r)},brown:function(r){return r===void 0&&(r=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],r)},multiply:function(r,o){o||this.reset();for(var a=this._matrix,s=[],n=0;n<20;n++)s[n]=a[n];return a[0]=s[0]*r[0]+s[1]*r[5]+s[2]*r[10]+s[3]*r[15],a[1]=s[0]*r[1]+s[1]*r[6]+s[2]*r[11]+s[3]*r[16],a[2]=s[0]*r[2]+s[1]*r[7]+s[2]*r[12]+s[3]*r[17],a[3]=s[0]*r[3]+s[1]*r[8]+s[2]*r[13]+s[3]*r[18],a[4]=s[0]*r[4]+s[1]*r[9]+s[2]*r[14]+s[3]*r[19]+s[4],a[5]=s[5]*r[0]+s[6]*r[5]+s[7]*r[10]+s[8]*r[15],a[6]=s[5]*r[1]+s[6]*r[6]+s[7]*r[11]+s[8]*r[16],a[7]=s[5]*r[2]+s[6]*r[7]+s[7]*r[12]+s[8]*r[17],a[8]=s[5]*r[3]+s[6]*r[8]+s[7]*r[13]+s[8]*r[18],a[9]=s[5]*r[4]+s[6]*r[9]+s[7]*r[14]+s[8]*r[19]+s[9],a[10]=s[10]*r[0]+s[11]*r[5]+s[12]*r[10]+s[13]*r[15],a[11]=s[10]*r[1]+s[11]*r[6]+s[12]*r[11]+s[13]*r[16],a[12]=s[10]*r[2]+s[11]*r[7]+s[12]*r[12]+s[13]*r[17],a[13]=s[10]*r[3]+s[11]*r[8]+s[12]*r[13]+s[13]*r[18],a[14]=s[10]*r[4]+s[11]*r[9]+s[12]*r[14]+s[13]*r[19]+s[14],a[15]=s[15]*r[0]+s[16]*r[5]+s[17]*r[10]+s[18]*r[15],a[16]=s[15]*r[1]+s[16]*r[6]+s[17]*r[11]+s[18]*r[16],a[17]=s[15]*r[2]+s[16]*r[7]+s[17]*r[12]+s[18]*r[17],a[18]=s[15]*r[3]+s[16]*r[8]+s[17]*r[13]+s[18]*r[18],a[19]=s[15]*r[4]+s[16]*r[9]+s[17]*r[14]+s[18]*r[19]+s[19],this._dirty=!0,this}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(14),r=function(o,a){if(a===void 0&&(a=new e),o.length===0)return a;for(var s=Number.MAX_VALUE,n=Number.MAX_VALUE,l=f.MIN_SAFE_INTEGER,i=f.MIN_SAFE_INTEGER,h,u,d,c=0;c<o.length;c++)h=o[c],Array.isArray(h)?(u=h[0],d=h[1]):(u=h.x,d=h.y),s=Math.min(s,u),n=Math.min(n,d),l=Math.max(l,u),i=Math.max(i,d);return a.x=s,a.y=n,a.width=l-s,a.height=i-n,a};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(1),r=new e({initialize:function(a,s,n){this._rgb=[0,0,0],this.onChangeCallback=f,this.dirty=!1,this.set(a,s,n)},set:function(o,a,s){return o===void 0&&(o=0),a===void 0&&(a=0),s===void 0&&(s=0),this._rgb=[o,a,s],this.onChange(),this},equals:function(o,a,s){var n=this._rgb;return n.r===o&&n.g===a&&n.b===s},onChange:function(){this.dirty=!0;var o=this._rgb;this.onChangeCallback.call(this,o[0],o[1],o[2])},r:{get:function(){return this._rgb[0]},set:function(o){this._rgb[0]=o,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(o){this._rgb[1]=o,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(o){this._rgb[2]=o,this.onChange()}},destroy:function(){this.onChangeCallback=null}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){e.parentNode&&e.parentNode.removeChild(e)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(144),r=t(197),o=t(20),a=t(419),s=t(420),n=t(33),l=t(1),i=t(421),h=new e({initialize:function(d,c){this.scene=d,this.game,this.renderer,this.config=c,this.settings=i.create(c),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=l},init:function(u){this.settings.status=f.INIT,this.sceneUpdate=l,this.game=u,this.renderer=u.renderer,this.canvas=u.canvas,this.context=u.context;var d=u.plugins;this.plugins=d,d.addToScene(this,r.Global,[r.CoreScene,s(this),a(this)]),this.events.emit(o.BOOT,this),this.settings.isBooted=!0},step:function(u,d){var c=this.events;c.emit(o.PRE_UPDATE,u,d),c.emit(o.UPDATE,u,d),this.sceneUpdate.call(this.scene,u,d),c.emit(o.POST_UPDATE,u,d)},render:function(u){var d=this.displayList;d.depthSort(),this.events.emit(o.PRE_RENDER,u),this.cameras.render(u,d),this.events.emit(o.RENDER,u)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(u){var d=this.events,c=this.settings;return this.settings.active&&(c.status=f.PAUSED,c.active=!1,d.emit(o.PAUSE,this,u)),this},resume:function(u){var d=this.events,c=this.settings;return this.settings.active||(c.status=f.RUNNING,c.active=!0,d.emit(o.RESUME,this,u)),this},sleep:function(u){var d=this.events,c=this.settings;return c.status=f.SLEEPING,c.active=!1,c.visible=!1,d.emit(o.SLEEP,this,u),this},wake:function(u){var d=this.events,c=this.settings;return c.status=f.RUNNING,c.active=!0,c.visible=!0,d.emit(o.WAKE,this,u),c.isTransition&&d.emit(o.TRANSITION_WAKE,c.transitionFrom,c.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===f.SLEEPING},isActive:function(){return this.settings.status===f.RUNNING},isPaused:function(){return this.settings.status===f.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(u){return this.settings.visible=u,this},setActive:function(u,d){return u?this.resume(d):this.pause(d)},start:function(u){var d=this.events,c=this.settings;u&&(c.data=u),c.status=f.START,c.active=!0,c.visible=!0,d.emit(o.START,this),d.emit(o.READY,this,u)},shutdown:function(u){var d=this.events,c=this.settings;d.off(o.TRANSITION_INIT),d.off(o.TRANSITION_START),d.off(o.TRANSITION_COMPLETE),d.off(o.TRANSITION_OUT),c.status=f.SHUTDOWN,c.active=!1,c.visible=!1,this.renderer===n.WEBGL&&this.renderer.resetTextures(!0),d.emit(o.SHUTDOWN,this,u)},destroy:function(){var u=this.events,d=this.settings;d.status=f.DESTROYED,d.active=!1,d.visible=!1,u.emit(o.DESTROY,this),u.removeAllListeners();for(var c=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],p=0;p<c.length;p++)this[c[p]]=null}});m.exports=h},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e&&e[0].toUpperCase()+e.slice(1)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),f=t(0),r=t(109),o=t(424),a="Texture.frame missing: ",s=new f({initialize:function(l,i,h,u,d){Array.isArray(h)||(h=[h]),this.manager=l,this.key=i,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var c=0;c<h.length;c++)this.source.push(new o(this,h[c],u,d))},add:function(n,l,i,h,u,d){if(this.has(n))return null;var c=new r(this,n,l,i,h,u,d);return this.frames[n]=c,this.firstFrame==="__BASE"&&(this.firstFrame=n),this.frameTotal++,c},remove:function(n){if(this.has(n)){var l=this.get(n);return l.destroy(),delete this.frames[n],!0}return!1},has:function(n){return this.frames[n]},get:function(n){n||(n=this.firstFrame);var l=this.frames[n];return l||(console.warn(a+n),l=this.frames[this.firstFrame]),l},getTextureSourceIndex:function(n){for(var l=0;l<this.source.length;l++)if(this.source[l]===n)return l;return-1},getFramesFromTextureSource:function(n,l){l===void 0&&(l=!1);var i=[];for(var h in this.frames)if(!(h==="__BASE"&&!l)){var u=this.frames[h];u.sourceIndex===n&&i.push(u)}return i},getFrameNames:function(n){n===void 0&&(n=!1);var l=Object.keys(this.frames);if(!n){var i=l.indexOf("__BASE");i!==-1&&l.splice(i,1)}return l},getSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var l=this.frames[n];return l?l.source.image:(console.warn(a+n),this.frames.__BASE.source.image)},getDataSourceImage:function(n){(n==null||this.frameTotal===1)&&(n="__BASE");var l=this.frames[n],i;return l?i=l.sourceIndex:(console.warn(a+n),i=this.frames.__BASE.sourceIndex),this.dataSource[i].image},setDataSource:function(n){Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++){var i=this.source[l];this.dataSource.push(new o(this,n[l],i.width,i.height))}},setFilter:function(n){var l;for(l=0;l<this.source.length;l++)this.source[l].setFilter(n);for(l=0;l<this.dataSource.length;l++)this.dataSource[l].setFilter(n)},destroy:function(){var n;for(n=0;n<this.source.length;n++)this.source[n].destroy();for(n=0;n<this.dataSource.length;n++)this.dataSource[n].destroy();for(var l in this.frames){var i=this.frames[l];i.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var h=this.manager.game.renderer;h&&h.type===e.WEBGL&&h.resetTextures(!0),this.manager=null}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(r,o,a,s,n){s===void 0&&(s=0),n===void 0&&(n=r.length);var l=[];if(e(r,s,n))for(var i=s;i<n;i++){var h=r[i];(!o||o&&a===void 0&&h.hasOwnProperty(o)||o&&a!==void 0&&h[o]===a)&&l.push(h)}return l};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(!Array.isArray(e)||e.length<2||!Array.isArray(e[0]))return!1;for(var f=e[0].length,r=1;r<e.length;r++)if(e[r].length!==f)return!1;return!0};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){f===void 0&&(f=0),r===void 0&&(r=e.length);var o=f+Math.floor(Math.random()*r);return e[o]===void 0?null:e[o]};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),r=t(438),o=new e({Extends:f,initialize:function(){f.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(a){return this._pending.push(a),this._toProcess++,a},remove:function(a){return this._destroy.push(a),this._toProcess++,a},removeAll:function(){for(var a=this._active,s=this._destroy,n=a.length;n--;)s.push(a[n]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var a=this._destroy,s=this._active,n,l;for(n=0;n<a.length;n++){l=a[n];var i=s.indexOf(l);i!==-1&&(s.splice(i,1),this.emit(r.PROCESS_QUEUE_REMOVE,l))}for(a.length=0,a=this._pending,n=0;n<a.length;n++)l=a[n],(!this.checkQueue||this.checkQueue&&s.indexOf(l)===-1)&&(s.push(l),this.emit(r.PROCESS_QUEUE_ADD,l));return a.length=0,this._toProcess=0,s},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(f,r){return parseInt(f.getAttribute(r),10)}var e=function(f,r,o,a,s){o===void 0&&(o=0),a===void 0&&(a=0);var n=r.cutX,l=r.cutY,i=r.source.width,h=r.source.height,u=r.sourceIndex,d={},c=f.getElementsByTagName("info")[0],p=f.getElementsByTagName("common")[0];d.font=c.getAttribute("face"),d.size=t(c,"size"),d.lineHeight=t(p,"lineHeight")+a,d.chars={};var g=f.getElementsByTagName("char"),x=r!==void 0&&r.trimmed;if(x)var y=r.height,T=r.width;for(var E=0;E<g.length;E++){var w=g[E],A=t(w,"id"),b=String.fromCharCode(A),R=t(w,"x"),L=t(w,"y"),B=t(w,"width"),D=t(w,"height");x&&(R<T&&(T=R),L<y&&(y=L)),x&&y!==0&&T!==0&&(R-=r.x,L-=r.y);var G=(n+R)/i,X=(l+L)/h,H=(n+R+B)/i,K=(l+L+D)/h;if(d.chars[A]={x:R,y:L,width:B,height:D,centerX:Math.floor(B/2),centerY:Math.floor(D/2),xOffset:t(w,"xoffset"),yOffset:t(w,"yoffset"),xAdvance:t(w,"xadvance")+o,data:{},kerning:{},u0:G,v0:X,u1:H,v1:K},s&&B!==0&&D!==0){var $=s.add(b,u,R,L,B,D);$&&$.setUVs(B,D,G,X,H,K)}}var N=f.getElementsByTagName("kerning");for(E=0;E<N.length;E++){var I=N[E],z=t(I,"first"),U=t(I,"second"),W=t(I,"amount");d.chars[U].kerning[z]=W}return d};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1049),f=t(440),r=t(0),o=t(11),a=t(109),s=t(15),n=t(110),l=new r({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.ScrollFactor,o.Size,o.Texture,o.Transform,o.Visible,e],initialize:function(h,u,d,c,p){s.call(this,h,"Blitter"),this.setTexture(c,p),this.setPosition(u,d),this.initPipeline(),this.children=new n,this.renderList=[],this.dirty=!1},create:function(i,h,u,d,c){d===void 0&&(d=!0),c===void 0&&(c=this.children.length),u===void 0?u=this.frame:u instanceof a||(u=this.texture.get(u));var p=new f(this,i,h,u,d);return this.children.addAt(p,c,!1),this.dirty=!0,p},createFromCallback:function(i,h,u,d){for(var c=this.createMultiple(h,u,d),p=0;p<c.length;p++){var g=c[p];i.call(this,g,p)}return c},createMultiple:function(i,h,u){h===void 0&&(h=this.frame.name),u===void 0&&(u=!0),Array.isArray(h)||(h=[h]);var d=[],c=this;return h.forEach(function(p){for(var g=0;g<i;g++)d.push(c.create(0,0,p,u))}),d},childCanRender:function(i){return i.visible&&i.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(208),f=t(35),r=t(0),o=t(11),a=t(75),s=t(15),n=t(10),l=t(1052),i=t(441),h=t(3),u=new r({Extends:s,Mixins:[o.AlphaSingle,o.BlendMode,o.ComputedSize,o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,l],initialize:function(c,p,g,x){s.call(this,c,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new o.TransformMatrix,this.tempTransformMatrix=new o.TransformMatrix,this._sortKey="",this._sysEvents=c.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(p,g),this.clearAlpha(),this.setBlendMode(f.SKIP_CHECK),x&&this.add(x)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(d){return d===void 0&&(d=!0),this.exclusive=d,this},getBounds:function(d){if(d===void 0&&(d=new n),d.setTo(this.x,this.y,0,0),this.parentContainer){var c=this.parentContainer.getBoundsTransformMatrix(),p=c.transformPoint(this.x,this.y);d.setTo(p.x,p.y,0,0)}if(this.list.length>0){var g=this.list,x=new n,y=!1;d.setEmpty();for(var T=0;T<g.length;T++){var E=g[T];E.getBounds&&(E.getBounds(x),y?i(x,d,d):(d.setTo(x.x,x.y,x.width,x.height),y=!0))}}return d},addHandler:function(d){d.once(a.DESTROY,this.remove,this),this.exclusive&&(d.parentContainer&&d.parentContainer.remove(d),d.removeFromDisplayList(),d.parentContainer=this)},removeHandler:function(d){d.off(a.DESTROY,this.remove),this.exclusive&&(d.parentContainer=null,d.addToDisplayList())},pointToContainer:function(d,c){c===void 0&&(c=new h),this.parentContainer?this.parentContainer.pointToContainer(d,c):c=new h(d.x,d.y);var p=this.tempTransformMatrix;return p.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),p.invert(),p.transformPoint(d.x,d.y,c),c},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(d){return e.Add(this.list,d,this.maxSize,this.addHandler,this),this},addAt:function(d,c){return e.AddAt(this.list,d,c,this.maxSize,this.addHandler,this),this},getAt:function(d){return this.list[d]},getIndex:function(d){return this.list.indexOf(d)},sort:function(d,c){return d?(c===void 0&&(c=function(p,g){return p[d]-g[d]}),e.StableSort(this.list,c),this):this},getByName:function(d){return e.GetFirst(this.list,"name",d)},getRandom:function(d,c){return e.GetRandom(this.list,d,c)},getFirst:function(d,c,p,g){return e.GetFirst(this.list,d,c,p,g)},getAll:function(d,c,p,g){return e.GetAll(this.list,d,c,p,g)},count:function(d,c,p,g){return e.CountAllMatching(this.list,d,c,p,g)},swap:function(d,c){return e.Swap(this.list,d,c),this},moveTo:function(d,c){return e.MoveTo(this.list,d,c),this},moveAbove:function(d,c){return e.MoveAbove(this.list,d,c),this},moveBelow:function(d,c){return e.MoveBelow(this.list,d,c),this},remove:function(d,c){var p=e.Remove(this.list,d,this.removeHandler,this);if(c&&p){Array.isArray(p)||(p=[p]);for(var g=0;g<p.length;g++)p[g].destroy()}return this},removeAt:function(d,c){var p=e.RemoveAt(this.list,d,this.removeHandler,this);return c&&p&&p.destroy(),this},removeBetween:function(d,c,p){var g=e.RemoveBetween(this.list,d,c,this.removeHandler,this);if(p)for(var x=0;x<g.length;x++)g[x].destroy();return this},removeAll:function(d){var c=e.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(d)for(var p=0;p<c.length;p++)c[p].destroy();return this},bringToTop:function(d){return e.BringToTop(this.list,d),this},sendToBack:function(d){return e.SendToBack(this.list,d),this},moveUp:function(d){return e.MoveUp(this.list,d),this},moveDown:function(d){return e.MoveDown(this.list,d),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return e.Shuffle(this.list),this},replace:function(d,c,p){var g=e.Replace(this.list,d,c);return g&&(this.addHandler(c),this.removeHandler(d),p&&d.destroy()),this},exists:function(d){return this.list.indexOf(d)>-1},setAll:function(d,c,p,g){return e.SetAll(this.list,d,c,p,g),this},each:function(d,c){var p=[null],g,x=this.list.slice(),y=x.length;for(g=2;g<arguments.length;g++)p.push(arguments[g]);for(g=0;g<y;g++)p[0]=x[g],d.apply(c,p);return this},iterate:function(d,c){var p=[null],g;for(g=2;g<arguments.length;g++)p.push(arguments[g]);for(g=0;g<this.list.length;g++)p[0]=this.list[g],d.apply(c,p);return this},setScrollFactor:function(d,c,p){return c===void 0&&(c=d),p===void 0&&(p=!1),this.scrollFactorX=d,this.scrollFactorY=c,p&&(e.SetAll(this.list,"scrollFactorX",d),e.SetAll(this.list,"scrollFactorY",c)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});m.exports=u},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),f=t(0),r=t(1057),o=new f({Extends:e,Mixins:[r],initialize:function(s,n,l,i,h,u,d){e.call(this,s,n,l,i,h,u,d),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(a,s){return this.cropWidth=a,this.cropHeight=s,this},setDisplayCallback:function(a){return this.displayCallback=a,this},setScrollX:function(a){return this.scrollX=a,this},setScrollY:function(a){return this.scrollY=a,this}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(133),f=t(0),r=t(217),o=t(303),a=t(304),s=t(305),n=t(309),l=t(167),i=t(312),h=t(313),u=t(314),d=t(111),c=t(15),p=t(2),g=t(6),x=t(14),y=t(1063),T=new f({Extends:c,Mixins:[o,a,s,n,l,h,u,i,y],initialize:function(w,A){var b=g(A,"x",0),R=g(A,"y",0);c.call(this,w,"Graphics"),this.setPosition(b,R),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(A)},setDefaultStyles:function(E){return g(E,"lineStyle",null)&&(this.defaultStrokeWidth=g(E,"lineStyle.width",1),this.defaultStrokeColor=g(E,"lineStyle.color",16777215),this.defaultStrokeAlpha=g(E,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),g(E,"fillStyle",null)&&(this.defaultFillColor=g(E,"fillStyle.color",16777215),this.defaultFillAlpha=g(E,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(E,w,A){return A===void 0&&(A=1),this.commandBuffer.push(r.LINE_STYLE,E,w,A),this._lineWidth=E,this},fillStyle:function(E,w){return w===void 0&&(w=1),this.commandBuffer.push(r.FILL_STYLE,E,w),this},fillGradientStyle:function(E,w,A,b,R,L,B,D){return R===void 0&&(R=1),L===void 0&&(L=R),B===void 0&&(B=R),D===void 0&&(D=R),this.commandBuffer.push(r.GRADIENT_FILL_STYLE,R,L,B,D,E,w,A,b),this},lineGradientStyle:function(E,w,A,b,R,L){return L===void 0&&(L=1),this.commandBuffer.push(r.GRADIENT_LINE_STYLE,E,L,w,A,b,R),this},beginPath:function(){return this.commandBuffer.push(r.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(r.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(r.FILL_PATH),this},fill:function(){return this.commandBuffer.push(r.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(r.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(r.STROKE_PATH),this},fillCircleShape:function(E){return this.fillCircle(E.x,E.y,E.radius)},strokeCircleShape:function(E){return this.strokeCircle(E.x,E.y,E.radius)},fillCircle:function(E,w,A){return this.beginPath(),this.arc(E,w,A,0,x.PI2),this.fillPath(),this},strokeCircle:function(E,w,A){return this.beginPath(),this.arc(E,w,A,0,x.PI2),this.strokePath(),this},fillRectShape:function(E){return this.fillRect(E.x,E.y,E.width,E.height)},strokeRectShape:function(E){return this.strokeRect(E.x,E.y,E.width,E.height)},fillRect:function(E,w,A,b){return this.commandBuffer.push(r.FILL_RECT,E,w,A,b),this},strokeRect:function(E,w,A,b){var R=this._lineWidth/2,L=E-R,B=E+R;return this.beginPath(),this.moveTo(E,w),this.lineTo(E,w+b),this.strokePath(),this.beginPath(),this.moveTo(E+A,w),this.lineTo(E+A,w+b),this.strokePath(),this.beginPath(),this.moveTo(L,w),this.lineTo(B+A,w),this.strokePath(),this.beginPath(),this.moveTo(L,w+b),this.lineTo(B+A,w+b),this.strokePath(),this},fillRoundedRect:function(E,w,A,b,R){R===void 0&&(R=20);var L=R,B=R,D=R,G=R;return typeof R!="number"&&(L=p(R,"tl",20),B=p(R,"tr",20),D=p(R,"bl",20),G=p(R,"br",20)),this.beginPath(),this.moveTo(E+L,w),this.lineTo(E+A-B,w),this.arc(E+A-B,w+B,B,-x.TAU,0),this.lineTo(E+A,w+b-G),this.arc(E+A-G,w+b-G,G,0,x.TAU),this.lineTo(E+D,w+b),this.arc(E+D,w+b-D,D,x.TAU,Math.PI),this.lineTo(E,w+L),this.arc(E+L,w+L,L,-Math.PI,-x.TAU),this.fillPath(),this},strokeRoundedRect:function(E,w,A,b,R){R===void 0&&(R=20);var L=R,B=R,D=R,G=R;return typeof R!="number"&&(L=p(R,"tl",20),B=p(R,"tr",20),D=p(R,"bl",20),G=p(R,"br",20)),this.beginPath(),this.moveTo(E+L,w),this.lineTo(E+A-B,w),this.moveTo(E+A-B,w),this.arc(E+A-B,w+B,B,-x.TAU,0),this.lineTo(E+A,w+b-G),this.moveTo(E+A,w+b-G),this.arc(E+A-G,w+b-G,G,0,x.TAU),this.lineTo(E+D,w+b),this.moveTo(E+D,w+b),this.arc(E+D,w+b-D,D,x.TAU,Math.PI),this.lineTo(E,w+L),this.moveTo(E,w+L),this.arc(E+L,w+L,L,-Math.PI,-x.TAU),this.strokePath(),this},fillPointShape:function(E,w){return this.fillPoint(E.x,E.y,w)},fillPoint:function(E,w,A){return!A||A<1?A=1:(E-=A/2,w-=A/2),this.commandBuffer.push(r.FILL_RECT,E,w,A,A),this},fillTriangleShape:function(E){return this.fillTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},strokeTriangleShape:function(E){return this.strokeTriangle(E.x1,E.y1,E.x2,E.y2,E.x3,E.y3)},fillTriangle:function(E,w,A,b,R,L){return this.commandBuffer.push(r.FILL_TRIANGLE,E,w,A,b,R,L),this},strokeTriangle:function(E,w,A,b,R,L){return this.commandBuffer.push(r.STROKE_TRIANGLE,E,w,A,b,R,L),this},strokeLineShape:function(E){return this.lineBetween(E.x1,E.y1,E.x2,E.y2)},lineBetween:function(E,w,A,b){return this.beginPath(),this.moveTo(E,w),this.lineTo(A,b),this.strokePath(),this},lineTo:function(E,w){return this.commandBuffer.push(r.LINE_TO,E,w),this},moveTo:function(E,w){return this.commandBuffer.push(r.MOVE_TO,E,w),this},strokePoints:function(E,w,A,b){w===void 0&&(w=!1),A===void 0&&(A=!1),b===void 0&&(b=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var R=1;R<b;R++)this.lineTo(E[R].x,E[R].y);return w&&this.lineTo(E[0].x,E[0].y),A&&this.closePath(),this.strokePath(),this},fillPoints:function(E,w,A,b){w===void 0&&(w=!1),A===void 0&&(A=!1),b===void 0&&(b=E.length),this.beginPath(),this.moveTo(E[0].x,E[0].y);for(var R=1;R<b;R++)this.lineTo(E[R].x,E[R].y);return w&&this.lineTo(E[0].x,E[0].y),A&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(E,w){w===void 0&&(w=32);var A=E.getPoints(w);return this.strokePoints(A,!0)},strokeEllipse:function(E,w,A,b,R){R===void 0&&(R=32);var L=new d(E,w,A,b),B=L.getPoints(R);return this.strokePoints(B,!0)},fillEllipseShape:function(E,w){w===void 0&&(w=32);var A=E.getPoints(w);return this.fillPoints(A,!0)},fillEllipse:function(E,w,A,b,R){R===void 0&&(R=32);var L=new d(E,w,A,b),B=L.getPoints(R);return this.fillPoints(B,!0)},arc:function(E,w,A,b,R,L,B){return L===void 0&&(L=!1),B===void 0&&(B=0),this.commandBuffer.push(r.ARC,E,w,A,b,R,L,B),this},slice:function(E,w,A,b,R,L,B){return L===void 0&&(L=!1),B===void 0&&(B=0),this.commandBuffer.push(r.BEGIN_PATH),this.commandBuffer.push(r.MOVE_TO,E,w),this.commandBuffer.push(r.ARC,E,w,A,b,R,L,B),this.commandBuffer.push(r.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(r.SAVE),this},restore:function(){return this.commandBuffer.push(r.RESTORE),this},translateCanvas:function(E,w){return this.commandBuffer.push(r.TRANSLATE,E,w),this},scaleCanvas:function(E,w){return this.commandBuffer.push(r.SCALE,E,w),this},rotateCanvas:function(E){return this.commandBuffer.push(r.ROTATE,E),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(E,w,A){var b=this.scene.sys,R=b.game.renderer;w===void 0&&(w=b.scale.width),A===void 0&&(A=b.scale.height),T.TargetCamera.setScene(this.scene),T.TargetCamera.setViewport(0,0,w,A),T.TargetCamera.scrollX=this.x,T.TargetCamera.scrollY=this.y;var L,B;if(typeof E=="string")if(b.textures.exists(E)){L=b.textures.get(E);var D=L.getSourceImage();D instanceof HTMLCanvasElement&&(B=D.getContext("2d"))}else L=b.textures.createCanvas(E,w,A),B=L.getSourceImage().getContext("2d");else E instanceof HTMLCanvasElement&&(B=E.getContext("2d"));return B&&(this.renderCanvas(R,this,T.TargetCamera,null,B,!1),L&&L.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});T.TargetCamera=new e,m.exports=T},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o,a){a===void 0&&(a=new e);var s=r.width/2,n=r.height/2;return a.x=r.x+s*Math.cos(o),a.y=r.y+n*Math.sin(o),a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(0),r=t(11),o=t(176),a=t(101),s=t(9),n=t(75),l=t(110),i=t(1071),h=t(20),u=t(79),d=new f({Extends:l,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.Visible,s,i],initialize:function(p,g){l.call(this,p),s.call(this),this.scene=p,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=p.sys,this.events=p.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(e.SKIP_CHECK),g&&this.add(g),p.sys.queueDepthSort()},setActive:function(c){return this.active=c,this},setName:function(c){return this.name=c,this},setState:function(c){return this.state=c,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(c,p){return this.data||(this.data=new a(this)),this.data.set(c,p),this},incData:function(c,p){return this.data||(this.data=new a(this)),this.data.inc(c,p),this},toggleData:function(c){return this.data||(this.data=new a(this)),this.data.toggle(c),this},getData:function(c){return this.data||(this.data=new a(this)),this.data.get(c)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(c){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&c.id)},getIndexList:function(){for(var c=this,p=this.parentContainer,g=[];p&&(g.unshift(p.getIndex(c)),c=p,p.parentContainer);)p=p.parentContainer;return g.unshift(this.displayList.getIndex(c)),g},addChildCallback:function(c){c.displayList&&c.displayList!==this&&c.removeFromDisplayList(),c.displayList||(this.queueDepthSort(),c.displayList=this,c.emit(n.ADDED_TO_SCENE,c,this.scene),this.events.emit(h.ADDED_TO_SCENE,c,this.scene))},removeChildCallback:function(c){this.queueDepthSort(),c.displayList=null,c.emit(n.REMOVED_FROM_SCENE,c,this.scene),this.events.emit(h.REMOVED_FROM_SCENE,c,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(u(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(c,p){return c._depth-p._depth},getChildren:function(){return this.list},destroy:function(){if(!(!this.scene||this.ignoreDestroy)){this.emit(n.DESTROY,this);for(var c=this.list.length;c--;)this.list[c].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(15),o=t(450),a=t(110),s=t(452),n=t(1075),l=new e({Extends:r,Mixins:[f.Depth,f.Mask,f.Pipeline,f.Transform,f.Visible,n],initialize:function(h,u,d,c){if(r.call(this,h,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],d!==null&&(typeof d=="object"||Array.isArray(d))&&(c=d,d=null),this.setTexture(u,d),this.initPipeline(),this.emitters=new a(this),this.wells=new a(this),c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)this.createEmitter(c[p])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(i,h){return this.texture=this.scene.sys.textures.get(i),this.setFrame(h)},setFrame:function(i){this.frame=this.texture.get(i);var h=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),u=[];return h.forEach(function(d){u.push(d.name)}),this.frameNames=u,this.defaultFrame=this.frame,this},setEmitterFrames:function(i,h){Array.isArray(i)||(i=[i]);var u=h.frames;u.length=0;for(var d=0;d<i.length;d++){var c=i[d];this.frameNames.indexOf(c)!==-1&&u.push(this.texture.get(c))}return u.length>0?h.defaultFrame=u[0]:h.defaultFrame=this.defaultFrame,this},addEmitter:function(i){return this.emitters.add(i)},createEmitter:function(i){return this.addEmitter(new s(this,i))},removeEmitter:function(i){return this.emitters.remove(i,!0)},addGravityWell:function(i){return this.wells.add(i)},createGravityWell:function(i){return this.addGravityWell(new o(i))},emitParticle:function(i,h,u){for(var d=this.emitters.list,c=0;c<d.length;c++){var p=d[c];p.active&&p.emitParticle(i,h,u)}return this},emitParticleAt:function(i,h,u){return this.emitParticle(u,i,h)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(i,h){h*=this.timeScale;for(var u=this.emitters.list,d=0;d<u.length;d++){var c=u[d];c.active&&c.preUpdate(i,h)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(133),r=t(31),o=t(0),a=t(11),s=t(33),n=t(109),l=t(15),i=t(1),h=t(92),u=t(1079),d=t(141),c=t(12),p=t(222),g=new o({Extends:l,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,u],initialize:function(y,T,E,w,A,b,R){T===void 0&&(T=0),E===void 0&&(E=0),w===void 0&&(w=32),A===void 0&&(A=32),l.call(this,y,"RenderTexture"),this.renderer=y.sys.renderer,this.textureManager=y.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,b===void 0?(this.canvas=r.create2D(this,w,A),this.texture=y.sys.textures.addCanvas(p(),this.canvas),this.frame=this.texture.get()):(this.texture=y.sys.textures.get(b),this.frame=this.texture.get(R),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new f(0,0,w,A),this.renderTarget=null;var L=this.renderer;L?L.type===s.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new d(L,w,A,1,0,!1)):L.type===s.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=i,this.camera.setScene(y),this.setPosition(T,E),b===void 0&&this.setSize(w,A),this.setOrigin(0,0),this.initPipeline(h.SINGLE_PIPELINE)},setSize:function(x,y){return this.resize(x,y)},resize:function(x,y){y===void 0&&(y=x);var T=this.frame;if(x!==this.width||y!==this.height){if(T.name==="__BASE"){this.canvas.width=x,this.canvas.height=y,this.texture.width=x,this.texture.height=y;var E=this.renderTarget;E&&(E.resize(x,y),T.glTexture=E.texture,T.source.isRenderTexture=!0,T.source.isGLTexture=!0,T.source.glTexture=E.texture),this.camera.setSize(x,y),T.source.width=x,T.source.height=y,T.setSize(x,y),this.width=x,this.height=y}}else{var w=this.texture.getSourceImage();T.cutX+x>w.width&&(x=w.width-T.cutX),T.cutY+y>w.height&&(y=w.height-T.cutY),T.setSize(x,y,T.cutX,T.cutY)}this.updateDisplayOrigin();var A=this.input;return A&&!A.customHitArea&&(A.hitArea.width=x,A.hitArea.height=y),this},setGlobalTint:function(x){return this.globalTint=x,this},setGlobalAlpha:function(x){return this.globalAlpha=x,this},saveTexture:function(x){return this.textureManager.renameTexture(this.texture.key,x),this._saved=!0,this.texture},fill:function(x,y,T,E,w,A){var b=this.frame,R=this.camera,L=this.renderer;y===void 0&&(y=1),T===void 0&&(T=0),E===void 0&&(E=0),w===void 0&&(w=b.cutWidth),A===void 0&&(A=b.cutHeight);var B=(x>>16&255)/255,D=(x>>8&255)/255,G=(x&255)/255,X=this.renderTarget;if(R.preRender(),X){X.bind(!0);var H=this.pipeline;H.manager.set(H);var K=X.width,$=X.height,N=L.width,I=L.height,z=N/K,U=I/$;H.drawFillRect(T*z,E*U,w*z,A*U,c.getTintFromFloats(G,D,B,1),y),X.unbind(!0)}else{var W=this.context;L.setContext(W),W.fillStyle="rgba("+B+","+D+","+G+","+y+")",W.fillRect(T+b.cutX,E+b.cutY,w,A),L.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var x=this.renderTarget;if(x)x.clear();else{var y=this.context;y.save(),y.setTransform(1,0,0,1,0,0),y.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),y.restore()}this.dirty=!1}return this},erase:function(x,y,T){return this._eraseMode=!0,this.draw(x,y,T,1,16777215),this._eraseMode=!1,this},draw:function(x,y,T,E,w){return this.beginDraw(),this.batchDraw(x,y,T,E,w),this.endDraw(),this},drawFrame:function(x,y,T,E,w,A){return this.beginDraw(),this.batchDrawFrame(x,y,T,E,w,A),this.endDraw(),this},beginDraw:function(){var x=this.camera,y=this.renderer,T=this.renderTarget;return x.preRender(),T?y.beginCapture(T.width,T.height):y.setContext(this.context),this},batchDraw:function(x,y,T,E,w){return E===void 0&&(E=this.globalAlpha),w===void 0?w=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):w=(w>>16)+(w&65280)+((w&255)<<16),Array.isArray(x)||(x=[x]),this.batchList(x,y,T,E,w),this},batchDrawFrame:function(x,y,T,E,w,A){T===void 0&&(T=0),E===void 0&&(E=0),w===void 0&&(w=this.globalAlpha),A===void 0?A=(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):A=(A>>16)+(A&65280)+((A&255)<<16);var b=this.textureManager.getFrame(x,y);return b&&(this.renderTarget?this.pipeline.batchTextureFrame(b,T,E,A,w,this.camera.matrix,null):this.batchTextureFrame(b,T+this.frame.cutX,E+this.frame.cutY,w,A)),this},endDraw:function(x){x===void 0&&(x=this._eraseMode);var y=this.renderer,T=this.renderTarget;if(T){var E=y.endCapture(),w=y.pipelines.setUtility();w.blitFrame(E,T,1,!1,!1,x),y.resetScissor(),y.resetViewport()}else y.setContext();return this.dirty=!0,this},batchList:function(x,y,T,E,w){for(var A=0;A<x.length;A++){var b=x[A];!b||b===this||(b.renderWebGL||b.renderCanvas?this.drawGameObject(b,y,T):b.isParent||b.list?this.batchGroup(b.getChildren(),y,T):typeof b=="string"?this.batchTextureFrameKey(b,null,y,T,E,w):b instanceof n?this.batchTextureFrame(b,y,T,E,w):Array.isArray(b)&&this.batchList(b,y,T,E,w))}},batchGroup:function(x,y,T){y===void 0&&(y=0),T===void 0&&(T=0),y+=this.frame.cutX,T+=this.frame.cutY;for(var E=0;E<x.length;E++){var w=x[E];if(w.willRender(this.camera)){var A=w.x+y,b=w.y+T;this.drawGameObject(w,A,b)}}},batchGameObjectWebGL:function(x,y,T){y===void 0&&(y=x.x),T===void 0&&(T=x.y);var E=x.x,w=x.y;x.setPosition(y+this.frame.cutX,T+this.frame.cutY),x.renderDirect?x.renderDirect(this.renderer,x,this.camera):x.renderWebGL(this.renderer,x,this.camera),x.setPosition(E,w)},batchGameObjectCanvas:function(x,y,T){y===void 0&&(y=x.x),T===void 0&&(T=x.y);var E=x.x,w=x.y;if(this._eraseMode){var A=x.blendMode;x.blendMode=e.ERASE}x.setPosition(y+this.frame.cutX,T+this.frame.cutY),x.renderCanvas(this.renderer,x,this.camera,null),x.setPosition(E,w),this._eraseMode&&(x.blendMode=A)},batchTextureFrameKey:function(x,y,T,E,w,A){var b=this.textureManager.getFrame(x,y);b&&this.batchTextureFrame(b,T,E,w,A)},batchTextureFrame:function(x,y,T,E,w){y===void 0&&(y=0),T===void 0&&(T=0),y+=this.frame.cutX,T+=this.frame.cutY;var A=this.renderTarget;if(A)this.pipeline.batchTextureFrame(x,y,T,w,E,this.camera.matrix,null);else{var b=this.context,R=x.canvasData,L=x.source.image,B=this.camera.matrix;b.save(),b.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",b.globalAlpha=E,B.setToContext(b),b.drawImage(L,R.x,R.y,R.width,R.height,y,T,R.width,R.height),b.restore()}},snapshotArea:function(x,y,T,E,w,A,b){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,w,!1,x,y,T,E,A,b):this.renderer.snapshotCanvas(this.canvas,w,!1,x,y,T,E,A,b),this},snapshot:function(x,y,T){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,x,!1,0,0,this.width,this.height,y,T):this.renderer.snapshotCanvas(this.canvas,x,!1,0,0,this.width,this.height,y,T),this},snapshotPixel:function(x,y,T){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,T,!0,x,y):this.renderer.snapshotCanvas(this.canvas,T,!0,x,y),this},preDestroy:function(){this._saved||(r.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});m.exports=g},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var f=Math.random()*16|0,r=e==="x"?f:f&3|8;return r.toString(16)})};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),f=t(0),r=t(11),o=t(15),a=t(92),s=t(1085),n=t(3),l=new f({Extends:o,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Flip,r.Mask,r.Pipeline,r.Size,r.Texture,r.Transform,r.Visible,r.ScrollFactor,s],initialize:function(h,u,d,c,p,g,x,y,T){c===void 0&&(c="__DEFAULT"),g===void 0&&(g=2),x===void 0&&(x=!0),o.call(this,h,"Rope"),this.anims=new e(this),this.points=g,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=c==="__DEFAULT",this.dirty=!1,this.horizontal=x,this._flipX=!1,this._flipY=!1,this._perp=new n,this.debugCallback=null,this.debugGraphic=null,this.setTexture(c,p),this.setPosition(u,d),this.setSizeToFrame(),this.initPipeline(a.ROPE_PIPELINE),Array.isArray(g)&&this.resizeArrays(g.length),this.setPoints(g,y,T),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(i,h){var u=this.anims.currentFrame;this.anims.update(i,h),this.anims.currentFrame!==u&&(this.updateUVs(),this.updateVertices())},play:function(i,h,u){return this.anims.play(i,h,u),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(i,h,u){return i===void 0&&(i=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(i,h,u))},setVertical:function(i,h,u){return i===void 0&&(i=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(i,h,u)):this},setTintFill:function(i){return i===void 0&&(i=!1),this.tintFill=i,this},setAlphas:function(i,h){var u=this.points.length;if(u<1)return this;var d=this.alphas;i===void 0?i=[1]:!Array.isArray(i)&&h===void 0&&(i=[i]);var c,p=0;if(h!==void 0)for(c=0;c<u;c++)p=c*2,d[p]=i,d[p+1]=h;else if(i.length===u)for(c=0;c<u;c++)p=c*2,d[p]=i[c],d[p+1]=i[c];else{var g=i[0];for(c=0;c<u;c++)p=c*2,i.length>p&&(g=i[p]),d[p]=g,i.length>p+1&&(g=i[p+1]),d[p+1]=g}return this},setColors:function(i){var h=this.points.length;if(h<1)return this;var u=this.colors;i===void 0?i=[16777215]:Array.isArray(i)||(i=[i]);var d,c=0;if(i.length===h)for(d=0;d<h;d++)c=d*2,u[c]=i[d],u[c+1]=i[d];else{var p=i[0];for(d=0;d<h;d++)c=d*2,i.length>c&&(p=i[c]),u[c]=p,i.length>c+1&&(p=i[c+1]),u[c+1]=p}return this},setPoints:function(i,h,u){if(i===void 0&&(i=2),typeof i=="number"){var d=i;d<2&&(d=2),i=[];var c,p,g;if(this.horizontal)for(g=-this.frame.halfWidth,p=this.frame.width/(d-1),c=0;c<d;c++)i.push({x:g+c*p,y:0});else for(g=-this.frame.halfHeight,p=this.frame.height/(d-1),c=0;c<d;c++)i.push({x:0,y:g+c*p})}var x=i.length,y=this.points.length;return x<1?(console.warn("Rope: Not enough points given"),this):(x===1&&(i.unshift({x:0,y:0}),x++),y!==x&&this.resizeArrays(x),this.points=i,this.updateUVs(),h!=null&&this.setColors(h),u!=null&&this.setAlphas(u),this)},updateUVs:function(){for(var i=this.uv,h=this.points.length,u=this.frame.u0,d=this.frame.v0,c=this.frame.u1,p=this.frame.v1,g=(c-u)/(h-1),x=(p-d)/(h-1),y=0;y<h;y++){var T=y*4,E,w,A,b;this.horizontal?(this._flipX?(E=c-y*g,A=c-y*g):(E=u+y*g,A=u+y*g),this._flipY?(w=p,b=d):(w=d,b=p)):(this._flipX?(E=u,A=c):(E=c,A=u),this._flipY?(w=p-y*x,b=p-y*x):(w=d+y*x,b=d+y*x)),i[T+0]=E,i[T+1]=w,i[T+2]=A,i[T+3]=b}return this},resizeArrays:function(i){var h=this.colors,u=this.alphas;this.vertices=new Float32Array(i*4),this.uv=new Float32Array(i*4),h=new Uint32Array(i*2),u=new Float32Array(i*2);for(var d=0;d<i*2;d++)h[d]=16777215,u[d]=1;return this.colors=h,this.alphas=u,this.dirty=!0,this},updateVertices:function(){var i=this._perp,h=this.points,u=this.vertices,d=h.length;if(this.dirty=!1,!(d<1)){for(var c,p=h[0],g=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,x=0;x<d;x++){var y=h[x],T=x*4;x<d-1?c=h[x+1]:c=y,i.x=c.y-p.y,i.y=-(c.x-p.x);var E=i.length();i.x/=E,i.y/=E,i.x*=g,i.y*=g,u[T]=y.x+i.x,u[T+1]=y.y+i.y,u[T+2]=y.x-i.x,u[T+3]=y.y-i.y,p=y}return this}},setDebug:function(i,h){return this.debugGraphic=i,!i&&!h?this.debugCallback=null:h?this.debugCallback=h:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(i,h,u){var d=i.debugGraphic,c=u[0],p=u[1],g=u[2],x=u[3];d.lineBetween(c,p,g,x);for(var y=4;y<h;y+=4){var T=u[y+0],E=u[y+1],w=u[y+2],A=u[y+3];d.lineBetween(c,p,T,E),d.lineBetween(g,x,w,A),d.lineBetween(g,x,T,E),d.lineBetween(T,E,w,A),c=T,p=E,g=w,x=A}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(i){return this._flipX=i,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(i){return this._flipY=i,this.updateUVs()}}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),f=t(31),r=t(0),o=t(11),a=t(22),s=t(15),n=t(458),l=t(6),i=t(202),h=t(1088),u=t(459),d=new r({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,h],initialize:function(p,g,x,y,T){g===void 0&&(g=0),x===void 0&&(x=0),s.call(this,p,"Text"),this.renderer=p.sys.renderer,this.setPosition(g,x),this.setOrigin(0,0),this.initPipeline(),this.canvas=f.create(this),this.context=this.canvas.getContext("2d"),this.style=new u(this,T),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=p.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(y),T&&T.padding&&this.setPadding(T.padding),T&&T.lineSpacing&&this.setLineSpacing(T.lineSpacing),p.sys.game.events.on(a.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){!this.style.rtl||(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",e(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(c){var p=this.style;if(p.wordWrapCallback){var g=p.wordWrapCallback.call(p.wordWrapCallbackScope,c,this);return Array.isArray(g)&&(g=g.join(`
`)),g}else return p.wordWrapWidth?p.wordWrapUseAdvanced?this.advancedWordWrap(c,this.context,this.style.wordWrapWidth):this.basicWordWrap(c,this.context,this.style.wordWrapWidth):c},advancedWordWrap:function(c,p,g){for(var x="",y=c.replace(/ +/gi," ").split(this.splitRegExp),T=y.length,E=0;E<T;E++){var w=y[E],A="";w=w.replace(/^ *|\s*$/gi,"");var b=p.measureText(w).width;if(b<g){x+=w+`
`;continue}for(var R=g,L=w.split(" "),B=0;B<L.length;B++){var D=L[B],G=D+" ",X=p.measureText(G).width;if(X>R){if(B===0){for(var H=G;H.length&&(H=H.slice(0,-1),X=p.measureText(H).width,!(X<=R)););if(!H.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var K=D.substr(H.length);L[B]=K,A+=H}var $=L[B].length?B:B+1,N=L.slice($).join(" ").replace(/[ \n]*$/gi,"");y[E+1]=N+" "+(y[E+1]||""),T=y.length;break}else A+=G,R-=X}x+=A.replace(/[ \n]*$/gi,"")+`
`}return x=x.replace(/[\s|\n]*$/gi,""),x},basicWordWrap:function(c,p,g){for(var x="",y=c.split(this.splitRegExp),T=y.length-1,E=p.measureText(" ").width,w=0;w<=T;w++){for(var A=g,b=y[w].split(" "),R=b.length-1,L=0;L<=R;L++){var B=b[L],D=p.measureText(B).width,G=D;L<R&&(G+=E),G>A&&L>0&&(x+=`
`,A=g),x+=B,L<R?(x+=" ",A-=G):A-=D}w<T&&(x+=`
`)}return x},getWrappedText:function(c){c===void 0&&(c=this._text),this.style.syncFont(this.canvas,this.context);var p=this.runWordWrap(c);return p.split(this.splitRegExp)},setText:function(c){return!c&&c!==0&&(c=""),Array.isArray(c)&&(c=c.join(`
`)),c!==this._text&&(this._text=c.toString(),this.updateText()),this},setStyle:function(c){return this.style.setStyle(c)},setFont:function(c){return this.style.setFont(c)},setFontFamily:function(c){return this.style.setFontFamily(c)},setFontSize:function(c){return this.style.setFontSize(c)},setFontStyle:function(c){return this.style.setFontStyle(c)},setFixedSize:function(c,p){return this.style.setFixedSize(c,p)},setBackgroundColor:function(c){return this.style.setBackgroundColor(c)},setFill:function(c){return this.style.setFill(c)},setColor:function(c){return this.style.setColor(c)},setStroke:function(c,p){return this.style.setStroke(c,p)},setShadow:function(c,p,g,x,y,T){return this.style.setShadow(c,p,g,x,y,T)},setShadowOffset:function(c,p){return this.style.setShadowOffset(c,p)},setShadowColor:function(c){return this.style.setShadowColor(c)},setShadowBlur:function(c){return this.style.setShadowBlur(c)},setShadowStroke:function(c){return this.style.setShadowStroke(c)},setShadowFill:function(c){return this.style.setShadowFill(c)},setWordWrapWidth:function(c,p){return this.style.setWordWrapWidth(c,p)},setWordWrapCallback:function(c,p){return this.style.setWordWrapCallback(c,p)},setAlign:function(c){return this.style.setAlign(c)},setResolution:function(c){return this.style.setResolution(c)},setLineSpacing:function(c){return this.lineSpacing=c,this.updateText()},setPadding:function(c,p,g,x){if(typeof c=="object"){var y=c,T=l(y,"x",null);T!==null?(c=T,g=T):(c=l(y,"left",0),g=l(y,"right",c));var E=l(y,"y",null);E!==null?(p=E,x=E):(p=l(y,"top",0),x=l(y,"bottom",p))}else c===void 0&&(c=0),p===void 0&&(p=c),g===void 0&&(g=c),x===void 0&&(x=p);return this.padding.left=c,this.padding.top=p,this.padding.right=g,this.padding.bottom=x,this.updateText()},setMaxLines:function(c){return this.style.setMaxLines(c)},updateText:function(){var c=this.canvas,p=this.context,g=this.style,x=g.resolution,y=g.metrics;g.syncFont(c,p);var T=this._text;(g.wordWrapWidth||g.wordWrapCallback)&&(T=this.runWordWrap(this._text));var E=T.split(this.splitRegExp),w=n(this,y,E),A=this.padding,b;g.fixedWidth===0?(this.width=w.width+A.left+A.right,b=w.width):(this.width=g.fixedWidth,b=this.width-A.left-A.right,b<w.width&&(b=w.width)),g.fixedHeight===0?this.height=w.height+A.top+A.bottom:this.height=g.fixedHeight;var R=this.width,L=this.height;this.updateDisplayOrigin(),R*=x,L*=x,R=Math.max(R,1),L=Math.max(L,1),c.width!==R||c.height!==L?(c.width=R,c.height=L,this.frame.setSize(R,L),g.syncFont(c,p)):p.clearRect(0,0,R,L),p.save(),p.scale(x,x),g.backgroundColor&&(p.fillStyle=g.backgroundColor,p.fillRect(0,0,R,L)),g.syncStyle(c,p),p.textBaseline="alphabetic",p.translate(A.left,A.top);for(var B,D,G=0;G<w.lines;G++){if(B=g.strokeThickness/2,D=g.strokeThickness/2+G*w.lineHeight+y.ascent,G>0&&(D+=w.lineSpacing*G),g.rtl)B=R-B;else if(g.align==="right")B+=b-w.lineWidths[G];else if(g.align==="center")B+=(b-w.lineWidths[G])/2;else if(g.align==="justify"){var X=.85;if(w.lineWidths[G]/w.width>=X){var H=w.width-w.lineWidths[G],K=p.measureText(" ").width,$=E[G].trim(),N=$.split(" ");H+=(E[G].length-$.length)*K;for(var I=Math.floor(H/K),z=0;I>0;)N[z]+=" ",z=(z+1)%(N.length-1||1),--I;E[G]=N.join(" ")}}this.autoRound&&(B=Math.round(B),D=Math.round(D)),g.strokeThickness&&(this.style.syncShadow(p,g.shadowStroke),p.strokeText(E[G],B,D)),g.color&&(this.style.syncShadow(p,g.shadowFill),p.fillText(E[G],B,D))}p.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(c,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var U=this.input;return U&&!U.customHitArea&&(U.hitArea.width=this.width,U.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(c){this.setText(c)}},toJSON:function(){var c=o.ToJSON(this),p={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return c.data=p,c},preDestroy:function(){this.style.rtl&&i(this.canvas),f.remove(this.canvas),this.texture.destroy()}});m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(0),r=t(11),o=t(22),a=t(15),s=t(361),n=t(192),l=t(1091),i=t(3),h=8,u=new f({Extends:a,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,l],initialize:function(c,p,g,x,y,T,E){var w=c.sys.renderer;a.call(this,c,"TileSprite");var A=c.sys.textures.get(T),b=A.get(E);!x||!y?(x=b.width,y=b.height):(x=Math.floor(x),y=Math.floor(y)),this._tilePosition=new i,this._tileScale=new i(1,1),this.dirty=!1,this.renderer=w,this.canvas=e.create(this,x,y),this.context=this.canvas.getContext("2d"),this.displayTexture=A,this.displayFrame=b,this._crop=this.resetCropObject(),this.texture=c.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=s(b.width),this.potHeight=s(b.height),this.fillCanvas=e.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(p,g),this.setSize(x,y),this.setFrame(E),this.setOriginFromFrame(),this.initPipeline(),c.sys.game.events.on(o.CONTEXT_RESTORED,function(R){if(!!R){var L=R.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=R.createTexture2D(0,L.LINEAR,L.LINEAR,L.REPEAT,L.REPEAT,L.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(d,c){return this.displayTexture=this.scene.sys.textures.get(d),this.setFrame(c)},setFrame:function(d){var c=this.displayTexture.get(d);return this.potWidth=s(c.width),this.potHeight=s(c.height),this.canvas.width=0,!c.cutWidth||!c.cutHeight?this.renderFlags&=~h:this.renderFlags|=h,this.displayFrame=c,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(d,c){return d!==void 0&&(this.tilePositionX=d),c!==void 0&&(this.tilePositionY=c),this},setTileScale:function(d,c){return d===void 0&&(d=this.tileScaleX),c===void 0&&(c=d),this.tileScaleX=d,this.tileScaleY=c,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var d=this.displayFrame;if(d.source.isRenderTexture||d.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var c=this.fillContext,p=this.fillCanvas,g=this.potWidth,x=this.potHeight;(!this.renderer||!this.renderer.gl)&&(g=d.cutWidth,x=d.cutHeight),c.clearRect(0,0,g,x),p.width=g,p.height=x,c.drawImage(d.source.image,d.cutX,d.cutY,d.cutWidth,d.cutHeight,0,0,g,x),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(p,this.fillPattern):this.fillPattern=c.createPattern(p,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var d=this.canvas;if((d.width!==this.width||d.height!==this.height)&&(d.width=this.width,d.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var c=this.context;this.scene.sys.game.config.antialias||n.disable(c);var p=this._tileScale.x,g=this._tileScale.y,x=this._tilePosition.x,y=this._tilePosition.y;c.clearRect(0,0,this.width,this.height),c.save(),c.scale(p,g),c.translate(-x,-y),c.fillStyle=this.fillPattern,c.fillRect(x,y,this.width/p,this.height/g),c.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),e.remove(this.canvas),e.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(d){this._tilePosition.x=d,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(d){this._tilePosition.y=d,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(d){this._tileScale.x=d,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(d){this._tileScale.y=d,this.dirty=!0}}});m.exports=u},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(18),r=t(11),o=t(75),a=t(22),s=t(51),n=t(15),l=t(70),i=t(222),h=t(1094),u=t(14),d=new e({Extends:n,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.ScrollFactor,r.Size,r.TextureCrop,r.Tint,r.Transform,r.Visible,h],initialize:function(p,g,x,y){n.call(this,p,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=i(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=u.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(g,x),this.initPipeline(),y&&this.changeSource(y,!1);var T=p.sys.game.events;T.on(a.PAUSE,this.globalPause,this),T.on(a.RESUME,this.globalResume,this);var E=p.sys.sound;E&&E.on(l.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(c,p,g){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var x=this.video;if(!x)return console.warn("Video not loaded"),this;c===void 0&&(c=x.loop);var y=this.scene.sys.sound;y&&y.mute&&this.setMute(!0),isNaN(p)||(this._markerIn=p),!isNaN(g)&&g>p&&(this._markerOut=g),x.loop=c;var T=this._callbacks,E=x.play();return E!==void 0?E.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(x.addEventListener("playing",T.play,!0),x.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),x.addEventListener("ended",T.end,!0),x.addEventListener("timeupdate",T.time,!0),x.addEventListener("seeking",T.seeking,!0),x.addEventListener("seeked",T.seeked,!0),this},changeSource:function(c,p,g,x,y){p===void 0&&(p=!0);var T=this.video;T&&this.stop();var E=this.scene.sys.cache.video.get(c);return E?(this.video=E,this._cacheKey=c,this._codePaused=E.paused,this._codeMuted=E.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,E,E.videoWidth,E.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,E.videoWidth,E.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,E.videoWidth,E.videoHeight)):this.updateTexture(),E.currentTime=0,this._lastUpdate=0,p&&this.play(g,x,y)):this.video=null,this},addMarker:function(c,p,g){return!isNaN(p)&&p>=0&&!isNaN(g)&&(this.markers[c]=[p,g]),this},playMarker:function(c,p){var g=this.markers[c];return g&&this.play(p,g[0],g[1]),this},removeMarker:function(c){return delete this.markers[c],this},snapshot:function(c,p){return c===void 0&&(c=this.width),p===void 0&&(p=this.height),this.snapshotArea(0,0,this.width,this.height,c,p)},snapshotArea:function(c,p,g,x,y,T){c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=this.width),x===void 0&&(x=this.height),y===void 0&&(y=g),T===void 0&&(T=x);var E=this.video,w=this.snapshotTexture;return w?(w.setSize(y,T),E&&w.context.drawImage(E,c,p,g,x,0,0,y,T)):(w=this.scene.sys.textures.createCanvas(i(),y,T),this.snapshotTexture=w,E&&w.context.drawImage(E,c,p,g,x,0,0,y,T)),w.update()},saveSnapshotTexture:function(c){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,c):this.snapshotTexture=this.scene.sys.textures.createCanvas(c,this.width,this.height),this.snapshotTexture},loadURL:function(c,p,g){p===void 0&&(p="loadeddata"),g===void 0&&(g=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var x=document.createElement("video");return x.controls=!1,g&&(x.muted=!0,x.defaultMuted=!0,x.setAttribute("autoplay","autoplay")),x.setAttribute("playsinline","playsinline"),x.setAttribute("preload","auto"),x.addEventListener("error",this._callbacks.error,!0),x.src=c,x.load(),this.video=x,this},loadMediaStream:function(c,p,g){p===void 0&&(p="loadeddata"),g===void 0&&(g=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var x=document.createElement("video");x.controls=!1,g&&(x.muted=!0,x.defaultMuted=!0,x.setAttribute("autoplay","autoplay")),x.setAttribute("playsinline","playsinline"),x.setAttribute("preload","auto"),x.addEventListener("error",this._callbacks.error,!0);try{x.srcObject=c}catch(y){x.src=window.URL.createObjectURL(c)}return x.load(),this.video=x,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(c){this.scene.sys.input.once(s.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(o.VIDEO_ERROR,this,c)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(o.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(c){this.stop(),this.emit(o.VIDEO_ERROR,this,c)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(o.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(o.VIDEO_PLAY,this)},completeHandler:function(){this.emit(o.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(o.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var c=this.video;if(c){var p=c.currentTime;p!==this._lastUpdate&&(this._lastUpdate=p,this.updateTexture(),p>=this._markerOut&&(c.loop?(c.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=p,this.emit(o.VIDEO_LOOP,this)):(this.emit(o.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(o.VIDEO_TIMEOUT,this))},updateTexture:function(){var c=this.video,p=c.videoWidth,g=c.videoHeight;if(!this.videoTexture)this.videoTexture=this.scene.sys.textures.create(this._key,c,p,g),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,p,g),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(o.VIDEO_CREATED,this,p,g);else{var x=this.videoTextureSource;x.source!==c&&(x.source=c,x.width=p,x.height=g),x.update()}},getVideoKey:function(){return this._cacheKey},seekTo:function(c){var p=this.video;if(p){var g=p.duration;if(g!==1/0&&!isNaN(g)){var x=g*c;this.setCurrentTime(x)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(c){var p=this.video;if(p){if(typeof c=="string"){var g=c[0],x=parseFloat(c.substr(1));g==="+"?c=p.currentTime+x:g==="-"&&(c=p.currentTime-x)}p.currentTime=c,this._lastUpdate=c}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(o.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(o.VIDEO_SEEKED,this);var c=this.video;c&&this.updateTexture()},getProgress:function(){var c=this.video;if(c){var p=c.currentTime,g=c.duration;if(g!==1/0&&!isNaN(g))return p/g}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(c){c===void 0&&(c=!0),this._codeMuted=c;var p=this.video;return p&&(p.muted=this._systemMuted?!0:c),this},isMuted:function(){return this._codeMuted},globalMute:function(c,p){this._systemMuted=p;var g=this.video;g&&(g.muted=this._codeMuted?!0:p)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(c){c===void 0&&(c=!0);var p=this.video;return this._codePaused=c,p&&(c?p.paused||p.pause():c||p.paused&&!this._systemPaused&&p.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(c){return c===void 0&&(c=1),this.video&&(this.video.volume=f(c,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(c){return this.video&&(this.video.playbackRate=c),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(c){return c===void 0&&(c=!0),this.video&&(this.video.loop=c),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(c,p){return p===void 0&&(p=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,c),this._key=c,this.flipY=p,this.videoTextureSource&&this.videoTextureSource.setFlipY(p),this.videoTexture},stop:function(){var c=this.video;if(c){var p=this._callbacks;for(var g in p)c.removeEventListener(g,p[g],!0);c.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(o.VIDEO_STOP,this),this},removeVideoElement:function(){var c=this.video;if(!!c){for(c.parentNode&&c.parentNode.removeChild(c);c.hasChildNodes();)c.removeChild(c.firstChild);c.removeAttribute("autoplay"),c.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var c=this.scene.sys.game.events;c.off(a.PAUSE,this.globalPause,this),c.off(a.RESUME,this.globalResume,this);var p=this.scene.sys.sound;p&&p.off(l.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(228),r=t(470),o=t(56),a=new e({initialize:function(n){this.type=o.POLYGON,this.area=0,this.points=[],n&&this.setTo(n)},contains:function(s,n){return f(this,s,n)},setTo:function(s){if(this.area=0,this.points=[],typeof s=="string"&&(s=s.split(" ")),!Array.isArray(s))return this;for(var n,l=Number.MAX_VALUE,i=0;i<s.length;i++)n={x:0,y:0},typeof s[i]=="number"||typeof s[i]=="string"?(n.x=parseFloat(s[i]),n.y=parseFloat(s[i+1]),i++):Array.isArray(s[i])?(n.x=s[i][0],n.y=s[i][1]):(n.x=s[i].x,n.y=s[i].y),this.points.push(n),n.y<l&&(l=n.y);return this.calculateArea(l),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var s=0,n,l,i=0;i<this.points.length-1;i++)n=this.points[i],l=this.points[i+1],s+=(l.x-n.x)*(n.y+l.y);return n=this.points[0],l=this.points[this.points.length-1],s+=(n.x-l.x)*(l.y+n.y),this.area=-s*.5,this.area},getPoints:function(s,n,l){return r(this,s,n,l)}});m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){for(var o=!1,a=-1,s=e.points.length-1;++a<e.points.length;s=a){var n=e.points[a].x,l=e.points[a].y,i=e.points[s].x,h=e.points[s].y;(l<=r&&r<h||h<=r&&r<l)&&f<(i-n)*(r-l)/(h-l)+n&&(o=!o)}return o};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(15),o=t(2),a=t(17),s=t(478),n=t(1176),l=t(25),i=new e({Extends:r,Mixins:[f.ComputedSize,f.Depth,f.GetBounds,f.Mask,f.Origin,f.ScrollFactor,f.Transform,f.Visible,n],initialize:function(u,d,c,p,g,x,y,T){c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=128),x===void 0&&(x=128),r.call(this,u,"Shader"),this.blendMode=-1,this.shader;var E=u.sys.renderer;this.renderer=E,this.gl=E.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=E.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=E.width,this._rendererHeight=E.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(c,p),this.setSize(g,x),this.setOrigin(.5,.5),this.setShader(d,y,T)},willRender:function(h){return this.renderToTexture?!0:!(r.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&h.id)},setRenderToTexture:function(h,u){if(u===void 0&&(u=!1),!this.renderToTexture){var d=this.width,c=this.height,p=this.renderer;this.glTexture=p.createTextureFromSource(null,d,c,0),this.glTexture.flipY=u,this.framebuffer=p.createFramebuffer(d,c,this.glTexture,!1),this._rendererWidth=d,this._rendererHeight=c,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),h&&(this.texture=this.scene.sys.textures.addGLTexture(h,this.glTexture,d,c))}return this.shader&&(p.pipelines.clear(),this.load(),this.flush(),p.pipelines.rebind()),this},setShader:function(h,u,d){if(u===void 0&&(u=[]),typeof h=="string"){var c=this.scene.sys.cache.shader;if(!c.has(h))return console.warn("Shader missing: "+h),this;this.shader=c.get(h)}else this.shader=h;var p=this.gl,g=this.renderer;this.program&&p.deleteProgram(this.program);var x=g.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);p.uniformMatrix4fv(p.getUniformLocation(x,"uViewMatrix"),!1,this.viewMatrix),p.uniformMatrix4fv(p.getUniformLocation(x,"uProjectionMatrix"),!1,this.projectionMatrix),p.uniform2f(p.getUniformLocation(x,"uResolution"),this.width,this.height),this.program=x;var y=new Date,T={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[y.getFullYear(),y.getMonth(),y.getDate(),y.getHours()*60*60+y.getMinutes()*60+y.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(!0,{},this.shader.uniforms,T):this.uniforms=T;for(var E=0;E<4;E++)u[E]&&this.setSampler2D("iChannel"+E,u[E],E,d);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(h){return this.pointer=h,this},projOrtho:function(h,u,d,c){var p=-1e3,g=1e3,x=1/(h-u),y=1/(d-c),T=1/(p-g),E=this.projectionMatrix;E[0]=-2*x,E[5]=-2*y,E[10]=2*T,E[12]=(h+u)*x,E[13]=(c+d)*y,E[14]=(g+p)*T;var w=this.program,A=this.gl,b=this.renderer;b.setProgram(w),A.uniformMatrix4fv(A.getUniformLocation(w,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=u,this._rendererHeight=d},initUniforms:function(){var h=this.gl,u=this.renderer.glFuncMap,d=this.program;this._textureCount=0;for(var c in this.uniforms){var p=this.uniforms[c],g=p.type,x=u[g];p.uniformLocation=h.getUniformLocation(d,c),g!=="sampler2D"&&(p.glMatrix=x.matrix,p.glValueLength=x.length,p.glFunc=x.func)}},setSampler2DBuffer:function(h,u,d,c,p,g){p===void 0&&(p=0),g===void 0&&(g={});var x=this.uniforms[h];return x.value=u,g.width=d,g.height=c,x.textureData=g,this._textureCount=p,this.initSampler2D(x),this},setSampler2D:function(h,u,d,c){d===void 0&&(d=0);var p=this.scene.sys.textures;if(p.exists(u)){var g=p.getFrame(u);if(g.glTexture&&g.glTexture.isRenderTexture)return this.setSampler2DBuffer(h,g.glTexture,g.width,g.height,d,c);var x=this.uniforms[h],y=g.source;x.textureKey=u,x.source=y.image,x.value=g.glTexture,y.isGLTexture&&(c||(c={}),c.width=y.width,c.height=y.height),c&&(x.textureData=c),this._textureCount=d,this.initSampler2D(x)}return this},setUniform:function(h,u){return s(this.uniforms,h,u),this},getUniform:function(h){return o(this.uniforms,h,null)},setChannel0:function(h,u){return this.setSampler2D("iChannel0",h,0,u)},setChannel1:function(h,u){return this.setSampler2D("iChannel1",h,1,u)},setChannel2:function(h,u){return this.setSampler2D("iChannel2",h,2,u)},setChannel3:function(h,u){return this.setSampler2D("iChannel3",h,3,u)},initSampler2D:function(h){if(!!h.value){var u=this.gl;u.activeTexture(u.TEXTURE0+this._textureCount),u.bindTexture(u.TEXTURE_2D,h.value);var d=h.textureData;if(d&&!h.value.isRenderTexture){var c=u[o(d,"magFilter","linear").toUpperCase()],p=u[o(d,"minFilter","linear").toUpperCase()],g=u[o(d,"wrapS","repeat").toUpperCase()],x=u[o(d,"wrapT","repeat").toUpperCase()],y=u[o(d,"format","rgba").toUpperCase()];if(d.repeat&&(g=u.REPEAT,x=u.REPEAT),u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,!!d.flipY),d.width){var T=o(d,"width",512),E=o(d,"height",2),w=o(d,"border",0);u.texImage2D(u.TEXTURE_2D,0,y,T,E,w,y,u.UNSIGNED_BYTE,null)}else u.texImage2D(u.TEXTURE_2D,0,y,u.RGBA,u.UNSIGNED_BYTE,h.source);u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,c),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,p),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,g),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,x)}this.renderer.setProgram(this.program),u.uniform1i(h.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var h=this.gl,u=this.uniforms,d,c,p,g,x,y=0;for(var T in u)d=u[T],p=d.glFunc,c=d.glValueLength,g=d.uniformLocation,x=d.value,x!==null&&(c===1?d.glMatrix?p.call(h,g,d.transpose,x):p.call(h,g,x):c===2?p.call(h,g,x.x,x.y):c===3?p.call(h,g,x.x,x.y,x.z):c===4?p.call(h,g,x.x,x.y,x.z,x.w):d.type==="sampler2D"&&(h.activeTexture(h.TEXTURE0+y),h.bindTexture(h.TEXTURE_2D,x),h.uniform1i(g,y),y++))},load:function(h){var u=this.gl,d=this.width,c=this.height,p=this.renderer,g=this.program,x=this.viewMatrix;if(!this.renderToTexture){var y=-this._displayOriginX,T=-this._displayOriginY;x[0]=h[0],x[1]=h[1],x[4]=h[2],x[5]=h[3],x[8]=h[4],x[9]=h[5],x[12]=x[0]*y+x[4]*T,x[13]=x[1]*y+x[5]*T}u.useProgram(g),u.uniformMatrix4fv(u.getUniformLocation(g,"uViewMatrix"),!1,x),u.uniform2f(u.getUniformLocation(g,"uResolution"),this.width,this.height);var E=this.uniforms,w=E.resolution;w.value.x=d,w.value.y=c,E.time.value=p.game.loop.getDuration();var A=this.pointer;if(A){var b=E.mouse,R=A.x/d,L=1-A.y/c;b.value.x=R.toFixed(2),b.value.y=L.toFixed(2)}this.syncUniforms()},flush:function(){var h=this.width,u=this.height,d=this.program,c=this.gl,p=this.vertexBuffer,g=this.renderer,x=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(g.setFramebuffer(this.framebuffer),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT)),c.bindBuffer(c.ARRAY_BUFFER,p);var y=c.getAttribLocation(d,"inPosition");y!==-1&&(c.enableVertexAttribArray(y),c.vertexAttribPointer(y,2,c.FLOAT,!1,x,0));var T=this.vertexViewF32;T[3]=u,T[4]=h,T[5]=u,T[8]=h,T[9]=u,T[10]=h;var E=6;c.bufferSubData(c.ARRAY_BUFFER,0,this.bytes.subarray(0,E*x)),c.drawArrays(c.TRIANGLES,0,E),this.renderToTexture&&g.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var h=this.gl;h.deleteProgram(this.program),h.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(36),o=t(116),a=t(15),s=t(479),n=t(480),l=t(19),i=t(69),h=t(1179),u=t(79),d=t(39),c=t(117),p=new e({Extends:a,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Mask,f.Pipeline,f.Size,f.Texture,f.Transform,f.Visible,f.ScrollFactor,h],initialize:function(x,y,T,E,w,A,b,R,L,B,D,G){y===void 0&&(y=0),T===void 0&&(T=0),E===void 0&&(E="__WHITE"),a.call(this,x,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new d,this.modelScale=new d(1,1,1),this.modelRotation=new d,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new i,this.viewPosition=new d,this.viewMatrix=new i,this.projectionMatrix=new i,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var X=x.sys.renderer;this.setPosition(y,T),this.setTexture(E,w),this.setSize(X.width,X.height),this.initPipeline(),this.setPerspective(X.width,X.height),A&&this.addVertices(A,b,R,L,B,D,G)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(g){return this.viewPosition.addScale(d.LEFT,g),this.dirtyCache[10]=1,this},panY:function(g){return this.viewPosition.y+=d.DOWN.y*g,this.dirtyCache[10]=1,this},panZ:function(g){return this.viewPosition.z+=g,this.dirtyCache[10]=1,this},setPerspective:function(g,x,y,T,E){return y===void 0&&(y=45),T===void 0&&(T=.01),E===void 0&&(E=1e3),this.projectionMatrix.perspective(r(y),g/x,T,E),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(g,x,y,T){return g===void 0&&(g=this.scene.sys.renderer.getAspectRatio()),x===void 0&&(x=1),y===void 0&&(y=-1e3),T===void 0&&(T=1e3),this.projectionMatrix.ortho(-g,g,-x,x,y,T),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(g){g.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(g,x,y,T,E,w,A,b,R){var L=this.scene.sys.cache.obj.get(g);return L&&n(L,this,x,y,T,E,w,A,b,R),this},sortByDepth:function(g,x){return g.depth-x.depth},depthSort:function(){return u(this.faces,this.sortByDepth),this},addVertex:function(g,x,y,T,E,w,A){var b=new c(g,x,y,T,E,w,A);return this.vertices.push(b),b},addFace:function(g,x,y){var T=new o(g,x,y);return this.faces.push(T),this.dirtyCache[9]=-1,T},addVertices:function(g,x,y,T,E,w,A){var b=s(g,x,y,T,E,w,A);return b&&(this.faces=this.faces.concat(b.faces),this.vertices=this.vertices.concat(b.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(g){return this.faces[g]},getFaceAt:function(g,x,y){y===void 0&&(y=this.scene.sys.cameras.main);for(var T=l(this,y).calc,E=this.faces,w=[],A=0;A<E.length;A++){var b=E[A];b.contains(g,x,T)&&w.push(b)}return u(w,this.sortByDepth)},setDebug:function(g,x){return this.debugGraphic=g,!g&&!x?this.debugCallback=null:x?this.debugCallback=x:this.debugCallback=this.renderDebug,this},isDirty:function(){var g=this.modelPosition,x=this.modelRotation,y=this.modelScale,T=this.dirtyCache,E=g.x,w=g.y,A=g.z,b=x.x,R=x.y,L=x.z,B=y.x,D=y.y,G=y.z,X=this.getFaceCount(),H=T[0],K=T[1],$=T[2],N=T[3],I=T[4],z=T[5],U=T[6],W=T[7],V=T[8],Z=T[9];return T[0]=E,T[1]=w,T[2]=A,T[3]=b,T[4]=R,T[5]=L,T[6]=B,T[7]=D,T[8]=G,T[9]=X,H!==E||K!==w||$!==A||N!==b||I!==R||z!==L||U!==B||W!==D||V!==G||Z!==X},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var g=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!g[10]&&!this.isDirty())){var x=this.width,y=this.height,T=this.viewMatrix,E=this.viewPosition;g[10]&&(T.identity(),T.translate(E),T.invert(),g[10]=0);var w=this.transformMatrix;w.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var A=E.z,b=this.faces,R=0;R<b.length;R++)b[R].transformCoordinatesLocal(w,x,y,A);this.depthSort()}},renderDebug:function(g,x){for(var y=g.debugGraphic,T=0;T<x.length;T++){var E=x[T],w=E.vertex1.tx,A=E.vertex1.ty,b=E.vertex2.tx,R=E.vertex2.ty,L=E.vertex3.tx,B=E.vertex3.ty;y.strokeTriangle(w,A,b,R,L,B)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});m.exports=p},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(50),f=function(r,o){return e(r.x,r.y,o.x,o.y)<=r.radius+o.radius};m.exports=f},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(233),r=function(o,a,s){if(s===void 0&&(s=[]),f(o,a)){var n=o.x1,l=o.y1,i=o.x2,h=o.y2,u=a.x,d=a.y,c=a.radius,p=i-n,g=h-l,x=n-u,y=l-d,T=p*p+g*g,E=2*(p*x+g*y),w=x*x+y*y-c*c,A=E*E-4*T*w,b,R;if(A===0){var L=-E/(2*T);b=n+L*p,R=l+L*g,L>=0&&L<=1&&s.push(new e(b,R))}else if(A>0){var B=(-E-Math.sqrt(A))/(2*T);b=n+B*p,R=l+B*g,B>=0&&B<=1&&s.push(new e(b,R));var D=(-E+Math.sqrt(A))/(2*T);b=n+D*p,R=l+D*g,D>=0&&D<=1&&s.push(new e(b,R))}}return s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),f=t(4),r=new f,o=function(a,s,n){if(n===void 0&&(n=r),e(s,a.x1,a.y1))return n.x=a.x1,n.y=a.y1,!0;if(e(s,a.x2,a.y2))return n.x=a.x2,n.y=a.y2,!0;var l=a.x2-a.x1,i=a.y2-a.y1,h=s.x-a.x1,u=s.y-a.y1,d=l*l+i*i,c=l,p=i;if(d>0){var g=(h*l+u*i)/d;c*=g,p*=g}n.x=a.x1+c,n.y=a.y1+p;var x=c*c+p*p;return x<=d&&c*l+p*i>=0&&e(s,n.x,n.y)};m.exports=o},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(96),r=t(488),o=function(a,s,n){if(n===void 0&&(n=[]),r(a,s))for(var l=s.getLineA(),i=s.getLineB(),h=s.getLineC(),u=s.getLineD(),d=[new e,new e,new e,new e],c=[f(l,a,d[0]),f(i,a,d[1]),f(h,a,d[2]),f(u,a,d[3])],p=0;p<4;p++)c[p]&&n.push(d[p]);return n};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r===void 0&&(r=!1),o===void 0&&(o=[]);for(var a=e.x3-e.x1,s=e.y3-e.y1,n=e.x2-e.x1,l=e.y2-e.y1,i=a*a+s*s,h=a*n+s*l,u=n*n+l*l,d=i*u-h*h,c=d===0?0:1/d,p,g,x,y,T,E,w=e.x1,A=e.y1,b=0;b<f.length&&(x=f[b].x-w,y=f[b].y-A,T=a*x+s*y,E=n*x+l*y,p=(u*T-h*E)*c,g=(i*E-h*T)*c,!(p>=0&&g>=0&&p+g<1&&(o.push({x:f[b].x,y:f[b].y}),r)));b++);return o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=Math.cos(o),s=Math.sin(o),n=e.x1-f,l=e.y1-r;return e.x1=n*a-l*s+f,e.y1=n*s+l*a+r,n=e.x2-f,l=e.y2-r,e.x2=n*a-l*s+f,e.y2=n*s+l*a+r,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.height===0?NaN:e.width/e.height};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=Math.cos(o),s=Math.sin(o),n=e.x1-f,l=e.y1-r;return e.x1=n*a-l*s+f,e.y1=n*s+l*a+r,n=e.x2-f,l=e.y2-r,e.x2=n*a-l*s+f,e.y2=n*s+l*a+r,n=e.x3-f,l=e.y3-r,e.x3=n*a-l*s+f,e.y3=n*s+l*a+r,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=t(156),r=function(o,a){var s=o===void 0?f():e({},o);if(a)for(var n in a)a[n]!==void 0&&(s[n]=a[n]);return s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=t(408),l=new e({Extends:r,initialize:function(h,u,d,c){var p="xml";if(s(u)){var g=u;u=a(g,"key"),d=a(g,"url"),c=a(g,"xhrSettings"),p=a(g,"extension",p)}var x={type:"xml",cache:h.cacheManager.xml,extension:p,responseType:"text",key:u,url:d,xhrSettings:c};r.call(this,h,x)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=n(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});o.register("xml",function(i,h,u){if(Array.isArray(i))for(var d=0;d<i.length;d++)this.addFile(new l(this,i[d]));else this.addFile(new l(this,i,h,u));return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d){var c="text",p="txt",g=i.cacheManager.text;if(s(h)){var x=h;h=a(x,"key"),u=a(x,"url"),d=a(x,"xhrSettings"),p=a(x,"extension",p),c=a(x,"type",c),g=a(x,"cache",g)}var y={type:c,cache:g,extension:p,responseType:"text",key:h,url:u,xhrSettings:d};r.call(this,i,y)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("text",function(l,i,h){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new n(this,l[u]));else this.addFile(new n(this,l,i,h));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(m,C){var t=function(e,f,r,o,a,s,n){s===void 0&&(s=!0),n===void 0&&(n=!1);var l=[],i=[],h=e.treeMinMax;if(h.minX=f,h.minY=r,h.maxX=f+o,h.maxY=r+a,n&&(i=e.staticTree.search(h)),s&&e.useTree)l=e.tree.search(h);else if(s){var u=e.bodies,d={position:{x:f,y:r},left:f,top:r,right:f+o,bottom:r+a,isCircle:!1},c=e.intersects;u.iterate(function(p){c(p,d)&&l.push(p)})}return i.concat(l)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),f=function(r,o,a,s){var n=0,l=r.deltaAbsX()+o.deltaAbsX()+s;return r._dx===0&&o._dx===0?(r.embedded=!0,o.embedded=!0):r._dx>o._dx?(n=r.right-o.x,n>l&&!a||r.checkCollision.right===!1||o.checkCollision.left===!1?n=0:(r.touching.none=!1,r.touching.right=!0,o.touching.none=!1,o.touching.left=!0,o.physicsType===e.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.right=!0),r.physicsType===e.STATIC_BODY&&!a&&(o.blocked.none=!1,o.blocked.left=!0))):r._dx<o._dx&&(n=r.x-o.width-o.x,-n>l&&!a||r.checkCollision.left===!1||o.checkCollision.right===!1?n=0:(r.touching.none=!1,r.touching.left=!0,o.touching.none=!1,o.touching.right=!0,o.physicsType===e.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.left=!0),r.physicsType===e.STATIC_BODY&&!a&&(o.blocked.none=!1,o.blocked.right=!0))),r.overlapX=n,o.overlapX=n,n};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),f=function(r,o,a,s){var n=0,l=r.deltaAbsY()+o.deltaAbsY()+s;return r._dy===0&&o._dy===0?(r.embedded=!0,o.embedded=!0):r._dy>o._dy?(n=r.bottom-o.y,n>l&&!a||r.checkCollision.down===!1||o.checkCollision.up===!1?n=0:(r.touching.none=!1,r.touching.down=!0,o.touching.none=!1,o.touching.up=!0,o.physicsType===e.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.down=!0),r.physicsType===e.STATIC_BODY&&!a&&(o.blocked.none=!1,o.blocked.up=!0))):r._dy<o._dy&&(n=r.y-o.bottom,-n>l&&!a||r.checkCollision.up===!1||o.checkCollision.down===!1?n=0:(r.touching.none=!1,r.touching.up=!0,o.touching.none=!1,o.touching.down=!0,o.physicsType===e.STATIC_BODY&&!a&&(r.blocked.none=!1,r.blocked.up=!0),r.physicsType===e.STATIC_BODY&&!a&&(o.blocked.none=!1,o.blocked.down=!0))),r.overlapY=n,o.overlapY=n,n};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return!(f.right<=e.left||f.bottom<=e.top||f.position.x>=e.right||f.position.y>=e.bottom)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(m,C){var t={};m.exports=t,function(){t.create=function(e,f){var r=e.bodyA,o=e.bodyB,a={id:t.id(r,o),bodyA:r,bodyB:o,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||o.isSensor,timeCreated:f,timeUpdated:f,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(a,e,f),a},t.update=function(e,f,r){if(e.collision=f,f.collided){var o=f.supports,a=e.activeContacts,s=f.parentA,n=f.parentB;e.inverseMass=s.inverseMass+n.inverseMass,e.friction=Math.min(s.friction,n.friction),e.frictionStatic=Math.max(s.frictionStatic,n.frictionStatic),e.restitution=Math.max(s.restitution,n.restitution),e.slop=Math.max(s.slop,n.slop);for(var l=0;l<o.length;l++)a[l]=o[l].contact;var i=o.length;i<a.length&&(a.length=i),e.separation=f.depth,t.setActive(e,!0,r)}else e.isActive===!0&&t.setActive(e,!1,r)},t.setActive=function(e,f,r){f?(e.isActive=!0,e.timeUpdated=r):(e.isActive=!1,e.activeContacts.length=0)},t.id=function(e,f){return e.id<f.id?"A"+e.id+"B"+f.id:"A"+f.id+"B"+e.id}}()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),f=function(r,o,a){var s=e(r,o,!0,a),n=e(r,o-1,!0,a),l=e(r,o+1,!0,a),i=e(r-1,o,!0,a),h=e(r+1,o,!0,a),u=s&&s.collides;return u&&(s.faceTop=!0,s.faceBottom=!0,s.faceLeft=!0,s.faceRight=!0),n&&n.collides&&(u&&(s.faceTop=!1),n.faceBottom=!u),l&&l.collides&&(u&&(s.faceBottom=!1),l.faceTop=!u),i&&i.collides&&(u&&(s.faceLeft=!1),i.faceRight=!u),h&&h.collides&&(u&&(s.faceRight=!1),h.faceLeft=!u),s&&!s.collides&&s.resetFaces(),s};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=r.baseTileWidth,a=r.tilemapLayer,s=0;return a&&(f||(f=a.scene.cameras.main),s=a.x+f.scrollX*(1-a.scrollFactorX),o*=a.scaleX),s+e*o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=r.baseTileHeight,a=r.tilemapLayer,s=0;return a&&(f||(f=a.scene.cameras.main),s=a.y+f.scrollY*(1-a.scrollFactorY),o*=a.scaleY),s+e*o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f===void 0&&(f=!0);var a=o.baseTileWidth,s=o.tilemapLayer;return s&&(r||(r=s.scene.cameras.main),e=e-(s.x+r.scrollX*(1-s.scrollFactorX)),a*=s.scaleX),f?Math.floor(e/a):e/a};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f===void 0&&(f=!0);var a=o.baseTileHeight,s=o.tilemapLayer;return s&&(r||(r=s.scene.cameras.main),e=e-(s.y+r.scrollY*(1-s.scrollFactorY)),a*=s.scaleY),f?Math.floor(e/a):e/a};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(85),f=t(119),r=t(252),o=t(72),a=function(s,n,l,i,h){if(i===void 0&&(i=!0),!f(n,l,h))return null;var u=h.data[l][n],d=u&&u.collides;if(s instanceof e)h.data[l][n]===null&&(h.data[l][n]=new e(h,s.index,n,l,h.tileWidth,h.tileHeight)),h.data[l][n].copy(s);else{var c=s;h.data[l][n]===null?h.data[l][n]=new e(h,c,n,l,h.tileWidth,h.tileHeight):h.data[l][n].index=c}var p=h.data[l][n],g=h.collideIndexes.indexOf(p.index)!==-1;return o(p,g),i&&d!==p.collides&&r(n,l,h),p};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=function(r){return r=r.toLowerCase(),r==="isometric"?e.ISOMETRIC:r==="staggered"?e.STAGGERED:r==="hexagonal"?e.HEXAGONAL:e.ORTHOGONAL};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(120),r=t(121),o=t(85),a=function(s,n,l,i,h){for(var u=new f({tileWidth:l,tileHeight:i}),d=new r({name:s,tileWidth:l,tileHeight:i,format:e.ARRAY_2D,layers:[u]}),c=[],p=n.length,g=0,x=0;x<n.length;x++){c[x]=[];for(var y=n[x],T=0;T<y.length;T++){var E=parseInt(y[T],10);isNaN(E)||E===-1?c[x][T]=h?null:new o(u,-1,T,x,l,i):c[x][T]=new o(u,E,T,x,l,i)}g===0&&(g=y.length)}return d.width=u.width=g,d.height=u.height=p,d.widthInPixels=u.widthInPixels=g*l,d.heightInPixels=u.heightInPixels=p*i,u.data=c,d};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(571),f=t(261),r=function(s){return{x:s.x,y:s.y}},o=["id","name","type","rotation","properties","visible","x","y","width","height"],a=function(s,n,l){n===void 0&&(n=0),l===void 0&&(l=0);var i=e(s,o);if(i.x+=n,i.y+=l,s.gid){var h=f(s.gid);i.gid=h.gid,i.flippedHorizontal=h.flippedHorizontal,i.flippedVertical=h.flippedVertical,i.flippedAntiDiagonal=h.flippedAntiDiagonal}else s.polyline?i.polyline=s.polyline.map(r):s.polygon?i.polygon=s.polygon.map(r):s.ellipse?i.ellipse=s.ellipse:s.text?i.text=s.text:s.point?i.point=!0:i.rectangle=!0;return i};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=2147483648,e=1073741824,f=536870912,r=function(o){var a=Boolean(o&t),s=Boolean(o&e),n=Boolean(o&f);o=o&~(t|e|f);var l=0,i=!1;return a&&s&&n?(l=Math.PI/2,i=!0):a&&s&&!n?(l=Math.PI,i=!1):a&&!s&&n?(l=Math.PI/2,i=!1):a&&!s&&!n?(l=0,i=!0):!a&&s&&n?(l=3*Math.PI/2,i=!1):!a&&s&&!n?(l=Math.PI,i=!0):!a&&!s&&n?(l=3*Math.PI/2,i=!0):!a&&!s&&!n&&(l=0,i=!1),{gid:o,flippedHorizontal:a,flippedVertical:s,flippedAntiDiagonal:n,rotation:l,flipped:i}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(121),r=t(564),o=t(580),a=function(s,n,l,i,h,u,d,c){l===void 0&&(l=32),i===void 0&&(i=32),h===void 0&&(h=10),u===void 0&&(u=10),c===void 0&&(c=!1);var p=null;if(Array.isArray(d)){var g=n!==void 0?n:"map";p=r(g,e.ARRAY_2D,d,l,i,c)}else if(n!==void 0){var x=s.cache.tilemap.get(n);x?p=r(n,x.format,x.data,l,i,c):console.warn("No map data found for key "+n)}return p===null&&(p=new f({tileWidth:l,tileHeight:i,width:h,height:u})),new o(s,p)};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=function(r){var o=e(r,"targets",null);return o===null||(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o])),o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a){return!!a.getActive&&typeof a.getActive=="function"}function e(a){return!!a.getStart&&typeof a.getStart=="function"}function f(a){return!!a.getEnd&&typeof a.getEnd=="function"}function r(a){return e(a)||f(a)||t(a)}var o=function(a,s){var n,l=function(E,w,A){return A},i=function(E,w,A){return A},h=null,u=typeof s;if(u==="number")l=function(){return s};else if(u==="string"){var d=s[0],c=parseFloat(s.substr(2));switch(d){case"+":l=function(E,w,A){return A+c};break;case"-":l=function(E,w,A){return A-c};break;case"*":l=function(E,w,A){return A*c};break;case"/":l=function(E,w,A){return A/c};break;default:l=function(){return parseFloat(s)}}}else if(u==="function")l=s;else if(u==="object")if(r(s))t(s)&&(h=s.getActive),f(s)&&(l=s.getEnd),e(s)&&(i=s.getStart);else if(s.hasOwnProperty("value"))n=o(a,s.value);else{var p=s.hasOwnProperty("to"),g=s.hasOwnProperty("from"),x=s.hasOwnProperty("start");if(p&&(g||x)){if(n=o(a,s.to),x){var y=o(a,s.start);n.getActive=y.getEnd}if(g){var T=o(a,s.from);n.getStart=T.getEnd}}}return n||(n={getActive:h,getEnd:l,getStart:i}),n};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),r=t(267),o=t(16),a=t(5),s=t(100),n=t(14),l=new e({Extends:f,initialize:function(h,u,d){f.call(this),this.parent=h,this.parentIsTimeline=h.hasOwnProperty("isTimeline"),this.data=u,this.totalData=u.length,this.targets=d,this.totalTargets=d.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=s.PENDING_ADD,this._pausedState=s.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(i){return i===void 0&&(i=0),this.data[i].current},setTimeScale:function(i){return this.timeScale=i,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===s.ACTIVE},isPaused:function(){return this.state===s.PAUSED},hasTarget:function(i){return this.targets.indexOf(i)!==-1},updateTo:function(i,h,u){u===void 0&&(u=!1);for(var d=0;d<this.totalData;d++){var c=this.data[d];c.key===i&&(c.end=h,u&&(c.start=c.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===s.ACTIVE?this.seek(0):this.state===s.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===s.PENDING_ADD?this:this.play()},calcDuration:function(){for(var i=0,h=n.MAX_SAFE_INTEGER,u=this.data,d=0;d<this.totalData;d++){var c=u[d];c.t1=c.duration+c.hold,c.yoyo&&(c.t1+=c.duration),c.t2=c.t1+c.repeatDelay,c.totalDuration=c.delay+c.t1,c.repeat===-1?c.totalDuration+=c.t2*999999999999:c.repeat>0&&(c.totalDuration+=c.t2*c.repeat),c.totalDuration>i&&(i=c.totalDuration),c.delay<h&&(h=c.delay)}this.duration=Math.max(i,.001),this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=h},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=s.PENDING_ADD,this._pausedState=s.INIT,!1;for(var i=this.data,h=this.totalTargets,u=0;u<this.totalData;u++){var d=i[u],c=d.target,p=d.gen,g=d.key,x=d.index;d.delay=p.delay(c,g,0,x,h,this),d.duration=Math.max(p.duration(c,g,0,x,h,this),.001),d.hold=p.hold(c,g,0,x,h,this),d.repeat=p.repeat(c,g,0,x,h,this),d.repeatDelay=p.repeatDelay(c,g,0,x,h,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=s.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(r.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=s.LOOP_DELAY):(this.state=s.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=s.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===s.PAUSED?this:(this.paused=!0,this._pausedState=this.state,this.state=s.PAUSED,this)},play:function(i){i===void 0&&(i=!1);var h=this.state;return h===s.INIT&&!this.parentIsTimeline?(this.resetTweenData(!1),this.state=s.ACTIVE,this):h===s.ACTIVE||h===s.PENDING_ADD&&this._pausedState===s.PENDING_ADD?this:!this.parentIsTimeline&&(h===s.PENDING_REMOVE||h===s.REMOVED)?(this.seek(0),this.parent.makeActive(this),this):(this.parentIsTimeline?(this.resetTweenData(i),this.calculatedOffset===0?this.state=s.ACTIVE:(this.countdown=this.calculatedOffset,this.state=s.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(i),this.state=s.ACTIVE,this.makeActive()),this)},resetTweenData:function(i){for(var h=this.data,u=this.totalData,d=this.totalTargets,c=0;c<u;c++){var p=h[c],g=p.target,x=p.key,y=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=p.repeat===-1?999999999999:p.repeat,i?(p.start=p.getStartValue(g,x,p.start,y,d,this),p.end=p.getEndValue(g,x,p.end,y,d,this),p.current=p.start,p.state=s.PLAYING_FORWARD):p.state=s.PENDING_RENDER,p.delay>0&&(p.elapsed=p.delay,p.state=s.DELAY),p.getActiveValue&&(g[x]=p.getActiveValue(p.target,p.key,p.start))}},resume:function(){return this.state===s.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(i,h){h===void 0&&(h=16.6),this.state===s.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var u=this.data,d=this.totalTargets,c=0;c<this.totalData;c++){var p=u[c],g=p.target,x=p.gen,y=p.key,T=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=p.repeat===-1?999999999999:p.repeat,p.delay=x.delay(g,y,0,T,d,this),p.duration=Math.max(x.duration(g,y,0,T,d,this),.001),p.hold=x.hold(g,y,0,T,d,this),p.repeat=x.repeat(g,y,0,T,d,this),p.repeatDelay=x.repeatDelay(g,y,0,T,d,this),p.current=p.start,p.state=s.PLAYING_FORWARD,this.updateTweenData(this,p,0,T,d),p.delay>0&&(p.elapsed=p.delay,p.state=s.DELAY)}this.calcDuration();var E=!1;this.state===s.PAUSED&&(E=!0,this.state=s.ACTIVE),this.isSeeking=!0;do this.update(0,h);while(this.totalProgress<i);return this.isSeeking=!1,E&&(this.state=s.PAUSED),this},setCallback:function(i,h,u,d){return this.callbacks[i]={func:h,scope:d,params:u},this},complete:function(i){return i===void 0&&(i=0),i?(this.state=s.COMPLETE_DELAY,this.countdown=i):(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(i){return this.state===s.ACTIVE&&i!==void 0&&this.seek(i),this.state!==s.REMOVED&&((this.state===s.PAUSED||this.state===s.PENDING_ADD)&&(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(r.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=s.PENDING_REMOVE),this},update:function(i,h){if(this.state===s.PAUSED)return!1;switch(this.useFrames&&(h=1*this.parent.timeScale),h*=this.timeScale,this.elapsed+=h,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=h,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case s.ACTIVE:!this.hasStarted&&!this.isSeeking&&(this.startDelay-=h,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(r.TWEEN_START,this.callbacks.onStart)));for(var u=!1,d=0;d<this.totalData;d++){var c=this.data[d];this.updateTweenData(this,c,h)&&(u=!0)}u||this.nextState();break;case s.LOOP_DELAY:this.countdown-=h,this.countdown<=0&&(this.state=s.ACTIVE,this.dispatchTweenEvent(r.TWEEN_LOOP,this.callbacks.onLoop));break;case s.OFFSET_DELAY:this.countdown-=h,this.countdown<=0&&(this.state=s.ACTIVE);break;case s.COMPLETE_DELAY:this.countdown-=h,this.countdown<=0&&(this.state=s.PENDING_REMOVE,this.dispatchTweenEvent(r.TWEEN_COMPLETE,this.callbacks.onComplete));break}return this.state===s.PENDING_REMOVE},dispatchTweenDataEvent:function(i,h,u){this.isSeeking||(this.emit(i,this,u.key,u.target,u.current,u.previous),h&&(h.params[1]=u.target,h.func.apply(h.scope,h.params)))},dispatchTweenEvent:function(i,h){this.isSeeking||(this.emit(i,this,this.targets),h&&(h.params[1]=this.targets,h.func.apply(h.scope,h.params)))},setStateFromEnd:function(i,h,u){return h.yoyo?(h.elapsed=u,h.progress=u/h.duration,h.flipX&&h.target.toggleFlipX(),h.flipY&&h.target.toggleFlipY(),this.dispatchTweenDataEvent(r.TWEEN_YOYO,i.callbacks.onYoyo,h),h.start=h.getStartValue(h.target,h.key,h.start,h.index,i.totalTargets,i),s.PLAYING_BACKWARD):h.repeatCounter>0?(h.repeatCounter--,h.elapsed=u,h.progress=u/h.duration,h.flipX&&h.target.toggleFlipX(),h.flipY&&h.target.toggleFlipY(),h.start=h.getStartValue(h.target,h.key,h.start,h.index,i.totalTargets,i),h.end=h.getEndValue(h.target,h.key,h.start,h.index,i.totalTargets,i),h.repeatDelay>0?(h.elapsed=h.repeatDelay-u,h.current=h.start,h.target[h.key]=h.current,s.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,i.callbacks.onRepeat,h),s.PLAYING_FORWARD)):s.COMPLETE},setStateFromStart:function(i,h,u){return h.repeatCounter>0?(h.repeatCounter--,h.elapsed=u,h.progress=u/h.duration,h.flipX&&h.target.toggleFlipX(),h.flipY&&h.target.toggleFlipY(),h.end=h.getEndValue(h.target,h.key,h.start,h.index,i.totalTargets,i),h.repeatDelay>0?(h.elapsed=h.repeatDelay-u,h.current=h.start,h.target[h.key]=h.current,s.REPEAT_DELAY):(this.dispatchTweenDataEvent(r.TWEEN_REPEAT,i.callbacks.onRepeat,h),s.PLAYING_FORWARD)):s.COMPLETE},updateTweenData:function(i,h,u){var d=h.target;switch(h.state){case s.PLAYING_FORWARD:case s.PLAYING_BACKWARD:if(!d){h.state=s.COMPLETE;break}var c=h.elapsed,p=h.duration,g=0;c+=u,c>p&&(g=c-p,c=p);var x=h.state===s.PLAYING_FORWARD,y=c/p;if(h.elapsed=c,h.progress=y,h.previous=h.current,y===1)x?(h.current=h.end,d[h.key]=h.end,h.hold>0?(h.elapsed=h.hold-g,h.state=s.HOLD_DELAY):h.state=this.setStateFromEnd(i,h,g)):(h.current=h.start,d[h.key]=h.start,h.state=this.setStateFromStart(i,h,g));else{var T=x?h.ease(y):h.ease(1-y);h.current=h.start+(h.end-h.start)*T,d[h.key]=h.current}this.dispatchTweenDataEvent(r.TWEEN_UPDATE,i.callbacks.onUpdate,h);break;case s.DELAY:h.elapsed-=u,h.elapsed<=0&&(h.elapsed=Math.abs(h.elapsed),h.state=s.PENDING_RENDER);break;case s.REPEAT_DELAY:h.elapsed-=u,h.elapsed<=0&&(h.elapsed=Math.abs(h.elapsed),h.state=s.PLAYING_FORWARD,this.dispatchTweenDataEvent(r.TWEEN_REPEAT,i.callbacks.onRepeat,h));break;case s.HOLD_DELAY:h.elapsed-=u,h.elapsed<=0&&(h.state=this.setStateFromEnd(i,h,Math.abs(h.elapsed)));break;case s.PENDING_RENDER:d?(h.start=h.getStartValue(d,h.key,d[h.key],h.index,i.totalTargets,i),h.end=h.getEndValue(d,h.key,h.start,h.index,i.totalTargets,i),h.current=h.start,d[h.key]=h.start,h.state=s.PLAYING_FORWARD):h.state=s.COMPLETE;break}return h.state!==s.COMPLETE}});l.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],a.register("tween",function(i){return this.scene.sys.tweens.add(i)}),o.register("tween",function(i){return this.scene.sys.tweens.create(i)}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a,s,n,l,i,h,u,d,c,p,g){return{target:e,index:f,key:r,getActiveValue:s,getEndValue:o,getStartValue:a,ease:n,duration:0,totalDuration:0,delay:0,yoyo:h,hold:0,repeat:0,repeatDelay:0,flipX:p,flipY:g,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:l,duration:i,hold:u,repeat:d,repeatDelay:c},state:0}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),f=function(r){return e(r,-Math.PI,Math.PI)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),f=function(r){return e(r,-180,180)};m.exports=f},function(m,C,t){var e={};m.exports=e;var f=t(83),r=t(32);(function(){e.fromVertices=function(o){for(var a={},s=0;s<o.length;s++){var n=(s+1)%o.length,l=f.normalise({x:o[n].y-o[s].y,y:o[s].x-o[n].x}),i=l.y===0?1/0:l.x/l.y;i=i.toFixed(3).toString(),a[i]=l}return r.values(a)},e.rotate=function(o,a){if(a!==0)for(var s=Math.cos(a),n=Math.sin(a),l=0;l<o.length;l++){var i=o[l],h;h=i.x*s-i.y*n,i.y=i.x*n+i.y*s,i.x=h}}})()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(m,C,t){var e={};m.exports=e;var f=t(274),r=t(250),o=t(84);(function(){e.collisions=function(a,s){for(var n=[],l=s.pairs.table,i=s.metrics,h=0;h<a.length;h++){var u=a[h][0],d=a[h][1];if(!((u.isStatic||u.isSleeping)&&(d.isStatic||d.isSleeping))&&!!e.canCollide(u.collisionFilter,d.collisionFilter)&&(i.midphaseTests+=1,o.overlaps(u.bounds,d.bounds)))for(var c=u.parts.length>1?1:0;c<u.parts.length;c++)for(var p=u.parts[c],g=d.parts.length>1?1:0;g<d.parts.length;g++){var x=d.parts[g];if(p===u&&x===d||o.overlaps(p.bounds,x.bounds)){var y=r.id(p,x),T=l[y],E;T&&T.isActive?E=T.collision:E=null;var w=f.collides(p,x,E);i.narrowphaseTests+=1,w.reused&&(i.narrowReuseCount+=1),w.collided&&(n.push(w),i.narrowDetections+=1)}}}return n},e.canCollide=function(a,s){return a.group===s.group&&a.group!==0?a.group>0:(a.mask&s.category)!==0&&(s.mask&a.category)!==0}})()},function(m,C,t){var e={};m.exports=e;var f=t(64),r=t(83);(function(){e.collides=function(o,a,s){var n,l,i,h,u=!1;if(s){var d=o.parent,c=a.parent,p=d.speed*d.speed+d.angularSpeed*d.angularSpeed+c.speed*c.speed+c.angularSpeed*c.angularSpeed;u=s&&s.collided&&p<.2,h=s}else h={collided:!1,bodyA:o,bodyB:a};if(s&&u){var g=h.axisBody,x=g===o?a:o,y=[g.axes[s.axisNumber]];if(i=e._overlapAxes(g.vertices,x.vertices,y),h.reused=!0,i.overlap<=0)return h.collided=!1,h}else{if(n=e._overlapAxes(o.vertices,a.vertices,o.axes),n.overlap<=0||(l=e._overlapAxes(a.vertices,o.vertices,a.axes),l.overlap<=0))return h.collided=!1,h;n.overlap<l.overlap?(i=n,h.axisBody=o):(i=l,h.axisBody=a),h.axisNumber=i.axisNumber}h.bodyA=o.id<a.id?o:a,h.bodyB=o.id<a.id?a:o,h.collided=!0,h.depth=i.overlap,h.parentA=h.bodyA.parent,h.parentB=h.bodyB.parent,o=h.bodyA,a=h.bodyB,r.dot(i.axis,r.sub(a.position,o.position))<0?h.normal={x:i.axis.x,y:i.axis.y}:h.normal={x:-i.axis.x,y:-i.axis.y},h.tangent=r.perp(h.normal),h.penetration=h.penetration||{},h.penetration.x=h.normal.x*h.depth,h.penetration.y=h.normal.y*h.depth;var T=e._findSupports(o,a,h.normal),E=[];if(f.contains(o.vertices,T[0])&&E.push(T[0]),f.contains(o.vertices,T[1])&&E.push(T[1]),E.length<2){var w=e._findSupports(a,o,r.neg(h.normal));f.contains(a.vertices,w[0])&&E.push(w[0]),E.length<2&&f.contains(a.vertices,w[1])&&E.push(w[1])}return E.length<1&&(E=[T[0]]),h.supports=E,h},e._overlapAxes=function(o,a,s){for(var n=r._temp[0],l=r._temp[1],i={overlap:Number.MAX_VALUE},h,u,d=0;d<s.length;d++){if(u=s[d],e._projectToAxis(n,o,u),e._projectToAxis(l,a,u),h=Math.min(n.max-l.min,l.max-n.min),h<=0)return i.overlap=h,i;h<i.overlap&&(i.overlap=h,i.axis=u,i.axisNumber=d)}return i},e._projectToAxis=function(o,a,s){for(var n=r.dot(a[0],s),l=n,i=1;i<a.length;i+=1){var h=r.dot(a[i],s);h>l?l=h:h<n&&(n=h)}o.min=n,o.max=l},e._findSupports=function(o,a,s){for(var n=Number.MAX_VALUE,l=r._temp[0],i=a.vertices,h=o.position,u,d,c,p,g=0;g<i.length;g++)d=i[g],l.x=d.x-h.x,l.y=d.y-h.y,u=-r.dot(s,l),u<n&&(n=u,c=d);var x=c.index-1>=0?c.index-1:i.length-1;d=i[x],l.x=d.x-h.x,l.y=d.y-h.y,n=-r.dot(s,l),p=d;var y=(c.index+1)%i.length;return d=i[y],l.x=d.x-h.x,l.y=d.y-h.y,u=-r.dot(s,l),u<n&&(p=d),[c,p]}})()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(m,C,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),f=[];f[e.BOTTOM_CENTER]=t(277),f[e.BOTTOM_LEFT]=t(278),f[e.BOTTOM_RIGHT]=t(279),f[e.LEFT_BOTTOM]=t(280),f[e.LEFT_CENTER]=t(281),f[e.LEFT_TOP]=t(282),f[e.RIGHT_BOTTOM]=t(283),f[e.RIGHT_CENTER]=t(284),f[e.RIGHT_TOP]=t(285),f[e.TOP_CENTER]=t(286),f[e.TOP_LEFT]=t(287),f[e.TOP_RIGHT]=t(288);var r=function(o,a,s,n,l){return f[s](o,a,n,l)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(87),r=t(88),o=t(52),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(s,f(n)+l),o(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(43),r=t(53),o=t(52),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(s,f(n)-l),o(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(44),r=t(54),o=t(52),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(s,f(n)+l),o(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(43),r=t(55),o=t(54),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)-l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),f=t(43),r=t(90),o=t(54),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)-l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),f=t(45),r=t(54),o=t(52),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(s,e(n)-l),o(s,f(n)-i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(44),r=t(55),o=t(53),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)+l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),f=t(44),r=t(90),o=t(53),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)+l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),f=t(45),r=t(53),o=t(52),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(s,e(n)+l),o(s,f(n)-i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(87),f=t(45),r=t(55),o=t(88),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,e(n)+l),r(s,f(n)-i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),f=t(45),r=t(55),o=t(53),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,e(n)-l),r(s,f(n)-i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),f=t(45),r=t(55),o=t(54),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,e(n)+l),r(s,f(n)-i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),f=[];f[e.BOTTOM_CENTER]=t(290),f[e.BOTTOM_LEFT]=t(291),f[e.BOTTOM_RIGHT]=t(292),f[e.CENTER]=t(293),f[e.LEFT_CENTER]=t(295),f[e.RIGHT_CENTER]=t(296),f[e.TOP_CENTER]=t(297),f[e.TOP_LEFT]=t(298),f[e.TOP_RIGHT]=t(299),f[e.LEFT_BOTTOM]=f[e.BOTTOM_LEFT],f[e.LEFT_TOP]=f[e.TOP_LEFT],f[e.RIGHT_BOTTOM]=f[e.BOTTOM_RIGHT],f[e.RIGHT_TOP]=f[e.TOP_RIGHT];var r=function(o,a,s,n,l){return f[s](o,a,n,l)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(87),r=t(55),o=t(88),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)+l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(43),r=t(55),o=t(53),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)-l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(44),r=t(55),o=t(54),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)+l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(294),f=t(87),r=t(89),o=function(a,s,n,l){return n===void 0&&(n=0),l===void 0&&(l=0),e(a,f(s)+n,r(s)+l),a};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(88),f=t(90),r=function(o,a,s){return e(o,a),f(o,s)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),f=t(43),r=t(90),o=t(53),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)-l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(89),f=t(44),r=t(90),o=t(54),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),o(s,f(n)+l),r(s,e(n)+i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(87),f=t(45),r=t(88),o=t(52),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(s,e(n)+l),o(s,f(n)-i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(43),f=t(45),r=t(53),o=t(52),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(s,e(n)-l),o(s,f(n)-i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(44),f=t(45),r=t(54),o=t(52),a=function(s,n,l,i){return l===void 0&&(l=0),i===void 0&&(i=0),r(s,e(n)+l),o(s,f(n)-i),s};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(169),f=t(98),r=t(14),o=t(4),a=function(s,n,l){l===void 0&&(l=new o);var i=f(n,0,r.PI2);return e(s,i,l)};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(302),f=t(169),r=t(98),o=t(14),a=function(s,n,l,i){i===void 0&&(i=[]),!n&&l>0&&(n=e(s)/l);for(var h=0;h<n;h++){var u=r(h/n,0,o.PI2);i.push(f(s,u))}return i};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 2*(Math.PI*e.radius)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=2,r={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o){return o===void 0&&(o=1),this.alpha=o,this},alpha:{get:function(){return this._alpha},set:function(o){var a=e(o,0,1);this._alpha=a,a===0?this.renderFlags&=~f:this.renderFlags|=f}}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f={_blendMode:e.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(r){typeof r=="string"&&(r=e[r]),r|=0,r>=-1&&(this._blendMode=r)}},setBlendMode:function(r){return this.blendMode=r,this}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_depth:0,depth:{get:function(){return this._depth},set:function(e){this.displayList&&this.displayList.queueDepthSort(),this._depth=e}},setDepth:function(e){return e===void 0&&(e=0),this.depth=e,this}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(171),f=t(130),r=function(o,a,s,n){n===void 0&&(n=[]),!a&&s>0&&(a=f(o)/s);for(var l=0;l<a;l++){var i=l/a;n.push(e(o,i))}return n};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o,a){return a===void 0&&(a=new e),a.x=r.x1+(r.x2-r.x1)*o,a.y=r.y1+(r.y2-r.y1)*o,a};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=Math.cos(o),s=Math.sin(o),n=e.x-f,l=e.y-r;return e.x=n*a-l*s+f,e.y=n*s+l*a+r,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(310),f=t(311),r={mask:null,setMask:function(o){return this.mask=o,this},clearMask:function(o){return o===void 0&&(o=!1),o&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(o){return o===void 0&&(this.texture||this.shader)&&(o=this),new e(this.scene,o)},createGeometryMask:function(o){return o===void 0&&this.type==="Graphics"&&(o=this),new f(this.scene,o)}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(22),r=t(91),o=new e({initialize:function(s,n){var l=s.sys.renderer;this.renderer=l,this.bitmapMask=n,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),s.sys.game.events.on(f.CONTEXT_RESTORED,this.createMask,this),l&&l.on(r.RESIZE,this.createMask,this)},createMask:function(){var a=this.renderer;if(!(!a||!a.gl)){this.mainTexture&&this.clearMask();var s=a.width,n=a.height,l=(s&s-1)===0&&(n&n-1)===0,i=a.gl,h=l?i.REPEAT:i.CLAMP_TO_EDGE,u=i.LINEAR;this.mainTexture=a.createTexture2D(0,u,u,h,h,i.RGBA,null,s,n),this.maskTexture=a.createTexture2D(0,u,u,h,h,i.RGBA,null,s,n),this.mainFramebuffer=a.createFramebuffer(s,n,this.mainTexture,!0),this.maskFramebuffer=a.createFramebuffer(s,n,this.maskTexture,!0)}},clearMask:function(){var a=this.renderer;!a||!a.gl||!this.mainTexture||(a.deleteTexture(this.mainTexture),a.deleteTexture(this.maskTexture),a.deleteFramebuffer(this.mainFramebuffer),a.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(a){this.bitmapMask=a},preRenderWebGL:function(a,s,n){a.pipelines.BITMAPMASK_PIPELINE.beginMask(this,s,n)},postRenderWebGL:function(a,s){a.pipelines.BITMAPMASK_PIPELINE.endMask(this,s)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(r.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a){this.geometryMask=a,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(r){return this.geometryMask=r,this},setInvertAlpha:function(r){return r===void 0&&(r=!0),this.invertAlpha=r,this},preRenderWebGL:function(r,o,a){var s=r.gl;r.flush(),r.maskStack.length===0&&(s.enable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),r.maskCount=0),r.currentCameraMask.mask!==this&&(r.currentMask.mask=this),r.maskStack.push({mask:this,camera:a}),this.applyStencil(r,a,!0),r.maskCount++},applyStencil:function(r,o,a){var s=r.gl,n=this.geometryMask,l=r.maskCount;s.colorMask(!1,!1,!1,!1),a?(s.stencilFunc(s.EQUAL,l,255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)):(s.stencilFunc(s.EQUAL,l+1,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),n.renderWebGL(r,n,o),r.flush(),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),a?this.invertAlpha?s.stencilFunc(s.NOTEQUAL,l+1,255):s.stencilFunc(s.EQUAL,l+1,255):this.invertAlpha?s.stencilFunc(s.NOTEQUAL,l,255):s.stencilFunc(s.EQUAL,l,255)},postRenderWebGL:function(r){var o=r.gl;r.maskStack.pop(),r.maskCount--,r.flush();var a=r.currentMask;if(r.maskStack.length===0)a.mask=null,o.disable(o.STENCIL_TEST);else{var s=r.maskStack[r.maskStack.length-1];s.mask.applyStencil(r,s.camera,!1),r.currentCameraMask.mask!==s.mask?(a.mask=s.mask,a.camera=s.camera):a.mask=null}},preRenderCanvas:function(r,o,a){var s=this.geometryMask;r.currentContext.save(),s.renderCanvas(r,s,a,null,null,!0),r.currentContext.clip()},postRenderCanvas:function(r){r.currentContext.restore()},destroy:function(){this.geometryMask=null}});m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(e,f){return f===void 0&&(f=e),this.scrollFactorX=e,this.scrollFactorY=f,this}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(25),r=t(177),o=t(269),a=t(270),s=t(3),n=4,l={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(i){this._scaleX=i,this._scaleY=i,i===0?this.renderFlags&=~n:this.renderFlags|=n}},scaleX:{get:function(){return this._scaleX},set:function(i){this._scaleX=i,i===0?this.renderFlags&=~n:this.renderFlags|=n}},scaleY:{get:function(){return this._scaleY},set:function(i){this._scaleY=i,i===0?this.renderFlags&=~n:this.renderFlags|=n}},angle:{get:function(){return a(this._rotation*e.RAD_TO_DEG)},set:function(i){this.rotation=a(i)*e.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(i){this._rotation=o(i)}},setPosition:function(i,h,u,d){return i===void 0&&(i=0),h===void 0&&(h=i),u===void 0&&(u=0),d===void 0&&(d=0),this.x=i,this.y=h,this.z=u,this.w=d,this},copyPosition:function(i){return i.x!==void 0&&(this.x=i.x),i.y!==void 0&&(this.y=i.y),i.z!==void 0&&(this.z=i.z),i.w!==void 0&&(this.w=i.w),this},setRandomPosition:function(i,h,u,d){return i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),this.x=i+Math.random()*u,this.y=h+Math.random()*d,this},setRotation:function(i){return i===void 0&&(i=0),this.rotation=i,this},setAngle:function(i){return i===void 0&&(i=0),this.angle=i,this},setScale:function(i,h){return i===void 0&&(i=1),h===void 0&&(h=i),this.scaleX=i,this.scaleY=h,this},setX:function(i){return i===void 0&&(i=0),this.x=i,this},setY:function(i){return i===void 0&&(i=0),this.y=i,this},setZ:function(i){return i===void 0&&(i=0),this.z=i,this},setW:function(i){return i===void 0&&(i=0),this.w=i,this},getLocalTransformMatrix:function(i){return i===void 0&&(i=new f),i.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(i,h){i===void 0&&(i=new f),h===void 0&&(h=new f);var u=this.parentContainer;if(!u)return this.getLocalTransformMatrix(i);for(i.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);u;)h.applyITRS(u.x,u.y,u._rotation,u._scaleX,u._scaleY),h.multiply(i,i),u=u.parentContainer;return i},getLocalPoint:function(i,h,u,d){u||(u=new s),d||(d=this.scene.sys.cameras.main);var c=d.scrollX,p=d.scrollY,g=i+c*this.scrollFactorX-c,x=h+p*this.scrollFactorY-p;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(g,x,u):r(g,x,this.x,this.y,this.rotation,this.scaleX,this.scaleY,u),this._originComponent&&(u.x+=this._displayOriginX,u.y+=this._displayOriginY),u},getParentRotation:function(){for(var i=0,h=this.parentContainer;h;)i+=h.rotation,h=h.parentContainer;return i}};m.exports=l},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=1,e={_visible:!0,visible:{get:function(){return this._visible},set:function(f){f?(this._visible=!0,this.renderFlags|=t):(this._visible=!1,this.renderFlags&=~t)}},setVisible:function(f){return this.visible=f,this}};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(130),f=t(4),r=function(o,a,s,n){if(n===void 0&&(n=[]),!a&&!s)return n;a?s=Math.round(e(o)/a):a=e(o)/s;for(var l=o.x,i=o.y,h=0,u=0;u<s;u++)switch(n.push(new f(l,i)),h){case 0:l+=a,l>=o.right&&(h=1,i+=l-o.right,l=o.right);break;case 1:i+=a,i>=o.bottom&&(h=2,l-=i-o.bottom,i=o.bottom);break;case 2:l-=a,l<=o.left&&(h=3,i-=o.left-l,l=o.left);break;case 3:i-=a,i<=o.top&&(h=0,i=o.top);break}return n};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){f===void 0&&(f=1),r===void 0&&(r=[]);var o=Math.round(e.x1),a=Math.round(e.y1),s=Math.round(e.x2),n=Math.round(e.y2),l=Math.abs(s-o),i=Math.abs(n-a),h=o<s?1:-1,u=a<n?1:-1,d=l-i;r.push({x:o,y:a});for(var c=1;!(o===s&&a===n);){var p=d<<1;p>-i&&(d-=i,o+=h),p<l&&(d+=l,a+=u),c%f===0&&r.push({x:o,y:a}),c++}return r};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(f.length){if(f.length===1)return f[0]}else return NaN;var o=1,a,s;if(r){if(e<f[0][r])return f[0];for(;f[o][r]<e;)o++}else for(;f[o]<e;)o++;return o>f.length&&(o=f.length),r?(a=f[o-1][r],s=f[o][r],s-e<=e-a?f[o]:f[o-1]):(a=f[o-1],s=f[o],s-e<=e-a?s:a)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s,n,l){l===void 0&&(l=!1),this.textureKey=o,this.textureFrame=a,this.index=s,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=l},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=/\D/g;return e.sort(function(r,o){return parseInt(r.replace(f,""),10)-parseInt(o.replace(f,""),10)}),e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(185),f=t(0),r=t(102),o=t(9),a=t(132),s=t(22),n=t(2),l=t(6),i=t(186),h=t(322),u=new f({Extends:o,initialize:function(c){o.call(this),this.game=c,this.textureManager=null,this.globalTimeScale=1,this.anims=new r,this.mixes=new r,this.paused=!1,this.name="AnimationManager",c.events.once(s.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(s.DESTROY,this.destroy,this)},addMix:function(d,c,p){var g=this.anims,x=this.mixes,y=typeof d=="string"?d:d.key,T=typeof c=="string"?c:c.key;if(g.has(y)&&g.has(T)){var E=x.get(y);E||(E={}),E[T]=p,x.set(y,E)}return this},removeMix:function(d,c){var p=this.mixes,g=typeof d=="string"?d:d.key,x=p.get(g);if(x)if(c){var y=typeof c=="string"?c:c.key;x.hasOwnProperty(y)&&delete x[y]}else c||p.delete(g);return this},getMix:function(d,c){var p=this.mixes,g=typeof d=="string"?d:d.key,x=typeof c=="string"?c:c.key,y=p.get(g);return y&&y.hasOwnProperty(x)?y[x]:0},add:function(d,c){return this.anims.has(d)?(console.warn("Animation key exists: "+d),this):(c.key=d,this.anims.set(d,c),this.emit(a.ADD_ANIMATION,d,c),this)},exists:function(d){return this.anims.has(d)},createFromAseprite:function(d,c){var p=[],g=this.game.cache.json.get(d);if(!g)return p;var x=this,y=l(g,"meta",null),T=l(g,"frames",null);if(y&&T){var E=l(y,"frameTags",[]);E.forEach(function(w){var A=[],b=n(w,"name",null),R=n(w,"from",0),L=n(w,"to",0),B=n(w,"direction","forward");if(!!b&&(!c||c&&c.indexOf(b)>-1)){for(var D=[],G=Number.MAX_SAFE_INTEGER,X=R;X<=L;X++){var H=X.toString(),K=T[H];if(K){var $=n(K,"duration",Number.MAX_SAFE_INTEGER);$<G&&(G=$),D.push({frame:H,duration:$})}}D.forEach(function(U){A.push({key:d,frame:U.frame,duration:G-U.duration})});var N=G*A.length;B==="reverse"&&(A=A.reverse());var I={key:b,frames:A,duration:N,yoyo:B==="pingpong"},z=x.create(I);z&&p.push(z)}})}return p},create:function(d){var c=d.key,p=!1;return c&&(p=this.get(c),p||(p=new e(this,c,d),this.anims.set(c,p),this.emit(a.ADD_ANIMATION,c,p))),p},fromJSON:function(d,c){c===void 0&&(c=!1),c&&this.anims.clear(),typeof d=="string"&&(d=JSON.parse(d));var p=[];if(d.hasOwnProperty("anims")&&Array.isArray(d.anims)){for(var g=0;g<d.anims.length;g++)p.push(this.create(d.anims[g]));d.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=d.globalTimeScale)}else d.hasOwnProperty("key")&&d.type==="frame"&&p.push(this.create(d));return p},generateFrameNames:function(d,c){var p=l(c,"prefix",""),g=l(c,"start",0),x=l(c,"end",0),y=l(c,"suffix",""),T=l(c,"zeroPad",0),E=l(c,"outputArray",[]),w=l(c,"frames",!1),A=this.textureManager.get(d);if(!A)return E;var b;if(c)for(w||(w=h(g,x)),b=0;b<w.length;b++){var R=p+i(w[b],T,"0",1)+y;A.has(R)?E.push({key:d,frame:R}):console.warn("generateFrameNames: Frame missing: "+R+" from texture: "+d)}else for(w=A.getFrameNames(),b=0;b<w.length;b++)E.push({key:d,frame:w[b]});return E},generateFrameNumbers:function(d,c){var p=l(c,"start",0),g=l(c,"end",-1),x=l(c,"first",!1),y=l(c,"outputArray",[]),T=l(c,"frames",!1),E=this.textureManager.get(d);if(!E)return y;x&&E.has(x)&&y.push({key:d,frame:x}),T||(g===-1&&(g=E.frameTotal-2),T=h(p,g));for(var w=0;w<T.length;w++)E.has(T[w])?y.push({key:d,frame:T[w]}):console.warn("generateFrameNumbers: Frame "+w+" missing from texture: "+d);return y},get:function(d){return this.anims.get(d)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(d,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)c[p].anims.play(d);return this},staggerPlay:function(d,c,p,g){p===void 0&&(p=0),g===void 0&&(g=!0),Array.isArray(c)||(c=[c]);var x=c.length;g||x--;for(var y=0;y<c.length;y++){var T=p<0?Math.abs(p)*(x-y):p*y;c[y].anims.playAfterDelay(d,T)}return this},remove:function(d){var c=this.get(d);return c&&(this.emit(a.REMOVE_ANIMATION,d,c),this.anims.delete(d),this.removeMix(d)),c},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(d){var c={anims:[],globalTimeScale:this.globalTimeScale};return d!==void 0&&d!==""?c.anims.push(this.anims.get(d).toJSON()):this.anims.each(function(p,g){c.anims.push(g.toJSON())}),c},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});m.exports=u},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=[],s,n=!1;if((r||o)&&(n=!0,r||(r=""),o||(o="")),f<e)for(s=e;s>=f;s--)n?a.push(r+s.toString()+o):a.push(s);else for(s=e;s<=f;s++)n?a.push(r+s.toString()+o):a.push(s);return a};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(102),r=t(9),o=t(324),a=new e({initialize:function(){this.entries=new f,this.events=new r},add:function(s,n){return this.entries.set(s,n),this.events.emit(o.ADD,this,s,n),this},has:function(s){return this.entries.has(s)},exists:function(s){return this.entries.has(s)},get:function(s){return this.entries.get(s)},remove:function(s){var n=this.get(s);return n&&(this.entries.delete(s),this.events.emit(o.REMOVE,this,s,n.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ADD:t(736),REMOVE:t(737)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(323),f=t(0),r=t(22),o=new f({initialize:function(s){this.game=s,this.binary=new e,this.bitmapFont=new e,this.json=new e,this.physics=new e,this.shader=new e,this.audio=new e,this.video=new e,this.text=new e,this.html=new e,this.obj=new e,this.tilemap=new e,this.xml=new e,this.custom={},this.game.events.once(r.DESTROY,this.destroy,this)},addCustom:function(a){return this.custom.hasOwnProperty(a)||(this.custom[a]=new e),this.custom[a]},destroy:function(){for(var a=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],s=0;s<a.length;s++)this[a[s]].destroy(),this[a[s]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(133),f=t(190),r=t(18),o=t(0),a=t(11),s=t(333),n=t(37),l=t(135),i=t(10),h=t(3),u=new o({Extends:e,Mixins:[a.Flip,a.Tint,a.Pipeline],initialize:function(c,p,g,x){e.call(this,c,p,g,x),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new s.Fade(this),this.flashEffect=new s.Flash(this),this.shakeEffect=new s.Shake(this),this.panEffect=new s.Pan(this),this.rotateToEffect=new s.RotateTo(this),this.zoomEffect=new s.Zoom(this),this.lerp=new h(1,1),this.followOffset=new h,this.deadzone=null,this._follow=null},setDeadzone:function(d,c){if(d===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=d,this.deadzone.height=c):this.deadzone=new i(0,0,d,c),this._follow){var p=this.width/2,g=this.height/2,x=this._follow.x-this.followOffset.x,y=this._follow.y-this.followOffset.y;this.midPoint.set(x,y),this.scrollX=x-p,this.scrollY=y-g}f(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(d,c,p,g,x,y){return this.fadeEffect.start(!1,d,c,p,g,!0,x,y)},fadeOut:function(d,c,p,g,x,y){return this.fadeEffect.start(!0,d,c,p,g,!0,x,y)},fadeFrom:function(d,c,p,g,x,y,T){return this.fadeEffect.start(!1,d,c,p,g,x,y,T)},fade:function(d,c,p,g,x,y,T){return this.fadeEffect.start(!0,d,c,p,g,x,y,T)},flash:function(d,c,p,g,x,y,T){return this.flashEffect.start(d,c,p,g,x,y,T)},shake:function(d,c,p,g,x){return this.shakeEffect.start(d,c,p,g,x)},pan:function(d,c,p,g,x,y,T){return this.panEffect.start(d,c,p,g,x,y,T)},rotateTo:function(d,c,p,g,x,y,T){return this.rotateToEffect.start(d,c,p,g,x,y,T)},zoomTo:function(d,c,p,g,x,y){return this.zoomEffect.start(d,c,p,g,x,y)},preRender:function(){this.renderList.length=0;var d=this.width,c=this.height,p=d*.5,g=c*.5,x=this.zoom,y=this.matrix,T=d*this.originX,E=c*this.originY,w=this._follow,A=this.deadzone,b=this.scrollX,R=this.scrollY;A&&f(A,this.midPoint.x,this.midPoint.y);var L=!1;if(w&&!this.panEffect.isRunning){var B=w.x-this.followOffset.x,D=w.y-this.followOffset.y;A?(B<A.x?b=l(b,b-(A.x-B),this.lerp.x):B>A.right&&(b=l(b,b+(B-A.right),this.lerp.x)),D<A.y?R=l(R,R-(A.y-D),this.lerp.y):D>A.bottom&&(R=l(R,R+(D-A.bottom),this.lerp.y))):(b=l(b,B-T,this.lerp.x),R=l(R,D-E,this.lerp.y)),L=!0}this.useBounds&&(b=this.clampX(b),R=this.clampY(R)),this.roundPixels&&(T=Math.round(T),E=Math.round(E),b=Math.round(b),R=Math.round(R)),this.scrollX=b,this.scrollY=R;var G=b+p,X=R+g;this.midPoint.set(G,X);var H=d/x,K=c/x,$=G-H/2,N=X-K/2;this.roundPixels&&($=Math.round($),N=Math.round(N)),this.worldView.setTo($,N,H,K),y.applyITRS(this.x+T,this.y+E,this.rotation,x,x),y.translate(-T,-E),this.shakeEffect.preRender(),L&&this.emit(n.FOLLOW_UPDATE,this,w)},setLerp:function(d,c){return d===void 0&&(d=1),c===void 0&&(c=d),this.lerp.set(d,c),this},setFollowOffset:function(d,c){return d===void 0&&(d=0),c===void 0&&(c=0),this.followOffset.set(d,c),this},startFollow:function(d,c,p,g,x,y){c===void 0&&(c=!1),p===void 0&&(p=1),g===void 0&&(g=p),x===void 0&&(x=0),y===void 0&&(y=x),this._follow=d,this.roundPixels=c,p=r(p,0,1),g=r(g,0,1),this.lerp.set(p,g),this.followOffset.set(x,y);var T=this.width/2,E=this.height/2,w=d.x-x,A=d.y-y;return this.midPoint.set(w,A),this.scrollX=w-T,this.scrollY=A-E,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(d,c){this.visible&&(this.rotateToEffect.update(d,c),this.panEffect.update(d,c),this.zoomEffect.update(d,c),this.shakeEffect.update(d,c),this.flashEffect.update(d,c),this.fadeEffect.update(d,c))},destroy:function(){this.resetFX(),e.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});m.exports=u},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=function(r){var o=new e;r=r.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(i,h,u,d){return h+h+u+u+d+d});var a=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(a){var s=parseInt(a[1],16),n=parseInt(a[2],16),l=parseInt(a[3],16);o.setTo(s,n,l)}return o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){return o<<24|e<<16|f<<8|r};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){o===void 0&&(o={h:0,s:0,v:0}),e/=255,f/=255,r/=255;var a=Math.min(e,f,r),s=Math.max(e,f,r),n=s-a,l=0,i=s===0?0:n/s,h=s;return s!==a&&(s===e?l=(f-r)/n+(f<r?6:0):s===f?l=(r-e)/n+2:s===r&&(l=(e-f)/n+4),l/=6),o.hasOwnProperty("_h")?(o._h=l,o._s=i,o._v=h):(o.h=l,o.s=i,o.v=h),o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>16777215?{a:e>>>24,r:e>>16&255,g:e>>8&255,b:e&255}:{a:255,r:e>>16&255,g:e>>8&255,b:e&255}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=function(r){return new e(r.r,r.g,r.b,r.a)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=function(r){var o=new e,a=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(r.toLowerCase());if(a){var s=parseInt(a[1],10),n=parseInt(a[2],10),l=parseInt(a[3],10),i=a[4]!==void 0?parseFloat(a[4]):1;o.setTo(s,n,l,i*255)}return o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(764),Out:t(765),InOut:t(766)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(767),Out:t(768),InOut:t(769)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(770),Out:t(771),InOut:t(772)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(773),Out:t(774),InOut:t(775)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(776),Out:t(777),InOut:t(778)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(779),Out:t(780),InOut:t(781)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports=t(782)},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(783),Out:t(784),InOut:t(785)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(786),Out:t(787),InOut:t(788)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(789),Out:t(790),InOut:t(791)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={In:t(792),Out:t(793),InOut:t(794)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports=t(795)},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(33),r=t(347),o=t(2),a=t(6),s=t(7),n=t(193),l=t(1),i=t(197),h=t(187),u=new e({initialize:function(c){c===void 0&&(c={});var p=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],g="#ffffff";this.width=a(c,"width",1024),this.height=a(c,"height",768),this.zoom=a(c,"zoom",1),this.parent=a(c,"parent",void 0),this.scaleMode=a(c,"scaleMode",0),this.expandParent=a(c,"expandParent",!0),this.autoRound=a(c,"autoRound",!1),this.autoCenter=a(c,"autoCenter",0),this.resizeInterval=a(c,"resizeInterval",500),this.fullscreenTarget=a(c,"fullscreenTarget",null),this.minWidth=a(c,"minWidth",0),this.maxWidth=a(c,"maxWidth",0),this.minHeight=a(c,"minHeight",0),this.maxHeight=a(c,"maxHeight",0);var x=a(c,"scale",null);x&&(this.width=a(x,"width",this.width),this.height=a(x,"height",this.height),this.zoom=a(x,"zoom",this.zoom),this.parent=a(x,"parent",this.parent),this.scaleMode=a(x,"mode",this.scaleMode),this.expandParent=a(x,"expandParent",this.expandParent),this.autoRound=a(x,"autoRound",this.autoRound),this.autoCenter=a(x,"autoCenter",this.autoCenter),this.resizeInterval=a(x,"resizeInterval",this.resizeInterval),this.fullscreenTarget=a(x,"fullscreenTarget",this.fullscreenTarget),this.minWidth=a(x,"min.width",this.minWidth),this.maxWidth=a(x,"max.width",this.maxWidth),this.minHeight=a(x,"min.height",this.minHeight),this.maxHeight=a(x,"max.height",this.maxHeight)),this.renderType=a(c,"type",f.AUTO),this.canvas=a(c,"canvas",null),this.context=a(c,"context",null),this.canvasStyle=a(c,"canvasStyle",null),this.customEnvironment=a(c,"customEnvironment",!1),this.sceneConfig=a(c,"scene",null),this.seed=a(c,"seed",[(Date.now()*Math.random()).toString()]),n.RND=new n.RandomDataGenerator(this.seed),this.gameTitle=a(c,"title",""),this.gameURL=a(c,"url","https://phaser.io"),this.gameVersion=a(c,"version",""),this.autoFocus=a(c,"autoFocus",!0),this.domCreateContainer=a(c,"dom.createContainer",!1),this.domBehindCanvas=a(c,"dom.behindCanvas",!1),this.domPointerEvents=a(c,"dom.pointerEvents","none"),this.inputKeyboard=a(c,"input.keyboard",!0),this.inputKeyboardEventTarget=a(c,"input.keyboard.target",window),this.inputKeyboardCapture=a(c,"input.keyboard.capture",[]),this.inputMouse=a(c,"input.mouse",!0),this.inputMouseEventTarget=a(c,"input.mouse.target",null),this.inputMousePreventDefaultDown=a(c,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=a(c,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=a(c,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=a(c,"input.mouse.preventDefaultWheel",!0),this.inputTouch=a(c,"input.touch",r.input.touch),this.inputTouchEventTarget=a(c,"input.touch.target",null),this.inputTouchCapture=a(c,"input.touch.capture",!0),this.inputActivePointers=a(c,"input.activePointers",1),this.inputSmoothFactor=a(c,"input.smoothFactor",0),this.inputWindowEvents=a(c,"input.windowEvents",!0),this.inputGamepad=a(c,"input.gamepad",!1),this.inputGamepadEventTarget=a(c,"input.gamepad.target",window),this.disableContextMenu=a(c,"disableContextMenu",!1),this.audio=a(c,"audio",{}),this.hideBanner=a(c,"banner",null)===!1,this.hidePhaser=a(c,"banner.hidePhaser",!1),this.bannerTextColor=a(c,"banner.text",g),this.bannerBackgroundColor=a(c,"banner.background",p),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(c,"fps",null);var y=a(c,"render",c);this.pipeline=a(y,"pipeline",null),this.antialias=a(y,"antialias",!0),this.antialiasGL=a(y,"antialiasGL",!0),this.mipmapFilter=a(y,"mipmapFilter","LINEAR"),this.desynchronized=a(y,"desynchronized",!1),this.roundPixels=a(y,"roundPixels",!1),this.pixelArt=a(y,"pixelArt",this.zoom!==1),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=a(y,"transparent",!1),this.clearBeforeRender=a(y,"clearBeforeRender",!0),this.preserveDrawingBuffer=a(y,"preserveDrawingBuffer",!1),this.premultipliedAlpha=a(y,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=a(y,"failIfMajorPerformanceCaveat",!1),this.powerPreference=a(y,"powerPreference","default"),this.batchSize=a(y,"batchSize",4096),this.maxTextures=a(y,"maxTextures",-1),this.maxLights=a(y,"maxLights",10);var T=a(c,"backgroundColor",0);this.backgroundColor=h(T),this.transparent&&(this.backgroundColor=h(0),this.backgroundColor.alpha=0),this.preBoot=a(c,"callbacks.preBoot",l),this.postBoot=a(c,"callbacks.postBoot",l),this.physics=a(c,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(c,"loader.baseURL",""),this.loaderPath=a(c,"loader.path","");var E=r.os.android?6:32;this.loaderMaxParallelDownloads=a(c,"loader.maxParallelDownloads",E),this.loaderCrossOrigin=a(c,"loader.crossOrigin",void 0),this.loaderResponseType=a(c,"loader.responseType",""),this.loaderAsync=a(c,"loader.async",!0),this.loaderUser=a(c,"loader.user",""),this.loaderPassword=a(c,"loader.password",""),this.loaderTimeout=a(c,"loader.timeout",0),this.loaderWithCredentials=a(c,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var w=a(c,"plugins",null),A=i.DefaultScene;w&&(Array.isArray(w)?this.defaultPlugins=w:s(w)&&(this.installGlobalPlugins=o(w,"global",[]),this.installScenePlugins=o(w,"scene",[]),Array.isArray(w.default)?A=w.default:Array.isArray(w.defaultMerge)&&(A=A.concat(w.defaultMerge)))),this.defaultPlugins=A;var b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(c,"images.default",b+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(c,"images.missing",b+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=a(c,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=f.WEBGL:window.FORCE_CANVAS&&(this.renderType=f.CANVAS))}});m.exports=u},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f={supportInverseAlpha:!1,supportNewBlendModes:!1};function r(){var s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",l=new Image;return l.onload=function(){var i=new Image;i.onload=function(){var h=e.create(i,6,1),u=h.getContext("2d");if(u.globalCompositeOperation="multiply",u.drawImage(l,0,0),u.drawImage(i,2,0),!u.getImageData(2,0,1,1))return!1;var d=u.getImageData(2,0,1,1).data;e.remove(i),f.supportNewBlendModes=d[0]===255&&d[1]===0&&d[2]===0},i.src=s+"/wCKxvRF"+n},l.src=s+"AP804Oa6"+n,!1}function o(){var s=e.create(this,2,1),n=s.getContext("2d");n.fillStyle="rgba(10, 20, 30, 0.5)",n.fillRect(0,0,1,1);var l=n.getImageData(0,0,1,1);if(l===null)return!1;n.putImageData(l,1,0);var i=n.getImageData(1,0,1,1);return i.data[0]===l.data[0]&&i.data[1]===l.data[1]&&i.data[2]===l.data[2]&&i.data[3]===l.data[3]}function a(){return typeof importScripts!="function"&&document!==void 0&&(f.supportNewBlendModes=r(),f.supportInverseAlpha=o()),f}m.exports=a()},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){return Math.atan2(o-f,r-e)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.atan2(f.y-e.y,f.x-e.x)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e=e%(2*Math.PI),e>=0?e:e+2*Math.PI};m.exports=t},function(m,C){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.x-f.x,o=e.y-f.y;return Math.sqrt(r*r+o*o)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=e-r,s=f-o;return a*a+s*s};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return r===void 0&&(r=1e-4),e>f-r};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return r===void 0&&(r=1e-4),e<f+r};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(357),f=function(r,o){return e(r)/e(o)/e(r-o)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(e===0)return 1;for(var f=e;--e;)f*=e;return f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(a,s){var n=1-a;return n*n*n*s}function e(a,s){var n=1-a;return 3*n*n*a*s}function f(a,s){return 3*(1-a)*a*a*s}function r(a,s){return a*a*a*s}var o=function(a,s,n,l,i){return t(a,s)+e(a,n)+f(a,l)+r(a,i)};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(o,a){var s=1-o;return s*s*a}function e(o,a){return 2*(1-o)*o*a}function f(o,a){return o*o*a}var r=function(o,a,s,n){return t(o,a)+e(o,s)+f(o,n)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(184),f=function(r,o,a){return o+(a-o)*e(r,0,1)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=Math.log(e)/.6931471805599453;return 1<<Math.ceil(f)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.x,o=e.y;return e.x=r*Math.cos(f)-o*Math.sin(f),e.y=r*Math.sin(f)+o*Math.cos(f),e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>0?Math.ceil(e):Math.floor(e)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o){this.val=new Float32Array(9),o?this.copy(o):this.identity()},clone:function(){return new f(this)},set:function(r){return this.copy(r)},copy:function(r){var o=this.val,a=r.val;return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o[6]=a[6],o[7]=a[7],o[8]=a[8],this},fromMat4:function(r){var o=r.val,a=this.val;return a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[4],a[4]=o[5],a[5]=o[6],a[6]=o[8],a[7]=o[9],a[8]=o[10],this},fromArray:function(r){var o=this.val;return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],this},identity:function(){var r=this.val;return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,this},transpose:function(){var r=this.val,o=r[1],a=r[2],s=r[5];return r[1]=r[3],r[2]=r[6],r[3]=o,r[5]=r[7],r[6]=a,r[7]=s,this},invert:function(){var r=this.val,o=r[0],a=r[1],s=r[2],n=r[3],l=r[4],i=r[5],h=r[6],u=r[7],d=r[8],c=d*l-i*u,p=-d*n+i*h,g=u*n-l*h,x=o*c+a*p+s*g;return x?(x=1/x,r[0]=c*x,r[1]=(-d*a+s*u)*x,r[2]=(i*a-s*l)*x,r[3]=p*x,r[4]=(d*o-s*h)*x,r[5]=(-i*o+s*n)*x,r[6]=g*x,r[7]=(-u*o+a*h)*x,r[8]=(l*o-a*n)*x,this):null},adjoint:function(){var r=this.val,o=r[0],a=r[1],s=r[2],n=r[3],l=r[4],i=r[5],h=r[6],u=r[7],d=r[8];return r[0]=l*d-i*u,r[1]=s*u-a*d,r[2]=a*i-s*l,r[3]=i*h-n*d,r[4]=o*d-s*h,r[5]=s*n-o*i,r[6]=n*u-l*h,r[7]=a*h-o*u,r[8]=o*l-a*n,this},determinant:function(){var r=this.val,o=r[0],a=r[1],s=r[2],n=r[3],l=r[4],i=r[5],h=r[6],u=r[7],d=r[8];return o*(d*l-i*u)+a*(-d*n+i*h)+s*(u*n-l*h)},multiply:function(r){var o=this.val,a=o[0],s=o[1],n=o[2],l=o[3],i=o[4],h=o[5],u=o[6],d=o[7],c=o[8],p=r.val,g=p[0],x=p[1],y=p[2],T=p[3],E=p[4],w=p[5],A=p[6],b=p[7],R=p[8];return o[0]=g*a+x*l+y*u,o[1]=g*s+x*i+y*d,o[2]=g*n+x*h+y*c,o[3]=T*a+E*l+w*u,o[4]=T*s+E*i+w*d,o[5]=T*n+E*h+w*c,o[6]=A*a+b*l+R*u,o[7]=A*s+b*i+R*d,o[8]=A*n+b*h+R*c,this},translate:function(r){var o=this.val,a=r.x,s=r.y;return o[6]=a*o[0]+s*o[3]+o[6],o[7]=a*o[1]+s*o[4]+o[7],o[8]=a*o[2]+s*o[5]+o[8],this},rotate:function(r){var o=this.val,a=o[0],s=o[1],n=o[2],l=o[3],i=o[4],h=o[5],u=Math.sin(r),d=Math.cos(r);return o[0]=d*a+u*l,o[1]=d*s+u*i,o[2]=d*n+u*h,o[3]=d*l-u*a,o[4]=d*i-u*s,o[5]=d*h-u*n,this},scale:function(r){var o=this.val,a=r.x,s=r.y;return o[0]=a*o[0],o[1]=a*o[1],o[2]=a*o[2],o[3]=s*o[3],o[4]=s*o[4],o[5]=s*o[5],this},fromQuat:function(r){var o=r.x,a=r.y,s=r.z,n=r.w,l=o+o,i=a+a,h=s+s,u=o*l,d=o*i,c=o*h,p=a*i,g=a*h,x=s*h,y=n*l,T=n*i,E=n*h,w=this.val;return w[0]=1-(p+x),w[3]=d+E,w[6]=c-T,w[1]=d-E,w[4]=1-(u+x),w[7]=g+y,w[2]=c+T,w[5]=g-y,w[8]=1-(u+p),this},normalFromMat4:function(r){var o=r.val,a=this.val,s=o[0],n=o[1],l=o[2],i=o[3],h=o[4],u=o[5],d=o[6],c=o[7],p=o[8],g=o[9],x=o[10],y=o[11],T=o[12],E=o[13],w=o[14],A=o[15],b=s*u-n*h,R=s*d-l*h,L=s*c-i*h,B=n*d-l*u,D=n*c-i*u,G=l*c-i*d,X=p*E-g*T,H=p*w-x*T,K=p*A-y*T,$=g*w-x*E,N=g*A-y*E,I=x*A-y*w,z=b*I-R*N+L*$+B*K-D*H+G*X;return z?(z=1/z,a[0]=(u*I-d*N+c*$)*z,a[1]=(d*K-h*I-c*H)*z,a[2]=(h*N-u*K+c*X)*z,a[3]=(l*N-n*I-i*$)*z,a[4]=(s*I-l*K+i*H)*z,a[5]=(n*K-s*N-i*X)*z,a[6]=(E*G-w*D+A*B)*z,a[7]=(w*L-T*G-A*R)*z,a[8]=(T*D-E*L+A*b)*z,this):null}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(364),r=t(1),o=t(39),a=1e-6,s=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),l=new o(1,0,0),i=new o(0,1,0),h=new o,u=new f,d=new e({initialize:function(p,g,x,y){this.onChangeCallback=r,this.set(p,g,x,y)},x:{get:function(){return this._x},set:function(c){this._x=c,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(c){this._y=c,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(c){this._z=c,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(c){this._w=c,this.onChangeCallback(this)}},copy:function(c){return this.set(c)},set:function(c,p,g,x,y){return y===void 0&&(y=!0),typeof c=="object"?(this._x=c.x||0,this._y=c.y||0,this._z=c.z||0,this._w=c.w||0):(this._x=c||0,this._y=p||0,this._z=g||0,this._w=x||0),y&&this.onChangeCallback(this),this},add:function(c){return this._x+=c.x,this._y+=c.y,this._z+=c.z,this._w+=c.w,this.onChangeCallback(this),this},subtract:function(c){return this._x-=c.x,this._y-=c.y,this._z-=c.z,this._w-=c.w,this.onChangeCallback(this),this},scale:function(c){return this._x*=c,this._y*=c,this._z*=c,this._w*=c,this.onChangeCallback(this),this},length:function(){var c=this.x,p=this.y,g=this.z,x=this.w;return Math.sqrt(c*c+p*p+g*g+x*x)},lengthSq:function(){var c=this.x,p=this.y,g=this.z,x=this.w;return c*c+p*p+g*g+x*x},normalize:function(){var c=this.x,p=this.y,g=this.z,x=this.w,y=c*c+p*p+g*g+x*x;return y>0&&(y=1/Math.sqrt(y),this._x=c*y,this._y=p*y,this._z=g*y,this._w=x*y),this.onChangeCallback(this),this},dot:function(c){return this.x*c.x+this.y*c.y+this.z*c.z+this.w*c.w},lerp:function(c,p){p===void 0&&(p=0);var g=this.x,x=this.y,y=this.z,T=this.w;return this.set(g+p*(c.x-g),x+p*(c.y-x),y+p*(c.z-y),T+p*(c.w-T))},rotationTo:function(c,p){var g=c.x*p.x+c.y*p.y+c.z*p.z;return g<-.999999?(h.copy(l).cross(c).length()<a&&h.copy(i).cross(c),h.normalize(),this.setAxisAngle(h,Math.PI)):g>.999999?this.set(0,0,0,1):(h.copy(c).cross(p),this._x=h.x,this._y=h.y,this._z=h.z,this._w=1+g,this.normalize())},setAxes:function(c,p,g){var x=u.val;return x[0]=p.x,x[3]=p.y,x[6]=p.z,x[1]=g.x,x[4]=g.y,x[7]=g.z,x[2]=-c.x,x[5]=-c.y,x[8]=-c.z,this.fromMat3(u).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(c,p){p=p*.5;var g=Math.sin(p);return this.set(g*c.x,g*c.y,g*c.z,Math.cos(p))},multiply:function(c){var p=this.x,g=this.y,x=this.z,y=this.w,T=c.x,E=c.y,w=c.z,A=c.w;return this.set(p*A+y*T+g*w-x*E,g*A+y*E+x*T-p*w,x*A+y*w+p*E-g*T,y*A-p*T-g*E-x*w)},slerp:function(c,p){var g=this.x,x=this.y,y=this.z,T=this.w,E=c.x,w=c.y,A=c.z,b=c.w,R=g*E+x*w+y*A+T*b;R<0&&(R=-R,E=-E,w=-w,A=-A,b=-b);var L=1-p,B=p;if(1-R>a){var D=Math.acos(R),G=Math.sin(D);L=Math.sin((1-p)*D)/G,B=Math.sin(p*D)/G}return this.set(L*g+B*E,L*x+B*w,L*y+B*A,L*T+B*b)},invert:function(){var c=this.x,p=this.y,g=this.z,x=this.w,y=c*c+p*p+g*g+x*x,T=y?1/y:0;return this.set(-c*T,-p*T,-g*T,x*T)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(c){c*=.5;var p=this.x,g=this.y,x=this.z,y=this.w,T=Math.sin(c),E=Math.cos(c);return this.set(p*E+y*T,g*E+x*T,x*E-g*T,y*E-p*T)},rotateY:function(c){c*=.5;var p=this.x,g=this.y,x=this.z,y=this.w,T=Math.sin(c),E=Math.cos(c);return this.set(p*E-x*T,g*E+y*T,x*E+p*T,y*E-g*T)},rotateZ:function(c){c*=.5;var p=this.x,g=this.y,x=this.z,y=this.w,T=Math.sin(c),E=Math.cos(c);return this.set(p*E+g*T,g*E-p*T,x*E+y*T,y*E-x*T)},calculateW:function(){var c=this.x,p=this.y,g=this.z;return this.w=-Math.sqrt(1-c*c-p*p-g*g),this},setFromEuler:function(c,p){var g=c.x/2,x=c.y/2,y=c.z/2,T=Math.cos(g),E=Math.cos(x),w=Math.cos(y),A=Math.sin(g),b=Math.sin(x),R=Math.sin(y);switch(c.order){case"XYZ":{this.set(A*E*w+T*b*R,T*b*w-A*E*R,T*E*R+A*b*w,T*E*w-A*b*R,p);break}case"YXZ":{this.set(A*E*w+T*b*R,T*b*w-A*E*R,T*E*R-A*b*w,T*E*w+A*b*R,p);break}case"ZXY":{this.set(A*E*w-T*b*R,T*b*w+A*E*R,T*E*R+A*b*w,T*E*w-A*b*R,p);break}case"ZYX":{this.set(A*E*w-T*b*R,T*b*w+A*E*R,T*E*R-A*b*w,T*E*w+A*b*R,p);break}case"YZX":{this.set(A*E*w+T*b*R,T*b*w+A*E*R,T*E*R-A*b*w,T*E*w-A*b*R,p);break}case"XZY":{this.set(A*E*w-T*b*R,T*b*w-A*E*R,T*E*R+A*b*w,T*E*w+A*b*R,p);break}}return this},setFromRotationMatrix:function(c){var p=c.val,g=p[0],x=p[4],y=p[8],T=p[1],E=p[5],w=p[9],A=p[2],b=p[6],R=p[10],L=g+E+R,B;return L>0?(B=.5/Math.sqrt(L+1),this.set((b-w)*B,(y-A)*B,(T-x)*B,.25/B)):g>E&&g>R?(B=2*Math.sqrt(1+g-E-R),this.set(.25*B,(x+T)/B,(y+A)/B,(b-w)/B)):E>R?(B=2*Math.sqrt(1+E-g-R),this.set((x+T)/B,.25*B,(w+b)/B,(y-A)/B)):(B=2*Math.sqrt(1+R-g-E),this.set((y+A)/B,(w+b)/B,.25*B,(T-x)/B)),this},fromMat3:function(c){var p=c.val,g=p[0]+p[4]+p[8],x;if(g>0)x=Math.sqrt(g+1),this.w=.5*x,x=.5/x,this._x=(p[7]-p[5])*x,this._y=(p[2]-p[6])*x,this._z=(p[3]-p[1])*x;else{var y=0;p[4]>p[0]&&(y=1),p[8]>p[y*3+y]&&(y=2);var T=s[y],E=s[T];x=Math.sqrt(p[y*3+y]-p[T*3+T]-p[E*3+E]+1),n[y]=.5*x,x=.5/x,n[T]=(p[T*3+y]+p[y*3+T])*x,n[E]=(p[E*3+y]+p[y*3+E])*x,this._x=n[0],this._y=n[1],this._z=n[2],this._w=(p[E*3+T]-p[T*3+E])*x}return this.onChangeCallback(this),this}});m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(367),f=t(31),r=t(33),o=t(191),a=function(s){var n=s.config;if((n.customEnvironment||n.canvas)&&n.renderType===r.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!n.customEnvironment&&!n.canvas&&n.renderType!==r.HEADLESS)if(n.renderType===r.CANVAS||n.renderType!==r.CANVAS&&!o.webGL)if(o.canvas)n.renderType=r.CANVAS;else throw new Error("Cannot create Canvas or WebGL context, aborting.");else n.renderType=r.WEBGL;n.antialias||f.disableSmoothing();var l=s.scale.baseSize,i=l.width,h=l.height;if(n.canvas?(s.canvas=n.canvas,s.canvas.width=i,s.canvas.height=h):s.canvas=f.create(s,i,h,n.renderType),n.canvasStyle&&(s.canvas.style=n.canvasStyle),n.antialias||e.setCrisp(s.canvas),n.renderType!==r.HEADLESS){var u,d;u=t(368),d=t(371),n.renderType===r.WEBGL?s.renderer=new d(s):(s.renderer=new u(s),s.context=s.renderer.gameContext)}};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCrisp:function(e){var f=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return f.forEach(function(r){e.style["image-rendering"]=r}),e.style.msInterpolationMode="nearest-neighbor",e},setBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(37),f=t(369),r=t(0),o=t(33),a=t(9),s=t(91),n=t(370),l=t(104),i=t(106),h=t(25),u=new r({Extends:a,initialize:function(c){a.call(this);var p=c.config;this.config={clearBeforeRender:p.clearBeforeRender,backgroundColor:p.backgroundColor,antialias:p.antialias,roundPixels:p.roundPixels},this.game=c,this.type=o.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=c.canvas;var g={alpha:c.config.transparent,desynchronized:c.config.desynchronized};this.gameContext=p.context?p.context:this.gameCanvas.getContext("2d",g),this.currentContext=this.gameContext,this.antialias=c.config.antialias,this.blendModes=n(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(i.READY,this.boot,this)},boot:function(){var d=this.game,c=d.scale.baseSize;this.width=c.width,this.height=c.height,this.isBooted=!0,d.scale.on(l.RESIZE,this.onResize,this),this.resize(c.width,c.height)},onResize:function(d,c){(c.width!==this.width||c.height!==this.height)&&this.resize(c.width,c.height)},resize:function(d,c){this.width=d,this.height=c,this.emit(s.RESIZE,d,c)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(d){return this.currentContext.globalCompositeOperation=d,this},setContext:function(d){return this.currentContext=d||this.gameContext,this},setAlpha:function(d){return this.currentContext.globalAlpha=d,this},preRender:function(){var d=this.gameContext,c=this.config,p=this.width,g=this.height;d.globalAlpha=1,d.globalCompositeOperation="source-over",d.setTransform(1,0,0,1,0,0),c.clearBeforeRender&&(d.clearRect(0,0,p,g),c.transparent||(d.fillStyle=c.backgroundColor.rgba,d.fillRect(0,0,p,g))),d.save(),this.drawCount=0,this.emit(s.PRE_RENDER)},render:function(d,c,p){var g=c.length;this.emit(s.RENDER,d,p);var x=p.x,y=p.y,T=p.width,E=p.height,w=p.renderToTexture?p.context:d.sys.context;w.save(),this.game.scene.customViewports&&(w.beginPath(),w.rect(x,y,T,E),w.clip()),this.currentContext=w;var A=p.mask;A&&A.preRenderCanvas(this,null,p._maskCamera),p.transparent||(w.fillStyle=p.backgroundColor.rgba,w.fillRect(x,y,T,E)),w.globalAlpha=p.alpha,w.globalCompositeOperation="source-over",this.drawCount+=g,p.renderToTexture&&p.emit(e.PRE_RENDER,p),p.matrix.copyToContext(w);for(var b=0;b<g;b++){var R=c[b];R.mask&&R.mask.preRenderCanvas(this,R,p),R.renderCanvas(this,R,p),R.mask&&R.mask.postRenderCanvas(this,R,p)}w.setTransform(1,0,0,1,0,0),w.globalCompositeOperation="source-over",w.globalAlpha=1,p.flashEffect.postRenderCanvas(w),p.fadeEffect.postRenderCanvas(w),p.dirty=!1,A&&A.postRenderCanvas(this),w.restore(),p.renderToTexture&&(p.emit(e.POST_RENDER,p),p.renderToGame&&d.sys.context.drawImage(p.canvas,x,y))},postRender:function(){var d=this.gameContext;d.restore(),this.emit(s.POST_RENDER);var c=this.snapshotState;c.callback&&(f(this.gameCanvas,c),c.callback=null)},snapshotCanvas:function(d,c,p,g,x,y,T,E,w){p===void 0&&(p=!1),this.snapshotArea(g,x,y,T,c,E,w);var A=this.snapshotState;return A.getPixel=p,f(this.canvas,A),A.callback=null,this},snapshot:function(d,c,p){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,d,c,p)},snapshotArea:function(d,c,p,g,x,y,T){var E=this.snapshotState;return E.callback=x,E.type=y,E.encoder=T,E.getPixel=!1,E.x=d,E.y=c,E.width=Math.min(p,this.gameCanvas.width),E.height=Math.min(g,this.gameCanvas.height),this},snapshotPixel:function(d,c,p){return this.snapshotArea(d,c,1,1,p),this.snapshotState.getPixel=!0,this},batchSprite:function(d,c,p,g){var x=p.alpha*d.alpha;if(x!==0){var y=this.currentContext,T=this._tempMatrix1,E=this._tempMatrix2,w=c.canvasData,A=w.x,b=w.y,R=c.cutWidth,L=c.cutHeight,B=c.customPivot,D=c.source.resolution,G=d.displayOriginX,X=d.displayOriginY,H=-G+c.x,K=-X+c.y;if(d.isCropped){var $=d._crop;($.flipX!==d.flipX||$.flipY!==d.flipY)&&c.updateCropUVs($,d.flipX,d.flipY),R=$.cw,L=$.ch,A=$.cx,b=$.cy,H=-G+$.x,K=-X+$.y,d.flipX&&(H>=0?H=-(H+R):H<0&&(H=Math.abs(H)-R)),d.flipY&&(K>=0?K=-(K+L):K<0&&(K=Math.abs(K)-L))}var N=1,I=1;d.flipX&&(B||(H+=-c.realWidth+G*2),N=-1),d.flipY&&(B||(K+=-c.realHeight+X*2),I=-1),E.applyITRS(d.x,d.y,d.rotation,d.scaleX*N,d.scaleY*I),T.copyFrom(p.matrix),g?(T.multiplyWithOffset(g,-p.scrollX*d.scrollFactorX,-p.scrollY*d.scrollFactorY),E.e=d.x,E.f=d.y):(E.e-=p.scrollX*d.scrollFactorX,E.f-=p.scrollY*d.scrollFactorY),T.multiply(E),y.save(),T.setToContext(y),y.globalCompositeOperation=this.blendModes[d.blendMode],y.globalAlpha=x,y.imageSmoothingEnabled=!(!this.antialias||c.source.scaleMode),d.mask&&d.mask.preRenderCanvas(this,d,p),y.drawImage(c.source.image,A,b,R,L,H,K,R/D,L/D),d.mask&&d.mask.postRenderCanvas(this,d,p),y.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});m.exports=u},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(38),r=t(2),o=function(a,s){var n=r(s,"callback"),l=r(s,"type","image/png"),i=r(s,"encoder",.92),h=Math.abs(Math.round(r(s,"x",0))),u=Math.abs(Math.round(r(s,"y",0))),d=r(s,"width",a.width),c=r(s,"height",a.height),p=r(s,"getPixel",!1);if(p){var g=a.getContext("2d"),x=g.getImageData(h,u,1,1),y=x.data;n.call(null,new f(y[0],y[1],y[2],y[3]/255))}else if(h!==0||u!==0||d!==a.width||c!==a.height){var T=e.createWebGL(this,d,c),E=T.getContext("2d");E.drawImage(a,h,u,d,c,0,0,d,c);var w=new Image;w.onerror=function(){n.call(null),e.remove(T)},w.onload=function(){n.call(null,w),e.remove(T)},w.src=T.toDataURL(l,i)}else{var A=new Image;A.onerror=function(){n.call(null)},A.onload=function(){n.call(null,A)},A.src=a.toDataURL(l,i)}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(348),r=function(){var o=[],a=f.supportNewBlendModes,s="source-over";return o[e.NORMAL]=s,o[e.ADD]="lighter",o[e.MULTIPLY]=a?"multiply":s,o[e.SCREEN]=a?"screen":s,o[e.OVERLAY]=a?"overlay":s,o[e.DARKEN]=a?"darken":s,o[e.LIGHTEN]=a?"lighten":s,o[e.COLOR_DODGE]=a?"color-dodge":s,o[e.COLOR_BURN]=a?"color-burn":s,o[e.HARD_LIGHT]=a?"hard-light":s,o[e.SOFT_LIGHT]=a?"soft-light":s,o[e.DIFFERENCE]=a?"difference":s,o[e.EXCLUSION]=a?"exclusion":s,o[e.HUE]=a?"hue":s,o[e.SATURATION]=a?"saturation":s,o[e.COLOR]=a?"color":s,o[e.LUMINOSITY]=a?"luminosity":s,o[e.ERASE]="destination-out",o[e.SOURCE_IN]="source-in",o[e.SOURCE_OUT]="source-out",o[e.SOURCE_ATOP]="source-atop",o[e.DESTINATION_OVER]="destination-over",o[e.DESTINATION_IN]="destination-in",o[e.DESTINATION_OUT]="destination-out",o[e.DESTINATION_ATOP]="destination-atop",o[e.LIGHTER]="lighter",o[e.COPY]="copy",o[e.XOR]="xor",o};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),f=t(37),r=t(0),o=t(33),a=t(9),s=t(91),n=t(22),l=t(138),i=t(69),h=t(1),u=t(372),d=t(141),c=t(104),p=t(106),g=t(12),x=t(383),y=new r({Extends:a,initialize:function(E){a.call(this);var w=E.config,A={alpha:w.transparent,desynchronized:w.desynchronized,depth:!1,antialias:w.antialiasGL,premultipliedAlpha:w.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:w.failIfMajorPerformanceCaveat,powerPreference:w.powerPreference,preserveDrawingBuffer:w.preserveDrawingBuffer};this.config={clearBeforeRender:w.clearBeforeRender,antialias:w.antialias,backgroundColor:w.backgroundColor,contextCreation:A,roundPixels:w.roundPixels,maxTextures:w.maxTextures,maxTextureSize:w.maxTextureSize,batchSize:w.batchSize,maxLights:w.maxLights,mipmapFilter:w.mipmapFilter},this.game=E,this.type=o.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=E.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=h,this.contextRestoredHandler=h,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(T){var E,w=this.game,A=this.canvas,b=T.backgroundColor;if(w.config.context?E=w.config.context:E=A.getContext("webgl",T.contextCreation)||A.getContext("experimental-webgl",T.contextCreation),!E||E.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=E;var R=this;this.contextLostHandler=function(z){R.contextLost=!0,R.game.events.emit(n.CONTEXT_LOST,R),z.preventDefault()},this.contextRestoredHandler=function(){R.contextLost=!1,R.init(R.config),R.game.events.emit(n.CONTEXT_RESTORED,R)},A.addEventListener("webglcontextlost",this.contextLostHandler,!1),A.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),w.context=E;for(var L=0;L<=27;L++)this.blendModes.push({func:[E.ONE,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_ADD});this.blendModes[1].func=[E.ONE,E.DST_ALPHA],this.blendModes[2].func=[E.DST_COLOR,E.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[E.ONE,E.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[E.ZERO,E.ONE_MINUS_SRC_ALPHA],equation:E.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=E.BYTE,this.glFormats[1]=E.SHORT,this.glFormats[2]=E.UNSIGNED_BYTE,this.glFormats[3]=E.UNSIGNED_SHORT,this.glFormats[4]=E.FLOAT,this.glFuncMap={mat2:{func:E.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:E.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:E.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:E.uniform1f,length:1},"1fv":{func:E.uniform1fv,length:1},"1i":{func:E.uniform1i,length:1},"1iv":{func:E.uniform1iv,length:1},"2f":{func:E.uniform2f,length:2},"2fv":{func:E.uniform2fv,length:1},"2i":{func:E.uniform2i,length:2},"2iv":{func:E.uniform2iv,length:1},"3f":{func:E.uniform3f,length:3},"3fv":{func:E.uniform3fv,length:1},"3i":{func:E.uniform3i,length:3},"3iv":{func:E.uniform3iv,length:1},"4f":{func:E.uniform4f,length:4},"4fv":{func:E.uniform4fv,length:1},"4i":{func:E.uniform4i,length:4},"4iv":{func:E.uniform4iv,length:1}};var B=E.getSupportedExtensions();(!T.maxTextures||T.maxTextures===-1)&&(T.maxTextures=E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS)),T.maxTextureSize||(T.maxTextureSize=E.getParameter(E.MAX_TEXTURE_SIZE));var D="WEBGL_compressed_texture_",G="WEBKIT_"+D;this.compression.ETC1=E.getExtension(D+"etc1")||E.getExtension(G+"etc1"),this.compression.PVRTC=E.getExtension(D+"pvrtc")||E.getExtension(G+"pvrtc"),this.compression.S3TC=E.getExtension(D+"s3tc")||E.getExtension(G+"s3tc"),this.supportedExtensions=B;var X="ANGLE_instanced_arrays";this.instancedArraysExtension=B.indexOf(X)>-1?E.getExtension(X):null;var H="OES_vertex_array_object";this.vaoExtension=B.indexOf(H)>-1?E.getExtension(H):null,E.disable(E.DEPTH_TEST),E.disable(E.CULL_FACE),E.enable(E.BLEND),E.clearColor(b.redGL,b.greenGL,b.blueGL,b.alphaGL),this.mipmapFilter=E[T.mipmapFilter],this.maxTextures=g.checkShaderMax(E,T.maxTextures),this.textureIndexes=[];var K=this.tempTextures;if(Array.isArray(K))for(var $=0;L<this.maxTextures;$++)E.deleteTexture(K[$]);else K=new Array(this.maxTextures);for(var N=0;N<this.maxTextures;N++){var I=E.createTexture();E.activeTexture(E.TEXTURE0+N),E.bindTexture(E.TEXTURE_2D,I),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),K[N]=I,this.textureIndexes.push(N)}return this.tempTextures=K,this.currentActiveTexture=1,this.startActiveTexture++,E.activeTexture(E.TEXTURE1),this.pipelines=new u(this),this.setBlendMode(o.BlendModes.NORMAL),this.projectionMatrix=new i().identity(),w.textures.once(p.READY,this.boot,this),this},boot:function(){var T=this.game,E=this.pipelines,w=T.scale.baseSize;this.width=w.width,this.height=w.height,this.isBooted=!0,this.renderTarget=new d(this,this.width,this.height,1,0,!0,!0),E.boot(T.config.pipeline),this.blankTexture=T.textures.getFrame("__DEFAULT"),this.whiteTexture=T.textures.getFrame("__WHITE");var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,null),A.enable(A.SCISSOR_TEST),T.scale.on(c.RESIZE,this.onResize,this),this.resize(w.width,w.height)},onResize:function(T,E){(E.width!==this.width||E.height!==this.height)&&this.resize(E.width,E.height)},beginCapture:function(T,E){T===void 0&&(T=this.width),E===void 0&&(E=this.height),this.renderTarget.bind(!0,T,E),this.setProjectionMatrix(T,E),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(T,E){var w=this.gl;return this.width=T,this.height=E,this.setProjectionMatrix(T,E),w.viewport(0,0,T,E),this.drawingBufferHeight=w.drawingBufferHeight,w.scissor(0,w.drawingBufferHeight-E,T,E),this.defaultScissor[2]=T,this.defaultScissor[3]=E,this.emit(s.RESIZE,T,E),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(T,E){return(T!==this.projectionWidth||E!==this.projectionHeight)&&(this.projectionWidth=T,this.projectionHeight=E,this.projectionMatrix.ortho(0,T,E,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(T){return this.supportedExtensions?this.supportedExtensions.indexOf(T):!1},getExtension:function(T){return this.hasExtension(T)?(T in this.extensions||(this.extensions[T]=this.gl.getExtension(T)),this.extensions[T]):null},flush:function(){this.pipelines.flush()},pushScissor:function(T,E,w,A,b){b===void 0&&(b=this.drawingBufferHeight);var R=this.scissorStack,L=[T,E,w,A];return R.push(L),this.setScissor(T,E,w,A,b),this.currentScissor=L,L},setScissor:function(T,E,w,A,b){b===void 0&&(b=this.drawingBufferHeight);var R=this.gl,L=this.currentScissor,B=w>0&&A>0;if(L&&B){var D=L[0],G=L[1],X=L[2],H=L[3];B=D!==T||G!==E||X!==w||H!==A}B&&(this.flush(),R.scissor(T,b-E-A,w,A))},resetScissor:function(){var T=this.gl;T.enable(T.SCISSOR_TEST);var E=this.currentScissor;if(E){var w=E[0],A=E[1],b=E[2],R=E[3];b>0&&R>0&&T.scissor(w,this.drawingBufferHeight-A-R,b,R)}},popScissor:function(){var T=this.scissorStack;T.pop();var E=T[T.length-1];E&&this.setScissor(E[0],E[1],E[2],E[3]),this.currentScissor=E},hasActiveStencilMask:function(){var T=this.currentMask.mask,E=this.currentCameraMask.mask;return T&&T.isStencil||E&&E.isStencil},resetViewport:function(){var T=this.gl;T.viewport(0,0,this.width,this.height),this.drawingBufferHeight=T.drawingBufferHeight},setBlendMode:function(T,E){E===void 0&&(E=!1);var w=this.gl,A=this.blendModes[T];return E||T!==o.BlendModes.SKIP_CHECK&&this.currentBlendMode!==T?(this.flush(),w.enable(w.BLEND),w.blendEquation(A.equation),A.func.length>2?w.blendFuncSeparate(A.func[0],A.func[1],A.func[2],A.func[3]):w.blendFunc(A.func[0],A.func[1]),this.currentBlendMode=T,!0):!1},addBlendMode:function(T,E){var w=this.blendModes.push({func:T,equation:E});return w-1},updateBlendMode:function(T,E,w){return this.blendModes[T]&&(this.blendModes[T].func=E,w&&(this.blendModes[T].equation=w)),this},removeBlendMode:function(T){return T>17&&this.blendModes[T]&&this.blendModes.splice(T,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(T){if(this.pipelines.forceZero())return this.setTextureZero(T.glTexture,!0),0;var E=this.gl,w=this.currentActiveTexture;return T.glIndexCounter<this.startActiveTexture&&(T.glIndexCounter=this.startActiveTexture,w<this.maxTextures?(T.glIndex=w,E.activeTexture(E.TEXTURE0+w),E.bindTexture(E.TEXTURE_2D,T.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,T.glIndexCounter=this.startActiveTexture,T.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,T.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,T.glIndex},isNewNormalMap:function(T,E){return this.textureZero!==T||this.normalTexture!==E},setTextureZero:function(T,E){if(this.textureZero!==T){E&&this.flush();var w=this.gl;w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,T),this.textureZero=T}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(T){if(this.normalTexture!==T){var E=this.gl;E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,T),this.normalTexture=T,this.currentActiveTexture===1&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var T=this.gl,E=this.tempTextures,w=0;w<E.length;w++)T.activeTexture(T.TEXTURE0+w),T.bindTexture(T.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(T){if(T===void 0&&(T=!1),!this.isTextureClean){this.flush();var E=this.gl,w=this.tempTextures;if(T){for(var A=0;A<w.length;A++)E.activeTexture(E.TEXTURE0+A),E.bindTexture(E.TEXTURE_2D,w[A]);E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,w[1]),this.isTextureClean=!0}else E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,w[0]),E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,w[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(T){if(this.pipelines.forceZero())return this.setTextureZero(T,!0),0;var E=this.gl,w=this.currentActiveTexture;return T.glIndexCounter<this.startActiveTexture&&(T.glIndexCounter=this.startActiveTexture,w<this.maxTextures?(T.glIndex=w,E.activeTexture(E.TEXTURE0+w),E.bindTexture(E.TEXTURE_2D,T),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,T.glIndexCounter=this.startActiveTexture,T.glIndex=1,E.activeTexture(E.TEXTURE1),E.bindTexture(E.TEXTURE_2D,T),this.currentActiveTexture=2)),this.isTextureClean=!1,T.glIndex},pushFramebuffer:function(T,E,w,A){return T===this.currentFramebuffer?this:(this.fboStack.push(T),this.setFramebuffer(T,E,w,A))},setFramebuffer:function(T,E,w,A){if(E===void 0&&(E=!1),w===void 0&&(w=!1),A===void 0&&(A=!0),T===this.currentFramebuffer)return this;var b=this.gl,R=this.width,L=this.height;return T&&T.renderTexture&&A?(R=T.renderTexture.width,L=T.renderTexture.height):this.flush(),b.bindFramebuffer(b.FRAMEBUFFER,T),A&&b.viewport(0,0,R,L),E&&(T?(this.drawingBufferHeight=L,this.pushScissor(0,0,R,L)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=T,w&&this.resetTextures(),this},popFramebuffer:function(T,E,w){T===void 0&&(T=!1),E===void 0&&(E=!1),w===void 0&&(w=!0);var A=this.fboStack;A.pop();var b=A[A.length-1];return b||(b=null),this.setFramebuffer(b,T,E,w),b},setProgram:function(T){return T!==this.currentProgram?(this.flush(),this.gl.useProgram(T),this.currentProgram=T,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(T,E,w,A){var b=this.gl,R=b.NEAREST,L=b.NEAREST,B=b.CLAMP_TO_EDGE,D=null;E=T?T.width:E,w=T?T.height:w;var G=l(E,w);return G&&(B=b.REPEAT),A===o.ScaleModes.LINEAR&&this.config.antialias&&(R=G?this.mipmapFilter:b.LINEAR,L=b.LINEAR),!T&&typeof E=="number"&&typeof w=="number"?D=this.createTexture2D(0,R,L,B,B,b.RGBA,null,E,w):D=this.createTexture2D(0,R,L,B,B,b.RGBA,T),D},createTexture2D:function(T,E,w,A,b,R,L,B,D,G,X,H){G=G==null?!0:G,X===void 0&&(X=!1),H===void 0&&(H=!1);var K=this.gl,$=K.createTexture();K.activeTexture(K.TEXTURE0);var N=K.getParameter(K.TEXTURE_BINDING_2D);return K.bindTexture(K.TEXTURE_2D,$),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,E),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,w),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,b),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,A),K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G),K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,H),L==null?K.texImage2D(K.TEXTURE_2D,T,R,B,D,0,R,K.UNSIGNED_BYTE,null):(X||(B=L.width,D=L.height),K.texImage2D(K.TEXTURE_2D,T,R,R,K.UNSIGNED_BYTE,L)),l(B,D)&&K.generateMipmap(K.TEXTURE_2D),N&&K.bindTexture(K.TEXTURE_2D,N),$.isAlphaPremultiplied=G,$.isRenderTexture=!1,$.width=B,$.height=D,$.glIndex=0,$.glIndexCounter=-1,$},createFramebuffer:function(T,E,w,A){var b=this.gl,R=b.createFramebuffer(),L=0;if(this.setFramebuffer(R),A){var B=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,B),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_STENCIL,T,E),b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_STENCIL_ATTACHMENT,b.RENDERBUFFER,B)}if(w.isRenderTexture=!0,w.isAlphaPremultiplied=!1,b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,w,0),L=b.checkFramebufferStatus(b.FRAMEBUFFER),L!==b.FRAMEBUFFER_COMPLETE){var D={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"};throw new Error("Framebuffer status: "+D[L])}return R.renderTexture=w,this.setFramebuffer(null),this.resetTextures(),R},createProgram:function(T,E){var w=this.gl,A=w.createProgram(),b=w.createShader(w.VERTEX_SHADER),R=w.createShader(w.FRAGMENT_SHADER);if(w.shaderSource(b,T),w.shaderSource(R,E),w.compileShader(b),w.compileShader(R),!w.getShaderParameter(b,w.COMPILE_STATUS))throw new Error(`Vertex Shader failed:
`+w.getShaderInfoLog(b));if(!w.getShaderParameter(R,w.COMPILE_STATUS))throw new Error(`Fragment Shader failed:
`+w.getShaderInfoLog(R));if(w.attachShader(A,b),w.attachShader(A,R),w.linkProgram(A),!w.getProgramParameter(A,w.LINK_STATUS))throw new Error(`Link Program failed:
`+w.getProgramInfoLog(A));return w.useProgram(A),A},createVertexBuffer:function(T,E){var w=this.gl,A=w.createBuffer();return w.bindBuffer(w.ARRAY_BUFFER,A),w.bufferData(w.ARRAY_BUFFER,T,E),w.bindBuffer(w.ARRAY_BUFFER,null),A},createIndexBuffer:function(T,E){var w=this.gl,A=w.createBuffer();return w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,A),w.bufferData(w.ELEMENT_ARRAY_BUFFER,T,E),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,null),A},deleteTexture:function(T,E){return E&&this.resetTextures(!0),T&&this.gl.deleteTexture(T),this},deleteFramebuffer:function(T){return T&&(this.gl.deleteFramebuffer(T),e(this.fboStack,T),this.currentFramebuffer===T&&(this.currentFramebuffer=null)),this},deleteProgram:function(T){return T&&this.gl.deleteProgram(T),this},deleteBuffer:function(T){return this.gl.deleteBuffer(T),this},preRenderCamera:function(T){var E=T.x,w=T.y,A=T.width,b=T.height,R=T.backgroundColor;if(T.emit(f.PRE_RENDER,T),this.pipelines.preBatchCamera(T),this.pushScissor(E,w,A,b),T.mask&&(this.currentCameraMask.mask=T.mask,this.currentCameraMask.camera=T._maskCamera,T.mask.preRenderWebGL(this,T,T._maskCamera)),R.alphaGL>0){var L=this.pipelines.setMulti();L.drawFillRect(E,w,A,b,g.getTintFromFloats(R.blueGL,R.greenGL,R.redGL,1),R.alphaGL)}},getCurrentStencilMask:function(){var T=null,E=this.maskStack,w=this.currentCameraMask;return E.length>0?T=E[E.length-1]:w.mask&&w.mask.isStencil&&(T=w),T},postRenderCamera:function(T){var E=T.flashEffect,w=T.fadeEffect;if(E.isRunning||w.isRunning||w.isComplete){var A=this.pipelines.setMulti();E.postRenderWebGL(A,g.getTintFromFloats),w.postRenderWebGL(A,g.getTintFromFloats)}T.dirty=!1,this.popScissor(),T.mask&&(this.currentCameraMask.mask=null,T.mask.postRenderWebGL(this,T._maskCamera)),this.pipelines.postBatchCamera(T),T.emit(f.POST_RENDER,T)},preRender:function(){if(!this.contextLost){var T=this.gl;if(T.bindFramebuffer(T.FRAMEBUFFER,null),this.config.clearBeforeRender){var E=this.config.backgroundColor;T.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT|T.STENCIL_BUFFER_BIT)}T.enable(T.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&T.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(s.PRE_RENDER)}},render:function(T,E,w){if(!this.contextLost){var A=E.length;if(this.emit(s.RENDER,T,w),this.preRenderCamera(w),A===0){this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(w);return}this.currentType="";for(var b=this.currentMask,R=0;R<A;R++){this.finalType=R===A-1;var L=E[R],B=L.mask;b=this.currentMask,b.mask&&b.mask!==B&&b.mask.postRenderWebGL(this,b.camera),B&&b.mask!==B&&B.preRenderWebGL(this,L,w),L.blendMode!==this.currentBlendMode&&this.setBlendMode(L.blendMode);var D=L.type;D!==this.currentType&&(this.newType=!0,this.currentType=D),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=E[R+1].type===this.currentType,L.renderWebGL(this,L,w),this.newType=!1}b=this.currentMask,b.mask&&b.mask.postRenderWebGL(this,b.camera),this.setBlendMode(o.BlendModes.NORMAL),this.postRenderCamera(w)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(s.POST_RENDER);var T=this.snapshotState;T.callback&&(x(this.canvas,T),T.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(T,E,w){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,T,E,w)},snapshotArea:function(T,E,w,A,b,R,L){var B=this.snapshotState;return B.callback=b,B.type=R,B.encoder=L,B.getPixel=!1,B.x=T,B.y=E,B.width=Math.min(w,this.gl.drawingBufferWidth),B.height=Math.min(A,this.gl.drawingBufferHeight),this},snapshotPixel:function(T,E,w){return this.snapshotArea(T,E,1,1,w),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(T,E,w,A,b,R,L,B,D,G,X){b===void 0&&(b=!1),R===void 0&&(R=0),L===void 0&&(L=0),B===void 0&&(B=E),D===void 0&&(D=w);var H=this.currentFramebuffer;this.snapshotArea(R,L,B,D,A,G,X);var K=this.snapshotState;return K.getPixel=b,K.isFramebuffer=!0,K.bufferWidth=E,K.bufferHeight=w,this.setFramebuffer(T),x(this.canvas,K),this.setFramebuffer(H),K.callback=null,K.isFramebuffer=!1,this},canvasToTexture:function(T,E,w,A){return w===void 0&&(w=!1),A===void 0&&(A=!1),E?this.updateCanvasTexture(T,E,A):this.createCanvasTexture(T,w,A)},createCanvasTexture:function(T,E,w){E===void 0&&(E=!1),w===void 0&&(w=!1);var A=this.gl,b=A.NEAREST,R=A.NEAREST,L=T.width,B=T.height,D=A.CLAMP_TO_EDGE,G=l(L,B);return!E&&G&&(D=A.REPEAT),this.config.antialias&&(b=G?this.mipmapFilter:A.LINEAR,R=A.LINEAR),this.createTexture2D(0,b,R,D,D,A.RGBA,T,L,B,!0,!1,w)},updateCanvasTexture:function(T,E,w){w===void 0&&(w=!1);var A=this.gl,b=T.width,R=T.height;if(b>0&&R>0){A.activeTexture(A.TEXTURE0);var L=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,E),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,w),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,T),E.width=b,E.height=R,L&&A.bindTexture(A.TEXTURE_2D,L)}return E},createVideoTexture:function(T,E,w){E===void 0&&(E=!1),w===void 0&&(w=!1);var A=this.gl,b=A.NEAREST,R=A.NEAREST,L=T.videoWidth,B=T.videoHeight,D=A.CLAMP_TO_EDGE,G=l(L,B);return!E&&G&&(D=A.REPEAT),this.config.antialias&&(b=G?this.mipmapFilter:A.LINEAR,R=A.LINEAR),this.createTexture2D(0,b,R,D,D,A.RGBA,T,L,B,!0,!0,w)},updateVideoTexture:function(T,E,w){w===void 0&&(w=!1);var A=this.gl,b=T.videoWidth,R=T.videoHeight;if(b>0&&R>0){A.activeTexture(A.TEXTURE0);var L=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,E),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,w),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,T),E.width=b,E.height=R,L&&A.bindTexture(A.TEXTURE_2D,L)}return E},setTextureFilter:function(T,E){var w=this.gl,A=[w.LINEAR,w.NEAREST][E];w.activeTexture(w.TEXTURE0);var b=w.getParameter(w.TEXTURE_BINDING_2D);return w.bindTexture(w.TEXTURE_2D,T),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,A),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,A),b&&w.bindTexture(w.TEXTURE_2D,b),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var T=this.gl,E=this.tempTextures,w=0;w<E.length;w++)T.deleteTexture(E[w]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});m.exports=y},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(92),r=t(102),o=t(373),a=t(376),s=t(377),n=t(108),l=t(378),i=t(379),h=t(380),u=t(381),d=new e({initialize:function(p){this.game=p.game,this.renderer=p,this.classes=new r([[f.UTILITY_PIPELINE,u],[f.MULTI_PIPELINE,n],[f.BITMAPMASK_PIPELINE,o],[f.SINGLE_PIPELINE,h],[f.ROPE_PIPELINE,i],[f.LIGHT_PIPELINE,s],[f.POINTLIGHT_PIPELINE,l],[f.GRAPHICS_PIPELINE,a]]),this.postPipelineClasses=new r,this.pipelines=new r,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(c){var p,g,x=this,y=this.game;if(this.classes.each(function(E,w){p=x.add(E,new w({game:y})),E===f.UTILITY_PIPELINE&&(x.UTILITY_PIPELINE=p,x.fullFrame1=p.fullFrame1,x.fullFrame2=p.fullFrame2,x.halfFrame1=p.halfFrame1,x.halfFrame2=p.halfFrame2)}),this.MULTI_PIPELINE=this.get(f.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(f.BITMAPMASK_PIPELINE),c)for(g in c){var T=c[g];p=new T(y),p.isPostFX?this.postPipelineClasses.set(g,T):this.has(g)||(this.classes.set(g,T),this.add(g,p))}},add:function(c,p){if(p.isPostFX){console.warn(c+" is a Post Pipeline. Use `addPostPipeline` instead");return}var g=this.pipelines,x=this.renderer;return g.has(c)?console.warn("Pipeline exists: "+c):(p.name=c,p.manager=this,g.set(c,p)),p.hasBooted||p.boot(),x.width!==0&&x.height!==0&&p.resize(x.width,x.height),p},addPostPipeline:function(c,p){this.postPipelineClasses.has(c)||this.postPipelineClasses.set(c,p)},flush:function(){this.current&&this.current.flush()},has:function(c){var p=this.pipelines;return typeof c=="string"?p.has(c):!!p.contains(c)},get:function(c){var p=this.pipelines;if(typeof c=="string")return p.get(c);if(p.contains(c))return c},getPostPipeline:function(c,p){var g=this.postPipelineClasses,x;if(typeof c=="string"?x=g.get(c):typeof c=="function"?g.contains(c)&&(x=c):typeof c=="object"&&(x=g.get(c.name)),x){var y=new x(this.game);return p&&(y.gameObject=p),y}},remove:function(c,p,g){p===void 0&&(p=!0),g===void 0&&(g=!0),this.pipelines.delete(c),p&&this.classes.delete(c),g&&this.postPipelineClasses.delete(c)},set:function(c,p,g){if(!c.isPostFX)return this.isCurrent(c,g)||(this.flush(),this.current&&this.current.unbind(),this.current=c,c.bind(g)),c.updateProjectionMatrix(),c.onBind(p),c},preBatch:function(c){if(c.hasPostPipeline){this.flush();for(var p=c.postPipelines,g=p.length-1;g>=0;g--){var x=p[g];x.active&&x.preBatch(c)}}},postBatch:function(c){if(c.hasPostPipeline){this.flush();for(var p=c.postPipelines,g=0;g<p.length;g++){var x=p[g];x.active&&x.postBatch(c)}}},preBatchCamera:function(c){if(c.hasPostPipeline){this.flush();for(var p=c.postPipelines,g=p.length-1;g>=0;g--){var x=p[g];x.active&&x.preBatch(c)}}},postBatchCamera:function(c){if(c.hasPostPipeline){this.flush();for(var p=c.postPipelines,g=0;g<p.length;g++){var x=p[g];x.active&&x.postBatch(c)}}},isCurrent:function(c,p){var g=this.renderer,x=this.current;return x&&!p&&(p=x.currentShader),!(x!==c||p.program!==g.currentProgram)},copyFrame:function(c,p,g,x,y){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(c,p,g,x,y),this},copyToGame:function(c){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(c),this},drawFrame:function(c,p,g,x){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(c,p,g,x),this},blendFrames:function(c,p,g,x,y){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(c,p,g,x,y),this},blendFramesAdditive:function(c,p,g,x,y){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(c,p,g,x,y),this},clearFrame:function(c,p){return this.UTILITY_PIPELINE.clearFrame(c,p),this},blitFrame:function(c,p,g,x,y,T){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(c,p,g,x,y,T),this},copyFrameRect:function(c,p,g,x,y,T,E,w){return this.UTILITY_PIPELINE.copyFrameRect(c,p,g,x,y,T,E,w),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(c){return this.UTILITY_PIPELINE.bind(c)},rebind:function(c){c===void 0&&this.previous&&(c=this.previous);var p=this.renderer,g=p.gl;g.disable(g.DEPTH_TEST),g.disable(g.CULL_FACE),p.hasActiveStencilMask()?g.clear(g.DEPTH_BUFFER_BIT):(g.disable(g.STENCIL_TEST),g.clear(g.DEPTH_BUFFER_BIT|g.STENCIL_BUFFER_BIT)),g.viewport(0,0,p.width,p.height),p.currentProgram=null,p.setBlendMode(0,!0);var x=this.pipelines.entries;for(var y in x)x[y].glReset=!0;c&&(this.current=c,c.rebind()),p.resetTextures()},clear:function(){var c=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,c.currentProgram=null,c.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=t(866),o=t(867),a=t(107),s=t(58),n=new e({Extends:s,initialize:function(i){i.fragShader=f(i,"fragShader",r),i.vertShader=f(i,"vertShader",o),i.batchSize=f(i,"batchSize",1),i.vertices=f(i,"vertices",[-1,1,-1,-7,7,1]),i.attributes=f(i,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),s.call(this,i)},boot:function(){s.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(l,i){s.prototype.resize.call(this,l,i),this.set2f("uResolution",l,i)},beginMask:function(l,i,h){var u=this.gl;if(l.bitmapMask&&u){var d=this.renderer;d.flush(),d.pushFramebuffer(l.mainFramebuffer),u.disable(u.STENCIL_TEST),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),d.currentCameraMask.mask!==l&&(d.currentMask.mask=l,d.currentMask.camera=h)}},endMask:function(l,i){var h=this.gl,u=this.renderer,d=l.bitmapMask;if(d&&h){u.flush(),u.pushFramebuffer(l.maskFramebuffer),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),u.setBlendMode(0,!0),d.renderWebGL(u,d,i),u.flush(),u.popFramebuffer(),u.popFramebuffer();var c=u.getCurrentStencilMask();c?(h.enable(h.STENCIL_TEST),c.mask.applyStencil(u,c.camera,!0)):u.currentMask.mask=null,u.pipelines.set(this),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,l.maskTexture),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,l.mainTexture),this.set1i("uInvertMaskAlpha",l.invertAlpha),h.drawArrays(this.topology,0,3),u.resetTextures()}}});m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=t(107),o=new e({initialize:function(s,n,l,i,h){this.pipeline=s,this.name=n,this.renderer=s.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(l,i),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(h),this.createUniforms()},createAttributes:function(a){var s=0,n=0,l=[];this.vertexComponentCount=0;for(var i=0;i<a.length;i++){var h=a[i],u=h.name,d=f(h,"size",1),c=f(h,"type",r.FLOAT),p=c.enum,g=c.size,x=!!h.normalized;l.push({name:u,size:d,type:p,normalized:x,offset:n,enabled:!1,location:-1}),g===4?s+=d:s++,n+=d*g}this.vertexSize=n,this.vertexComponentCount=s,this.attributes=l},bind:function(a,s){return a===void 0&&(a=!1),s===void 0&&(s=!1),s&&this.pipeline.flush(),this.renderer.setProgram(this.program),a&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(a){a===void 0&&(a=!1);for(var s=this.gl,n=this.vertexSize,l=this.attributes,i=this.program,h=0;h<l.length;h++){var u=l[h],d=u.size,c=u.type,p=u.offset,g=u.enabled,x=u.location,y=!!u.normalized;if(a){var T=s.getAttribLocation(i,u.name);T>=0?(s.enableVertexAttribArray(T),s.vertexAttribPointer(T,d,c,y,n,p),u.enabled=!0,u.location=T):T!==-1&&s.disableVertexAttribArray(T)}else g?s.vertexAttribPointer(x,d,c,y,n,p):!g&&x>-1&&(s.disableVertexAttribArray(x),u.location=-1)}return this},createUniforms:function(){var a=this.gl,s=this.program,n=this.uniforms,l,i,h,u=a.getProgramParameter(s,a.ACTIVE_UNIFORMS);for(l=0;l<u;l++){var d=a.getActiveUniform(s,l);if(d){i=d.name,h=a.getUniformLocation(s,i),h!==null&&(n[i]={name:i,location:h,value1:null,value2:null,value3:null,value4:null});var c=i.indexOf("[");c>0&&(i=i.substr(0,c),n.hasOwnProperty(i)||(h=a.getUniformLocation(s,i),h!==null&&(n[i]={name:i,location:h,value1:null,value2:null,value3:null,value4:null})))}}return this},hasUniform:function(a){return this.uniforms.hasOwnProperty(a)},resetUniform:function(a){var s=this.uniforms[a];return s&&(s.value1=null,s.value2=null,s.value3=null,s.value4=null),this},setUniform1:function(a,s,n,l){var i=this.uniforms[s];return i?((l||i.value1!==n)&&(i.value1=n,this.renderer.setProgram(this.program),a.call(this.gl,i.location,n),this.pipeline.currentShader=this),this):this},setUniform2:function(a,s,n,l,i){var h=this.uniforms[s];return h?((i||h.value1!==n||h.value2!==l)&&(h.value1=n,h.value2=l,this.renderer.setProgram(this.program),a.call(this.gl,h.location,n,l),this.pipeline.currentShader=this),this):this},setUniform3:function(a,s,n,l,i,h){var u=this.uniforms[s];return u?((h||u.value1!==n||u.value2!==l||u.value3!==i)&&(u.value1=n,u.value2=l,u.value3=i,this.renderer.setProgram(this.program),a.call(this.gl,u.location,n,l,i),this.pipeline.currentShader=this),this):this},setUniform4:function(a,s,n,l,i,h,u){var d=this.uniforms[s];return d?((u||d.value1!==n||d.value2!==l||d.value3!==i||d.value4!==h)&&(d.value1=n,d.value2=l,d.value3=i,d.value4=h,this.renderer.setProgram(this.program),a.call(this.gl,d.location,n,l,i,h),this.pipeline.currentShader=this),this):this},set1f:function(a,s){return this.setUniform1(this.gl.uniform1f,a,s)},set2f:function(a,s,n){return this.setUniform2(this.gl.uniform2f,a,s,n)},set3f:function(a,s,n,l){return this.setUniform3(this.gl.uniform3f,a,s,n,l)},set4f:function(a,s,n,l,i){return this.setUniform4(this.gl.uniform4f,a,s,n,l,i)},set1fv:function(a,s){return this.setUniform1(this.gl.uniform1fv,a,s,!0)},set2fv:function(a,s){return this.setUniform1(this.gl.uniform2fv,a,s,!0)},set3fv:function(a,s){return this.setUniform1(this.gl.uniform3fv,a,s,!0)},set4fv:function(a,s){return this.setUniform1(this.gl.uniform4fv,a,s,!0)},set1iv:function(a,s){return this.setUniform1(this.gl.uniform1iv,a,s,!0)},set2iv:function(a,s){return this.setUniform1(this.gl.uniform2iv,a,s,!0)},set3iv:function(a,s){return this.setUniform1(this.gl.uniform3iv,a,s,!0)},set4iv:function(a,s){return this.setUniform1(this.gl.uniform4iv,a,s,!0)},set1i:function(a,s){return this.setUniform1(this.gl.uniform1i,a,s)},set2i:function(a,s,n){return this.setUniform2(this.gl.uniform2i,a,s,n)},set3i:function(a,s,n,l){return this.setUniform3(this.gl.uniform3i,a,s,n,l)},set4i:function(a,s,n,l,i){return this.setUniform4(this.gl.uniform4i,a,s,n,l,i)},setMatrix2fv:function(a,s,n){return this.setUniform2(this.gl.uniformMatrix2fv,a,s,n,!0)},setMatrix3fv:function(a,s,n){return this.setUniform2(this.gl.uniformMatrix3fv,a,s,n,!0)},setMatrix4fv:function(a,s,n){return this.setUniform2(this.gl.uniformMatrix4fv,a,s,n,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(59),r=t(2),o=t(875),a=t(876),s=t(25),n=t(107),l=t(58),i=new e({Extends:l,initialize:function(u){u.fragShader=r(u,"fragShader",o),u.vertShader=r(u,"vertShader",a),u.attributes=r(u,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:n.UNSIGNED_BYTE,normalized:!0}]),l.call(this,u),this.calcMatrix=new s,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(h,u,d,c,p,g){this.renderer.pipelines.set(this);var x=this.calcMatrix;g&&g.multiply(p,x);var y=h+d,T=u+c,E=x.getX(h,u),w=x.getY(h,u),A=x.getX(h,T),b=x.getY(h,T),R=x.getX(y,T),L=x.getY(y,T),B=x.getX(y,u),D=x.getY(y,u),G=this.fillTint;this.batchQuad(E,w,A,b,R,L,B,D,G.TL,G.TR,G.BL,G.BR)},batchFillTriangle:function(h,u,d,c,p,g,x,y){this.renderer.pipelines.set(this);var T=this.calcMatrix;y&&y.multiply(x,T);var E=T.getX(h,u),w=T.getY(h,u),A=T.getX(d,c),b=T.getY(d,c),R=T.getX(p,g),L=T.getY(p,g),B=this.fillTint;this.batchTri(E,w,A,b,R,L,B.TL,B.TR,B.BL)},batchStrokeTriangle:function(h,u,d,c,p,g,x,y,T){var E=this.tempTriangle;E[0].x=h,E[0].y=u,E[0].width=x,E[1].x=d,E[1].y=c,E[1].width=x,E[2].x=p,E[2].y=g,E[2].width=x,E[3].x=h,E[3].y=u,E[3].width=x,this.batchStrokePath(E,x,!1,y,T)},batchFillPath:function(h,u,d){this.renderer.pipelines.set(this);var c=this.calcMatrix;d&&d.multiply(u,c);for(var p=h.length,g=this.polygonCache,x,y,T=this.fillTint.TL,E=this.fillTint.TR,w=this.fillTint.BL,A=0;A<p;++A)y=h[A],g.push(y.x,y.y);x=f(g),p=x.length;for(var b=0;b<p;b+=3){var R=x[b+0]*2,L=x[b+1]*2,B=x[b+2]*2,D=g[R+0],G=g[R+1],X=g[L+0],H=g[L+1],K=g[B+0],$=g[B+1],N=c.getX(D,G),I=c.getY(D,G),z=c.getX(X,H),U=c.getY(X,H),W=c.getX(K,$),V=c.getY(K,$);this.batchTri(N,I,z,U,W,V,T,E,w)}g.length=0},batchStrokePath:function(h,u,d,c,p){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var g=h.length-1,x=0;x<g;x++){var y=h[x],T=h[x+1];this.batchLine(y.x,y.y,T.x,T.y,y.width/2,T.width/2,u,x,!d&&x===g-1,c,p)}},batchLine:function(h,u,d,c,p,g,x,y,T,E,w){this.renderer.pipelines.set(this);var A=this.calcMatrix;w&&w.multiply(E,A);var b=d-h,R=c-u,L=Math.sqrt(b*b+R*R),B=p*(c-u)/L,D=p*(h-d)/L,G=g*(c-u)/L,X=g*(h-d)/L,H=d-G,K=c-X,$=h-B,N=u-D,I=d+G,z=c+X,U=h+B,W=u+D,V=A.getX(H,K),Z=A.getY(H,K),J=A.getX($,N),tt=A.getY($,N),st=A.getX(I,z),at=A.getY(I,z),lt=A.getX(U,W),ut=A.getY(U,W),mt=this.strokeTint,dt=mt.TL,xt=mt.TR,Tt=mt.BL,Ct=mt.BR;if(this.batchQuad(lt,ut,J,tt,V,Z,st,at,dt,xt,Tt,Ct),!(x<=2)){var Et=this.prevQuad,vt=this.firstQuad;y>0&&Et[4]?this.batchQuad(lt,ut,J,tt,Et[0],Et[1],Et[2],Et[3],dt,xt,Tt,Ct):(vt[0]=lt,vt[1]=ut,vt[2]=J,vt[3]=tt,vt[4]=1),T&&vt[4]?this.batchQuad(V,Z,st,at,vt[0],vt[1],vt[2],vt[3],dt,xt,Tt,Ct):(Et[0]=V,Et[1]=Z,Et[2]=st,Et[3]=at,Et[4]=1)}},batchVert:function(h,u,d){var c=this.vertexViewF32,p=this.vertexViewU32,g=this.vertexCount*this.currentShader.vertexComponentCount-1;c[++g]=h,c[++g]=u,p[++g]=d,this.vertexCount++},batchQuad:function(h,u,d,c,p,g,x,y,T,E,w,A){var b=!1;return this.shouldFlush(6)&&(this.flush(),b=!0),this.batchVert(h,u,T),this.batchVert(d,c,w),this.batchVert(p,g,A),this.batchVert(h,u,T),this.batchVert(p,g,A),this.batchVert(x,y,E),b},batchTri:function(h,u,d,c,p,g,x,y,T){var E=!1;return this.shouldFlush(3)&&(this.flush(),E=!0),this.batchVert(h,u,x),this.batchVert(d,c,y),this.batchVert(p,g,T),E},destroy:function(){return l.prototype.destroy.call(this),this.polygonCache=null,this}});m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=t(877),o=t(108),a=t(3),s=t(58),n=10,l=new a,i=new e({Extends:o,initialize:function(u){n=u.game.renderer.config.maxLights;for(var d=f(u,"fragShader",r),c=[],p=1;p<=n;p++)c.push({name:"lights"+p,fragShader:d.replace("%LIGHT_COUNT%",p.toString())});u.shaders=c,o.call(this,u),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){s.prototype.boot.call(this);var h=this.gl,u=h.createTexture();h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,u),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:u};for(var d=0;d<this.shaders.length;d++)this["lightShader"+(d+1)]=this.shaders[d]},onRender:function(h,u){var d=h.sys.lights;if(this.lightsActive=!1,!(!d||!d.active)){var c=d.getLights(u),p=c.length;if(p!==0){this.lightsActive=!0,this.setShader(this["lightShader"+p],!0);var g,x=this.renderer,y=x.height,T=u.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",u.x,u.y,u.rotation,u.zoom),this.set3f("uAmbientLightColor",d.ambientColor.r,d.ambientColor.g,d.ambientColor.b),g=0;g<p;g++){var E=c[g].light,w=E.color,A="uLights["+g+"].";T.transformPoint(E.x,E.y,l),this.set2f(A+"position",l.x-u.scrollX*E.scrollFactorX*u.zoom,y-(l.y-u.scrollY*E.scrollFactorY*u.zoom)),this.set3f(A+"color",w.r,w.g,w.b),this.set1f(A+"intensity",E.intensity),this.set1f(A+"radius",E.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(h){if(h!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var u=this.inverseRotationMatrix;if(h){var d=-h,c=Math.cos(d),p=Math.sin(d);u[1]=p,u[3]=-p,u[0]=u[4]=c}else u[0]=u[4]=1,u[1]=u[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,u),this.currentNormalMapRotation=h}},setTexture2D:function(h,u){var d=this.renderer;h===void 0&&(h=d.tempTextures[0]);var c=this.getNormalMap(u);d.isNewNormalMap(h,c)&&(this.flush(),d.setTextureZero(h),d.setNormalMap(c));var p=u?u.rotation:0;return this.setNormalMapRotation(p),this.currentUnit=0,0},setGameObject:function(h,u){u===void 0&&(u=h.frame);var d=this.renderer,c=u.glTexture,p=this.getNormalMap(h);return d.isNewNormalMap()&&(this.flush(),d.setTextureZero(c),d.setNormalMap(p)),this.setNormalMapRotation(h.rotation),this.currentUnit=0,0},getNormalMap:function(h){var u;return h?h.displayTexture?u=h.displayTexture.dataSource[h.displayFrame.sourceIndex]:h.texture?u=h.texture.dataSource[h.frame.sourceIndex]:h.tileset&&(Array.isArray(h.tileset)?u=h.tileset[0].image.dataSource[0]:u=h.tileset.image.dataSource[0]):u=this.defaultNormalMap,u||(u=this.defaultNormalMap),u.glTexture},batchSprite:function(h,u,d){this.lightsActive&&o.prototype.batchSprite.call(this,h,u,d)},batchTexture:function(h,u,d,c,p,g,x,y,T,E,w,A,b,R,L,B,D,G,X,H,K,$,N,I,z,U,W,V,Z,J,tt,st){this.lightsActive&&o.prototype.batchTexture.call(this,h,u,d,c,p,g,x,y,T,E,w,A,b,R,L,B,D,G,X,H,K,$,N,I,z,U,W,V,Z,J,tt,st)},batchTextureFrame:function(h,u,d,c,p,g,x){this.lightsActive&&o.prototype.batchTextureFrame.call(this,h,u,d,c,p,g,x)}});i.LIGHT_COUNT=n,m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=t(880),o=t(881),a=t(58),s=new e({Extends:a,initialize:function(l){l.vertShader=f(l,"vertShader",o),l.fragShader=f(l,"fragShader",r),l.attributes=f(l,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,l)},onRender:function(n,l){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",l.zoom)},batchPointLight:function(n,l,i,h,u,d,c,p,g,x,y,T){var E=n.color,w=n.intensity,A=n.radius,b=n.attenuation,R=E.r*w,L=E.g*w,B=E.b*w,D=l.alpha*n.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,h,y,T,A,b,R,L,B,D),this.batchLightVert(u,d,y,T,A,b,R,L,B,D),this.batchLightVert(c,p,y,T,A,b,R,L,B,D),this.batchLightVert(i,h,y,T,A,b,R,L,B,D),this.batchLightVert(c,p,y,T,A,b,R,L,B,D),this.batchLightVert(g,x,y,T,A,b,R,L,B,D)},batchLightVert:function(n,l,i,h,u,d,c,p,g,x){var y=this.vertexViewF32,T=this.vertexCount*this.currentShader.vertexComponentCount-1;y[++T]=n,y[++T]=l,y[++T]=i,y[++T]=h,y[++T]=u,y[++T]=d,y[++T]=c,y[++T]=p,y[++T]=g,y[++T]=x,this.vertexCount++}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=t(108),o=new e({Extends:r,initialize:function(s){s.topology=5,s.batchSize=f(s,"batchSize",256),r.call(this,s)}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=t(108),o=t(882),a=t(883),s=t(58),n=new e({Extends:r,initialize:function(i){i.fragShader=f(i,"fragShader",o),i.vertShader=f(i,"vertShader",a),i.forceZero=!0,r.call(this,i)},boot:function(){s.prototype.boot.call(this),this.set1i("uMainSampler",0)}});m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(884),f=t(35),r=t(0),o=t(198),a=t(885),s=t(886),n=t(2),l=t(887),i=t(382),h=t(58),u=new r({Extends:h,initialize:function(c){c.renderTarget=n(c,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),c.vertShader=n(c,"vertShader",i),c.shaders=n(c,"shaders",[{name:"Copy",fragShader:s},{name:"AddBlend",fragShader:e},{name:"LinearBlend",fragShader:l},{name:"ColorMatrix",fragShader:a}]),c.attributes=n(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),c.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],c.batchSize=1,h.call(this,c),this.colorMatrix=new o,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){h.prototype.boot.call(this);var d=this.shaders,c=this.renderTargets;this.copyShader=d[0],this.addShader=d[1],this.linearShader=d[2],this.colorMatrixShader=d[3],this.fullFrame1=c[0],this.fullFrame2=c[1],this.halfFrame1=c[2],this.halfFrame2=c[3]},copyFrame:function(d,c,p,g,x){p===void 0&&(p=1),g===void 0&&(g=!0),x===void 0&&(x=!0);var y=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,d.texture),c?(y.viewport(0,0,c.width,c.height),y.bindFramebuffer(y.FRAMEBUFFER,c.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,c.texture,0)):y.viewport(0,0,d.width,d.height),g&&(x?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT)),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blitFrame:function(d,c,p,g,x,y){p===void 0&&(p=1),g===void 0&&(g=!0),x===void 0&&(x=!0),y===void 0&&(y=!1);var T=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,d.texture),d.height>c.height)T.viewport(0,0,d.width,d.height),this.setTargetUVs(d,c);else{var E=c.height-d.height;T.viewport(0,E,d.width,d.height)}if(T.bindFramebuffer(T.FRAMEBUFFER,c.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,c.texture,0),g&&(x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT)),y){var w=this.renderer.currentBlendMode;this.renderer.setBlendMode(f.ERASE)}T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),y&&this.renderer.setBlendMode(w),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(d,c,p,g,x,y,T,E){T===void 0&&(T=!0),E===void 0&&(E=!0);var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,d.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,d.texture,0),T&&(E?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT)),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,c.texture),w.copyTexSubImage2D(w.TEXTURE_2D,0,0,0,p,g,x,y),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},copyToGame:function(d){var c=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,d.texture),c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.STATIC_DRAW),c.drawArrays(c.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(d,c,p,g){p===void 0&&(p=!0),g===void 0&&(g=this.colorMatrix);var x=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",g.getData()),this.set1f("uAlpha",g.alpha),x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,d.texture),c?(x.viewport(0,0,c.width,c.height),x.bindFramebuffer(x.FRAMEBUFFER,c.framebuffer),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,c.texture,0)):x.viewport(0,0,d.width,d.height),p?x.clearColor(0,0,0,0):x.clearColor(0,0,0,1),x.clear(x.COLOR_BUFFER_BIT),x.bufferData(x.ARRAY_BUFFER,this.vertexData,x.STATIC_DRAW),x.drawArrays(x.TRIANGLES,0,6),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindTexture(x.TEXTURE_2D,null)},blendFrames:function(d,c,p,g,x,y){g===void 0&&(g=1),x===void 0&&(x=!0),y===void 0&&(y=this.linearShader);var T=this.gl;this.setShader(y),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",g),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,d.texture),T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,c.texture),p?(T.bindFramebuffer(T.FRAMEBUFFER,p.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,p.texture,0),T.viewport(0,0,p.width,p.height)):T.viewport(0,0,d.width,d.height),x?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFramesAdditive:function(d,c,p,g,x){this.blendFrames(d,c,p,g,x,this.addShader)},clearFrame:function(d,c){c===void 0&&(c=!0);var p=this.gl;p.viewport(0,0,d.width,d.height),p.bindFramebuffer(p.FRAMEBUFFER,d.framebuffer),c?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT);var g=this.renderer.currentFramebuffer;p.bindFramebuffer(p.FRAMEBUFFER,g)},setUVs:function(d,c,p,g,x,y,T,E){var w=this.vertexViewF32;w[2]=d,w[3]=c,w[6]=p,w[7]=g,w[10]=x,w[11]=y,w[14]=d,w[15]=c,w[18]=x,w[19]=y,w[22]=T,w[23]=E},setTargetUVs:function(d,c){var p=c.height/d.height;p>.5?p=.5-(p-.5):p=.5+(.5-p),this.setUVs(0,p,0,1+p,1,1+p,1,p)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});m.exports=u},function(m,C){m.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join(`
`)},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(38),r=t(2),o=function(a,s){var n=a.getContext("experimental-webgl"),l=r(s,"callback"),i=r(s,"type","image/png"),h=r(s,"encoder",.92),u=r(s,"x",0),d=r(s,"y",0),c=r(s,"getPixel",!1),p=r(s,"isFramebuffer",!1),g=p?r(s,"bufferWidth",1):n.drawingBufferWidth,x=p?r(s,"bufferHeight",1):n.drawingBufferHeight;if(c){var y=new Uint8Array(4),T=p?d:x-d;n.readPixels(u,T,1,1,n.RGBA,n.UNSIGNED_BYTE,y),l.call(null,new f(y[0],y[1],y[2],y[3]/255))}else{var E=r(s,"width",g),w=r(s,"height",x),A=E*w*4,b=new Uint8Array(A);n.readPixels(u,x-d-w,E,w,n.RGBA,n.UNSIGNED_BYTE,b);for(var R=e.createWebGL(this,E,w),L=R.getContext("2d"),B=L.getImageData(0,0,E,w),D=B.data,G=0;G<w;G++)for(var X=0;X<E;X++){var H=((w-G-1)*E+X)*4,K=(G*E+X)*4;D[K+0]=b[H+0],D[K+1]=b[H+1],D[K+2]=b[H+2],D[K+3]=b[H+3]}L.putImageData(B,0,0);var $=new Image;$.onerror=function(){l.call(null),e.remove(R)},$.onload=function(){l.call(null,$),e.remove(R)},$.src=R.toDataURL(i,h)}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(33),f=function(r){var o=r.config;if(!o.hideBanner){var a="WebGL";o.renderType===e.CANVAS?a="Canvas":o.renderType===e.HEADLESS&&(a="Headless");var s=o.audio,n=r.device.audio,l;if(n.webAudio&&!s.disableWebAudio?l="Web Audio":s.noAudio||!n.webAudio&&!n.audioData?l="No Audio":l="HTML5 Audio",r.device.browser.ie)window.console&&console.log("Phaser v"+e.VERSION+" / https://phaser.io");else{var i="",h=[i];if(Array.isArray(o.bannerBackgroundColor)){var u;o.bannerBackgroundColor.forEach(function(c){i=i.concat("%c "),h.push("background: "+c),u=c}),h[h.length-1]="color: "+o.bannerTextColor+"; background: "+u}else i=i.concat("%c "),h.push("color: "+o.bannerTextColor+"; background: "+o.bannerBackgroundColor);h.push("background: transparent"),o.gameTitle&&(i=i.concat(o.gameTitle),o.gameVersion&&(i=i.concat(" v"+o.gameVersion)),o.hidePhaser||(i=i.concat(" / ")));var d="";o.hidePhaser||(i=i.concat("Phaser v"+e.VERSION+d+" ("+a+" | "+l+")")),i=i.concat(" %c "+o.gameURL),h[0]=i,console.log.apply(console,h)}}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(6),r=t(1),o=t(386),a=new e({initialize:function(n,l){this.game=n,this.raf=new o,this.started=!1,this.running=!1,this.minFps=f(l,"min",5),this.targetFps=f(l,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=r,this.forceSetTimeOut=f(l,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=f(l,"deltaHistory",10),this.panicMax=f(l,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=f(l,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var s=window.performance.now();this.time=s,this.lastTime=s,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=Math.min(this._target,this.deltaHistory[n]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(s){if(this.started)return this;this.started=!0,this.running=!0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=s,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var s=window.performance.now();this.now=s;var n=s-this.lastTime;n<0&&(n=0),this.rawDelta=n;var l=this.deltaIndex,i=this.deltaHistory,h=this.deltaSmoothingMax,u=n,d=n;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,u=Math.min(u,this._target)),u>this._min&&(u=i[l],u=Math.min(u,this._min)),i[l]=u,this.deltaIndex++,this.deltaIndex>h&&(this.deltaIndex=0),d=0;for(var c=0;c<h;c++)d+=i[c];d/=h}this.delta=d,this.time+=this.rawDelta,s>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=s+1e3,this.framesThisSecond=0),this.framesThisSecond++;var p=d/this._target;this.callback(s,d,p),this.lastTime=s,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(s){this.running||(s&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=r,this.raf=null,this.game=null}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(1),r=new e({initialize:function(){this.isRunning=!1,this.callback=f,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var a=this;this.step=function s(){var n=window.performance.now();a.lastTime=a.tick,a.tick=n,a.callback(n),a.timeOutID=window.requestAnimationFrame(s)},this.stepTimeout=function s(){var n=Date.now(),l=Math.min(Math.max(a.target*2+a.tick-n,0),a.target);a.lastTime=a.tick,a.tick=n,a.callback(n),a.timeOutID=window.setTimeout(s,l)}},start:function(o,a,s){this.isRunning||(this.callback=o,this.isSetTimeOut=a,this.target=s,this.isRunning=!0,this.timeOutID=a?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=f}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(22),f=function(r){var o,a=r.events;if(document.hidden!==void 0)o="visibilitychange";else{var s=["webkit","moz","ms"];s.forEach(function(l){document[l+"Hidden"]!==void 0&&(document.hidden=function(){return document[l+"Hidden"]},o=l+"visibilitychange")})}var n=function(l){document.hidden||l.type==="pause"?a.emit(e.HIDDEN):a.emit(e.VISIBLE)};o&&document.addEventListener(o,n,!1),window.onblur=function(){a.emit(e.BLUR)},window.onfocus=function(){a.emit(e.FOCUS)},window.focus&&r.config.autoFocus&&window.focus()};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(389),f=t(31),r=t(6),o=function(a){var s=r(a,"data",[]),n=r(a,"canvas",null),l=r(a,"palette",e),i=r(a,"pixelWidth",1),h=r(a,"pixelHeight",i),u=r(a,"resizeCanvas",!0),d=r(a,"clearCanvas",!0),c=r(a,"preRender",null),p=r(a,"postRender",null),g=Math.floor(Math.abs(s[0].length*i)),x=Math.floor(Math.abs(s.length*h));n||(n=f.create2D(this,g,x),u=!1,d=!1),u&&(n.width=g,n.height=x);var y=n.getContext("2d");d&&y.clearRect(0,0,g,x),c&&c(n,y);for(var T=0;T<s.length;T++)for(var E=s[T],w=0;w<E.length;w++){var A=E[w];A!=="."&&A!==" "&&(y.fillStyle=l[A],y.fillRect(w*i,T*h,i,h))}return p&&p(n,y),n};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(358),r=t(94),o=t(3),a=new e({Extends:r,initialize:function(n,l,i,h){r.call(this,"CubicBezierCurve"),Array.isArray(n)&&(h=new o(n[6],n[7]),i=new o(n[4],n[5]),l=new o(n[2],n[3]),n=new o(n[0],n[1])),this.p0=n,this.p1=l,this.p2=i,this.p3=h},getStartPoint:function(s){return s===void 0&&(s=new o),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,n){n===void 0&&(n=new o);var l=this.p0,i=this.p1,h=this.p2,u=this.p3;return n.set(f(s,l.x,i.x,h.x,u.x),f(s,l.y,i.y,h.y,u.y))},draw:function(s,n){n===void 0&&(n=32);var l=this.getPoints(n);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var i=1;i<l.length;i++)s.lineTo(l[i].x,l[i].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(s){var n=s.points,l=new o(n[0],n[1]),i=new o(n[2],n[3]),h=new o(n[4],n[5]),u=new o(n[6],n[7]);return new a(l,i,h,u)},m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(94),r=t(36),o=t(6),a=t(196),s=t(3),n=new e({Extends:f,initialize:function(i,h,u,d,c,p,g,x){if(typeof i=="object"){var y=i;i=o(y,"x",0),h=o(y,"y",0),u=o(y,"xRadius",0),d=o(y,"yRadius",u),c=o(y,"startAngle",0),p=o(y,"endAngle",360),g=o(y,"clockwise",!1),x=o(y,"rotation",0)}else d===void 0&&(d=u),c===void 0&&(c=0),p===void 0&&(p=360),g===void 0&&(g=!1),x===void 0&&(x=0);f.call(this,"EllipseCurve"),this.p0=new s(i,h),this._xRadius=u,this._yRadius=d,this._startAngle=r(c),this._endAngle=r(p),this._clockwise=g,this._rotation=r(x)},getStartPoint:function(l){return l===void 0&&(l=new s),this.getPoint(0,l)},getResolution:function(l){return l*2},getPoint:function(l,i){i===void 0&&(i=new s);for(var h=Math.PI*2,u=this._endAngle-this._startAngle,d=Math.abs(u)<Number.EPSILON;u<0;)u+=h;for(;u>h;)u-=h;u<Number.EPSILON&&(d?u=0:u=h),this._clockwise&&!d&&(u===h?u=-h:u=u-h);var c=this._startAngle+l*u,p=this.p0.x+this._xRadius*Math.cos(c),g=this.p0.y+this._yRadius*Math.sin(c);if(this._rotation!==0){var x=Math.cos(this._rotation),y=Math.sin(this._rotation),T=p-this.p0.x,E=g-this.p0.y;p=T*x-E*y+this.p0.x,g=T*y+E*x+this.p0.y}return i.set(p,g)},setXRadius:function(l){return this.xRadius=l,this},setYRadius:function(l){return this.yRadius=l,this},setWidth:function(l){return this.xRadius=l/2,this},setHeight:function(l){return this.yRadius=l/2,this},setStartAngle:function(l){return this.startAngle=l,this},setEndAngle:function(l){return this.endAngle=l,this},setClockwise:function(l){return this.clockwise=l,this},setRotation:function(l){return this.rotation=l,this},x:{get:function(){return this.p0.x},set:function(l){this.p0.x=l}},y:{get:function(){return this.p0.y},set:function(l){this.p0.y=l}},xRadius:{get:function(){return this._xRadius},set:function(l){this._xRadius=l}},yRadius:{get:function(){return this._yRadius},set:function(l){this._yRadius=l}},startAngle:{get:function(){return a(this._startAngle)},set:function(l){this._startAngle=r(l)}},endAngle:{get:function(){return a(this._endAngle)},set:function(l){this._endAngle=r(l)}},clockwise:{get:function(){return this._clockwise},set:function(l){this._clockwise=l}},angle:{get:function(){return a(this._rotation)},set:function(l){this._rotation=r(l)}},rotation:{get:function(){return this._rotation},set:function(l){this._rotation=l}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});n.fromJSON=function(l){return new n(l)},m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(94),r=t(199),o=t(10),a=t(3),s=new e({Extends:f,initialize:function(l,i){f.call(this,"LineCurve"),Array.isArray(l)&&(i=new a(l[2],l[3]),l=new a(l[0],l[1])),this.p0=l,this.p1=i,this.arcLengthDivisions=1},getBounds:function(n){return n===void 0&&(n=new o),r([this.p0,this.p1],n)},getStartPoint:function(n){return n===void 0&&(n=new a),n.copy(this.p0)},getResolution:function(n){return n===void 0&&(n=1),n},getPoint:function(n,l){return l===void 0&&(l=new a),n===1?l.copy(this.p1):(l.copy(this.p1).subtract(this.p0).scale(n).add(this.p0),l)},getPointAt:function(n,l){return this.getPoint(n,l)},getTangent:function(n,l){return l===void 0&&(l=new a),l.copy(this.p1).subtract(this.p0).normalize(),l},getUtoTmapping:function(n,l,i){var h;if(l){var u=this.getLengths(i),d=u[u.length-1],c=Math.min(l,d);h=c/d}else h=n;return h},draw:function(n){return n.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});s.fromJSON=function(n){var l=n.points,i=new a(l[0],l[1]),h=new a(l[2],l[3]);return new s(i,h)},m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(3),r=new e({initialize:function(a,s){this.active=!1,this.p0=new f(a,s)},getPoint:function(o,a){return a===void 0&&(a=new f),a.copy(this.p0)},getPointAt:function(o,a){return this.getPoint(o,a)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(94),r=t(359),o=t(3),a=new e({Extends:f,initialize:function(n,l,i){f.call(this,"QuadraticBezier"),Array.isArray(n)&&(i=new o(n[4],n[5]),l=new o(n[2],n[3]),n=new o(n[0],n[1])),this.p0=n,this.p1=l,this.p2=i},getStartPoint:function(s){return s===void 0&&(s=new o),s.copy(this.p0)},getResolution:function(s){return s},getPoint:function(s,n){n===void 0&&(n=new o);var l=this.p0,i=this.p1,h=this.p2;return n.set(r(s,l.x,i.x,h.x),r(s,l.y,i.y,h.y))},draw:function(s,n){n===void 0&&(n=32);var l=this.getPoints(n);s.beginPath(),s.moveTo(this.p0.x,this.p0.y);for(var i=1;i<l.length;i++)s.lineTo(l[i].x,l[i].y);return s.strokePath(),s},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(s){var n=s.points,l=new o(n[0],n[1]),i=new o(n[2],n[3]),h=new o(n[4],n[5]);return new a(l,i,h)},m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(194),f=t(0),r=t(94),o=t(3),a=new f({Extends:r,initialize:function(n){n===void 0&&(n=[]),r.call(this,"SplineCurve"),this.points=[],this.addPoints(n)},addPoints:function(s){for(var n=0;n<s.length;n++){var l=new o;typeof s[n]=="number"?(l.x=s[n],l.y=s[n+1],n++):Array.isArray(s[n])?(l.x=s[n][0],l.y=s[n][1]):(l.x=s[n].x,l.y=s[n].y),this.points.push(l)}return this},addPoint:function(s,n){var l=new o(s,n);return this.points.push(l),l},getStartPoint:function(s){return s===void 0&&(s=new o),s.copy(this.points[0])},getResolution:function(s){return s*this.points.length},getPoint:function(s,n){n===void 0&&(n=new o);var l=this.points,i=(l.length-1)*s,h=Math.floor(i),u=i-h,d=l[h===0?h:h-1],c=l[h],p=l[h>l.length-2?l.length-1:h+1],g=l[h>l.length-3?l.length-1:h+2];return n.set(e(u,d.x,c.x,p.x,g.x),e(u,d.y,c.y,p.y,g.y))},toJSON:function(){for(var s=[],n=0;n<this.points.length;n++)s.push(this.points[n].x),s.push(this.points[n].y);return{type:this.type,points:s}}});a.fromJSON=function(s){return new a(s.points)},m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s,n){(!a||a==="")&&(a=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!s||s==="")&&(s=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),n===void 0&&(n=null),this.key=o,this.fragmentSrc=a,this.vertexSrc=s,this.uniforms=n}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38);e.ColorSpectrum=t(909),e.ColorToRGBA=t(910),e.ComponentToHex=t(398),e.GetColor=t(103),e.GetColor32=t(328),e.HexStringToColor=t(327),e.HSLToColor=t(911),e.HSVColorWheel=t(912),e.HSVToRGB=t(188),e.HueToComponent=t(399),e.IntegerToColor=t(189),e.IntegerToRGB=t(330),e.Interpolate=t(913),e.ObjectToColor=t(331),e.RandomRGB=t(914),e.RGBStringToColor=t(332),e.RGBToHSV=t(329),e.RGBToString=t(915),e.ValueToColor=t(187),m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=e.toString(16);return f.length===1?"0"+f:f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+(f-e)*6*r:r<.5?f:r<.6666666666666666?e+(f-e)*(.6666666666666666-r)*6:e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(105),f=function(r){if(document.readyState==="complete"||document.readyState==="interactive"){r();return}var o=function(){document.removeEventListener("deviceready",o,!0),document.removeEventListener("DOMContentLoaded",o,!0),window.removeEventListener("load",o,!0),r()};document.body?e.cordova?document.addEventListener("deviceready",o,!1):(document.addEventListener("DOMContentLoaded",o,!0),window.addEventListener("load",o,!0)):window.setTimeout(o,20)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){if(!e)return window.innerHeight;var f=Math.abs(window.orientation),r={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),r.w=f===90?o.offsetHeight:window.innerWidth,r.h=f===90?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,Math.abs(window.orientation)!==90?r.h:r.w};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(201),f=function(r,o){var a=window.screen,s=a?a.orientation||a.mozOrientation||a.msOrientation:!1;if(s&&typeof s.type=="string")return s.type;if(typeof s=="string")return s;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?e.ORIENTATION.PORTRAIT:e.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return e.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return e.ORIENTATION.LANDSCAPE}else return o>r?e.ORIENTATION.PORTRAIT:e.ORIENTATION.LANDSCAPE};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f;return e!==""&&(typeof e=="string"?f=document.getElementById(e):e&&e.nodeType===1&&(f=e)),f||(f=document.body),f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f="";try{if(window.DOMParser){var r=new DOMParser;f=r.parseFromString(e,"text/xml")}else f=new ActiveXObject("Microsoft.XMLDOM"),f.loadXML(e)}catch(o){f=null}return!f||!f.documentElement||f.getElementsByTagName("parsererror").length?null:f};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(203),r=t(9),o=t(51),a=t(22),s=t(410),n=t(411),l=t(412),i=t(413),h=t(25),u=t(177),d=new e({initialize:function(p,g){this.game=p,this.scaleManager,this.canvas,this.config=g,this.enabled=!0,this.events=new r,this.isOver=!0,this.defaultCursor="",this.keyboard=g.inputKeyboard?new s(this):null,this.mouse=g.inputMouse?new n(this):null,this.touch=g.inputTouch?new i(this):null,this.pointers=[],this.pointersTotal=g.inputActivePointers,g.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var x=0;x<=this.pointersTotal;x++){var y=new l(this,x);y.smoothFactor=g.inputSmoothFactor,this.pointers.push(y)}this.mousePointer=g.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new h,this._tempMatrix2=new h,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],p.events.once(a.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(o.MANAGER_BOOT),this.game.events.on(a.PRE_RENDER,this.preRender,this),this.game.events.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(c){this.isOver=!0,this.events.emit(o.GAME_OVER,c)},setCanvasOut:function(c){this.isOver=!1,this.events.emit(o.GAME_OUT,c)},preRender:function(){var c=this.game.loop.now,p=this.game.loop.delta,g=this.game.scene.getScenes(!0,!0);this.time=c,this.events.emit(o.MANAGER_UPDATE);for(var x=0;x<g.length;x++){var y=g[x];if(y.sys.input&&y.sys.input.updatePoll(c,p)&&this.globalTopOnly)return}},setDefaultCursor:function(c){this.defaultCursor=c,this.canvas.style.cursor!==c&&(this.canvas.style.cursor=c)},setCursor:function(c){c.cursor&&(this.canvas.style.cursor=c.cursor)},resetCursor:function(c){c.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(c){c===void 0&&(c=1);var p=[];this.pointersTotal+c>10&&(c=10-this.pointersTotal);for(var g=0;g<c;g++){var x=this.pointers.length,y=new l(this,x);y.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(y),this.pointersTotal++,p.push(y)}return p},updateInputPlugins:function(c,p){var g=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var x=0;x<g.length;x++){var y=g[x];if(y.sys.input){var T=y.sys.input.update(c,p);if(T&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(c){for(var p=this.pointers,g=[],x=0;x<c.changedTouches.length;x++)for(var y=c.changedTouches[x],T=1;T<this.pointersTotal;T++){var E=p[T];if(!E.active){E.touchstart(y,c),this.activePointer=E,g.push(E);break}}this.updateInputPlugins(f.TOUCH_START,g)},onTouchMove:function(c){for(var p=this.pointers,g=[],x=0;x<c.changedTouches.length;x++)for(var y=c.changedTouches[x],T=1;T<this.pointersTotal;T++){var E=p[T];if(E.active&&E.identifier===y.identifier){E.touchmove(y,c),this.activePointer=E,g.push(E);break}}this.updateInputPlugins(f.TOUCH_MOVE,g)},onTouchEnd:function(c){for(var p=this.pointers,g=[],x=0;x<c.changedTouches.length;x++)for(var y=c.changedTouches[x],T=1;T<this.pointersTotal;T++){var E=p[T];if(E.active&&E.identifier===y.identifier){E.touchend(y,c),g.push(E);break}}this.updateInputPlugins(f.TOUCH_END,g)},onTouchCancel:function(c){for(var p=this.pointers,g=[],x=0;x<c.changedTouches.length;x++)for(var y=c.changedTouches[x],T=1;T<this.pointersTotal;T++){var E=p[T];if(E.active&&E.identifier===y.identifier){E.touchcancel(y,c),g.push(E);break}}this.updateInputPlugins(f.TOUCH_CANCEL,g)},onMouseDown:function(c){var p=this.mousePointer;p.down(c),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(f.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(c){var p=this.mousePointer;p.move(c),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(f.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(c){var p=this.mousePointer;p.up(c),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(f.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(c){var p=this.mousePointer;p.wheel(c),this.activePointer=p,this.updateInputPlugins(f.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(c){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(o.POINTERLOCK_CHANGE,c,p)},inputCandidate:function(c,p){var g=c.input;if(!g||!g.enabled||!g.alwaysEnabled&&!c.willRender(p))return!1;var x=!0,y=c.parentContainer;if(y)do{if(!y.willRender(p)){x=!1;break}y=y.parentContainer}while(y);return x},hitTest:function(c,p,g,x){x===void 0&&(x=this._tempHitTest);var y=this._tempPoint,T=g.scrollX,E=g.scrollY;x.length=0;var w=c.x,A=c.y;g.getWorldPoint(w,A,y),c.worldX=y.x,c.worldY=y.y;for(var b={x:0,y:0},R=this._tempMatrix,L=this._tempMatrix2,B=0;B<p.length;B++){var D=p[B];if(!!this.inputCandidate(D,g)){var G=y.x+T*D.scrollFactorX-T,X=y.y+E*D.scrollFactorY-E;D.parentContainer?(D.getWorldTransformMatrix(R,L),R.applyInverse(G,X,b)):u(G,X,D.x,D.y,D.rotation,D.scaleX,D.scaleY,b),this.pointWithinHitArea(D,b.x,b.y)&&x.push(D)}}return x},pointWithinHitArea:function(c,p,g){p+=c.displayOriginX,g+=c.displayOriginY;var x=c.input;return x&&x.hitAreaCallback(x.hitArea,p,g,c)?(x.localX=p,x.localY=g,!0):!1},pointWithinInteractiveObject:function(c,p,g){return c.hitArea?(p+=c.gameObject.displayOriginX,g+=c.gameObject.displayOriginY,c.localX=p,c.localY=g,c.hitAreaCallback(c.hitArea,p,g,c)):!1},transformPointer:function(c,p,g,x){var y=c.position,T=c.prevPosition;T.x=y.x,T.y=y.y;var E=this.scaleManager.transformX(p),w=this.scaleManager.transformY(g),A=c.smoothFactor;!x||A===0?(y.x=E,y.y=w):(y.x=E*A+T.x*(1-A),y.y=w*A+T.y*(1-A))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var c=0;c<this.pointers.length;c++)this.pointers[c].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),f=t(0),r=t(22),o=t(51),a=t(143),s=t(1),n=new f({initialize:function(i){this.manager=i,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=s,this.onKeyUp=s,i.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var l=this.manager.config;this.enabled=l.inputKeyboard,this.target=l.inputKeyboardEventTarget,this.addCapture(l.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(r.POST_STEP,this.postUpdate,this)},startListeners:function(){var l=this;this.onKeyDown=function(h){if(!(h.defaultPrevented||!l.enabled||!l.manager)){l.queue.push(h),l.manager.events.emit(o.MANAGER_PROCESS);var u=h.altKey||h.ctrlKey||h.shiftKey||h.metaKey;l.preventDefault&&!u&&l.captures.indexOf(h.keyCode)>-1&&h.preventDefault()}},this.onKeyUp=function(h){if(!(h.defaultPrevented||!l.enabled||!l.manager)){l.queue.push(h),l.manager.events.emit(o.MANAGER_PROCESS);var u=h.altKey||h.ctrlKey||h.shiftKey||h.metaKey;l.preventDefault&&!u&&l.captures.indexOf(h.keyCode)>-1&&h.preventDefault()}};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var l=this.target;l.removeEventListener("keydown",this.onKeyDown,!1),l.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(l){typeof l=="string"&&(l=l.split(",")),Array.isArray(l)||(l=[l]);for(var i=this.captures,h=0;h<l.length;h++){var u=l[h];typeof u=="string"&&(u=a[u.trim().toUpperCase()]),i.indexOf(u)===-1&&i.push(u)}this.preventDefault=i.length>0},removeCapture:function(l){typeof l=="string"&&(l=l.split(",")),Array.isArray(l)||(l=[l]);for(var i=this.captures,h=0;h<l.length;h++){var u=l[h];typeof u=="string"&&(u=a[u.toUpperCase()]),e(i,u)}this.preventDefault=i.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(r.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(191),r=t(51),o=t(1),a=new e({initialize:function(n){this.manager=n,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=o,this.onMouseDown=o,this.onMouseUp=o,this.onMouseDownWindow=o,this.onMouseUpWindow=o,this.onMouseOver=o,this.onMouseOut=o,this.onMouseWheel=o,this.pointerLockChange=o,this.isTop=!0,n.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var s=this.manager.config;this.enabled=s.inputMouse,this.target=s.inputMouseEventTarget,this.passive=s.inputMousePassive,this.preventDefaultDown=s.inputMousePreventDefaultDown,this.preventDefaultUp=s.inputMousePreventDefaultUp,this.preventDefaultMove=s.inputMousePreventDefaultMove,this.preventDefaultWheel=s.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,s.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),this},requestPointerLock:function(){if(f.pointerLock){var s=this.target;s.requestPointerLock=s.requestPointerLock||s.mozRequestPointerLock||s.webkitRequestPointerLock,s.requestPointerLock()}},releasePointerLock:function(){f.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var s=this.target;if(!!s){var n=this,l=this.manager,i=l.canvas,h=window&&window.focus&&l.game.config.autoFocus;this.onMouseMove=function(d){!d.defaultPrevented&&n.enabled&&l&&l.enabled&&(l.onMouseMove(d),n.preventDefaultMove&&d.preventDefault())},this.onMouseDown=function(d){h&&window.focus(),!d.defaultPrevented&&n.enabled&&l&&l.enabled&&(l.onMouseDown(d),n.preventDefaultDown&&d.target===i&&d.preventDefault())},this.onMouseDownWindow=function(d){!d.defaultPrevented&&n.enabled&&l&&l.enabled&&d.target!==i&&l.onMouseDown(d)},this.onMouseUp=function(d){!d.defaultPrevented&&n.enabled&&l&&l.enabled&&(l.onMouseUp(d),n.preventDefaultUp&&d.target===i&&d.preventDefault())},this.onMouseUpWindow=function(d){!d.defaultPrevented&&n.enabled&&l&&l.enabled&&d.target!==i&&l.onMouseUp(d)},this.onMouseOver=function(d){!d.defaultPrevented&&n.enabled&&l&&l.enabled&&l.setCanvasOver(d)},this.onMouseOut=function(d){!d.defaultPrevented&&n.enabled&&l&&l.enabled&&l.setCanvasOut(d)},this.onMouseWheel=function(d){!d.defaultPrevented&&n.enabled&&l&&l.enabled&&l.onMouseWheel(d),n.preventDefaultWheel&&d.target===i&&d.preventDefault()};var u={passive:!0};if(s.addEventListener("mousemove",this.onMouseMove),s.addEventListener("mousedown",this.onMouseDown),s.addEventListener("mouseup",this.onMouseUp),s.addEventListener("mouseover",this.onMouseOver,u),s.addEventListener("mouseout",this.onMouseOut,u),this.preventDefaultWheel?s.addEventListener("wheel",this.onMouseWheel,{passive:!1}):s.addEventListener("wheel",this.onMouseWheel,u),window&&l.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,u),window.top.addEventListener("mouseup",this.onMouseUpWindow,u)}catch(d){window.addEventListener("mousedown",this.onMouseDownWindow,u),window.addEventListener("mouseup",this.onMouseUpWindow,u),this.isTop=!1}f.pointerLock&&(this.pointerLockChange=function(d){var c=n.target;n.locked=document.pointerLockElement===c||document.mozPointerLockElement===c||document.webkitPointerLockElement===c,l.onPointerLockChange(d)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var s=this.target;s.removeEventListener("mousemove",this.onMouseMove),s.removeEventListener("mousedown",this.onMouseDown),s.removeEventListener("mouseup",this.onMouseUp),s.removeEventListener("mouseover",this.onMouseOver),s.removeEventListener("mouseout",this.onMouseOut),window&&(s=this.isTop?window.top:window,s.removeEventListener("mousedown",this.onMouseDownWindow),s.removeEventListener("mouseup",this.onMouseUpWindow)),f.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(349),f=t(0),r=t(50),o=t(124),a=t(360),s=t(3),n=t(105),l=new f({initialize:function(h,u){this.manager=h,this.id=u,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new s,this.prevPosition=new s,this.midPoint=new s(-1,-1),this.velocity=new s,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=u===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(i){var h=i.getWorldPoint(this.x,this.y);return this.worldX=h.x,this.worldY=h.y,this},positionToCamera:function(i,h){return i.getWorldPoint(this.x,this.y,h)},updateMotion:function(){var i=this.position.x,h=this.position.y,u=this.midPoint.x,d=this.midPoint.y;if(!(i===u&&h===d)){var c=a(this.motionFactor,u,i),p=a(this.motionFactor,d,h);o(c,i,.1)&&(c=i),o(p,h,.1)&&(p=h),this.midPoint.set(c,p);var g=i-c,x=h-p;this.velocity.set(g,x),this.angle=e(c,p,i,h),this.distance=Math.sqrt(g*g+x*x)}},up:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),i.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=i.timeStamp,this.wasTouch=!1)},down:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),i.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),n.macOS&&i.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=i.timeStamp),this.wasTouch=!1},move:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.locked&&(this.movementX=i.movementX||i.mozMovementX||i.webkitMovementX||0,this.movementY=i.movementY||i.mozMovementY||i.webkitMovementY||0),this.moveTime=i.timeStamp,this.wasTouch=!1},wheel:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.deltaX=i.deltaX,this.deltaY=i.deltaY,this.deltaZ=i.deltaZ,this.wasTouch=!1},touchstart:function(i,h){i.pointerId&&(this.pointerId=i.pointerId),this.identifier=i.identifier,this.target=i.target,this.active=!0,this.buttons=1,this.event=h,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=h.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(i,h){this.event=h,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.moveTime=h.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(i,h){this.buttons=0,this.event=h,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=h.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(i,h){this.buttons=0,this.event=h,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=h.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?e(this.downX,this.downY,this.x,this.y):e(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(i,h){i===void 0&&(i=10),h===void 0&&(h=[]);for(var u=this.prevPosition.x,d=this.prevPosition.y,c=this.position.x,p=this.position.y,g=0;g<i;g++){var x=1/i*g;h[g]={x:a(x,u,c),y:a(x,d,p)}}return h},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},time:{get:function(){return this.event?this.event.timeStamp:0}}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(51),r=t(1),o=new e({initialize:function(s){this.manager=s,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=r,this.onTouchStartWindow=r,this.onTouchMove=r,this.onTouchEnd=r,this.onTouchEndWindow=r,this.onTouchCancel=r,this.onTouchCancelWindow=r,this.onTouchOver=r,this.onTouchOut=r,s.events.once(f.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputTouch,this.target=a.inputTouchEventTarget,this.capture=a.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),a.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(a){return a.preventDefault(),!1}),this},startListeners:function(){var a=this,s=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(u){n&&window.focus(),!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&(a.manager.onTouchStart(u),a.capture&&u.cancelable&&u.target===s&&u.preventDefault())},this.onTouchStartWindow=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&u.target!==s&&a.manager.onTouchStart(u)},this.onTouchMove=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&(a.manager.onTouchMove(u),a.capture&&u.cancelable&&u.preventDefault())},this.onTouchEnd=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&(a.manager.onTouchEnd(u),a.capture&&u.cancelable&&u.target===s&&u.preventDefault())},this.onTouchEndWindow=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&u.target!==s&&a.manager.onTouchEnd(u)},this.onTouchCancel=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&(a.manager.onTouchCancel(u),a.capture&&u.preventDefault())},this.onTouchCancelWindow=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&a.manager.onTouchCancel(u)},this.onTouchOver=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&a.manager.setCanvasOver(u)},this.onTouchOut=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&a.manager.enabled&&a.manager.setCanvasOut(u)};var l=this.target;if(!!l){var i={passive:!0},h={passive:!1};l.addEventListener("touchstart",this.onTouchStart,this.capture?h:i),l.addEventListener("touchmove",this.onTouchMove,this.capture?h:i),l.addEventListener("touchend",this.onTouchEnd,this.capture?h:i),l.addEventListener("touchcancel",this.onTouchCancel,this.capture?h:i),l.addEventListener("touchover",this.onTouchOver,this.capture?h:i),l.addEventListener("touchout",this.onTouchOut,this.capture?h:i),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,h),window.addEventListener("touchend",this.onTouchEndWindow,h),window.addEventListener("touchcancel",this.onTouchCancelWindow,h)),this.enabled=!0}},stopListeners:function(){var a=this.target;a.removeEventListener("touchstart",this.onTouchStart),a.removeEventListener("touchmove",this.onTouchMove),a.removeEventListener("touchend",this.onTouchEnd),a.removeEventListener("touchcancel",this.onTouchCancel),a.removeEventListener("touchover",this.onTouchOver),a.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(22),r=t(9),o=t(8),a=t(16),s=t(5),n=t(2),l=t(24),i=t(93),h=new e({Extends:r,initialize:function(d){r.call(this),this.game=d,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],d.isBooted?this.boot():d.events.once(f.BOOT,this.boot,this)},boot:function(){var u,d,c,p,g,x,y,T=this.game.config,E=T.installGlobalPlugins;for(E=E.concat(this._pendingGlobal),u=0;u<E.length;u++)d=E[u],c=n(d,"key",null),p=n(d,"plugin",null),g=n(d,"start",!1),x=n(d,"mapping",null),y=n(d,"data",null),c&&(p?this.install(c,p,g,x,y):console.warn("Missing `plugin` for key: "+c));for(E=T.installScenePlugins,E=E.concat(this._pendingScene),u=0;u<E.length;u++)d=E[u],c=n(d,"key",null),p=n(d,"plugin",null),x=n(d,"mapping",null),c&&(p?this.installScenePlugin(c,p,x):console.warn("Missing `plugin` for key: "+c));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(f.DESTROY,this.destroy,this)},addToScene:function(u,d,c){var p,g,x,y=this.game,T=u.scene,E=u.settings.map,w=u.settings.isBooted;for(p=0;p<d.length;p++)g=d[p],y[g]?(u[g]=y[g],E.hasOwnProperty(g)&&(T[E[g]]=u[g])):g==="game"&&E.hasOwnProperty(g)&&(T[E[g]]=y);for(var A=0;A<c.length;A++)for(x=c[A],p=0;p<x.length;p++)if(g=x[p],!!l.hasCore(g)){var b=l.getCore(g),R=b.mapping,L=new b.plugin(T,this,R);u[R]=L,b.custom?T[R]=L:E.hasOwnProperty(R)&&(T[E[R]]=L),w&&L.boot()}for(x=this.plugins,p=0;p<x.length;p++){var B=x[p];B.mapping&&(T[B.mapping]=B.plugin)}},getDefaultScenePlugins:function(){var u=this.game.config.defaultPlugins;return u=u.concat(this.scenePlugins),u},installScenePlugin:function(u,d,c,p,g){if(g===void 0&&(g=!1),typeof d!="function"){console.warn("Invalid Scene Plugin: "+u);return}if(!l.hasCore(u))l.register(u,d,c,!0),this.scenePlugins.push(u);else if(!g&&l.hasCore(u)){console.warn("Scene Plugin key in use: "+u);return}if(p){var x=new d(p,this,u);p.sys[u]=x,c&&c!==""&&(p[c]=x),x.boot()}},install:function(u,d,c,p,g){if(c===void 0&&(c=!1),p===void 0&&(p=null),g===void 0&&(g=null),typeof d!="function")return console.warn("Invalid Plugin: "+u),null;if(l.hasCustom(u))return console.warn("Plugin key in use: "+u),null;if(p!==null&&(c=!0),!this.game.isBooted)this._pendingGlobal.push({key:u,plugin:d,start:c,mapping:p,data:g});else if(l.registerCustom(u,d,p,g),c)return this.start(u);return null},getIndex:function(u){for(var d=this.plugins,c=0;c<d.length;c++){var p=d[c];if(p.key===u)return c}return-1},getEntry:function(u){var d=this.getIndex(u);if(d!==-1)return this.plugins[d]},isActive:function(u){var d=this.getEntry(u);return d&&d.active},start:function(u,d){d===void 0&&(d=u);var c=this.getEntry(d);return c&&!c.active?(c.active=!0,c.plugin.start()):c||(c=this.createEntry(u,d)),c?c.plugin:null},createEntry:function(u,d){var c=l.getCustom(u);if(c){var p=new c.plugin(this);c={key:d,plugin:p,active:!0,mapping:c.mapping,data:c.data},this.plugins.push(c),p.init(c.data),p.start()}return c},stop:function(u){var d=this.getEntry(u);return d&&d.active&&(d.active=!1,d.plugin.stop()),this},get:function(u,d){d===void 0&&(d=!0);var c=this.getEntry(u);if(c)return c.plugin;var p=this.getClass(u);return p&&d?(c=this.createEntry(u,u),c?c.plugin:null):p||null},getClass:function(u){return l.getCustomClass(u)},removeGlobalPlugin:function(u){var d=this.getEntry(u);d&&i(this.plugins,d),l.removeCustom(u)},removeScenePlugin:function(u){i(this.scenePlugins,u),l.remove(u)},registerGameObject:function(u,d,c){return d&&s.register(u,d),c&&a.register(u,c),this},removeGameObject:function(u,d,c){return d===void 0&&(d=!0),c===void 0&&(c=!0),d&&s.remove(u),c&&a.remove(u),this},registerFileType:function(u,d,c){o.register(u,d),c&&c.sys.load&&(c.sys.load[u]=d)},destroy:function(){for(var u=0;u<this.plugins.length;u++)this.plugins[u].plugin.destroy();l.destroyCustomPlugins(),this.game.noReturn&&l.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(201),f=t(0),r=t(9),o=t(104),a=t(22),s=t(401),n=t(407),l=t(402),i=t(1),h=t(10),u=t(416),d=t(76),c=t(3),p=new f({Extends:r,initialize:function(x){r.call(this),this.game=x,this.canvas,this.canvasBounds=new h,this.parent=null,this.parentIsWindow=!1,this.parentSize=new u,this.gameSize=new u,this.baseSize=new u,this.displaySize=new u,this.scaleMode=e.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new c(1,1),this.autoRound=!1,this.autoCenter=e.CENTER.NO_CENTER,this.orientation=e.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:i,windowResize:i,fullScreenChange:i,fullScreenError:i}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(a.BOOT,this.boot,this)},boot:function(){var g=this.game;this.canvas=g.canvas,this.fullscreen=g.device.fullscreen,this.scaleMode!==e.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===e.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),g.events.on(a.PRE_STEP,this.step,this),g.events.once(a.READY,this.refresh,this),g.events.once(a.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(g){this.getParent(g),this.getParentBounds();var x=g.width,y=g.height,T=g.scaleMode,E=g.zoom,w=g.autoRound;if(typeof x=="string"){var A=this.parentSize.width;A===0&&(A=window.innerWidth);var b=parseInt(x,10)/100;x=Math.floor(A*b)}if(typeof y=="string"){var R=this.parentSize.height;R===0&&(R=window.innerHeight);var L=parseInt(y,10)/100;y=Math.floor(R*L)}this.scaleMode=T,this.autoRound=w,this.autoCenter=g.autoCenter,this.resizeInterval=g.resizeInterval,w&&(x=Math.floor(x),y=Math.floor(y)),this.gameSize.setSize(x,y),E===e.ZOOM.MAX_ZOOM&&(E=this.getMaxZoom()),this.zoom=E,E!==1&&(this._resetZoom=!0),this.baseSize.setSize(x,y),w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),g.minWidth>0&&this.displaySize.setMin(g.minWidth*E,g.minHeight*E),g.maxWidth>0&&this.displaySize.setMax(g.maxWidth*E,g.maxHeight*E),this.displaySize.setSize(x,y),this.orientation=l(x,y)},getParent:function(g){var x=g.parent;if(x!==null){if(this.parent=n(x),this.parentIsWindow=this.parent===document.body,g.expandParent&&g.scaleMode!==e.SCALE_MODE.NONE){var y=this.parent.getBoundingClientRect();(this.parentIsWindow||y.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",y=this.parent.getBoundingClientRect(),!this.parentIsWindow&&y.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}g.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=n(g.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var g=this.parentSize,x=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(x.height=s(!0));var y=x.width,T=x.height;return g.width!==y||g.height!==T?(g.setSize(y,T),!0):!1},lockOrientation:function(g){var x=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return x?x.call(screen,g):!1},setParentSize:function(g,x){return this.parentSize.setSize(g,x),this.refresh()},setGameSize:function(g,x){var y=this.autoRound;y&&(g=Math.floor(g),x=Math.floor(x));var T=this.width,E=this.height;return this.gameSize.resize(g,x),this.baseSize.resize(g,x),y&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(g/x),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(T,E)},resize:function(g,x){var y=this.zoom,T=this.autoRound;T&&(g=Math.floor(g),x=Math.floor(x));var E=this.width,w=this.height;this.gameSize.resize(g,x),this.baseSize.resize(g,x),T&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(g*y,x*y),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var A=this.canvas.style,b=g*y,R=x*y;return T&&(b=Math.floor(b),R=Math.floor(R)),(b!==g||R!==x)&&(A.width=b+"px",A.height=R+"px"),this.refresh(E,w)},setZoom:function(g){return this.zoom=g,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(g,x){g===void 0&&(g=this.width),x===void 0&&(x=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var y=this.game.domContainer;if(y){this.baseSize.setCSS(y);var T=this.canvas.style,E=y.style;E.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",E.marginLeft=T.marginLeft,E.marginTop=T.marginTop}return this.emit(o.RESIZE,this.gameSize,this.baseSize,this.displaySize,g,x),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var g=l(this.width,this.height);g!==this.orientation&&(this.orientation=g,this.emit(o.ORIENTATION_CHANGE,g))}},updateScale:function(){var g=this.canvas.style,x=this.gameSize.width,y=this.gameSize.height,T,E,w=this.zoom,A=this.autoRound;this.scaleMode===e.SCALE_MODE.NONE?(this.displaySize.setSize(x*w,y*w),T=this.displaySize.width,E=this.displaySize.height,A&&(T=Math.floor(T),E=Math.floor(E)),this._resetZoom&&(g.width=T+"px",g.height=E+"px",this._resetZoom=!1)):this.scaleMode===e.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),T=this.displaySize.width,E=this.displaySize.height,A&&(T=Math.floor(T),E=Math.floor(E)),this.canvas.width=T,this.canvas.height=E):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),T=this.displaySize.width,E=this.displaySize.height,A&&(T=Math.floor(T),E=Math.floor(E)),g.width=T+"px",g.height=E+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var g=d(this.parentSize.width,this.gameSize.width,0,!0),x=d(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(g,x),1)},updateCenter:function(){var g=this.autoCenter;if(g!==e.CENTER.NO_CENTER){var x=this.canvas,y=x.style,T=x.getBoundingClientRect(),E=T.width,w=T.height,A=Math.floor((this.parentSize.width-E)/2),b=Math.floor((this.parentSize.height-w)/2);g===e.CENTER.CENTER_HORIZONTALLY?b=0:g===e.CENTER.CENTER_VERTICALLY&&(A=0),y.marginLeft=A+"px",y.marginTop=b+"px"}},updateBounds:function(){var g=this.canvasBounds,x=this.canvas.getBoundingClientRect();g.x=x.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),g.y=x.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),g.width=x.width,g.height=x.height},transformX:function(g){return(g-this.canvasBounds.left)*this.displayScale.x},transformY:function(g){return(g-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(g){g===void 0&&(g={navigationUI:"hide"});var x=this.fullscreen;if(!x.available){this.emit(o.FULLSCREEN_UNSUPPORTED);return}if(!x.active){var y=this.getFullscreenTarget();x.keyboard?y[x.request](Element.ALLOW_KEYBOARD_INPUT):y[x.request](g)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(o.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(g){this.removeFullscreenTarget(),this.emit(o.FULLSCREEN_FAILED,g)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var g=document.createElement("div");g.style.margin="0",g.style.padding="0",g.style.width="100%",g.style.height="100%",this.fullscreenTarget=g,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var x=this.canvas.parentNode;x.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var g=this.fullscreenTarget;if(g&&g.parentNode){var x=g.parentNode;x.insertBefore(this.canvas,g),x.removeChild(g)}}},stopFullscreen:function(){var g=this.fullscreen;if(!g.available)return this.emit(o.FULLSCREEN_UNSUPPORTED),!1;g.active&&document[g.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(o.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(g){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(g)},startListeners:function(){var g=this,x=this.listeners;if(x.orientationChange=function(){g.updateBounds(),g._checkOrientation=!0,g.dirty=!0},x.windowResize=function(){g.updateBounds(),g.dirty=!0},window.addEventListener("orientationchange",x.orientationChange,!1),window.addEventListener("resize",x.windowResize,!1),this.fullscreen.available){x.fullScreenChange=function(T){return g.onFullScreenChange(T)},x.fullScreenError=function(T){return g.onFullScreenError(T)};var y=["webkit","moz",""];y.forEach(function(T){document.addEventListener(T+"fullscreenchange",x.fullScreenChange,!1),document.addEventListener(T+"fullscreenerror",x.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",x.fullScreenChange,!1),document.addEventListener("MSFullscreenError",x.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(g,x){!this.parent||(this._lastCheck+=x,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var g=this.listeners;window.removeEventListener("orientationchange",g.orientationChange,!1),window.removeEventListener("resize",g.windowResize,!1);var x=["webkit","moz",""];x.forEach(function(y){document.removeEventListener(y+"fullscreenchange",g.fullScreenChange,!1),document.removeEventListener(y+"fullscreenerror",g.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",g.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",g.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===e.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===e.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});m.exports=p},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(76),o=t(3),a=new f({initialize:function(n,l,i,h){n===void 0&&(n=0),l===void 0&&(l=n),i===void 0&&(i=0),h===void 0&&(h=null),this._width=n,this._height=l,this._parent=h,this.aspectMode=i,this.aspectRatio=l===0?1:n/l,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new o},setAspectMode:function(s){return s===void 0&&(s=0),this.aspectMode=s,this.setSize(this._width,this._height)},setSnap:function(s,n){return s===void 0&&(s=0),n===void 0&&(n=s),this.snapTo.set(s,n),this.setSize(this._width,this._height)},setParent:function(s){return this._parent=s,this.setSize(this._width,this._height)},setMin:function(s,n){return s===void 0&&(s=0),n===void 0&&(n=s),this.minWidth=e(s,0,this.maxWidth),this.minHeight=e(n,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(s,n){return s===void 0&&(s=Number.MAX_VALUE),n===void 0&&(n=s),this.maxWidth=e(s,this.minWidth,Number.MAX_VALUE),this.maxHeight=e(n,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(s,n){switch(s===void 0&&(s=0),n===void 0&&(n=s),this.aspectMode){case a.NONE:this._width=this.getNewWidth(r(s,this.snapTo.x)),this._height=this.getNewHeight(r(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(r(s,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(r(n,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(s,n,!0);break;case a.ENVELOP:this.constrain(s,n,!1);break}return this},setAspectRatio:function(s){return this.aspectRatio=s,this.setSize(this._width,this._height)},resize:function(s,n){return this._width=this.getNewWidth(r(s,this.snapTo.x)),this._height=this.getNewHeight(r(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(s,n){return n===void 0&&(n=!0),s=e(s,this.minWidth,this.maxWidth),n&&this._parent&&s>this._parent.width&&(s=Math.max(this.minWidth,this._parent.width)),s},getNewHeight:function(s,n){return n===void 0&&(n=!0),s=e(s,this.minHeight,this.maxHeight),n&&this._parent&&s>this._parent.height&&(s=Math.max(this.minHeight,this._parent.height)),s},constrain:function(s,n,l){s===void 0&&(s=0),n===void 0&&(n=s),l===void 0&&(l=!0),s=this.getNewWidth(s),n=this.getNewHeight(n);var i=this.snapTo,h=n===0?1:s/n;return l&&this.aspectRatio>h||!l&&this.aspectRatio<h?(s=r(s,i.x),n=s/this.aspectRatio,i.y>0&&(n=r(n,i.y),s=n*this.aspectRatio)):(l&&this.aspectRatio<h||!l&&this.aspectRatio>h)&&(n=r(n,i.y),s=n*this.aspectRatio,i.x>0&&(s=r(s,i.x),n=s*(1/this.aspectRatio))),this._width=s,this._height=n,this},fitTo:function(s,n){return this.constrain(s,n,!0)},envelop:function(s,n){return this.constrain(s,n,!1)},setWidth:function(s){return this.setSize(s,this._height)},setHeight:function(s){return this.setSize(this._width,s)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(s){s&&s.style&&(s.style.width=this._width+"px",s.style.height=this._height+"px")},copy:function(s){return s.setAspectMode(this.aspectMode),s.aspectRatio=this.aspectRatio,s.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(s){this.setSize(s,this._height)}},height:{get:function(){return this._height},set:function(s){this.setSize(this._width,s)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(144),r=t(20),o=t(22),a=t(6),s=t(95),n=t(1),l=t(418),i=t(204),h=new e({initialize:function(d,c){if(this.game=d,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,c){Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)this._pending.push({key:"default",scene:c[p],autoStart:p===0,data:{}})}d.events.once(o.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var u,d,c,p;for(u=0;u<this._pending.length;u++){d=this._pending[u],c=d.key,p=d.scene;var g;p instanceof l?g=this.createSceneFromInstance(c,p):typeof p=="object"?g=this.createSceneFromObject(c,p):typeof p=="function"&&(g=this.createSceneFromFunction(c,p)),c=g.sys.settings.key,this.keys[c]=g,this.scenes.push(g),this._data[c]&&(g.sys.settings.data=this._data[c].data,this._data[c].autoStart&&(d.autoStart=!0)),(d.autoStart||g.sys.settings.active)&&this._start.push(c)}for(this._pending.length=0,this._data={},this.isBooted=!0,u=0;u<this._start.length;u++)d=this._start[u],this.start(d);this._start.length=0}},processQueue:function(){var u=this._pending.length,d=this._queue.length;if(!(u===0&&d===0)){var c,p;if(u){for(c=0;c<u;c++)p=this._pending[c],this.add(p.key,p.scene,p.autoStart,p.data);for(c=0;c<this._start.length;c++)p=this._start[c],this.start(p);this._start.length=0,this._pending.length=0;return}for(c=0;c<this._queue.length;c++)p=this._queue[c],this[p.op](p.keyA,p.keyB);this._queue.length=0}},add:function(u,d,c,p){if(c===void 0&&(c=!1),p===void 0&&(p={}),this.isProcessing||!this.isBooted)return this._pending.push({key:u,scene:d,autoStart:c,data:p}),this.isBooted||(this._data[u]={data:p}),null;u=this.getKey(u,d);var g;return d instanceof l?g=this.createSceneFromInstance(u,d):typeof d=="object"?(d.key=u,g=this.createSceneFromObject(u,d)):typeof d=="function"&&(g=this.createSceneFromFunction(u,d)),g.sys.settings.data=p,u=g.sys.settings.key,this.keys[u]=g,this.scenes.push(g),(c||g.sys.settings.active)&&(this._pending.length?this._start.push(u):this.start(u)),g},remove:function(u){if(this.isProcessing)this._queue.push({op:"remove",keyA:u,keyB:null});else{var d=this.getScene(u);if(!d||d.sys.isTransitioning())return this;var c=this.scenes.indexOf(d),p=d.sys.settings.key;c>-1&&(delete this.keys[p],this.scenes.splice(c,1),this._start.indexOf(p)>-1&&(c=this._start.indexOf(p),this._start.splice(c,1)),d.sys.destroy())}return this},bootScene:function(u){var d=u.sys,c=d.settings;d.sceneUpdate=n,u.init&&(u.init.call(u,c.data),c.status=f.INIT,c.isTransition&&d.events.emit(r.TRANSITION_INIT,c.transitionFrom,c.transitionDuration));var p;d.load&&(p=d.load,p.reset()),p&&u.preload?(u.preload.call(u),p.list.size===0?this.create(u):(c.status=f.LOADING,p.once(s.COMPLETE,this.loadComplete,this),p.start())):this.create(u)},loadComplete:function(u){this.create(u.scene)},payloadComplete:function(u){this.bootScene(u.scene)},update:function(u,d){this.processQueue(),this.isProcessing=!0;for(var c=this.scenes.length-1;c>=0;c--){var p=this.scenes[c].sys;p.settings.status>f.START&&p.settings.status<=f.RUNNING&&p.step(u,d)}},render:function(u){for(var d=0;d<this.scenes.length;d++){var c=this.scenes[d].sys;c.settings.visible&&c.settings.status>=f.LOADING&&c.settings.status<f.SLEEPING&&c.render(u)}this.isProcessing=!1},create:function(u){var d=u.sys,c=d.settings;u.create&&(c.status=f.CREATING,u.create.call(u,c.data),c.status===f.DESTROYED)||(c.isTransition&&d.events.emit(r.TRANSITION_START,c.transitionFrom,c.transitionDuration),u.update&&(d.sceneUpdate=u.update),c.status=f.RUNNING,d.events.emit(r.CREATE,u))},createSceneFromFunction:function(u,d){var c=new d;if(c instanceof l){var p=c.sys.settings.key;if(p!==""&&(u=p),this.keys.hasOwnProperty(u))throw new Error("Cannot add a Scene with duplicate key: "+u);return this.createSceneFromInstance(u,c)}else return c.sys=new i(c),c.sys.settings.key=u,c.sys.init(this.game),c},createSceneFromInstance:function(u,d){var c=d.sys.settings.key;return c===""&&(d.sys.settings.key=u),d.sys.init(this.game),d},createSceneFromObject:function(u,d){var c=new l(d),p=c.sys.settings.key;p!==""?u=p:c.sys.settings.key=u,c.sys.init(this.game);for(var g=["init","preload","create","update","render"],x=0;x<g.length;x++){var y=a(d,g[x],null);y&&(c[g[x]]=y)}if(d.hasOwnProperty("extend")){for(var T in d.extend)if(!!d.extend.hasOwnProperty(T)){var E=d.extend[T];T==="data"&&c.hasOwnProperty("data")&&typeof E=="object"?c.data.merge(E):T!=="sys"&&(c[T]=E)}}return c},getKey:function(u,d){if(u||(u="default"),typeof d=="function")return u;if(d instanceof l?u=d.sys.settings.key:typeof d=="object"&&d.hasOwnProperty("key")&&(u=d.key),this.keys.hasOwnProperty(u))throw new Error("Cannot add a Scene with duplicate key: "+u);return u},getScenes:function(u,d){u===void 0&&(u=!0),d===void 0&&(d=!1);for(var c=[],p=this.scenes,g=0;g<p.length;g++){var x=p[g];x&&(!u||u&&x.sys.isActive())&&c.push(x)}return d?c.reverse():c},getScene:function(u){if(typeof u=="string"){if(this.keys[u])return this.keys[u]}else for(var d=0;d<this.scenes.length;d++)if(u===this.scenes[d])return u;return null},isActive:function(u){var d=this.getScene(u);return d?d.sys.isActive():null},isPaused:function(u){var d=this.getScene(u);return d?d.sys.isPaused():null},isVisible:function(u){var d=this.getScene(u);return d?d.sys.isVisible():null},isSleeping:function(u){var d=this.getScene(u);return d?d.sys.isSleeping():null},pause:function(u,d){var c=this.getScene(u);return c&&c.sys.pause(d),this},resume:function(u,d){var c=this.getScene(u);return c&&c.sys.resume(d),this},sleep:function(u,d){var c=this.getScene(u);return c&&!c.sys.isTransitioning()&&c.sys.sleep(d),this},wake:function(u,d){var c=this.getScene(u);return c&&c.sys.wake(d),this},run:function(u,d){var c=this.getScene(u);if(!c){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===u){this.queueOp("start",u,d);break}return this}c.sys.isSleeping()?c.sys.wake(d):c.sys.isPaused()?c.sys.resume(d):this.start(u,d)},start:function(u,d){if(!this.isBooted)return this._data[u]={autoStart:!0,data:d},this;var c=this.getScene(u);if(c){var p=c.sys;if(p.isActive()||p.isPaused())p.shutdown(),p.sceneUpdate=n,p.start(d);else{p.sceneUpdate=n,p.start(d);var g;if(p.load&&(g=p.load),g&&p.settings.hasOwnProperty("pack")&&(g.reset(),g.addPack({payload:p.settings.pack})))return p.settings.status=f.LOADING,g.once(s.COMPLETE,this.payloadComplete,this),g.start(),this}this.bootScene(c)}return this},stop:function(u,d){var c=this.getScene(u);return c&&!c.sys.isTransitioning()&&c.sys.shutdown(d),this},switch:function(u,d){var c=this.getScene(u),p=this.getScene(d);return c&&p&&c!==p&&(this.sleep(u),this.isSleeping(d)?this.wake(d):this.start(d)),this},getAt:function(u){return this.scenes[u]},getIndex:function(u){var d=this.getScene(u);return this.scenes.indexOf(d)},bringToTop:function(u){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:u,keyB:null});else{var d=this.getIndex(u);if(d!==-1&&d<this.scenes.length){var c=this.getScene(u);this.scenes.splice(d,1),this.scenes.push(c)}}return this},sendToBack:function(u){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:u,keyB:null});else{var d=this.getIndex(u);if(d!==-1&&d>0){var c=this.getScene(u);this.scenes.splice(d,1),this.scenes.unshift(c)}}return this},moveDown:function(u){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:u,keyB:null});else{var d=this.getIndex(u);if(d>0){var c=d-1,p=this.getScene(u),g=this.getAt(c);this.scenes[d]=g,this.scenes[c]=p}}return this},moveUp:function(u){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:u,keyB:null});else{var d=this.getIndex(u);if(d<this.scenes.length-1){var c=d+1,p=this.getScene(u),g=this.getAt(c);this.scenes[d]=g,this.scenes[c]=p}}return this},moveAbove:function(u,d){if(u===d)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:u,keyB:d});else{var c=this.getIndex(u),p=this.getIndex(d);if(c!==-1&&p!==-1){var g=this.getAt(p);this.scenes.splice(p,1),this.scenes.splice(c+1,0,g)}}return this},moveBelow:function(u,d){if(u===d)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:u,keyB:d});else{var c=this.getIndex(u),p=this.getIndex(d);if(c!==-1&&p!==-1){var g=this.getAt(p);this.scenes.splice(p,1),c===0?this.scenes.unshift(g):this.scenes.splice(c,0,g)}}return this},queueOp:function(u,d,c){return this._queue.push({op:u,keyA:d,keyB:c}),this},swapPosition:function(u,d){if(u===d)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:u,keyB:d});else{var c=this.getIndex(u),p=this.getIndex(d);if(c!==p&&c!==-1&&p!==-1){var g=this.getAt(c);this.scenes[c]=this.scenes[p],this.scenes[p]=g}}return this},dump:function(){for(var u=[],d=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],c=0;c<this.scenes.length;c++){var p=this.scenes[c].sys,g=p.settings.visible&&(p.settings.status===f.RUNNING||p.settings.status===f.PAUSED)?"[*] ":"[-] ";g+=p.settings.key+" ("+d[p.settings.status]+")",u.push(g)}console.log(u.join(`
`))},destroy:function(){for(var u=0;u<this.scenes.length;u++){var d=this.scenes[u].sys;d.destroy()}this.update=n,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(204),r=new e({initialize:function(a){this.sys=new f(this,a),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=t(205),r=function(o){var a=o.game.config.defaultPhysicsSystem,s=e(o.settings,"physics",!1);if(!(!a&&!s)){var n=[];if(a&&n.push(f(a+"Physics")),s)for(var l in s)l=f(l.concat("Physics")),n.indexOf(l)===-1&&n.push(l);return n}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(r){var o=r.plugins.getDefaultScenePlugins(),a=e(r.settings,"plugins",!1);return Array.isArray(a)?a:o||[]};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(144),f=t(6),r=t(127),o=t(978),a={create:function(s){return typeof s=="string"?s={key:s}:s===void 0&&(s={}),{status:e.PENDING,key:f(s,"key",""),active:f(s,"active",!1),visible:f(s,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:f(s,"pack",!1),cameras:f(s,"cameras",null),map:f(s,"map",r(o,f(s,"mapAdd",{}))),physics:f(s,"physics",{}),loader:f(s,"loader",{}),plugins:f(s,"plugins",!1),input:f(s,"input",{})}}};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(423),r=t(0),o=t(38),a=t(33),s=t(9),n=t(106),l=t(22),i=t(388),h=t(6),u=t(425),d=t(206),c=new r({Extends:s,initialize:function(g){s.call(this),this.game=g,this.name="TextureManager",this.list={},this._tempCanvas=e.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,g.events.once(l.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(n.LOAD,this.updatePending,this),this.on(n.ERROR,this.updatePending,this);var p=this.game.config;this.addBase64("__DEFAULT",p.defaultImage),this.addBase64("__MISSING",p.missingImage),this.addBase64("__WHITE",p.whiteImage),this.game.events.once(l.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(n.LOAD),this.off(n.ERROR),this.emit(n.READY))},checkKey:function(p){return this.exists(p)?(console.error("Texture key already in use: "+p),!1):!0},remove:function(p){if(typeof p=="string")if(this.exists(p))p=this.get(p);else return console.warn("No texture found matching key: "+p),this;return this.list.hasOwnProperty(p.key)&&(p.destroy(),this.emit(n.REMOVE,p.key)),this},removeKey:function(p){return this.list.hasOwnProperty(p)&&delete this.list[p],this},addBase64:function(p,g){if(this.checkKey(p)){var x=this,y=new Image;y.onerror=function(){x.emit(n.ERROR,p)},y.onload=function(){var T=x.create(p,y);u.Image(T,0),x.emit(n.ADD,p,T),x.emit(n.LOAD,p,T)},y.src=g}return this},getBase64:function(p,g,x,y){x===void 0&&(x="image/png"),y===void 0&&(y=.92);var T="",E=this.getFrame(p,g);if(E&&(E.source.isRenderTexture||E.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(E){var w=E.canvasData,A=e.create2D(this,w.width,w.height),b=A.getContext("2d");b.drawImage(E.source.image,w.x,w.y,w.width,w.height,0,0,w.width,w.height),T=A.toDataURL(x,y),e.remove(A)}return T},addImage:function(p,g,x){var y=null;return this.checkKey(p)&&(y=this.create(p,g),u.Image(y,0),x&&y.setDataSource(x),this.emit(n.ADD,p,y)),y},addGLTexture:function(p,g,x,y){var T=null;return this.checkKey(p)&&(x===void 0&&(x=g.width),y===void 0&&(y=g.height),T=this.create(p,g,x,y),T.add("__BASE",0,0,0,x,y),this.emit(n.ADD,p,T)),T},addRenderTexture:function(p,g){var x=null;return this.checkKey(p)&&(x=this.create(p,g),x.add("__BASE",0,0,0,g.width,g.height),this.emit(n.ADD,p,x)),x},generate:function(p,g){if(this.checkKey(p)){var x=e.create(this,1,1);return g.canvas=x,i(g),this.addCanvas(p,x)}else return null},createCanvas:function(p,g,x){if(g===void 0&&(g=256),x===void 0&&(x=256),this.checkKey(p)){var y=e.create(this,g,x,a.CANVAS,!0);return this.addCanvas(p,y)}return null},addCanvas:function(p,g,x){x===void 0&&(x=!1);var y=null;return x?y=new f(this,p,g,g.width,g.height):this.checkKey(p)&&(y=new f(this,p,g,g.width,g.height),this.list[p]=y,this.emit(n.ADD,p,y)),y},addAtlas:function(p,g,x,y){return Array.isArray(x.textures)||Array.isArray(x.frames)?this.addAtlasJSONArray(p,g,x,y):this.addAtlasJSONHash(p,g,x,y)},addAtlasJSONArray:function(p,g,x,y){var T=null;if(this.checkKey(p)){if(T=this.create(p,g),Array.isArray(x))for(var E=x.length===1,w=0;w<T.source.length;w++){var A=E?x[0]:x[w];u.JSONArray(T,w,A)}else u.JSONArray(T,0,x);y&&T.setDataSource(y),this.emit(n.ADD,p,T)}return T},addAtlasJSONHash:function(p,g,x,y){var T=null;if(this.checkKey(p)){if(T=this.create(p,g),Array.isArray(x))for(var E=0;E<x.length;E++)u.JSONHash(T,E,x[E]);else u.JSONHash(T,0,x);y&&T.setDataSource(y),this.emit(n.ADD,p,T)}return T},addAtlasXML:function(p,g,x,y){var T=null;return this.checkKey(p)&&(T=this.create(p,g),u.AtlasXML(T,0,x),y&&T.setDataSource(y),this.emit(n.ADD,p,T)),T},addUnityAtlas:function(p,g,x,y){var T=null;return this.checkKey(p)&&(T=this.create(p,g),u.UnityYAML(T,0,x),y&&T.setDataSource(y),this.emit(n.ADD,p,T)),T},addSpriteSheet:function(p,g,x){var y=null;if(this.checkKey(p)){y=this.create(p,g);var T=y.source[0].width,E=y.source[0].height;u.SpriteSheet(y,0,0,0,T,E,x),this.emit(n.ADD,p,y)}return y},addSpriteSheetFromAtlas:function(p,g){if(!this.checkKey(p))return null;var x=h(g,"atlas",null),y=h(g,"frame",null);if(!(!x||!y)){var T=this.get(x),E=T.get(y);if(E){var w=this.create(p,E.source.image);return E.trimmed?u.SpriteSheetFromAtlas(w,E,g):u.SpriteSheet(w,0,E.cutX,E.cutY,E.cutWidth,E.cutHeight,g),this.emit(n.ADD,p,w),w}}},create:function(p,g,x,y){var T=null;return this.checkKey(p)&&(T=new d(this,p,g,x,y),this.list[p]=T),T},exists:function(p){return this.list.hasOwnProperty(p)},get:function(p){return p===void 0&&(p="__DEFAULT"),this.list[p]?this.list[p]:p instanceof d?p:this.list.__MISSING},cloneFrame:function(p,g){if(this.list[p])return this.list[p].get(g).clone()},getFrame:function(p,g){if(this.list[p])return this.list[p].get(g)},getTextureKeys:function(){var p=[];for(var g in this.list)g!=="__DEFAULT"&&g!=="__MISSING"&&p.push(g);return p},getPixel:function(p,g,x,y){var T=this.getFrame(x,y);if(T){p-=T.x,g-=T.y;var E=T.data.cut;if(p+=E.x,g+=E.y,p>=E.x&&p<E.r&&g>=E.y&&g<E.b){var w=this._tempContext;w.clearRect(0,0,1,1),w.drawImage(T.source.image,p,g,1,1,0,0,1,1);var A=w.getImageData(0,0,1,1);return new o(A.data[0],A.data[1],A.data[2],A.data[3])}}return null},getPixelAlpha:function(p,g,x,y){var T=this.getFrame(x,y);if(T){p-=T.x,g-=T.y;var E=T.data.cut;if(p+=E.x,g+=E.y,p>=E.x&&p<E.r&&g>=E.y&&g<E.b){var w=this._tempContext;w.clearRect(0,0,1,1),w.drawImage(T.source.image,p,g,1,1,0,0,1,1);var A=w.getImageData(0,0,1,1);return A.data[3]}}return null},setTexture:function(p,g,x){return this.list[g]&&(p.texture=this.list[g],p.frame=p.texture.get(x)),p},renameTexture:function(p,g){var x=this.get(p);return x&&p!==g?(x.key=g,this.list[g]=x,delete this.list[p],!0):!1},each:function(p,g){for(var x=[null],y=1;y<arguments.length;y++)x.push(arguments[y]);for(var T in this.list)x[0]=this.list[T],p.apply(g,x)},destroy:function(){for(var p in this.list)this.list[p].destroy();this.list={},this.game=null,e.remove(this._tempCanvas)}});m.exports=c},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(18),r=t(38),o=t(33),a=t(138),s=t(206),n=new e({Extends:s,initialize:function(i,h,u,d,c){s.call(this,i,h,u,d,c),this.add("__BASE",0,0,0,d,c),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=d,this.height=c,this.imageData=this.context.getImageData(0,0,d,c),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===o.WEBGL&&this.refresh(),this},draw:function(l,i,h){return this.context.drawImage(h,l,i),this.update()},drawFrame:function(l,i,h,u){h===void 0&&(h=0),u===void 0&&(u=0);var d=this.manager.getFrame(l,i);if(d){var c=d.canvasData,p=d.cutWidth,g=d.cutHeight,x=d.source.resolution;return this.context.drawImage(d.source.image,c.x,c.y,p,g,h,u,p/x,g/x),this.update()}else return this},setPixel:function(l,i,h,u,d,c){c===void 0&&(c=255),l=Math.abs(Math.floor(l)),i=Math.abs(Math.floor(i));var p=this.getIndex(l,i);if(p>-1){var g=this.context.getImageData(l,i,1,1);g.data[0]=h,g.data[1]=u,g.data[2]=d,g.data[3]=c,this.context.putImageData(g,l,i)}return this},putData:function(l,i,h,u,d,c,p){return u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=l.width),p===void 0&&(p=l.height),this.context.putImageData(l,i,h,u,d,c,p),this},getData:function(l,i,h,u){l=f(Math.floor(l),0,this.width-1),i=f(Math.floor(i),0,this.height-1),h=f(h,1,this.width-l),u=f(u,1,this.height-i);var d=this.context.getImageData(l,i,h,u);return d},getPixel:function(l,i,h){h||(h=new r);var u=this.getIndex(l,i);if(u>-1){var d=this.data,c=d[u+0],p=d[u+1],g=d[u+2],x=d[u+3];h.setTo(c,p,g,x)}return h},getPixels:function(l,i,h,u){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=this.width),u===void 0&&(u=h),l=Math.abs(Math.round(l)),i=Math.abs(Math.round(i));for(var d=f(l,0,this.width),c=f(l+h,0,this.width),p=f(i,0,this.height),g=f(i+u,0,this.height),x=new r,y=[],T=p;T<g;T++){for(var E=[],w=d;w<c;w++)x=this.getPixel(w,T,x),E.push({x:w,y:T,color:x.color,alpha:x.alphaGL});y.push(E)}return y},getIndex:function(l,i){return l=Math.abs(Math.round(l)),i=Math.abs(Math.round(i)),l<this.width&&i<this.height?(l+i*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(l,i,h,u){return l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=this.width),u===void 0&&(u=this.height),this.context.clearRect(l,i,h,u),this.update()},setSize:function(l,i){return i===void 0&&(i=l),(l!==this.width||i!==this.height)&&(this.canvas.width=l,this.canvas.height=i,this._source.width=l,this._source.height=i,this._source.isPowerOf2=a(l,i),this.frames.__BASE.setSize(l,i,0,0),this.width=l,this.height=i,this.refresh()),this},destroy:function(){s.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=t(0),r=t(138),o=t(168),a=new f({initialize:function(n,l,i,h,u){u===void 0&&(u=!1);var d=n.manager.game;this.renderer=d.renderer,this.texture=n,this.source=l,this.image=l,this.compressionAlgorithm=null,this.resolution=1,this.width=i||l.naturalWidth||l.videoWidth||l.width||0,this.height=h||l.naturalHeight||l.videoHeight||l.height||0,this.scaleMode=o.DEFAULT,this.isCanvas=l instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&l instanceof HTMLVideoElement,this.isRenderTexture=l.type==="RenderTexture",this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&l instanceof WebGLTexture,this.isPowerOf2=r(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=u,this.init(d)},init:function(s){var n=this.renderer;n&&(n.gl?this.isCanvas?this.glTexture=n.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=n.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=n.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=n.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),s.config.antialias||this.setFilter(1)},setFilter:function(s){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,s),this.scaleMode=s},setFlipY:function(s){return s===void 0&&(s=!0),this.flipY=s,this},update:function(){var s=this.renderer.gl;s&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):s&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&e.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(427),f=t(430),r=t(432),o={create:function(a){var s=a.config.audio,n=a.device.audio;return s.noAudio||!n.webAudio&&!n.audioData?new f(a):n.webAudio&&!s.disableWebAudio?new r(a):new e(a)}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(145),f=t(0),r=t(70),o=t(429),a=new f({Extends:e,initialize:function(n){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,e.call(this,n)},add:function(s,n){var l=new o(this,s,n);return this.sounds.push(l),l},unlock:function(){this.locked=!1;var s=this;if(this.game.cache.audio.entries.each(function(h,u){for(var d=0;d<u.length;d++)if(u[d].dataset.locked==="true")return s.locked=!0,!1;return!0}),!!this.locked){var n=!1,l=function(){n=!0},i=function(){if(n){n=!1;return}document.body.removeEventListener("touchmove",l),document.body.removeEventListener("touchend",i);var h=[];if(s.game.cache.audio.entries.each(function(d,c){for(var p=0;p<c.length;p++){var g=c[p];g.dataset.locked==="true"&&h.push(g)}return!0}),h.length!==0){var u=h[h.length-1];u.oncanplaythrough=function(){u.oncanplaythrough=null,h.forEach(function(d){d.dataset.locked="false"}),s.unlocked=!0},h.forEach(function(d){d.load()})}};this.once(r.UNLOCKED,function(){for(this.forEachActiveSound(function(u){u.currentMarker===null&&u.duration===0&&(u.duration=u.tags[0].duration),u.totalDuration=u.tags[0].duration});this.lockedActionsQueue.length;){var h=this.lockedActionsQueue.shift();h.sound[h.prop].apply?h.sound[h.prop].apply(h.sound,h.value||[]):h.sound[h.prop]=h.value}},this),document.body.addEventListener("touchmove",l,!1),document.body.addEventListener("touchend",i,!1)}},onBlur:function(){this.forEachActiveSound(function(s){s.isPlaying&&(this.onBlurPausedSounds.push(s),s.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(s){s.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){e.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(s,n,l){return s.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:s,prop:n,value:l}),!0):!1},setMute:function(s){return this.mute=s,this},mute:{get:function(){return this._mute},set:function(s){this._mute=s,this.forEachActiveSound(function(n){n.updateMute()}),this.emit(r.GLOBAL_MUTE,this,s)}},setVolume:function(s){return this.volume=s,this},volume:{get:function(){return this._volume},set:function(s){this._volume=s,this.forEachActiveSound(function(n){n.updateVolume()}),this.emit(r.GLOBAL_VOLUME,this,s)}}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(r,o,a,s,n){if(s===void 0&&(s=0),n===void 0&&(n=r.length),e(r,s,n))for(var l=s;l<n;l++){var i=r[l];if(!o||o&&a===void 0&&i.hasOwnProperty(o)||o&&a!==void 0&&i[o]===a)return i}return null};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),f=t(0),r=t(70),o=t(18),a=new f({Extends:e,initialize:function(n,l,i){if(i===void 0&&(i={}),this.tags=n.game.cache.audio.get(l),!this.tags)throw new Error('There is no audio asset with key "'+l+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,e.call(this,n,l,i)},play:function(s,n){return this.manager.isLocked(this,"play",[s,n])||!e.prototype.play.call(this,s,n)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!e.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!e.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(r.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!e.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(r.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var s=this.currentConfig.seek,n=this.currentConfig.delay,l=(this.currentMarker?this.currentMarker.start:0)+s;return this.previousTime=l,this.audio.currentTime=l,this.applyConfig(),n===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+n*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var s=0;s<this.tags.length;s++){var n=this.tags[s];if(n.dataset.used==="false")return n.dataset.used="true",this.audio=n,!0}if(!this.manager.override)return!1;var l=[];this.manager.forEachActiveSound(function(h){h.key===this.key&&h.audio&&l.push(h)},this),l.sort(function(h,u){return h.loop===u.loop?u.seek/u.duration-h.seek/h.duration:h.loop?1:-1});var i=l[0];return this.audio=i.audio,i.reset(),i.audio=null,i.startTime=0,i.previousTime=0,!0},playCatchPromise:function(){var s=this.audio.play();s&&s.catch(function(n){console.warn(n)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){e.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(s){if(!!this.isPlaying){if(this.startTime>0){this.startTime<s-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,s-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var n=this.currentMarker?this.currentMarker.start:0,l=n+this.duration,i=this.audio.currentTime;if(this.currentConfig.loop)i>=l-this.manager.loopEndOffset?(this.audio.currentTime=n+Math.max(0,i-l),i=this.audio.currentTime):i<n&&(this.audio.currentTime+=n,i=this.audio.currentTime),i<this.previousTime&&this.emit(r.LOOPED,this);else if(i>=l){this.reset(),this.stopAndReleaseAudioTag(),this.emit(r.COMPLETE,this);return}this.previousTime=i}},destroy:function(){e.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=o(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){e.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(s){this.currentConfig.mute=s,!this.manager.isLocked(this,"mute",s)&&(this.updateMute(),this.emit(r.MUTE,this,s))}},setMute:function(s){return this.mute=s,this},volume:{get:function(){return this.currentConfig.volume},set:function(s){this.currentConfig.volume=s,!this.manager.isLocked(this,"volume",s)&&(this.updateVolume(),this.emit(r.VOLUME,this,s))}},setVolume:function(s){return this.volume=s,this},rate:{get:function(){return this.currentConfig.rate},set:function(s){this.currentConfig.rate=s,!this.manager.isLocked(this,r.RATE,s)&&(this.calculateRate(),this.emit(r.RATE,this,s))}},setRate:function(s){return this.rate=s,this},detune:{get:function(){return this.currentConfig.detune},set:function(s){this.currentConfig.detune=s,!this.manager.isLocked(this,r.DETUNE,s)&&(this.calculateRate(),this.emit(r.DETUNE,this,s))}},setDetune:function(s){return this.detune=s,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(s){this.manager.isLocked(this,"seek",s)||this.startTime>0||(this.isPlaying||this.isPaused)&&(s=Math.min(Math.max(0,s),this.duration),this.isPlaying?(this.previousTime=s,this.audio.currentTime=s):this.isPaused&&(this.currentConfig.seek=s),this.emit(r.SEEK,this,s))}},setSeek:function(s){return this.seek=s,this},loop:{get:function(){return this.currentConfig.loop},set:function(s){this.currentConfig.loop=s,!this.manager.isLocked(this,"loop",s)&&(this.audio&&(this.audio.loop=s),this.emit(r.LOOP,this,s))}},setLoop:function(s){return this.loop=s,this},pan:{get:function(){return this.currentConfig.pan},set:function(s){this.currentConfig.pan=s,this.emit(r.PAN,this,s)}},setPan:function(s){return this.pan=s,this}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(145),f=t(0),r=t(9),o=t(431),a=t(1),s=new f({Extends:r,initialize:function(l){r.call(this),this.game=l,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(n,l){var i=new o(this,n,l);return this.sounds.push(i),i},addAudioSprite:function(n,l){var i=this.add(n,l);return i.spritemap={},i},play:function(n,l){return!1},playAudioSprite:function(n,l,i){return!1},remove:function(n){return e.prototype.remove.call(this,n)},removeByKey:function(n){return e.prototype.removeByKey.call(this,n)},pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,forEachActiveSound:function(n,l){e.prototype.forEachActiveSound.call(this,n,l)},destroy:function(){e.prototype.destroy.call(this)}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),f=t(0),r=t(9),o=t(17),a=function(){return!1},s=function(){return null},n=function(){return this},l=new f({Extends:r,initialize:function(h,u,d){d===void 0&&(d={}),r.call(this),this.manager=h,this.key=u,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=o({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},d),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:a,updateMarker:a,removeMarker:s,play:a,pause:a,resume:a,stop:a,destroy:function(){e.prototype.destroy.call(this)},setMute:n,setVolume:n,setRate:n,setDetune:n,setSeek:n,setLoop:n,setPan:n});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(433),f=t(145),r=t(0),o=t(70),a=t(22),s=t(434),n=new r({Extends:f,initialize:function(i){this.context=this.createAudioContext(i),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),f.call(this,i),this.locked&&i.isBooted?this.unlock():i.events.once(a.BOOT,this.unlock,this)},createAudioContext:function(l){var i=l.config.audio;if(i.context)return i.context.resume(),i.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(l){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=l,this.masterMuteNode=l.createGain(),this.masterVolumeNode=l.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(l.destination),this.destination=this.masterMuteNode,this},add:function(l,i){var h=new s(this,l,i);return this.sounds.push(h),h},decodeAudio:function(l,i){var h;Array.isArray(l)?h=l:h=[{key:l,data:i}];for(var u=this.game.cache.audio,d=h.length,c=0;c<h.length;c++){var p=h[c],g=p.key,x=p.data;typeof x=="string"&&(x=e(x));var y=function(E,w){u.add(E,w),this.emit(o.DECODED,E),d--,d===0&&this.emit(o.DECODED_ALL)}.bind(this,g),T=function(E,w){console.error("Error decoding audio: "+E+" - ",w?w.message:""),d--,d===0&&this.emit(o.DECODED_ALL)}.bind(this,g);this.context.decodeAudioData(x,y,T)}},unlock:function(){var l=this,i=document.body,h=function u(){if(l.context&&i){var d=i.removeEventListener;l.context.resume().then(function(){d("touchstart",u),d("touchend",u),d("click",u),d("keydown",u),l.unlocked=!0},function(){d("touchstart",u),d("touchend",u),d("click",u),d("keydown",u)})}};i&&(i.addEventListener("touchstart",h,!1),i.addEventListener("touchend",h,!1),i.addEventListener("click",h,!1),i.addEventListener("keydown",h,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var l=this.context;(l.state==="suspended"||l.state==="interrupted")&&!this.locked&&l.resume()},update:function(l,i){f.prototype.update.call(this,l,i);var h=this.context;h&&h.state==="interrupted"&&h.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var l=this;this.context.close().then(function(){l.context=null})}f.prototype.destroy.call(this)},setMute:function(l){return this.mute=l,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(l){this.masterMuteNode.gain.setValueAtTime(l?0:1,0),this.emit(o.GLOBAL_MUTE,this,l)}},setVolume:function(l){return this.volume=l,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(l){this.masterVolumeNode.gain.setValueAtTime(l,0),this.emit(o.GLOBAL_VOLUME,this,l)}}});m.exports=n},function(m,C){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=new Uint8Array(256),f=0;f<t.length;f++)e[t.charCodeAt(f)]=f;var r=function(o){o=o.substr(o.indexOf(",")+1);var a=o.length,s=a*.75,n=0,l,i,h,u;o[a-1]==="="&&(s--,o[a-2]==="="&&s--);for(var d=new ArrayBuffer(s),c=new Uint8Array(d),p=0;p<a;p+=4)l=e[o.charCodeAt(p)],i=e[o.charCodeAt(p+1)],h=e[o.charCodeAt(p+2)],u=e[o.charCodeAt(p+3)],c[n++]=l<<2|i>>4,c[n++]=(i&15)<<4|h>>2,c[n++]=(h&3)<<6|u&63;return d};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(146),f=t(0),r=t(70),o=new f({Extends:e,initialize:function(s,n,l){if(l===void 0&&(l={}),this.audioBuffer=s.game.cache.audio.get(n),!this.audioBuffer)throw new Error('Audio key "'+n+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=s.context.createGain(),this.volumeNode=s.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),s.context.createStereoPanner?(this.pannerNode=s.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(s.destination)):this.volumeNode.connect(s.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,e.call(this,s,n,l)},play:function(a,s){return e.prototype.play.call(this,a,s)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(r.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!e.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(r.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!e.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(r.RESUME,this),!0)},stop:function(){return e.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(r.STOP,this),!0):!1},createAndStartBufferSource:function(){var a=this.currentConfig.seek,s=this.currentConfig.delay,n=this.manager.context.currentTime+s,l=(this.currentMarker?this.currentMarker.start:0)+a,i=this.duration-a;this.playTime=n-a,this.startTime=n,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,n),Math.max(0,l),Math.max(0,i)),this.resetConfig()},createAndStartLoopBufferSource:function(){var a=this.getLoopTime(),s=this.currentMarker?this.currentMarker.start:0,n=this.duration;this.loopTime=a,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,a),Math.max(0,s),Math.max(0,n))},createBufferSource:function(){var a=this,s=this.manager.context.createBufferSource();return s.buffer=this.audioBuffer,s.connect(this.muteNode),s.onended=function(n){n.target===a.source&&(a.currentConfig.loop?a.hasLooped=!0:a.hasEnded=!0)},s},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),e.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,e.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(r.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(r.LOOPED,this))},destroy:function(){e.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){e.prototype.calculateRate.call(this);var a=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,a),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,a)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var a=0,s=0;s<this.rateUpdates.length;s++){var n=0;s<this.rateUpdates.length-1?n=this.rateUpdates[s+1].time:n=this.manager.context.currentTime-this.playTime,a+=(n-this.rateUpdates[s].time)*this.rateUpdates[s].rate}return a},getLoopTime:function(){for(var a=0,s=0;s<this.rateUpdates.length-1;s++)a+=(this.rateUpdates[s+1].time-this.rateUpdates[s].time)*this.rateUpdates[s].rate;var n=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+n.time+(this.duration-a)/n.rate},rate:{get:function(){return this.currentConfig.rate},set:function(a){this.currentConfig.rate=a,this.calculateRate(),this.emit(r.RATE,this,a)}},setRate:function(a){return this.rate=a,this},detune:{get:function(){return this.currentConfig.detune},set:function(a){this.currentConfig.detune=a,this.calculateRate(),this.emit(r.DETUNE,this,a)}},setDetune:function(a){return this.detune=a,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(a){this.currentConfig.mute=a,this.muteNode.gain.setValueAtTime(a?0:1,0),this.emit(r.MUTE,this,a)}},setMute:function(a){return this.mute=a,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(a){this.currentConfig.volume=a,this.volumeNode.gain.setValueAtTime(a,0),this.emit(r.VOLUME,this,a)}},setVolume:function(a){return this.volume=a,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(a){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(a=Math.min(Math.max(0,a),this.duration),this.currentConfig.seek=a,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(r.SEEK,this,a))}},setSeek:function(a){return this.seek=a,this},loop:{get:function(){return this.currentConfig.loop},set:function(a){this.currentConfig.loop=a,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),a&&this.createAndStartLoopBufferSource()),this.emit(r.LOOP,this,a)}},setLoop:function(a){return this.loop=a,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(a){this.currentConfig.pan=a,this.pannerNode&&this.pannerNode.pan.setValueAtTime(a,this.manager.context.currentTime),this.emit(r.PAN,this,a)}},setPan:function(a){return this.pan=a,this}});m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=e.length,r=e[0].length,o=new Array(r),a=0;a<r;a++){o[a]=new Array(f);for(var s=f-1;s>-1;s--)o[a][s]=e[s][a]}return o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function t(r,o,a){var s=r[o];r[o]=r[a],r[a]=s}function e(r,o){return r<o?-1:r>o?1:0}var f=function(r,o,a,s,n){for(a===void 0&&(a=0),s===void 0&&(s=r.length-1),n===void 0&&(n=e);s>a;){if(s-a>600){var l=s-a+1,i=o-a+1,h=Math.log(l),u=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*u*(l-u)/l)*(i-l/2<0?-1:1),c=Math.max(a,Math.floor(o-i*u/l+d)),p=Math.min(s,Math.floor(o+(l-i)*u/l+d));f(r,o,c,p,n)}var g=r[o],x=a,y=s;for(t(r,a,o),n(r[s],g)>0&&t(r,a,s);x<y;){for(t(r,x,y),x++,y--;n(r[x],g)<0;)x++;for(;n(r[y],g)>0;)y--}n(r[a],g)===0?t(r,a,y):(y++,t(r,y,s)),y<=o&&(a=y+1),o<=y&&(s=y-1)}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=t(131),r=function(a,s,n){for(var l=[],i=0;i<a.length;i++)for(var h=0;h<s.length;h++)for(var u=0;u<n;u++)l.push({a:a[i],b:s[h]});return l},o=function(a,s,n){var l=e(n,"max",0),i=e(n,"qty",1),h=e(n,"random",!1),u=e(n,"randomB",!1),d=e(n,"repeat",0),c=e(n,"yoyo",!1),p=[];if(u&&f(s),d===-1)if(l===0)d=0;else{var g=a.length*s.length*i;c&&(g*=2),d=Math.ceil(l/g)}for(var x=0;x<=d;x++){var y=r(a,s,i);h&&f(y),p=p.concat(y),c&&(y.reverse(),p=p.concat(y))}return l&&p.splice(l),p};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(13),f=function(r,o){var a=e(o,"anims",null);if(a===null)return r;if(typeof a=="string")r.anims.play(a);else if(typeof a=="object"){var s=r.anims,n=e(a,"key",void 0);if(n){var l=e(a,"startFrame",void 0),i=e(a,"delay",0),h=e(a,"repeat",0),u=e(a,"repeatDelay",0),d=e(a,"yoyo",!1),c=e(a,"play",!1),p=e(a,"delayedPlay",0),g={key:n,delay:i,repeat:h,repeatDelay:u,yoyo:d,startFrame:l};c?s.play(g):p>0?s.playAfterDelay(g,p):s.load(g)}}return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(109),r=new e({initialize:function(a,s,n,l,i){this.parent=a,this.x=s,this.y=n,this.frame=l,this.data={},this.tint=16777215,this._visible=i,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(o){return o===void 0?this.frame=this.parent.frame:o instanceof f&&o.texture===this.parent.texture?this.frame=o:this.frame=this.parent.texture.get(o),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(o,a,s){return this.x=o,this.y=a,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,s&&this.setFrame(s),this},setPosition:function(o,a){return this.x=o,this.y=a,this},setFlipX:function(o){return this.flipX=o,this},setFlipY:function(o){return this.flipY=o,this},setFlip:function(o,a){return this.flipX=o,this.flipY=a,this},setVisible:function(o){return this.visible=o,this},setAlpha:function(o){return this.alpha=o,this},setTint:function(o){return this.tint=o,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(o){this.parent.dirty|=this._visible!==o,this._visible=o}},alpha:{get:function(){return this._alpha},set:function(o){this.parent.dirty|=this._alpha>0!=o>0,this._alpha=o}}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(r,o,a){a===void 0&&(a=new e);var s=Math.min(r.x,o.x),n=Math.min(r.y,o.y),l=Math.max(r.right,o.right)-s,i=Math.max(r.bottom,o.bottom)-n;return a.setTo(s,n,l,i)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(1055),o=t(15),a=t(7),s=t(202),n=t(20),l=t(140),i=new e({Extends:o,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Origin,f.ScrollFactor,f.Transform,f.Visible,r],initialize:function(u,d,c,p,g,x){o.call(this,u,"DOMElement"),this.parent=u.sys.game.domContainer,this.cache=u.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new l,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(d,c),typeof p=="string"?p[0]==="#"?this.setElement(p.substr(1),g,x):this.createElement(p,g,x):p&&this.setElement(p,g,x),u.sys.events.on(n.SLEEP,this.handleSceneEvent,this),u.sys.events.on(n.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(h){var u=this.node,d=u.style;u&&(d.display=h.settings.visible?"block":"none")},setSkew:function(h,u){return h===void 0&&(h=0),u===void 0&&(u=h),this.skewX=h,this.skewY=u,this},setPerspective:function(h){return this.parent.style.perspective=h+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(h){this.parent.style.perspective=h+"px"}},addListener:function(h){if(this.node){h=h.split(" ");for(var u=0;u<h.length;u++)this.node.addEventListener(h[u],this.handler,!1)}return this},removeListener:function(h){if(this.node){h=h.split(" ");for(var u=0;u<h.length;u++)this.node.removeEventListener(h[u],this.handler)}return this},dispatchNativeEvent:function(h){this.emit(h.type,h)},createElement:function(h,u,d){return this.setElement(document.createElement(h),u,d)},setElement:function(h,u,d){this.removeElement();var c;if(typeof h=="string"?(h[0]==="#"&&(h=h.substr(1)),c=document.getElementById(h)):typeof h=="object"&&h.nodeType===1&&(c=h),!c)return this;if(this.node=c,u&&a(u))for(var p in u)c.style[p]=u[p];else typeof u=="string"&&(c.style=u);return c.style.zIndex="0",c.style.display="inline",c.style.position="absolute",c.phaser=this,this.parent&&this.parent.appendChild(c),d&&(c.innerText=d),this.updateSize()},createFromCache:function(h,u){var d=this.cache.get(h);return d&&this.createFromHTML(d,u),this},createFromHTML:function(h,u){u===void 0&&(u="div"),this.removeElement();var d=document.createElement(u);return this.node=d,d.style.zIndex="0",d.style.display="inline",d.style.position="absolute",d.phaser=this,this.parent&&this.parent.appendChild(d),d.innerHTML=h,this.updateSize()},removeElement:function(){return this.node&&(s(this.node),this.node=null),this},updateSize:function(){var h=this.node,u=h.getBoundingClientRect();return this.width=h.clientWidth,this.height=h.clientHeight,this.displayWidth=u.width||0,this.displayHeight=u.height||0,this},getChildByProperty:function(h,u){if(this.node){for(var d=this.node.querySelectorAll("*"),c=0;c<d.length;c++)if(d[c][h]===u)return d[c]}return null},getChildByID:function(h){return this.getChildByProperty("id",h)},getChildByName:function(h){return this.getChildByProperty("name",h)},setClassName:function(h){return this.node&&(this.node.className=h,this.updateSize()),this},setText:function(h){return this.node&&(this.node.innerText=h,this.updateSize()),this},setHTML:function(h){return this.node&&(this.node.innerHTML=h,this.updateSize()),this},preUpdate:function(){var h=this.parentContainer,u=this.node;u&&h&&!h.willRender()&&(u.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(n.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(n.WAKE,this.handleSceneEvent,this)}});m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1056),f=t(15),r=t(25),o=new r,a=new r,s=new r,n=function(l,i,h,u){if(!!i.node){var d=i.node.style,c=i.scene.sys.settings;if(!d||!c.visible||f.RENDER_MASK!==i.renderFlags||i.cameraFilter!==0&&i.cameraFilter&h.id||i.parentContainer&&!i.parentContainer.willRender()){d.display="none";return}var p=i.parentContainer,g=h.alpha*i.alpha;p&&(g*=p.alpha);var x=o,y=a,T=s,E=0,w=0,A="0%",b="0%";u?(E=i.width*i.scaleX*i.originX,w=i.height*i.scaleY*i.originY,y.applyITRS(i.x-E,i.y-w,i.rotation,i.scaleX,i.scaleY),x.copyFrom(h.matrix),x.multiplyWithOffset(u,-h.scrollX*i.scrollFactorX,-h.scrollY*i.scrollFactorY),y.e=i.x-E,y.f=i.y-w,x.multiply(y,T)):(E=i.width*i.originX,w=i.height*i.originY,y.applyITRS(i.x-E,i.y-w,i.rotation,i.scaleX,i.scaleY),x.copyFrom(h.matrix),A=100*i.originX+"%",b=100*i.originY+"%",y.e-=h.scrollX*i.scrollFactorX,y.f-=h.scrollY*i.scrollFactorY,x.multiply(y,T)),i.transformOnly||(d.display="block",d.opacity=g,d.zIndex=i._depth,d.pointerEvents=i.pointerEvents,d.mixBlendMode=e[i._blendMode]),d.transform=T.getCSSMatrix()+" skew("+i.skewX+"rad, "+i.skewY+"rad) rotate3d("+i.rotate3d.x+","+i.rotate3d.y+","+i.rotate3d.z+","+i.rotate3d.w+i.rotate3dAngle+")",d.transformOrigin=A+" "+b}};m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(15),o=t(1060),a=new e({Extends:r,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.Origin,f.ScrollFactor,f.Size,f.Texture,f.Tint,f.Transform,f.Visible,o],initialize:function(n){r.call(this,n,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(218),f=t(98),r=t(14),o=t(4),a=function(s,n,l){l===void 0&&(l=new o);var i=f(n,0,r.PI2);return e(s,i,l)};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(447),f=t(218),r=t(98),o=t(14),a=function(s,n,l,i){i===void 0&&(i=[]),!n&&l>0&&(n=e(s)/l);for(var h=0;h<n;h++){var u=r(h/n,0,o.PI2);i.push(f(s,u))}return i};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=e.width/2,r=e.height/2,o=Math.pow(f-r,2)/Math.pow(f+r,2);return Math.PI*(f+r)*(1+3*o/(10+Math.sqrt(4-3*o)))};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(217),f=t(30),r=function(o,a,s,n,l,i){var h=a.commandBuffer,u=h.length,d=l||o.currentContext;if(!(u===0||!f(o,d,a,s,n))){s.addToRenderList(a);var c=1,p=1,g=0,x=0,y=1,T=0,E=0,w=0;d.beginPath();for(var A=0;A<u;++A){var b=h[A];switch(b){case e.ARC:d.arc(h[A+1],h[A+2],h[A+3],h[A+4],h[A+5],h[A+6]),A+=7;break;case e.LINE_STYLE:y=h[A+1],g=h[A+2],c=h[A+3],T=(g&16711680)>>>16,E=(g&65280)>>>8,w=g&255,d.strokeStyle="rgba("+T+","+E+","+w+","+c+")",d.lineWidth=y,A+=3;break;case e.FILL_STYLE:x=h[A+1],p=h[A+2],T=(x&16711680)>>>16,E=(x&65280)>>>8,w=x&255,d.fillStyle="rgba("+T+","+E+","+w+","+p+")",A+=2;break;case e.BEGIN_PATH:d.beginPath();break;case e.CLOSE_PATH:d.closePath();break;case e.FILL_PATH:i||d.fill();break;case e.STROKE_PATH:i||d.stroke();break;case e.FILL_RECT:i?d.rect(h[A+1],h[A+2],h[A+3],h[A+4]):d.fillRect(h[A+1],h[A+2],h[A+3],h[A+4]),A+=4;break;case e.FILL_TRIANGLE:d.beginPath(),d.moveTo(h[A+1],h[A+2]),d.lineTo(h[A+3],h[A+4]),d.lineTo(h[A+5],h[A+6]),d.closePath(),i||d.fill(),A+=6;break;case e.STROKE_TRIANGLE:d.beginPath(),d.moveTo(h[A+1],h[A+2]),d.lineTo(h[A+3],h[A+4]),d.lineTo(h[A+5],h[A+6]),d.closePath(),i||d.stroke(),A+=6;break;case e.LINE_TO:d.lineTo(h[A+1],h[A+2]),A+=2;break;case e.MOVE_TO:d.moveTo(h[A+1],h[A+2]),A+=2;break;case e.LINE_FX_TO:d.lineTo(h[A+1],h[A+2]),A+=5;break;case e.MOVE_FX_TO:d.moveTo(h[A+1],h[A+2]),A+=5;break;case e.SAVE:d.save();break;case e.RESTORE:d.restore();break;case e.TRANSLATE:d.translate(h[A+1],h[A+2]),A+=2;break;case e.SCALE:d.scale(h[A+1],h[A+2]),A+=2;break;case e.ROTATE:d.rotate(h[A+1]),A+=1;break;case e.GRADIENT_FILL_STYLE:A+=5;break;case e.GRADIENT_LINE_STYLE:A+=6;break}}d.restore()}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(137),r=t(80),o=t(2),a=t(68),s=new e({initialize:function(l,i,h,u){u===void 0&&(u=!1),this.propertyKey=i,this.propertyValue=h,this.defaultValue=h,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=u,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(l)},loadConfig:function(n,l){n===void 0&&(n={}),l&&(this.propertyKey=l),this.propertyValue=o(n,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(n){return this.propertyValue=n,this.setMethods()},setMethods:function(){var n=this.propertyValue,l=typeof n;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,l==="number")this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(n))this.onEmit=this.randomStaticValueEmit;else if(l==="function")this.emitOnly?this.onEmit=n:this.onUpdate=n;else if(l==="object"&&this.hasBoth(n,"start","end")){this.start=n.start,this.end=n.end;var i=this.has(n,"random");if(i&&(this.onEmit=this.randomRangedValueEmit),this.has(n,"steps"))this.steps=n.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var h=this.has(n,"ease")?n.ease:"Linear";this.ease=r(h,n.easeParams),i||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if(l==="object"&&this.hasBoth(n,"min","max"))this.start=n.min,this.end=n.max,this.onEmit=this.randomRangedValueEmit;else if(l==="object"&&this.has(n,"random")){var u=n.random;Array.isArray(u)&&(this.start=u[0],this.end=u[1]),this.onEmit=this.randomRangedValueEmit}else l==="object"&&this.hasEither(n,"onEmit","onUpdate")&&(this.has(n,"onEmit")&&(this.onEmit=n.onEmit),this.has(n,"onUpdate")&&(this.onUpdate=n.onUpdate));return this},has:function(n,l){return n.hasOwnProperty(l)},hasBoth:function(n,l,i){return n.hasOwnProperty(l)&&n.hasOwnProperty(i)},hasEither:function(n,l,i){return n.hasOwnProperty(l)||n.hasOwnProperty(i)},defaultEmit:function(n,l,i){return i},defaultUpdate:function(n,l,i,h){return h},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var n=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[n]},randomRangedValueEmit:function(n,l){var i=f(this.start,this.end);return n&&n.data[l]&&(n.data[l].min=i),i},steppedEmit:function(){var n=this.counter,l=this.counter+(this.end-this.start)/this.steps;return this.counter=a(l,this.start,this.end),n},easedValueEmit:function(n,l){if(n&&n.data[l]){var i=n.data[l];i.min=this.start,i.max=this.end}return this.start},easeValueUpdate:function(n,l,i){var h=n.data[l];return(h.max-h.min)*this.ease(i)+h.min}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=new e({initialize:function(a,s,n,l,i){if(typeof a=="object"){var h=a;a=f(h,"x",0),s=f(h,"y",0),n=f(h,"power",0),l=f(h,"epsilon",100),i=f(h,"gravity",50)}else a===void 0&&(a=0),s===void 0&&(s=0),n===void 0&&(n=0),l===void 0&&(l=100),i===void 0&&(i=50);this.x=a,this.y=s,this.active=!0,this._gravity=i,this._power=0,this._epsilon=0,this.power=n,this.epsilon=l},update:function(o,a){var s=this.x-o.x,n=this.y-o.y,l=s*s+n*n;if(l!==0){var i=Math.sqrt(l);l<this._epsilon&&(l=this._epsilon);var h=this._power*a/(l*i)*100;o.velocityX+=s*h,o.velocityY+=n*h}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(o){this._epsilon=o*o}},power:{get:function(){return this._power/this._gravity},set:function(o){this._power=o*this._gravity}},gravity:{get:function(){return this._gravity},set:function(o){var a=this.power;this._gravity=o,this.power=a}}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(36),r=t(50),o=new e({initialize:function(s){this.emitter=s,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(a,s){var n=this.emitter;this.frame=n.getFrame(),n.emitZone&&n.emitZone.getPoint(this),a===void 0?this.x+=n.x.onEmit(this,"x"):this.x+=a,s===void 0?this.y+=n.y.onEmit(this,"y"):this.y+=s,this.life=n.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var l=n.speedX.onEmit(this,"speedX"),i=n.speedY?n.speedY.onEmit(this,"speedY"):l;if(n.radial){var h=f(n.angle.onEmit(this,"angle"));this.velocityX=Math.cos(h)*Math.abs(l),this.velocityY=Math.sin(h)*Math.abs(i)}else if(n.moveTo){var u=n.moveToX.onEmit(this,"moveToX"),d=n.moveToY?n.moveToY.onEmit(this,"moveToY"):u,c=Math.atan2(d-this.y,u-this.x),p=r(this.x,this.y,u,d)/(this.life/1e3);this.velocityX=Math.cos(c)*p,this.velocityY=Math.sin(c)*p}else this.velocityX=l,this.velocityY=i;n.acceleration&&(this.accelerationX=n.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=n.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=n.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=n.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=n.delay.onEmit(this,"delay"),this.scaleX=n.scaleX.onEmit(this,"scaleX"),this.scaleY=n.scaleY?n.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=n.rotate.onEmit(this,"rotate"),this.rotation=f(this.angle),this.bounce=n.bounce.onEmit(this,"bounce"),this.alpha=n.alpha.onEmit(this,"alpha"),this.tint=n.tint.onEmit(this,"tint")},computeVelocity:function(a,s,n,l){var i=this.velocityX,h=this.velocityY,u=this.accelerationX,d=this.accelerationY,c=this.maxVelocityX,p=this.maxVelocityY;i+=a.gravityX*n,h+=a.gravityY*n,u&&(i+=u*n),d&&(h+=d*n),i>c?i=c:i<-c&&(i=-c),h>p?h=p:h<-p&&(h=-p),this.velocityX=i,this.velocityY=h;for(var g=0;g<l.length;g++)l[g].update(this,s,n)},checkBounds:function(a){var s=a.bounds,n=-this.bounce;this.x<s.x&&a.collideLeft?(this.x=s.x,this.velocityX*=n):this.x>s.right&&a.collideRight&&(this.x=s.right,this.velocityX*=n),this.y<s.y&&a.collideTop?(this.y=s.y,this.velocityY*=n):this.y>s.bottom&&a.collideBottom&&(this.y=s.bottom,this.velocityY*=n)},update:function(a,s,n){if(this.delayCurrent>0)return this.delayCurrent-=a,!1;var l=this.emitter,i=1-this.lifeCurrent/this.life;return this.lifeT=i,this.computeVelocity(l,a,s,n),this.x+=this.velocityX*s,this.y+=this.velocityY*s,l.bounds&&this.checkBounds(l),l.deathZone&&l.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=l.scaleX.onUpdate(this,"scaleX",i,this.scaleX),l.scaleY?this.scaleY=l.scaleY.onUpdate(this,"scaleY",i,this.scaleY):this.scaleY=this.scaleX,this.angle=l.rotate.onUpdate(this,"rotate",i,this.angle),this.rotation=f(this.angle),this.alpha=l.alpha.onUpdate(this,"alpha",i,this.alpha),this.tint=l.tint.onUpdate(this,"tint",i,this.tint),this.lifeCurrent-=a,this.lifeCurrent<=0)}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(35),f=t(0),r=t(11),o=t(453),a=t(454),s=t(449),n=t(2),l=t(210),i=t(455),h=t(126),u=t(451),d=t(456),c=t(10),p=t(79),g=t(3),x=t(68),y=new f({Mixins:[r.BlendMode,r.Mask,r.ScrollFactor,r.Visible],initialize:function(E,w){this.manager=E,this.texture=E.texture,this.frames=[E.defaultFrame],this.defaultFrame=E.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=u,this.x=new s(w,"x",0,!0),this.y=new s(w,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new s(w,"accelerationX",0,!0),this.accelerationY=new s(w,"accelerationY",0,!0),this.maxVelocityX=new s(w,"maxVelocityX",1e4,!0),this.maxVelocityY=new s(w,"maxVelocityY",1e4,!0),this.speedX=new s(w,"speedX",0,!0),this.speedY=new s(w,"speedY",0,!0),this.moveTo=!1,this.moveToX=new s(w,"moveToX",0,!0),this.moveToY=new s(w,"moveToY",0,!0),this.bounce=new s(w,"bounce",0,!0),this.scaleX=new s(w,"scaleX",1),this.scaleY=new s(w,"scaleY",1),this.tint=new s(w,"tint",16777215),this.alpha=new s(w,"alpha",1),this.lifespan=new s(w,"lifespan",1e3,!0),this.angle=new s(w,"angle",{min:0,max:360},!0),this.rotate=new s(w,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new s(w,"quantity",1,!0),this.delay=new s(w,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=e.NORMAL,this.follow=null,this.followOffset=new g,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,w&&this.fromJSON(w)},fromJSON:function(T){if(!T)return this;var E=0,w="";for(E=0;E<this.configFastMap.length;E++)w=this.configFastMap[E],h(T,w)&&(this[w]=n(T,w));for(E=0;E<this.configOpMap.length;E++)w=this.configOpMap[E],h(T,w)&&this[w].loadConfig(T);if(this.acceleration=this.accelerationX.propertyValue!==0||this.accelerationY.propertyValue!==0,this.moveTo=this.moveToX.propertyValue!==0||this.moveToY.propertyValue!==0,h(T,"speed")&&(this.speedX.loadConfig(T,"speed"),this.speedY=null),(i(T,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),h(T,"scale")&&(this.scaleX.loadConfig(T,"scale"),this.scaleY=null),h(T,"callbackScope")){var A=n(T,"callbackScope",null);this.emitCallbackScope=A,this.deathCallbackScope=A}return h(T,"emitZone")&&this.setEmitZone(T.emitZone),h(T,"deathZone")&&this.setDeathZone(T.deathZone),h(T,"bounds")&&this.setBounds(T.bounds),h(T,"followOffset")&&this.followOffset.setFromObject(n(T,"followOffset",0)),h(T,"frame")&&this.setFrame(T.frame),h(T,"reserve")&&this.reserve(T.reserve),this},toJSON:function(T){T===void 0&&(T={});var E=0,w="";for(E=0;E<this.configFastMap.length;E++)w=this.configFastMap[E],T[w]=this[w];for(E=0;E<this.configOpMap.length;E++)w=this.configOpMap[E],this[w]&&(T[w]=this[w].toJSON());return this.speedY||(delete T.speedX,T.speed=this.speedX.toJSON()),this.scaleY||(delete T.scaleX,T.scale=this.scaleX.toJSON()),T},startFollow:function(T,E,w,A){return E===void 0&&(E=0),w===void 0&&(w=0),A===void 0&&(A=!1),this.follow=T,this.followOffset.set(E,w),this.trackVisible=A,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(this.frames.length===1)return this.defaultFrame;if(this.randomFrame)return l(this.frames);var T=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=x(this.currentFrame+1,0,this._frameLength)),T},setFrame:function(T,E,w){E===void 0&&(E=!0),w===void 0&&(w=1),this.randomFrame=E,this.frameQuantity=w,this.currentFrame=0,this._frameCounter=0;var A=typeof T;if(Array.isArray(T)||A==="string"||A==="number")this.manager.setEmitterFrames(T,this);else if(A==="object"){var b=T;T=n(b,"frames",null),T&&this.manager.setEmitterFrames(T,this);var R=n(b,"cycle",!1);this.randomFrame=!R,this.frameQuantity=n(b,"quantity",w)}return this._frameLength=this.frames.length,this._frameLength===1&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(T){return T===void 0&&(T=!0),this.radial=T,this},setPosition:function(T,E){return this.x.onChange(T),this.y.onChange(E),this},setBounds:function(T,E,w,A){if(typeof T=="object"){var b=T;T=b.x,E=b.y,w=h(b,"w")?b.w:b.width,A=h(b,"h")?b.h:b.height}return this.bounds?this.bounds.setTo(T,E,w,A):this.bounds=new c(T,E,w,A),this},setSpeedX:function(T){return this.speedX.onChange(T),this.radial=!1,this},setSpeedY:function(T){return this.speedY&&(this.speedY.onChange(T),this.radial=!1),this},setSpeed:function(T){return this.speedX.onChange(T),this.speedY=null,this.radial=!0,this},setScaleX:function(T){return this.scaleX.onChange(T),this},setScaleY:function(T){return this.scaleY.onChange(T),this},setScale:function(T){return this.scaleX.onChange(T),this.scaleY=null,this},setGravityX:function(T){return this.gravityX=T,this},setGravityY:function(T){return this.gravityY=T,this},setGravity:function(T,E){return this.gravityX=T,this.gravityY=E,this},setAlpha:function(T){return this.alpha.onChange(T),this},setTint:function(T){return this.tint.onChange(T),this},setEmitterAngle:function(T){return this.angle.onChange(T),this},setAngle:function(T){return this.angle.onChange(T),this},setLifespan:function(T){return this.lifespan.onChange(T),this},setQuantity:function(T){return this.quantity.onChange(T),this},setFrequency:function(T,E){return this.frequency=T,this._counter=0,E&&this.quantity.onChange(E),this},setEmitZone:function(T){if(T===void 0)this.emitZone=null;else{var E=n(T,"type","random"),w=n(T,"source",null);switch(E){case"random":this.emitZone=new d(w);break;case"edge":var A=n(T,"quantity",1),b=n(T,"stepRate",0),R=n(T,"yoyo",!1),L=n(T,"seamless",!0);this.emitZone=new a(w,A,b,R,L);break}}return this},setDeathZone:function(T){if(T===void 0)this.deathZone=null;else{var E=n(T,"type","onEnter"),w=n(T,"source",null);if(w&&typeof w.contains=="function"){var A=E==="onEnter";this.deathZone=new o(w,A)}}return this},reserve:function(T){for(var E=this.dead,w=0;w<T;w++)E.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(T,E){return T===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof T=="function"&&(this.emitCallback=T,E&&(this.emitCallbackScope=E)),this},onParticleDeath:function(T,E){return T===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof T=="function"&&(this.deathCallback=T,E&&(this.deathCallbackScope=E)),this},killAll:function(){for(var T=this.dead,E=this.alive;E.length>0;)T.push(E.pop());return this},forEachAlive:function(T,E){for(var w=this.alive,A=w.length,b=0;b<A;++b)T.call(E,w[b],this);return this},forEachDead:function(T,E){for(var w=this.dead,A=w.length,b=0;b<A;++b)T.call(E,w[b],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return p(this.alive,this.depthSortCallback),this},flow:function(T,E){return E===void 0&&(E=1),this.frequency=T,this.quantity.onChange(E),this.start()},explode:function(T,E,w){return this.frequency=-1,this.emitParticle(T,E,w)},emitParticleAt:function(T,E,w){return this.emitParticle(w,T,E)},emitParticle:function(T,E,w){if(!this.atLimit()){T===void 0&&(T=this.quantity.onEmit());for(var A=this.dead,b=this.follow?this.follow.x+this.followOffset.x:E,R=this.follow?this.follow.y+this.followOffset.y:w,L=0;L<T;L++){var B=A.pop();if(B||(B=new this.particleClass(this)),B.fire(b,R),this.particleBringToTop?this.alive.push(B):this.alive.unshift(B),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,B,this),this.atLimit())break}return B}},preUpdate:function(T,E){E*=this.timeScale;var w=E/1e3;this.trackVisible&&(this.visible=this.follow.visible);var A=this.manager.getProcessors(),b=this.alive,R=this.dead,L=0,B=[],D=b.length;for(L=0;L<D;L++){var G=b[L];G.update(E,w,A)&&B.push({index:L,particle:G})}if(D=B.length,D>0){var X=this.deathCallback,H=this.deathCallbackScope;for(L=D-1;L>=0;L--){var K=B[L];b.splice(K.index,1),R.push(K.particle),X&&X.call(H,K.particle),K.particle.resetPosition()}}!this.on||(this.frequency===0?this.emitParticle():this.frequency>0&&(this._counter-=E,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(T,E){return T.y-E.y}});m.exports=y},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a){this.source=o,this.killOnEnter=a},willKill:function(r){var o=this.source.contains(r.x,r.y);return o&&this.killOnEnter||!o&&!this.killOnEnter}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s,n,l){n===void 0&&(n=!1),l===void 0&&(l=!0),this.source=o,this.points=[],this.quantity=a,this.stepRate=s,this.yoyo=n,this.counter=-1,this.seamless=l,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var r=this.points[0],o=this.points[this.points.length-1];r.x===o.x&&r.y===o.y&&this.points.pop()}var a=this._length;return this._length=this.points.length,this._length<a&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(r){return this.source=r,this.updateSource()},getPoint:function(r){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var o=this.points[this.counter];o&&(r.x=o.x,r.y=o.y)}});m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){for(var r=0;r<f.length;r++)if(e.hasOwnProperty(f[r]))return!0;return!1};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(3),r=new e({initialize:function(a){this.source=a,this._tempVec=new f},getPoint:function(o){var a=this._tempVec;this.source.getRandomPoint(a),o.x=a.x,o.y=a.y}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(73),o=new e({Extends:r,Mixins:[f.PathFollower],initialize:function(s,n,l,i,h,u){r.call(this,s,l,i,h,u),this.path=n},preUpdate:function(a,s){this.anims.update(a,s),this.pathUpdate(a)}});m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=e.canvas,a=e.context,s=e.style,n=[],l=0,i=r.length;s.maxLines>0&&s.maxLines<r.length&&(i=s.maxLines),s.syncFont(o,a);for(var h=0;h<i;h++){var u=s.strokeThickness;u+=a.measureText(r[h]).width,s.wordWrap&&(u-=a.measureText(" ").width),n[h]=Math.ceil(u),l=Math.max(l,n[h])}var d=f.fontSize+s.strokeThickness,c=d*i,p=e.lineSpacing;return i>1&&(c+=p*(i-1)),{width:l,height:c,lines:i,lineWidths:n,lineSpacing:p,lineHeight:d}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(13),r=t(6),o=t(460),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xC3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},s=new e({initialize:function(l,i){this.parent=l,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0);var h=r(i,"metrics",!1);h?this.metrics={ascent:r(h,"ascent",0),descent:r(h,"descent",0),fontSize:r(h,"fontSize",0)}:this.metrics=o(this)},setStyle:function(n,l,i){l===void 0&&(l=!0),i===void 0&&(i=!1),n&&n.hasOwnProperty("fontSize")&&typeof n.fontSize=="number"&&(n.fontSize=n.fontSize.toString()+"px");for(var h in a){var u=i?a[h][1]:this[h];h==="wordWrapCallback"||h==="wordWrapCallbackScope"?this[h]=r(n,a[h][0],u):this[h]=f(n,a[h][0],u)}var d=r(n,"font",null);d!==null&&this.setFont(d,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var c=r(n,"fill",null);return c!==null&&(this.color=c),l?this.update(!0):this.parent},syncFont:function(n,l){l.font=this._font},syncStyle:function(n,l){l.textBaseline="alphabetic",l.fillStyle=this.color,l.strokeStyle=this.stroke,l.lineWidth=this.strokeThickness,l.lineCap="round",l.lineJoin="round"},syncShadow:function(n,l){l?(n.shadowOffsetX=this.shadowOffsetX,n.shadowOffsetY=this.shadowOffsetY,n.shadowColor=this.shadowColor,n.shadowBlur=this.shadowBlur):(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor=0,n.shadowBlur=0)},update:function(n){return n&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=o(this)),this.parent.updateText()},setFont:function(n,l){l===void 0&&(l=!0);var i=n,h="",u="";if(typeof n!="string")i=r(n,"fontFamily","Courier"),h=r(n,"fontSize","16px"),u=r(n,"fontStyle","");else{var d=n.split(" "),c=0;u=d.length>2?d[c++]:"",h=d[c++]||"16px",i=d[c++]||"Courier"}return(i!==this.fontFamily||h!==this.fontSize||u!==this.fontStyle)&&(this.fontFamily=i,this.fontSize=h,this.fontStyle=u,l&&this.update(!0)),this.parent},setFontFamily:function(n){return this.fontFamily!==n&&(this.fontFamily=n,this.update(!0)),this.parent},setFontStyle:function(n){return this.fontStyle!==n&&(this.fontStyle=n,this.update(!0)),this.parent},setFontSize:function(n){return typeof n=="number"&&(n=n.toString()+"px"),this.fontSize!==n&&(this.fontSize=n,this.update(!0)),this.parent},setTestString:function(n){return this.testString=n,this.update(!0)},setFixedSize:function(n,l){return this.fixedWidth=n,this.fixedHeight=l,n&&(this.parent.width=n),l&&(this.parent.height=l),this.update(!1)},setBackgroundColor:function(n){return this.backgroundColor=n,this.update(!1)},setFill:function(n){return this.color=n,this.update(!1)},setColor:function(n){return this.color=n,this.update(!1)},setResolution:function(n){return this.resolution=n,this.update(!1)},setStroke:function(n,l){return l===void 0&&(l=this.strokeThickness),n===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==n||this.strokeThickness!==l)&&(this.stroke=n,this.strokeThickness=l,this.update(!0)),this.parent},setShadow:function(n,l,i,h,u,d){return n===void 0&&(n=0),l===void 0&&(l=0),i===void 0&&(i="#000"),h===void 0&&(h=0),u===void 0&&(u=!1),d===void 0&&(d=!0),this.shadowOffsetX=n,this.shadowOffsetY=l,this.shadowColor=i,this.shadowBlur=h,this.shadowStroke=u,this.shadowFill=d,this.update(!1)},setShadowOffset:function(n,l){return n===void 0&&(n=0),l===void 0&&(l=n),this.shadowOffsetX=n,this.shadowOffsetY=l,this.update(!1)},setShadowColor:function(n){return n===void 0&&(n="#000"),this.shadowColor=n,this.update(!1)},setShadowBlur:function(n){return n===void 0&&(n=0),this.shadowBlur=n,this.update(!1)},setShadowStroke:function(n){return this.shadowStroke=n,this.update(!1)},setShadowFill:function(n){return this.shadowFill=n,this.update(!1)},setWordWrapWidth:function(n,l){return l===void 0&&(l=!1),this.wordWrapWidth=n,this.wordWrapUseAdvanced=l,this.update(!1)},setWordWrapCallback:function(n,l){return l===void 0&&(l=null),this.wordWrapCallback=n,this.wordWrapCallbackScope=l,this.update(!1)},setAlign:function(n){return n===void 0&&(n="left"),this.align=n,this.update(!1)},setMaxLines:function(n){return n===void 0&&(n=0),this.maxLines=n,this.update(!1)},getTextMetrics:function(){var n=this.metrics;return{ascent:n.ascent,descent:n.descent,fontSize:n.fontSize}},toJSON:function(){var n={};for(var l in a)n[l]=this[l];return n.metrics=this.getTextMetrics(),n},destroy:function(){this.parent=void 0}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(31),f=function(r){var o=e.create(this),a=o.getContext("2d");r.syncFont(o,a);var s=a.measureText(r.testString);if("actualBoundingBoxAscent"in s){var n=s.actualBoundingBoxAscent,l=s.actualBoundingBoxDescent;return e.remove(o),{ascent:n,descent:l,fontSize:n+l}}var i=Math.ceil(s.width*r.baselineX),h=i,u=2*h;h=h*r.baselineY|0,o.width=i,o.height=u,a.fillStyle="#f00",a.fillRect(0,0,i,u),a.font=r._font,a.textBaseline="alphabetic",a.fillStyle="#000",a.fillText(r.testString,0,h);var d={ascent:0,descent:0,fontSize:0},c=a.getImageData(0,0,i,u);if(!c)return d.ascent=h,d.descent=h+6,d.fontSize=d.ascent+d.descent,e.remove(o),d;var p=c.data,g=p.length,x=i*4,y,T,E=0,w=!1;for(y=0;y<h;y++){for(T=0;T<x;T+=4)if(p[E+T]!==255){w=!0;break}if(!w)E+=x;else break}for(d.ascent=h-y,E=g-x,w=!1,y=u;y>h;y--){for(T=0;T<x;T+=4)if(p[E+T]!==255){w=!0;break}if(!w)E-=x;else break}return d.descent=y-h,d.fontSize=d.ascent+d.descent,e.remove(o),d};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1097),f=t(0),r=t(36),o=t(59),a=t(65),s=t(14),n=t(34),l=new f({Extends:n,Mixins:[e],initialize:function(h,u,d,c,p,g,x,y,T){u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=128),p===void 0&&(p=0),g===void 0&&(g=360),x===void 0&&(x=!1),n.call(this,h,"Arc",new a(0,0,c)),this._startAngle=p,this._endAngle=g,this._anticlockwise=x,this._iterations=.01,this.setPosition(u,d);var E=this.geom.radius*2;this.setSize(E,E),y!==void 0&&this.setFillStyle(y,T),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(i){this._iterations=i,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(i){this.geom.radius=i;var h=i*2;this.setSize(h,h),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(i){this._startAngle=i,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(i){this._endAngle=i,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(i){this._anticlockwise=i,this.updateData()}},setRadius:function(i){return this.radius=i,this},setIterations:function(i){return i===void 0&&(i=.01),this.iterations=i,this},setStartAngle:function(i,h){return this._startAngle=i,h!==void 0&&(this._anticlockwise=h),this.updateData()},setEndAngle:function(i,h){return this._endAngle=i,h!==void 0&&(this._anticlockwise=h),this.updateData()},updateData:function(){var i=this._iterations,h=i,u=this.geom.radius,d=r(this._startAngle),c=r(this._endAngle),p=this._anticlockwise,g=u,x=u;c-=d,p?c<-s.PI2?c=-s.PI2:c>0&&(c=-s.PI2+c%s.PI2):c>s.PI2?c=s.PI2:c<0&&(c=s.PI2+c%s.PI2);for(var y=[g+Math.cos(d)*u,x+Math.sin(d)*u],T;h<1;)T=c*h+d,y.push(g+Math.cos(T)*u,x+Math.sin(T)*u),h+=i;return T=c+d,y.push(g+Math.cos(T)*u,x+Math.sin(T)*u),y.push(g+Math.cos(d)*u,x+Math.sin(d)*u),this.pathIndexes=o(y),this.pathData=y,this}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(1100),r=t(59),o=t(10),a=t(34),s=new e({Extends:a,Mixins:[f],initialize:function(l,i,h,u,d,c){i===void 0&&(i=0),h===void 0&&(h=0),a.call(this,l,"Curve",u),this._smoothness=32,this._curveBounds=new o,this.closePath=!1,this.setPosition(i,h),d!==void 0&&this.setFillStyle(d,c),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){var n=this._curveBounds,l=this._smoothness;this.geom.getBounds(n,l),this.setSize(n.width,n.height),this.updateDisplayOrigin();for(var i=[],h=this.geom.getPoints(l),u=0;u<h.length;u++)i.push(h[u].x,h[u].y);return i.push(h[0].x,h[0].y),this.pathIndexes=r(i),this.pathData=i,this}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(59),r=t(1103),o=t(111),a=t(34),s=new e({Extends:a,Mixins:[r],initialize:function(l,i,h,u,d,c,p){i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=128),d===void 0&&(d=128),a.call(this,l,"Ellipse",new o(u/2,d/2,u,d)),this._smoothness=64,this.setPosition(i,h),this.width=u,this.height=d,c!==void 0&&this.setFillStyle(c,p),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSize:function(n,l){return this.width=n,this.height=l,this.geom.setPosition(n/2,l/2),this.geom.setSize(n,l),this.updateData()},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){for(var n=[],l=this.geom.getPoints(this._smoothness),i=0;i<l.length;i++)n.push(l[i].x,l[i].y);return n.push(l[0].x,l[0].y),this.pathIndexes=f(n),this.pathData=n,this}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(34),r=t(1106),o=new e({Extends:f,Mixins:[r],initialize:function(s,n,l,i,h,u,d,c,p,g,x){n===void 0&&(n=0),l===void 0&&(l=0),i===void 0&&(i=128),h===void 0&&(h=128),u===void 0&&(u=32),d===void 0&&(d=32),f.call(this,s,"Grid",null),this.cellWidth=u,this.cellHeight=d,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(n,l),this.setSize(i,h),this.setFillStyle(c,p),g!==void 0&&this.setOutlineStyle(g,x),this.updateDisplayOrigin()},setFillStyle:function(a,s){return s===void 0&&(s=1),a===void 0?this.showCells=!1:(this.fillColor=a,this.fillAlpha=s,this.showCells=!0),this},setAltFillStyle:function(a,s){return s===void 0&&(s=1),a===void 0?this.showAltCells=!1:(this.altFillColor=a,this.altFillAlpha=s,this.showAltCells=!0),this},setOutlineStyle:function(a,s){return s===void 0&&(s=1),a===void 0?this.showOutline=!1:(this.outlineFillColor=a,this.outlineFillAlpha=s,this.showOutline=!0),this}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1109),f=t(0),r=t(34),o=new f({Extends:r,Mixins:[e],initialize:function(s,n,l,i,h,u,d,c){n===void 0&&(n=0),l===void 0&&(l=0),i===void 0&&(i=48),h===void 0&&(h=32),u===void 0&&(u=15658734),d===void 0&&(d=10066329),c===void 0&&(c=13421772),r.call(this,s,"IsoBox",null),this.projection=4,this.fillTop=u,this.fillLeft=d,this.fillRight=c,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(n,l),this.setSize(i,h),this.updateDisplayOrigin()},setProjection:function(a){return this.projection=a,this},setFaces:function(a,s,n){return a===void 0&&(a=!0),s===void 0&&(s=!0),n===void 0&&(n=!0),this.showTop=a,this.showLeft=s,this.showRight=n,this},setFillStyle:function(a,s,n){return this.fillTop=a,this.fillLeft=s,this.fillRight=n,this.isFilled=!0,this}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(1112),r=t(34),o=new e({Extends:r,Mixins:[f],initialize:function(s,n,l,i,h,u,d,c,p){n===void 0&&(n=0),l===void 0&&(l=0),i===void 0&&(i=48),h===void 0&&(h=32),u===void 0&&(u=!1),d===void 0&&(d=15658734),c===void 0&&(c=10066329),p===void 0&&(p=13421772),r.call(this,s,"IsoTriangle",null),this.projection=4,this.fillTop=d,this.fillLeft=c,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=u,this.isFilled=!0,this.setPosition(n,l),this.setSize(i,h),this.updateDisplayOrigin()},setProjection:function(a){return this.projection=a,this},setReversed:function(a){return this.isReversed=a,this},setFaces:function(a,s,n){return a===void 0&&(a=!0),s===void 0&&(s=!0),n===void 0&&(n=!0),this.showTop=a,this.showLeft=s,this.showRight=n,this},setFillStyle:function(a,s,n){return this.fillTop=a,this.fillLeft=s,this.fillRight=n,this.isFilled=!0,this}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(34),r=t(47),o=t(1115),a=new e({Extends:f,Mixins:[o],initialize:function(n,l,i,h,u,d,c,p,g){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=0),d===void 0&&(d=128),c===void 0&&(c=0),f.call(this,n,"Line",new r(h,u,d,c));var x=Math.max(1,this.geom.right-this.geom.left),y=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(l,i),this.setSize(x,y),p!==void 0&&this.setStrokeStyle(1,p,g),this.updateDisplayOrigin()},setLineWidth:function(s,n){return n===void 0&&(n=s),this._startWidth=s,this._endWidth=n,this.lineWidth=s,this},setTo:function(s,n,l,i){return this.geom.setTo(s,n,l,i),this}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1118),f=t(0),r=t(59),o=t(469),a=t(227),s=t(34),n=t(472),l=new f({Extends:s,Mixins:[e],initialize:function(h,u,d,c,p,g){u===void 0&&(u=0),d===void 0&&(d=0),s.call(this,h,"Polygon",new a(c));var x=o(this.geom);this.setPosition(u,d),this.setSize(x.width,x.height),p!==void 0&&this.setFillStyle(p,g),this.updateDisplayOrigin(),this.updateData()},smooth:function(i){i===void 0&&(i=1);for(var h=0;h<i;h++)n(this.geom);return this.updateData()},updateData:function(){for(var i=[],h=this.geom.points,u=0;u<h.length;u++)i.push(h[u].x,h[u].y);return i.push(h[0].x,h[0].y),this.pathIndexes=r(i),this.pathData=i,this}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(r,o){o===void 0&&(o=new e);for(var a=1/0,s=1/0,n=-a,l=-s,i,h=0;h<r.points.length;h++)i=r.points[h],a=Math.min(a,i.x),s=Math.min(s,i.y),n=Math.max(n,i.x),l=Math.max(l,i.y);return o.x=a,o.y=s,o.width=n-a,o.height=l-s,o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=t(47),r=t(471),o=function(a,s,n,l){l===void 0&&(l=[]);var i=a.points,h=r(a);!s&&n>0&&(s=h/n);for(var u=0;u<s;u++)for(var d=h*(u/s),c=0,p=0;p<i.length;p++){var g=i[p],x=i[(p+1)%i.length],y=new f(g.x,g.y,x.x,x.y),T=e(y);if(d<c||d>c+T){c+=T;continue}var E=y.getPoint((d-c)/T);l.push(E);break}return l};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=t(47),r=function(o){for(var a=o.points,s=0,n=0;n<a.length;n++){var l=a[n],i=a[(n+1)%a.length],h=new f(l.x,l.y,i.x,i.y);s+=e(h)}return s};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(f,r){return f[0]=r[0],f[1]=r[1],f},e=function(f){var r,o=[],a=f.points;for(r=0;r<a.length;r++)o.push([a[r].x,a[r].y]);var s=[];for(o.length>0&&s.push(t([0,0],o[0])),r=0;r<o.length-1;r++){var n=o[r],l=o[r+1],i=n[0],h=n[1],u=l[0],d=l[1];s.push([.85*i+.15*u,.85*h+.15*d]),s.push([.15*i+.85*u,.15*h+.85*d])}return o.length>1&&s.push(t([0,0],o[o.length-1])),f.setTo(s)};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(10),r=t(34),o=t(1121),a=new e({Extends:r,Mixins:[o],initialize:function(n,l,i,h,u,d,c){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=128),u===void 0&&(u=128),r.call(this,n,"Rectangle",new f(0,0,h,u)),this.setPosition(l,i),this.setSize(h,u),d!==void 0&&this.setFillStyle(d,c),this.updateDisplayOrigin(),this.updateData()},setSize:function(s,n){return this.width=s,this.height=n,this.geom.setSize(s,n),this.updateData(),this},updateData:function(){var s=[],n=this.geom,l=this._tempLine;return n.getLineA(l),s.push(l.x1,l.y1,l.x2,l.y2),n.getLineB(l),s.push(l.x2,l.y2),n.getLineC(l),s.push(l.x2,l.y2),n.getLineD(l),s.push(l.x2,l.y2),this.pathData=s,this}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1124),f=t(0),r=t(59),o=t(34),a=new f({Extends:o,Mixins:[e],initialize:function(n,l,i,h,u,d,c,p){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=5),u===void 0&&(u=32),d===void 0&&(d=64),o.call(this,n,"Star",null),this._points=h,this._innerRadius=u,this._outerRadius=d,this.setPosition(l,i),this.setSize(d*2,d*2),c!==void 0&&this.setFillStyle(c,p),this.updateDisplayOrigin(),this.updateData()},setPoints:function(s){return this._points=s,this.updateData()},setInnerRadius:function(s){return this._innerRadius=s,this.updateData()},setOuterRadius:function(s){return this._outerRadius=s,this.updateData()},points:{get:function(){return this._points},set:function(s){this._points=s,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(s){this._innerRadius=s,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(s){this._outerRadius=s,this.updateData()}},updateData:function(){var s=[],n=this._points,l=this._innerRadius,i=this._outerRadius,h=Math.PI/2*3,u=Math.PI/n,d=i,c=i;s.push(d,c+-i);for(var p=0;p<n;p++)s.push(d+Math.cos(h)*i,c+Math.sin(h)*i),h+=u,s.push(d+Math.cos(h)*l,c+Math.sin(h)*l),h+=u;return s.push(d,c+-i),this.pathIndexes=r(s),this.pathData=s,this}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(34),r=t(82),o=t(1127),a=new e({Extends:f,Mixins:[o],initialize:function(n,l,i,h,u,d,c,p,g,x,y){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=128),d===void 0&&(d=64),c===void 0&&(c=0),p===void 0&&(p=128),g===void 0&&(g=128),f.call(this,n,"Triangle",new r(h,u,d,c,p,g));var T=this.geom.right-this.geom.left,E=this.geom.bottom-this.geom.top;this.setPosition(l,i),this.setSize(T,E),x!==void 0&&this.setFillStyle(x,y),this.updateDisplayOrigin(),this.updateData()},setTo:function(s,n,l,i,h,u){return this.geom.setTo(s,n,l,i,h,u),this.updateData()},updateData:function(){var s=[],n=this.geom,l=this._tempLine;return n.getLineA(l),s.push(l.x1,l.y1,l.x2,l.y2),n.getLineB(l),s.push(l.x2,l.y2),n.getLineC(l),s.push(l.x2,l.y2),this.pathData=s,this}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(67),r=function(o,a,s){s===void 0&&(s=new e);var n=o.getLineA(),l=o.getLineB(),i=o.getLineC();if(a<=0||a>=1)return s.x=n.x1,s.y=n.y1,s;var h=f(n),u=f(l),d=f(i),c=h+u+d,p=c*a,g=0;return p<h?(g=p/h,s.x=n.x1+(n.x2-n.x1)*g,s.y=n.y1+(n.y2-n.y1)*g):p>h+u?(p-=h+u,g=p/d,s.x=i.x1+(i.x2-i.x1)*g,s.y=i.y1+(i.y2-i.y1)*g):(p-=h,g=p/u,s.x=l.x1+(l.x2-l.x1)*g,s.y=l.y1+(l.y2-l.y1)*g),s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=t(4),r=function(o,a,s,n){n===void 0&&(n=[]);var l=o.getLineA(),i=o.getLineB(),h=o.getLineC(),u=e(l),d=e(i),c=e(h),p=u+d+c;!a&&s>0&&(a=p/s);for(var g=0;g<a;g++){var x=p*(g/a),y=0,T=new f;x<u?(y=x/u,T.x=l.x1+(l.x2-l.x1)*y,T.y=l.y1+(l.y2-l.y1)*y):x>u+d?(x-=u+d,y=x/c,T.x=h.x1+(h.x2-h.x1)*y,T.y=h.y1+(h.y2-h.y1)*y):(x-=u,y=x/d,T.x=i.x1+(i.x2-i.x1)*y,T.y=i.y1+(i.y2-i.y1)*y),n.push(T)}return n};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(!e||typeof e=="number")return!1;if(e.hasOwnProperty(f))return e[f]=r,!0;if(f.indexOf(".")!==-1){for(var o=f.split("."),a=e,s=e,n=0;n<o.length;n++)if(a.hasOwnProperty(o[n]))s=a,a=a[o[n]];else return!1;return s[o[o.length-1]]=r,!0}return!1};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),f=t(117),r=function(o,a,s,n,l,i,h){if(n===void 0&&(n=!1),i===void 0&&(i=16777215),h===void 0&&(h=1),o.length!==a.length){console.warn("GenerateVerts: vertices and uvs count not equal");return}var u={faces:[],vertices:[]},d,c,p,g,x,y,T,E,w,A,b,R=n?3:2,L=Array.isArray(i),B=Array.isArray(h);if(Array.isArray(s)&&s.length>0)for(d=0;d<s.length;d++){var D=s[d],G=s[d]*2,X=s[d]*R;c=o[X],p=o[X+1],g=n?o[X+2]:0,x=a[G],y=a[G+1],T=L?i[D]:i,E=B?h[D]:h,w=0,A=0,b=0,l&&(w=l[X],A=l[X+1],b=n?l[X+2]:0),u.vertices.push(new f(c,p,g,x,y,T,E,w,A,b))}else{var H=0,K=0;for(d=0;d<o.length;d+=R)c=o[d],p=o[d+1],g=n?o[d+2]:0,x=a[H],y=a[H+1],T=L?i[K]:i,E=B?h[K]:h,w=0,A=0,b=0,l&&(w=l[d],A=l[d+1],b=n?l[d+2]:0),u.vertices.push(new f(c,p,g,x,y,T,E,w,A,b)),H+=2,K++}for(d=0;d<u.vertices.length;d+=3){var $=u.vertices[d],N=u.vertices[d+1],I=u.vertices[d+2];u.faces.push(new e($,N,I))}return u};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),f=t(69),r=t(39),o=t(117),a=new r,s=new r,n=new f,l=function(i,h,u,d,c,p,g,x,y,T){u===void 0&&(u=1),d===void 0&&(d=0),c===void 0&&(c=0),p===void 0&&(p=0),g===void 0&&(g=0),x===void 0&&(x=0),y===void 0&&(y=0),T===void 0&&(T=!0);var E={faces:[],verts:[]},w=i.materials;a.set(d,c,p),s.set(g,x,y),n.fromRotationXYTranslation(s,a,T);for(var A=0;A<i.models.length;A++)for(var b=i.models[A],R=b.vertices,L=b.textureCoords,B=b.faces,D=0;D<B.length;D++){var G=B[D],X=G.vertices[0],H=G.vertices[1],K=G.vertices[2],$=R[X.vertexIndex],N=R[H.vertexIndex],I=R[K.vertexIndex],z=X.textureCoordsIndex,U=H.textureCoordsIndex,W=K.textureCoordsIndex,V=z===-1?{u:0,v:1}:L[z],Z=U===-1?{u:0,v:0}:L[U],J=W===-1?{u:1,v:1}:L[W],tt=16777215;G.material!==""&&w[G.material]&&(tt=w[G.material]);var st=new o($.x*u,$.y*u,$.z*u,V.u,V.v,tt).transformMat4(n),at=new o(N.x*u,N.y*u,N.z*u,Z.u,Z.v,tt).transformMat4(n),lt=new o(I.x*u,I.y*u,I.z*u,J.u,J.v,tt).transformMat4(n);E.verts.push(st,at,lt),E.faces.push(new e(st,at,lt))}return h&&(h.faces=h.faces.concat(E.faces),h.vertices=h.vertices.concat(E.verts)),E};m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),f=t(0),r=t(11),o=t(200),a=t(12),s=new f({Extends:e,Mixins:[r.ScrollFactor,r.Visible],initialize:function(l,i,h,u,d,c,p){e.call(this,l,i,h),this.color=new o(u,d,c),this.intensity=p,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(n){return!(s.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&n.id)},setColor:function(n){var l=a.getFloatsFromUintRGB(n);return this.color.set(l[0],l[1],l[2]),this},setIntensity:function(n){return this.intensity=n,this},setRadius:function(n){return this.radius=n,this}});s.RENDER_MASK=15,m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(151),f=t(0),r=t(50),o=t(481),a=t(150),s=t(200),n=t(74),l=t(79),i=t(12),h=new f({initialize:function(){this.lights=[],this.ambientColor=new s(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(u,d,c,p,g,x){return this.systems.displayList.add(new a(this.scene,u,d,c,p,g,x))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(u){for(var d=this.lights,c=u.worldView,p=[],g=0;g<d.length;g++){var x=d[g];x.willRender(u)&&e(x,c)&&p.push({light:x,distance:r(x.x,x.y,c.centerX,c.centerY)})}return p.length>this.maxLights&&(l(p,this.sortByDistance),p=p.slice(0,this.maxLights)),this.visibleLights=p.length,p},sortByDistance:function(u,d){return u.distance>=d.distance},setAmbientColor:function(u){var d=i.getFloatsFromUintRGB(u);return this.ambientColor.set(d[0],d[1],d[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(u,d,c,p,g){u===void 0&&(u=0),d===void 0&&(d=0),c===void 0&&(c=128),p===void 0&&(p=16777215),g===void 0&&(g=1);var x=i.getFloatsFromUintRGB(p),y=new o(u,d,c,x[0],x[1],x[2],g);return this.lights.push(y),y},removeLight:function(u){var d=this.lights.indexOf(u);return d>=0&&n(this.lights,d),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(56),f=t(17),r={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(m,C,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),f=function(r,o,a){var s=r.x1,n=r.y1,l=r.x2,i=r.y2,h=o.x1,u=o.y1,d=o.x2,c=o.y2,p=l-s,g=i-n,x=d-h,y=c-u,T=y*p-x*g;if(p===0||T===0)return!1;var E=(p*(u-n)+g*(s-h))/(x*g-y*p),w=(h+x*E-s)/p;return w<0||E<0||E>1?null:(a===void 0&&(a=new e),a.set(s+p*w,n+g*w,w))};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),f=t(485),r=t(47),o=new r,a=new e,s=function(n,l,i){i===void 0&&(i=new e);var h=!1;i.set(),a.set();for(var u=l[0],d=1;d<l.length;d++){var c=l[d];o.setTo(u.x,u.y,c.x,c.y),u=c,f(n,o,a)&&(!h||a.z<i.z)&&(i.copy(a),h=!0)}return h?i:null};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),f=t(140),r=t(486),o=new e,a=function(s,n,l){l===void 0&&(l=new f),Array.isArray(n)||(n=[n]);var i=!1;l.set(),o.set();for(var h=0;h<n.length;h++)r(s,n[h].points,o)&&(!i||o.z<l.z)&&(l.set(o.x,o.y,o.z,h),i=!0);return i?l:null};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.x1,o=e.y1,a=e.x2,s=e.y2,n=f.x,l=f.y,i=f.right,h=f.bottom,u=0;if(r>=n&&r<=i&&o>=l&&o<=h||a>=n&&a<=i&&s>=l&&s<=h)return!0;if(r<n&&a>=n){if(u=o+(s-o)*(n-r)/(a-r),u>l&&u<=h)return!0}else if(r>i&&a<=i&&(u=o+(s-o)*(i-r)/(a-r),u>=l&&u<=h))return!0;if(o<l&&s>=l){if(u=r+(a-r)*(l-o)/(s-o),u>=n&&u<=i)return!0}else if(o>h&&s<=h&&(u=r+(a-r)*(h-o)/(s-o),u>=n&&u<=i))return!0;return!1};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(96),f=t(57),r=t(235),o=t(490),a=function(s,n){if(n.left>s.right||n.right<s.left||n.top>s.bottom||n.bottom<s.top)return!1;var l=n.getLineA(),i=n.getLineB(),h=n.getLineC();if(f(s,l.x1,l.y1)||f(s,l.x2,l.y2)||f(s,i.x1,i.y1)||f(s,i.x2,i.y2)||f(s,h.x1,h.y1)||f(s,h.x2,h.y2))return!0;var u=s.getLineA(),d=s.getLineB(),c=s.getLineC(),p=s.getLineD();if(e(l,u)||e(l,d)||e(l,c)||e(l,p)||e(i,u)||e(i,d)||e(i,c)||e(i,p)||e(h,u)||e(h,d)||e(h,c)||e(h,p))return!0;var g=o(s),x=r(n,g,!0);return x.length>0};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=[]),f.push({x:e.x,y:e.y}),f.push({x:e.right,y:e.y}),f.push({x:e.right,y:e.bottom}),f.push({x:e.x,y:e.bottom}),f};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(233),f=t(115),r=function(o,a){return o.left>a.right||o.right<a.left||o.top>a.bottom||o.bottom<a.top?!1:!!(f(o,a.x,a.y)||e(o.getLineA(),a)||e(o.getLineB(),a)||e(o.getLineC(),a))};m.exports=r},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(493),r=t(96),o=function(a,s,n){if(n===void 0&&(n=[]),f(a,s))for(var l=a.getLineA(),i=a.getLineB(),h=a.getLineC(),u=[new e,new e,new e],d=[r(l,s,u[0]),r(i,s,u[1]),r(h,s,u[2])],c=0;c<3;c++)d[c]&&n.push(u[c]);return n};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(96),f=function(r,o){return!!(r.contains(o.x1,o.y1)||r.contains(o.x2,o.y2)||e(r.getLineA(),o)||e(r.getLineB(),o)||e(r.getLineC(),o))};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(235),f=t(495),r=t(96),o=function(a,s){if(a.left>s.right||a.right<s.left||a.top>s.bottom||a.bottom<s.top)return!1;var n=a.getLineA(),l=a.getLineB(),i=a.getLineC(),h=s.getLineA(),u=s.getLineB(),d=s.getLineC();if(r(n,h)||r(n,u)||r(n,d)||r(l,h)||r(l,u)||r(l,d)||r(i,h)||r(i,u)||r(i,d))return!0;var c=f(a),p=e(s,c,!0);return p.length>0||(c=f(s),p=e(a,c,!0),p.length>0)};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=[]),f.push({x:e.x1,y:e.y1}),f.push({x:e.x2,y:e.y2}),f.push({x:e.x3,y:e.y3}),f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){r===void 0&&(r=1);var o=f.x1,a=f.y1,s=f.x2,n=f.y2,l=e.x,i=e.y,h=(s-o)*(s-o)+(n-a)*(n-a);if(h===0)return!1;var u=((l-o)*(s-o)+(i-a)*(n-a))/h;if(u<0)return Math.sqrt((o-l)*(o-l)+(a-i)*(a-i))<=r;if(u>=0&&u<=1){var d=((a-i)*(s-o)-(o-l)*(n-a))/h;return Math.abs(d)*Math.sqrt(h)<=r}else return Math.sqrt((s-l)*(s-l)+(n-i)*(n-i))<=r};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(68),r=t(97),o=function(a){var s=r(a)-e.TAU;return f(s,-Math.PI,Math.PI)};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=!0,e="untitled",f="",r="";function o(g){var x=g.indexOf("#");return x>-1?g.substring(0,x):g}function a(g){return g.models.length===0&&g.models.push({faces:[],name:e,textureCoords:[],vertexNormals:[],vertices:[]}),f="",g.models[g.models.length-1]}function s(g,x){var y=g.length>=2?g[1]:e;x.models.push({faces:[],name:y,textureCoords:[],vertexNormals:[],vertices:[]}),f=""}function n(g){g.length===2&&(f=g[1])}function l(g,x){var y=g.length,T=y>=2?parseFloat(g[1]):0,E=y>=3?parseFloat(g[2]):0,w=y>=4?parseFloat(g[3]):0;a(x).vertices.push({x:T,y:E,z:w})}function i(g,x){var y=g.length,T=y>=2?parseFloat(g[1]):0,E=y>=3?parseFloat(g[2]):0,w=y>=4?parseFloat(g[3]):0;isNaN(T)&&(T=0),isNaN(E)&&(E=0),isNaN(w)&&(w=0),t&&(E=1-E),a(x).textureCoords.push({u:T,v:E,w})}function h(g,x){var y=g.length,T=y>=2?parseFloat(g[1]):0,E=y>=3?parseFloat(g[2]):0,w=y>=4?parseFloat(g[3]):0;a(x).vertexNormals.push({x:T,y:E,z:w})}function u(g,x){var y=g.length-1;if(!(y<3)){for(var T={group:f,material:r,vertices:[]},E=0;E<y;E++){var w=g[E+1],A=w.split("/"),b=A.length;if(!(b<1||b>3)){var R=0,L=0,B=0;R=parseInt(A[0],10),b>1&&A[1]!==""&&(L=parseInt(A[1],10)),b>2&&(B=parseInt(A[2],10)),R!==0&&(R<0&&(R=a(x).vertices.length+1+R),L-=1,R-=1,B-=1,T.vertices.push({textureCoordsIndex:L,vertexIndex:R,vertexNormalIndex:B}))}}a(x).faces.push(T)}}function d(g,x){g.length>=2&&x.materialLibraries.push(g[1])}function c(g){g.length>=2&&(r=g[1])}var p=function(g,x){x===void 0&&(x=!0),t=x;var y={materials:{},materialLibraries:[],models:[]};f="",r="";for(var T=g.split(`
`),E=0;E<T.length;E++){var w=o(T[E]),A=w.replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":s(A,y);break;case"g":n(A);break;case"v":l(A,y);break;case"vt":i(A,y);break;case"vn":h(A,y);break;case"f":u(A,y);break;case"mtllib":d(A,y);break;case"usemtl":c(A);break}}return y};m.exports=p},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103),f=function(r){for(var o={},a=r.split(`
`),s="",n=0;n<a.length;n++){var l=a[n].trim();if(!(l.indexOf("#")===0||l==="")){var i=l.replace(/\s\s+/g," ").trim().split(" ");switch(i[0].toLowerCase()){case"newmtl":{s=i[1];break}case"kd":{var h=Math.floor(i[1]*255),u=i.length>=2?Math.floor(i[2]*255):h,d=i.length>=3?Math.floor(i[3]*255):h;o[s]=e(h,u,d);break}}}}return o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x*e.x+e.y*e.y};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10);e.Area=t(1267),e.Ceil=t(1268),e.CeilAll=t(1269),e.CenterOn=t(190),e.Clone=t(1270),e.Contains=t(57),e.ContainsPoint=t(1271),e.ContainsRect=t(503),e.CopyFrom=t(1272),e.Decompose=t(490),e.Equals=t(1273),e.FitInside=t(1274),e.FitOutside=t(1275),e.Floor=t(1276),e.FloorAll=t(1277),e.FromPoints=t(199),e.FromXY=t(1278),e.GetAspectRatio=t(237),e.GetCenter=t(1279),e.GetPoint=t(171),e.GetPoints=t(306),e.GetSize=t(1280),e.Inflate=t(1281),e.Intersection=t(1282),e.MarchingAnts=t(316),e.MergePoints=t(1283),e.MergeRect=t(1284),e.MergeXY=t(1285),e.Offset=t(1286),e.OffsetPoint=t(1287),e.Overlaps=t(1288),e.Perimeter=t(130),e.PerimeterPoint=t(1289),e.Random=t(174),e.RandomOutside=t(1290),e.SameDimensions=t(1291),e.Scale=t(1292),e.Union=t(441),m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.width*f.height>e.width*e.height?!1:f.x>e.x&&f.x<e.right&&f.right>e.x&&f.right<e.right&&f.y>e.y&&f.y<e.bottom&&f.bottom>e.y&&f.bottom<e.bottom};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){return o===void 0&&(o=new e),o.x=(r.x1+r.x2+r.x3)/3,o.y=(r.y1+r.y2+r.y3)/3,o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e.x1+=f,e.y1+=r,e.x2+=f,e.y2+=r,e.x3+=f,e.y3+=r,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4);function f(o,a,s,n){var l=o-s,i=a-n,h=l*l+i*i;return Math.sqrt(h)}var r=function(o,a){a===void 0&&(a=new e);var s=o.x1,n=o.y1,l=o.x2,i=o.y2,h=o.x3,u=o.y3,d=f(h,u,l,i),c=f(s,n,h,u),p=f(l,i,s,n),g=d+c+p;return a.x=(s*d+l*c+h*p)/g,a.y=(n*d+i*c+u*p)/g,a};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return function(r,o,a,s){var n=e.getPixelAlpha(o,a,s.texture.key,s.frame.name);return n&&n>=f}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return{gameObject:e,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:f,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a){this.pad=o,this.events=o.events,this.index=a,this.value=0,this.threshold=.1},update:function(r){this.value=r},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(239),r=new e({initialize:function(a,s){this.pad=a,this.events=a.manager,this.index=s,this.value=0,this.threshold=1,this.pressed=!1},update:function(o){this.value=o;var a=this.pad,s=this.index;o>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(f.BUTTON_DOWN,a,this,o),this.pad.emit(f.GAMEPAD_BUTTON_DOWN,s,o,this)):this.pressed&&(this.pressed=!1,this.events.emit(f.BUTTON_UP,a,this,o),this.pad.emit(f.GAMEPAD_BUTTON_UP,s,o,this))},destroy:function(){this.pad=null,this.events=null}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(509),f=t(510),r=t(0),o=t(9),a=t(3),s=new r({Extends:o,initialize:function(l,i){o.call(this),this.manager=l,this.pad=i,this.id=i.id,this.index=i.index;for(var h=[],u=0;u<i.buttons.length;u++)h.push(new f(this,u));this.buttons=h;var d=[];for(u=0;u<i.axes.length;u++)d.push(new e(this,u));this.axes=d,this.vibration=i.vibrationActuator;var c={value:0,pressed:!1};this._LCLeft=h[14]?h[14]:c,this._LCRight=h[15]?h[15]:c,this._LCTop=h[12]?h[12]:c,this._LCBottom=h[13]?h[13]:c,this._RCLeft=h[2]?h[2]:c,this._RCRight=h[1]?h[1]:c,this._RCTop=h[3]?h[3]:c,this._RCBottom=h[0]?h[0]:c,this._FBLeftTop=h[4]?h[4]:c,this._FBLeftBottom=h[6]?h[6]:c,this._FBRightTop=h[5]?h[5]:c,this._FBRightBottom=h[7]?h[7]:c;var p={value:0};this._HAxisLeft=d[0]?d[0]:p,this._VAxisLeft=d[1]?d[1]:p,this._HAxisRight=d[2]?d[2]:p,this._VAxisRight=d[3]?d[3]:p,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(n){return this.axes[n].getValue()},setAxisThreshold:function(n){for(var l=0;l<this.axes.length;l++)this.axes[l].threshold=n},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(n){return this.buttons[n].value},isButtonDown:function(n){return this.buttons[n].pressed},update:function(n){if(!(n.timestamp<this._created)){var l,i=this.buttons,h=n.buttons,u=i.length;for(l=0;l<u;l++)i[l].update(h[l].value);var d=this.axes,c=n.axes;for(u=d.length,l=0;l<u;l++)d[l].update(c[l]);u>=2&&(this.leftStick.set(d[0].getValue(),d[1].getValue()),u>=4&&this.rightStick.set(d[2].getValue(),d[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var n;for(n=0;n<this.buttons.length;n++)this.buttons[n].destroy();for(n=0;n<this.axes.length;n++)this.axes[n].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),r=t(154),o=new e({Extends:f,initialize:function(s,n){f.call(this),this.plugin=s,this.keyCode=n,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(a){return this.emitOnRepeat=a,this},onDown:function(a){this.originalEvent=a,this.enabled&&(this.altKey=a.altKey,this.ctrlKey=a.ctrlKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.location=a.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(r.DOWN,this,a):(this.isDown=!0,this.isUp=!1,this.timeDown=a.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(r.DOWN,this,a)))},onUp:function(a){this.originalEvent=a,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=a.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(r.UP,this,a))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(154),r=t(2),o=t(514),a=t(516),s=new e({initialize:function(l,i,h){if(h===void 0&&(h={}),i.length<2)return!1;this.manager=l,this.enabled=!0,this.keyCodes=[];for(var u=0;u<i.length;u++){var d=i[u];typeof d=="string"?this.keyCodes.push(d.toUpperCase().charCodeAt(0)):typeof d=="number"?this.keyCodes.push(d):d.hasOwnProperty("keyCode")&&this.keyCodes.push(d.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=r(h,"resetOnWrongKey",!0),this.maxKeyDelay=r(h,"maxKeyDelay",0),this.resetOnMatch=r(h,"resetOnMatch",!1),this.deleteOnMatch=r(h,"deleteOnMatch",!1);var c=this,p=function(g){if(!(c.matched||!c.enabled)){var x=o(g,c);x&&(c.manager.emit(f.COMBO_MATCH,c,g),c.resetOnMatch?a(c):c.deleteOnMatch&&c.destroy())}};this.onKeyDown=p,this.manager.on(f.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(f.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(515),f=function(r,o){if(o.matched)return!0;var a=!1,s=!1;if(r.keyCode===o.current)if(o.index>0&&o.maxKeyDelay>0){var n=o.timeLastMatched+o.maxKeyDelay;r.timeStamp<=n&&(s=!0,a=e(r,o))}else s=!0,a=e(r,o);return!s&&o.resetOnWrongKey&&(o.index=0,o.current=o.keyCodes[0]),a&&(o.timeLastMatched=r.timeStamp,o.matched=!0,o.timeMatched=r.timeStamp),a};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.timeLastMatched=e.timeStamp,f.index++,f.index===f.size?!0:(f.current=f.keyCodes[f.index],!1)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.current=e.keyCodes[0],e.index=0,e.timeLastMatched=0,e.matched=!1,e.timeMatched=0,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(240),f=function(r,o){var a=e(o,r.xhrSettings),s=new XMLHttpRequest;if(s.open("GET",r.src,a.async,a.user,a.password),s.responseType=r.xhrSettings.responseType,s.timeout=a.timeout,a.headers)for(var n in a.headers)s.setRequestHeader(n,a.headers[n]);return a.header&&a.headerValue&&s.setRequestHeader(a.header,a.headerValue),a.requestedWith&&s.setRequestHeader("X-Requested-With",a.requestedWith),a.overrideMimeType&&s.overrideMimeType(a.overrideMimeType),a.withCredentials&&(s.withCredentials=!0),s.onload=r.onLoad.bind(r,s),s.onerror=r.onError.bind(r,s),s.onprogress=r.onProgress.bind(r),s.send(),s};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(519),n=t(7),l=new e({Extends:r,initialize:function(h,u,d,c,p){if(n(u)){var g=u;u=a(g,"key"),c=a(g,"xhrSettings"),p=a(g,"context",p)}var x={type:"audio",cache:h.cacheManager.audio,extension:d.type,responseType:"arraybuffer",key:u,url:d.url,xhrSettings:c,config:{context:p}};r.call(this,h,x)},onProcess:function(){this.state=f.FILE_PROCESSING;var i=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(h){i.data=h,i.onProcessComplete()},function(h){console.error("Error decoding audio: "+i.key+" - ",h?h.message:null),i.onProcessError()}),this.config.context=null}});l.create=function(i,h,u,d,c){var p=i.systems.game,g=p.config.audio,x=p.device.audio;n(h)&&(u=a(h,"url",[]),d=a(h,"config",{}));var y=l.getAudioURL(p,u);return y?x.webAudio&&!g.disableWebAudio?new l(i,h,y,c,p.sound.context):new s(i,h,y,d):null},l.getAudioURL=function(i,h){Array.isArray(h)||(h=[h]);for(var u=0;u<h.length;u++){var d=a(h[u],"url",h[u]);if(d.indexOf("blob:")===0||d.indexOf("data:")===0)return{url:d,type:""};var c=d.match(/\.([a-zA-Z0-9]+)($|\?)/);if(c=a(h[u],"type",c?c[1]:"").toLowerCase(),i.device.audio[c])return{url:d,type:c}}return null},o.register("audio",function(i,h,u,d){var c=this.systems.game,p=c.config.audio,g=c.device.audio;if(p.noAudio||!g.webAudio&&!g.audioData)return this;var x;if(Array.isArray(i))for(var y=0;y<i.length;y++)x=l.create(this,i[y]),x&&this.addFile(x);else x=l.create(this,i,h,u,d),x&&this.addFile(x);return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(95),r=t(23),o=t(2),a=t(155),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d){if(s(h)){var c=h;h=o(c,"key"),d=o(c,"config",d)}var p={type:"audio",cache:i.cacheManager.audio,extension:u.type,key:h,url:u.url,config:d};r.call(this,i,p),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var l=0;l<this.data.length;l++){var i=this.data[l];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(l){var i=l.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(f.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var l=this.config&&this.config.instances||1;this.filesTotal=l,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<l;i++){var h=new Audio;h.dataset||(h.dataset={}),h.dataset.name=this.key+("0"+i).slice(-2),h.dataset.used="false",this.locked?h.dataset.locked="true":(h.dataset.locked="false",h.preload="auto",h.oncanplaythrough=this.onProgress.bind(this),h.onerror=this.onError.bind(this)),this.data.push(h)}for(i=0;i<this.data.length;i++)h=this.data[i],h.src=a(this,this.loader.baseURL),this.locked||h.load();this.locked&&setTimeout(this.onLoad.bind(this))}});m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d){var c="js";if(s(h)){var p=h;h=a(p,"key"),u=a(p,"url"),d=a(p,"xhrSettings"),c=a(p,"extension",c)}var g={type:"script",cache:!1,extension:c,responseType:"text",key:h,url:u,xhrSettings:d};r.call(this,i,g)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("script",function(l,i,h){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new n(this,l[u]));else this.addFile(new n(this,l,i,h));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(522),f=t(157),r=t(0),o=t(62),a=t(524),s=t(525),n=new r({initialize:function(i){this.world=i,this.scene=i.scene,this.sys=i.scene.sys},collider:function(l,i,h,u,d){return this.world.addCollider(l,i,h,u,d)},overlap:function(l,i,h,u,d){return this.world.addOverlap(l,i,h,u,d)},existing:function(l,i){var h=i?o.STATIC_BODY:o.DYNAMIC_BODY;return this.world.enableBody(l,h),l},staticImage:function(l,i,h,u){var d=new e(this.scene,l,i,h,u);return this.sys.displayList.add(d),this.world.enableBody(d,o.STATIC_BODY),d},image:function(l,i,h,u){var d=new e(this.scene,l,i,h,u);return this.sys.displayList.add(d),this.world.enableBody(d,o.DYNAMIC_BODY),d},staticSprite:function(l,i,h,u){var d=new f(this.scene,l,i,h,u);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,o.STATIC_BODY),d},sprite:function(l,i,h,u){var d=new f(this.scene,l,i,h,u);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,o.DYNAMIC_BODY),d},staticGroup:function(l,i){return this.sys.updateList.add(new s(this.world,this.world.scene,l,i))},group:function(l,i){return this.sys.updateList.add(new a(this.world,this.world.scene,l,i))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(243),r=t(125),o=new e({Extends:r,Mixins:[f.Acceleration,f.Angular,f.Bounce,f.Debug,f.Drag,f.Enable,f.Friction,f.Gravity,f.Immovable,f.Mass,f.Pushable,f.Size,f.Velocity],initialize:function(s,n,l,i,h){r.call(this,s,n,l,i,h),this.body=null}});m.exports=o},function(m,C,t){var e=t(244),f=t(65),r=t(231),o=t(151),a=function(s,n,l,i,h,u){var d=e(s,n-i,l-i,2*i,2*i,h,u);if(d.length===0)return d;for(var c=new f(n,l,i),p=new f,g=[],x=0;x<d.length;x++){var y=d[x];y.isCircle?(p.setTo(y.center.x,y.center.y,y.halfWidth),r(c,p)&&g.push(y)):o(c,y)&&g.push(y)}return g};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(157),f=t(0),r=t(62),o=t(2),a=t(113),s=t(7),n=new f({Extends:a,initialize:function(i,h,u,d){if(!u&&!d)d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(s(u))d=u,u=null,d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(u)&&s(u[0])){d=u[0];var c=this;u.forEach(function(p){p.internalCreateCallback=c.createCallbackHandler,p.internalRemoveCallback=c.removeCallbackHandler}),u=null}else d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=i,d.classType=o(d,"classType",e),this.physicsType=r.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:o(d,"collideWorldBounds",!1),setBoundsRectangle:o(d,"customBoundsRectangle",null),setAccelerationX:o(d,"accelerationX",0),setAccelerationY:o(d,"accelerationY",0),setAllowDrag:o(d,"allowDrag",!0),setAllowGravity:o(d,"allowGravity",!0),setAllowRotation:o(d,"allowRotation",!0),setBounceX:o(d,"bounceX",0),setBounceY:o(d,"bounceY",0),setDragX:o(d,"dragX",0),setDragY:o(d,"dragY",0),setEnable:o(d,"enable",!0),setGravityX:o(d,"gravityX",0),setGravityY:o(d,"gravityY",0),setFrictionX:o(d,"frictionX",0),setFrictionY:o(d,"frictionY",0),setMaxVelocityX:o(d,"maxVelocityX",1e4),setMaxVelocityY:o(d,"maxVelocityY",1e4),setVelocityX:o(d,"velocityX",0),setVelocityY:o(d,"velocityY",0),setAngularVelocity:o(d,"angularVelocity",0),setAngularAcceleration:o(d,"angularAcceleration",0),setAngularDrag:o(d,"angularDrag",0),setMass:o(d,"mass",1),setImmovable:o(d,"immovable",!1)},a.call(this,h,u,d),this.type="PhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,r.DYNAMIC_BODY);var i=l.body;for(var h in this.defaults)i[h](this.defaults[h])},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},setVelocity:function(l,i,h){h===void 0&&(h=0);for(var u=this.getChildren(),d=0;d<u.length;d++)u[d].body.velocity.set(l+d*h,i+d*h);return this},setVelocityX:function(l,i){i===void 0&&(i=0);for(var h=this.getChildren(),u=0;u<h.length;u++)h[u].body.velocity.x=l+u*i;return this},setVelocityY:function(l,i){i===void 0&&(i=0);for(var h=this.getChildren(),u=0;u<h.length;u++)h[u].body.velocity.y=l+u*i;return this}});m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(157),f=t(0),r=t(62),o=t(2),a=t(113),s=t(7),n=new f({Extends:a,initialize:function(i,h,u,d){!u&&!d?d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:e}:s(u)?(d=u,u=null,d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler,d.createMultipleCallback=this.createMultipleCallbackHandler,d.classType=o(d,"classType",e)):Array.isArray(u)&&s(u[0])?(d=u,u=null,d.forEach(function(c){c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler,c.createMultipleCallback=this.createMultipleCallbackHandler,c.classType=o(c,"classType",e)})):d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=i,this.physicsType=r.STATIC_BODY,a.call(this,h,u,d),this.type="StaticPhysicsGroup"},createCallbackHandler:function(l){l.body||this.world.enableBody(l,r.STATIC_BODY)},removeCallbackHandler:function(l){l.body&&this.world.disableBody(l)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var l=this.children.entries,i=0;i<l.length;i++)l[i].body.reset();return this}});m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(350),f=t(527),r=t(18),o=t(0),a=t(528),s=t(62),n=t(50),l=t(9),i=t(245),h=t(124),u=t(354),d=t(355),c=t(246),p=t(247),g=t(529),x=t(6),y=t(14),T=t(211),E=t(530),w=t(10),A=t(531),b=t(532),R=t(537),L=t(538),B=t(149),D=t(539),G=t(248),X=t(25),H=t(3),K=t(68),$=new o({Extends:l,initialize:function(I,z){l.call(this),this.scene=I,this.bodies=new B,this.staticBodies=new B,this.pendingDestroy=new B,this.colliders=new T,this.gravity=new H(x(z,"gravity.x",0),x(z,"gravity.y",0)),this.bounds=new w(x(z,"x",0),x(z,"y",0),x(z,"width",I.sys.scale.width),x(z,"height",I.sys.scale.height)),this.checkCollision={up:x(z,"checkCollision.up",!0),down:x(z,"checkCollision.down",!0),left:x(z,"checkCollision.left",!0),right:x(z,"checkCollision.right",!0)},this.fps=x(z,"fps",60),this.fixedStep=x(z,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=x(z,"timeScale",1),this.OVERLAP_BIAS=x(z,"overlapBias",4),this.TILE_BIAS=x(z,"tileBias",16),this.forceX=x(z,"forceX",!1),this.isPaused=x(z,"isPaused",!1),this._total=0,this.drawDebug=x(z,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:x(z,"debugShowBody",!0),debugShowStaticBody:x(z,"debugShowStaticBody",!0),debugShowVelocity:x(z,"debugShowVelocity",!0),bodyDebugColor:x(z,"debugBodyColor",16711935),staticBodyDebugColor:x(z,"debugStaticBodyColor",255),velocityDebugColor:x(z,"debugVelocityColor",65280)},this.maxEntries=x(z,"maxEntries",16),this.useTree=x(z,"useTree",!0),this.tree=new A(this.maxEntries),this.staticTree=new A(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new X,this._tempMatrix2=new X,this.drawDebug&&this.createDebugGraphic()},enable:function(N,I){I===void 0&&(I=s.DYNAMIC_BODY),Array.isArray(N)||(N=[N]);for(var z=0;z<N.length;z++){var U=N[z];if(U.isParent)for(var W=U.getChildren(),V=0;V<W.length;V++){var Z=W[V];Z.isParent?this.enable(Z,I):this.enableBody(Z,I)}else this.enableBody(U,I)}},enableBody:function(N,I){return I===void 0&&(I=s.DYNAMIC_BODY),N.body||(I===s.DYNAMIC_BODY?N.body=new f(this,N):I===s.STATIC_BODY&&(N.body=new D(this,N))),this.add(N.body),N},add:function(N){return N.physicsType===s.DYNAMIC_BODY?this.bodies.set(N):N.physicsType===s.STATIC_BODY&&(this.staticBodies.set(N),this.staticTree.insert(N)),N.enable=!0,N},disable:function(N){Array.isArray(N)||(N=[N]);for(var I=0;I<N.length;I++){var z=N[I];if(z.isParent)for(var U=z.getChildren(),W=0;W<U.length;W++){var V=U[W];V.isParent?this.disable(V):this.disableBody(V.body)}else this.disableBody(z.body)}},disableBody:function(N){this.remove(N),N.enable=!1},remove:function(N){N.physicsType===s.DYNAMIC_BODY?(this.tree.remove(N),this.bodies.delete(N)):N.physicsType===s.STATIC_BODY&&(this.staticBodies.delete(N),this.staticTree.remove(N))},createDebugGraphic:function(){var N=this.scene.sys.add.graphics({x:0,y:0});return N.setDepth(Number.MAX_VALUE),this.debugGraphic=N,this.drawDebug=!0,N},setBounds:function(N,I,z,U,W,V,Z,J){return this.bounds.setTo(N,I,z,U),W!==void 0&&this.setBoundsCollision(W,V,Z,J),this},setBoundsCollision:function(N,I,z,U){return N===void 0&&(N=!0),I===void 0&&(I=!0),z===void 0&&(z=!0),U===void 0&&(U=!0),this.checkCollision.left=N,this.checkCollision.right=I,this.checkCollision.up=z,this.checkCollision.down=U,this},pause:function(){return this.isPaused=!0,this.emit(i.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(i.RESUME),this},addCollider:function(N,I,z,U,W){z===void 0&&(z=null),U===void 0&&(U=null),W===void 0&&(W=z);var V=new a(this,!1,N,I,z,U,W);return this.colliders.add(V),V},addOverlap:function(N,I,z,U,W){z===void 0&&(z=null),U===void 0&&(U=null),W===void 0&&(W=z);var V=new a(this,!0,N,I,z,U,W);return this.colliders.add(V),V},removeCollider:function(N){return this.colliders.remove(N),this},setFPS:function(N){return this.fps=N,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(N,I){if(!(this.isPaused||this.bodies.size===0)){var z,U=this._frameTime,W=this._frameTimeMS*this.timeScale;this._elapsed+=I;var V,Z=this.bodies.entries,J=this._elapsed>=W;for(this.fixedStep||(U=I*.001,J=!0,this._elapsed=0),z=0;z<Z.length;z++)V=Z[z],V.enable&&V.preUpdate(J,U);if(J){this._elapsed-=W,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Z));var tt=this.colliders.update();for(z=0;z<tt.length;z++){var st=tt[z];st.active&&st.update()}this.emit(i.WORLD_STEP,U)}for(;this._elapsed>=W;)this._elapsed-=W,this.step(U)}},step:function(N){var I,z,U=this.bodies.entries,W=U.length;for(I=0;I<W;I++)z=U[I],z.enable&&z.update(N);this.useTree&&(this.tree.clear(),this.tree.load(U));var V=this.colliders.update();for(I=0;I<V.length;I++){var Z=V[I];Z.active&&Z.update()}this.emit(i.WORLD_STEP,N),this.stepsLastFrame++},postUpdate:function(){var N,I,z=this.bodies.entries,U=z.length,W=this.bodies,V=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,N=0;N<U;N++)I=z[N],I.enable&&I.postUpdate();if(this.drawDebug){var Z=this.debugGraphic;for(Z.clear(),N=0;N<U;N++)I=z[N],I.willDrawDebug()&&I.drawDebug(Z);for(z=V.entries,U=z.length,N=0;N<U;N++)I=z[N],I.willDrawDebug()&&I.drawDebug(Z)}var J=this.pendingDestroy;if(J.size>0){var tt=this.tree,st=this.staticTree;for(z=J.entries,U=z.length,N=0;N<U;N++)I=z[N],I.physicsType===s.DYNAMIC_BODY?(tt.remove(I),W.delete(I)):I.physicsType===s.STATIC_BODY&&(st.remove(I),V.delete(I)),I.world=void 0,I.gameObject=void 0;J.clear()}},updateMotion:function(N,I){N.allowRotation&&this.computeAngularVelocity(N,I),this.computeVelocity(N,I)},computeAngularVelocity:function(N,I){var z=N.angularVelocity,U=N.angularAcceleration,W=N.angularDrag,V=N.maxAngular;U?z+=U*I:N.allowDrag&&W&&(W*=I,u(z-W,0,.1)?z-=W:d(z+W,0,.1)?z+=W:z=0),z=r(z,-V,V);var Z=z-N.angularVelocity;N.angularVelocity+=Z,N.rotation+=N.angularVelocity*I},computeVelocity:function(N,I){var z=N.velocity.x,U=N.acceleration.x,W=N.drag.x,V=N.maxVelocity.x,Z=N.velocity.y,J=N.acceleration.y,tt=N.drag.y,st=N.maxVelocity.y,at=N.speed,lt=N.maxSpeed,ut=N.allowDrag,mt=N.useDamping;N.allowGravity&&(z+=(this.gravity.x+N.gravity.x)*I,Z+=(this.gravity.y+N.gravity.y)*I),U?z+=U*I:ut&&W&&(mt?(W=Math.pow(W,I),z*=W,at=Math.sqrt(z*z+Z*Z),h(at,0,.001)&&(z=0)):(W*=I,u(z-W,0,.01)?z-=W:d(z+W,0,.01)?z+=W:z=0)),J?Z+=J*I:ut&&tt&&(mt?(tt=Math.pow(tt,I),Z*=tt,at=Math.sqrt(z*z+Z*Z),h(at,0,.001)&&(Z=0)):(tt*=I,u(Z-tt,0,.01)?Z-=tt:d(Z+tt,0,.01)?Z+=tt:Z=0)),z=r(z,-V,V),Z=r(Z,-st,st),N.velocity.set(z,Z),lt>-1&&at>lt&&(N.velocity.normalize().scale(lt),at=lt),N.speed=at},separate:function(N,I,z,U,W,V){if(!V&&!N.enable||!I.enable||N.checkCollision.none||I.checkCollision.none||!this.intersects(N,I)||z&&z.call(U,N.gameObject,I.gameObject)===!1)return!1;if(N.isCircle&&I.isCircle)return this.separateCircle(N,I,W);if(N.isCircle!==I.isCircle){var Z=N.isCircle?I:N,J=N.isCircle?N:I,tt={x:Z.x,y:Z.y,right:Z.right,bottom:Z.bottom},st=J.center;if((st.y<tt.y||st.y>tt.bottom)&&(st.x<tt.x||st.x>tt.right))return this.separateCircle(N,I,W)}var at=!1,lt=!1;W?(at=R(N,I,W,this.OVERLAP_BIAS),lt=L(N,I,W,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+N.gravity.y)<Math.abs(this.gravity.x+N.gravity.x)?(at=R(N,I,W,this.OVERLAP_BIAS),this.intersects(N,I)&&(lt=L(N,I,W,this.OVERLAP_BIAS))):(lt=L(N,I,W,this.OVERLAP_BIAS),this.intersects(N,I)&&(at=R(N,I,W,this.OVERLAP_BIAS)));var ut=at||lt;return ut&&(W?(N.onOverlap||I.onOverlap)&&this.emit(i.OVERLAP,N.gameObject,I.gameObject,N,I):(N.onCollide||I.onCollide)&&this.emit(i.COLLIDE,N.gameObject,I.gameObject,N,I)),ut},separateCircle:function(N,I,z,U){c(N,I,!1,U),p(N,I,!1,U);var W=0;if(N.isCircle!==I.isCircle){var V={x:I.isCircle?N.position.x:I.position.x,y:I.isCircle?N.position.y:I.position.y,right:I.isCircle?N.right:I.right,bottom:I.isCircle?N.bottom:I.bottom},Z={x:N.isCircle?N.center.x:I.center.x,y:N.isCircle?N.center.y:I.center.y,radius:N.isCircle?N.halfWidth:I.halfWidth};Z.y<V.y?Z.x<V.x?W=n(Z.x,Z.y,V.x,V.y)-Z.radius:Z.x>V.right&&(W=n(Z.x,Z.y,V.right,V.y)-Z.radius):Z.y>V.bottom&&(Z.x<V.x?W=n(Z.x,Z.y,V.x,V.bottom)-Z.radius:Z.x>V.right&&(W=n(Z.x,Z.y,V.right,V.bottom)-Z.radius)),W*=-1}else W=N.halfWidth+I.halfWidth-n(N.center.x,N.center.y,I.center.x,I.center.y);if(N.overlapR=W,I.overlapR=W,z||W===0||N.immovable&&I.immovable||N.customSeparateX||I.customSeparateX)return W!==0&&(N.onOverlap||I.onOverlap)&&this.emit(i.OVERLAP,N.gameObject,I.gameObject,N,I),W!==0;var J=N.center.x-I.center.x,tt=N.center.y-I.center.y,st=Math.sqrt(Math.pow(J,2)+Math.pow(tt,2)),at=(I.center.x-N.center.x)/st||0,lt=(I.center.y-N.center.y)/st||0,ut=2*(N.velocity.x*at+N.velocity.y*lt-I.velocity.x*at-I.velocity.y*lt)/(N.mass+I.mass);(N.immovable||I.immovable)&&(ut*=2),N.immovable||(N.velocity.x=N.velocity.x-ut/N.mass*at,N.velocity.y=N.velocity.y-ut/N.mass*lt),I.immovable||(I.velocity.x=I.velocity.x+ut/I.mass*at,I.velocity.y=I.velocity.y+ut/I.mass*lt),!N.immovable&&!I.immovable&&(W/=2);var mt=e(N.center,I.center),dt=(W+y.EPSILON)*Math.cos(mt),xt=(W+y.EPSILON)*Math.sin(mt);return N.immovable||(N.x-=dt,N.y-=xt,N.updateCenter()),I.immovable||(I.x+=dt,I.y+=xt,I.updateCenter()),N.velocity.x*=N.bounce.x,N.velocity.y*=N.bounce.y,I.velocity.x*=I.bounce.x,I.velocity.y*=I.bounce.y,(N.onCollide||I.onCollide)&&this.emit(i.COLLIDE,N.gameObject,I.gameObject,N,I),!0},intersects:function(N,I){return N===I?!1:!N.isCircle&&!I.isCircle?!(N.right<=I.position.x||N.bottom<=I.position.y||N.position.x>=I.right||N.position.y>=I.bottom):N.isCircle?I.isCircle?n(N.center.x,N.center.y,I.center.x,I.center.y)<=N.halfWidth+I.halfWidth:this.circleBodyIntersects(N,I):this.circleBodyIntersects(I,N)},circleBodyIntersects:function(N,I){var z=r(N.center.x,I.left,I.right),U=r(N.center.y,I.top,I.bottom),W=(N.center.x-z)*(N.center.x-z),V=(N.center.y-U)*(N.center.y-U);return W+V<=N.halfWidth*N.halfWidth},overlap:function(N,I,z,U,W){return z===void 0&&(z=null),U===void 0&&(U=null),W===void 0&&(W=z),this.collideObjects(N,I,z,U,W,!0)},collide:function(N,I,z,U,W){return z===void 0&&(z=null),U===void 0&&(U=null),W===void 0&&(W=z),this.collideObjects(N,I,z,U,W,!1)},collideObjects:function(N,I,z,U,W,V){var Z,J;N.isParent&&N.physicsType===void 0&&(N=N.children.entries),I&&I.isParent&&I.physicsType===void 0&&(I=I.children.entries);var tt=Array.isArray(N),st=Array.isArray(I);if(this._total=0,!tt&&!st)this.collideHandler(N,I,z,U,W,V);else if(!tt&&st)for(Z=0;Z<I.length;Z++)this.collideHandler(N,I[Z],z,U,W,V);else if(tt&&!st)if(I)for(Z=0;Z<N.length;Z++)this.collideHandler(N[Z],I,z,U,W,V);else for(Z=0;Z<N.length;Z++){var at=N[Z];for(J=Z+1;J<N.length;J++)Z!==J&&this.collideHandler(at,N[J],z,U,W,V)}else for(Z=0;Z<N.length;Z++)for(J=0;J<I.length;J++)this.collideHandler(N[Z],I[J],z,U,W,V);return this._total>0},collideHandler:function(N,I,z,U,W,V){if(I===void 0&&N.isParent)return this.collideGroupVsGroup(N,N,z,U,W,V);if(!N||!I)return!1;if(N.body){if(I.body)return this.collideSpriteVsSprite(N,I,z,U,W,V);if(I.isParent)return this.collideSpriteVsGroup(N,I,z,U,W,V);if(I.isTilemap)return this.collideSpriteVsTilemapLayer(N,I,z,U,W,V)}else if(N.isParent){if(I.body)return this.collideSpriteVsGroup(I,N,z,U,W,V);if(I.isParent)return this.collideGroupVsGroup(N,I,z,U,W,V);if(I.isTilemap)return this.collideGroupVsTilemapLayer(N,I,z,U,W,V)}else if(N.isTilemap){if(I.body)return this.collideSpriteVsTilemapLayer(I,N,z,U,W,V);if(I.isParent)return this.collideGroupVsTilemapLayer(I,N,z,U,W,V)}},collideSpriteVsSprite:function(N,I,z,U,W,V){return!N.body||!I.body?!1:(this.separate(N.body,I.body,U,W,V)&&(z&&z.call(W,N,I),this._total++),!0)},collideSpriteVsGroup:function(N,I,z,U,W,V){var Z=N.body;if(!(I.length===0||!Z||!Z.enable||Z.checkCollision.none)){var J,tt,st;if(this.useTree||I.physicsType===s.STATIC_BODY){var at=this.treeMinMax;at.minX=Z.left,at.minY=Z.top,at.maxX=Z.right,at.maxY=Z.bottom;var lt=I.physicsType===s.DYNAMIC_BODY?this.tree.search(at):this.staticTree.search(at);for(tt=lt.length,J=0;J<tt;J++)st=lt[J],!(Z===st||!st.enable||st.checkCollision.none||!I.contains(st.gameObject))&&this.separate(Z,st,U,W,V,!0)&&(z&&z.call(W,Z.gameObject,st.gameObject),this._total++)}else{var ut=I.getChildren(),mt=I.children.entries.indexOf(N);for(tt=ut.length,J=0;J<tt;J++)st=ut[J].body,!(!st||J===mt||!st.enable)&&this.separate(Z,st,U,W,V)&&(z&&z.call(W,Z.gameObject,st.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(N,I,z,U,W,V){var Z=N.getChildren();if(Z.length===0)return!1;for(var J=!1,tt=0;tt<Z.length;tt++)Z[tt].body&&this.collideSpriteVsTilemapLayer(Z[tt],I,z,U,W,V)&&(J=!0);return J},collideTiles:function(N,I,z,U,W){return!N.body.enable||I.length===0?!1:this.collideSpriteVsTilesHandler(N,I,z,U,W,!1,!1)},overlapTiles:function(N,I,z,U,W){return!N.body.enable||I.length===0?!1:this.collideSpriteVsTilesHandler(N,I,z,U,W,!0,!1)},collideSpriteVsTilemapLayer:function(N,I,z,U,W,V){var Z=N.body;if(!Z.enable||Z.checkCollision.none)return!1;var J=Z.position.x,tt=Z.position.y,st=Z.width,at=Z.height,lt=I.layer;if(lt.tileWidth>lt.baseTileWidth){var ut=(lt.tileWidth-lt.baseTileWidth)*I.scaleX;J-=ut,st+=ut}if(lt.tileHeight>lt.baseTileHeight){var mt=(lt.tileHeight-lt.baseTileHeight)*I.scaleY;at+=mt}var dt=g(J,tt,st,at,null,I.scene.cameras.main,I.layer);return dt.length===0?!1:this.collideSpriteVsTilesHandler(N,dt,z,U,W,V,!0)},collideSpriteVsTilesHandler:function(N,I,z,U,W,V,Z){for(var J=N.body,tt,st={left:0,right:0,top:0,bottom:0},at,lt=!1,ut=0;ut<I.length;ut++){tt=I[ut],at=tt.tilemapLayer;var mt=at.tileToWorldXY(tt.x,tt.y);st.left=mt.x,st.top=mt.y,tt.baseHeight!==tt.height&&(st.top-=(tt.height-tt.baseHeight)*at.scaleY),st.right=st.left+tt.width*at.scaleX,st.bottom=st.top+tt.height*at.scaleY,G(st,J)&&(!U||U.call(W,N,tt))&&E(tt,N)&&(V||b(ut,J,tt,st,at,this.TILE_BIAS,Z))&&(this._total++,lt=!0,z&&z.call(W,N,tt),V&&J.onOverlap?this.emit(i.TILE_OVERLAP,N,tt,J):J.onCollide&&this.emit(i.TILE_COLLIDE,N,tt,J))}return lt},collideGroupVsGroup:function(N,I,z,U,W,V){if(!(N.length===0||I.length===0))for(var Z=N.getChildren(),J=0;J<Z.length;J++)this.collideSpriteVsGroup(Z[J],I,z,U,W,V)},wrap:function(N,I){N.body?this.wrapObject(N,I):N.getChildren?this.wrapArray(N.getChildren(),I):Array.isArray(N)?this.wrapArray(N,I):this.wrapObject(N,I)},wrapArray:function(N,I){for(var z=0;z<N.length;z++)this.wrapObject(N[z],I)},wrapObject:function(N,I){I===void 0&&(I=0),N.x=K(N.x,this.bounds.left-I,this.bounds.right+I),N.y=K(N.y,this.bounds.top-I,this.bounds.bottom+I)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});m.exports=$},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(62),r=t(245),o=t(196),a=t(10),s=t(57),n=t(3),l=new e({initialize:function(h,u){var d=u.displayWidth?u.displayWidth:64,c=u.displayHeight?u.displayHeight:64;this.world=h,this.gameObject=u,this.transform={x:u.x,y:u.y,rotation:u.angle,scaleX:u.scaleX,scaleY:u.scaleY,displayOriginX:u.displayOriginX,displayOriginY:u.displayOriginY},this.debugShowBody=h.defaults.debugShowBody,this.debugShowVelocity=h.defaults.debugShowVelocity,this.debugBodyColor=h.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(u.x-u.scaleX*u.displayOriginX,u.y-u.scaleY*u.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=u.angle,this.preRotation=u.angle,this.width=d,this.height=c,this.sourceWidth=d,this.sourceHeight=c,u.frame&&(this.sourceWidth=u.frame.realWidth,this.sourceHeight=u.frame.realHeight),this.halfWidth=Math.abs(d/2),this.halfHeight=Math.abs(c/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new n,this.newVelocity=new n,this.deltaMax=new n,this.acceleration=new n,this.allowDrag=!0,this.drag=new n,this.allowGravity=!0,this.gravity=new n,this.bounce=new n,this.worldBounce=null,this.customBoundsRectangle=h.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new n(1e4,1e4),this.maxSpeed=-1,this.friction=new n(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=f.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=f.DYNAMIC_BODY,this._sx=u.scaleX,this._sy=u.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new a},updateBounds:function(){var i=this.gameObject,h=this.transform;if(i.parentContainer){var u=i.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);h.x=u.tx,h.y=u.ty,h.rotation=o(u.rotation),h.scaleX=u.scaleX,h.scaleY=u.scaleY,h.displayOriginX=i.displayOriginX,h.displayOriginY=i.displayOriginY}else h.x=i.x,h.y=i.y,h.rotation=i.angle,h.scaleX=i.scaleX,h.scaleY=i.scaleY,h.displayOriginX=i.displayOriginX,h.displayOriginY=i.displayOriginY;var d=!1;if(this.syncBounds){var c=i.getBounds(this._bounds);this.width=c.width,this.height=c.height,d=!0}else{var p=Math.abs(h.scaleX),g=Math.abs(h.scaleY);(this._sx!==p||this._sy!==g)&&(this.width=this.sourceWidth*p,this.height=this.sourceHeight*g,this._sx=p,this._sy=g,d=!0)}d&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var i=this.transform;this.position.x=i.x+i.scaleX*(this.offset.x-i.displayOriginX),this.position.y=i.y+i.scaleY*(this.offset.y-i.displayOriginY),this.updateCenter()},resetFlags:function(i){i===void 0&&(i=!1);var h=this.wasTouching,u=this.touching,d=this.blocked;i?(h.none=!0,h.up=!1,h.down=!1,h.left=!1,h.right=!1):(h.none=u.none,h.up=u.up,h.down=u.down,h.left=u.left,h.right=u.right),u.none=!0,u.up=!1,u.down=!1,u.left=!1,u.right=!1,d.none=!0,d.up=!1,d.down=!1,d.left=!1,d.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(i,h){i&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),i&&this.update(h)},update:function(i){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,i);var h=this.velocity.x,u=this.velocity.y;this.newVelocity.set(h*i,u*i),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(u,h),this.speed=Math.sqrt(h*h+u*u),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(r.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var i=this.position.x-this.prevFrame.x,h=this.position.y-this.prevFrame.y;if(this.moves){var u=this.deltaMax.x,d=this.deltaMax.y;u!==0&&i!==0&&(i<0&&i<-u?i=-u:i>0&&i>u&&(i=u)),d!==0&&h!==0&&(h<0&&h<-d?h=-d:h>0&&h>d&&(h=d)),this.gameObject.x+=i,this.gameObject.y+=h}i<0?this.facing=f.FACING_LEFT:i>0&&(this.facing=f.FACING_RIGHT),h<0?this.facing=f.FACING_UP:h>0&&(this.facing=f.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=i,this._ty=h},setBoundsRectangle:function(i){return this.customBoundsRectangle=i||this.world.bounds,this},checkWorldBounds:function(){var i=this.position,h=this.customBoundsRectangle,u=this.world.checkCollision,d=this.worldBounce?-this.worldBounce.x:-this.bounce.x,c=this.worldBounce?-this.worldBounce.y:-this.bounce.y,p=!1;return i.x<h.x&&u.left?(i.x=h.x,this.velocity.x*=d,this.blocked.left=!0,p=!0):this.right>h.right&&u.right&&(i.x=h.right-this.width,this.velocity.x*=d,this.blocked.right=!0,p=!0),i.y<h.y&&u.up?(i.y=h.y,this.velocity.y*=c,this.blocked.up=!0,p=!0):this.bottom>h.bottom&&u.down&&(i.y=h.bottom-this.height,this.velocity.y*=c,this.blocked.down=!0,p=!0),p&&(this.blocked.none=!1,this.updateCenter()),p},setOffset:function(i,h){return h===void 0&&(h=i),this.offset.set(i,h),this},setSize:function(i,h,u){u===void 0&&(u=!0);var d=this.gameObject;if(!i&&d.frame&&(i=d.frame.realWidth),!h&&d.frame&&(h=d.frame.realHeight),this.sourceWidth=i,this.sourceHeight=h,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),u&&d.getCenter){var c=(d.width-i)/2,p=(d.height-h)/2;this.offset.set(c,p)}return this.isCircle=!1,this.radius=0,this},setCircle:function(i,h,u){return h===void 0&&(h=this.offset.x),u===void 0&&(u=this.offset.y),i>0?(this.isCircle=!0,this.radius=i,this.sourceWidth=i*2,this.sourceHeight=i*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(h,u),this.updateCenter()):this.isCircle=!1,this},reset:function(i,h){this.stop();var u=this.gameObject;u.setPosition(i,h),u.getTopLeft?u.getTopLeft(this.position):this.position.set(i,h),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=u.angle,this.preRotation=u.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(i){return i.x=this.x,i.y=this.y,i.right=this.right,i.bottom=this.bottom,i},hitTest:function(i,h){if(!this.isCircle)return s(this,i,h);if(this.radius>0&&i>=this.left&&i<=this.right&&h>=this.top&&h<=this.bottom){var u=(this.center.x-i)*(this.center.x-i),d=(this.center.y-h)*(this.center.y-h);return u+d<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(i){var h=this.position,u=h.x+this.halfWidth,d=h.y+this.halfHeight;this.debugShowBody&&(i.lineStyle(i.defaultStrokeWidth,this.debugBodyColor),this.isCircle?i.strokeCircle(u,d,this.width/2):(this.checkCollision.up&&i.lineBetween(h.x,h.y,h.x+this.width,h.y),this.checkCollision.right&&i.lineBetween(h.x+this.width,h.y,h.x+this.width,h.y+this.height),this.checkCollision.down&&i.lineBetween(h.x,h.y+this.height,h.x+this.width,h.y+this.height),this.checkCollision.left&&i.lineBetween(h.x,h.y,h.x,h.y+this.height))),this.debugShowVelocity&&(i.lineStyle(i.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),i.lineBetween(u,d,u+this.velocity.x/2,d+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(i,h,u,d){i===void 0&&(i=!0),this.collideWorldBounds=i;var c=h!==void 0,p=u!==void 0;return(c||p)&&(this.worldBounce||(this.worldBounce=new n),c&&(this.worldBounce.x=h),p&&(this.worldBounce.y=u)),d!==void 0&&(this.onWorldBounds=d),this},setVelocity:function(i,h){return this.velocity.set(i,h),i=this.velocity.x,h=this.velocity.y,this.speed=Math.sqrt(i*i+h*h),this},setVelocityX:function(i){this.velocity.x=i;var h=i,u=this.velocity.y;return this.speed=Math.sqrt(h*h+u*u),this},setVelocityY:function(i){this.velocity.y=i;var h=this.velocity.x,u=i;return this.speed=Math.sqrt(h*h+u*u),this},setMaxVelocity:function(i,h){return this.maxVelocity.set(i,h),this},setMaxVelocityX:function(i){return this.maxVelocity.x=i,this},setMaxVelocityY:function(i){return this.maxVelocity.y=i,this},setMaxSpeed:function(i){return this.maxSpeed=i,this},setBounce:function(i,h){return this.bounce.set(i,h),this},setBounceX:function(i){return this.bounce.x=i,this},setBounceY:function(i){return this.bounce.y=i,this},setAcceleration:function(i,h){return this.acceleration.set(i,h),this},setAccelerationX:function(i){return this.acceleration.x=i,this},setAccelerationY:function(i){return this.acceleration.y=i,this},setAllowDrag:function(i){return i===void 0&&(i=!0),this.allowDrag=i,this},setAllowGravity:function(i){return i===void 0&&(i=!0),this.allowGravity=i,this},setAllowRotation:function(i){return i===void 0&&(i=!0),this.allowRotation=i,this},setDrag:function(i,h){return this.drag.set(i,h),this},setDamping:function(i){return this.useDamping=i,this},setDragX:function(i){return this.drag.x=i,this},setDragY:function(i){return this.drag.y=i,this},setGravity:function(i,h){return this.gravity.set(i,h),this},setGravityX:function(i){return this.gravity.x=i,this},setGravityY:function(i){return this.gravity.y=i,this},setFriction:function(i,h){return this.friction.set(i,h),this},setFrictionX:function(i){return this.friction.x=i,this},setFrictionY:function(i){return this.friction.y=i,this},setAngularVelocity:function(i){return this.angularVelocity=i,this},setAngularAcceleration:function(i){return this.angularAcceleration=i,this},setAngularDrag:function(i){return this.angularDrag=i,this},setMass:function(i){return this.mass=i,this},setImmovable:function(i){return i===void 0&&(i=!0),this.immovable=i,this},setEnable:function(i){return i===void 0&&(i=!0),this.enable=i,this},processX:function(i,h,u,d){this.x+=i,this.updateCenter(),h!==null&&(this.velocity.x=h);var c=this.blocked;u&&(c.left=!0),d&&(c.right=!0)},processY:function(i,h,u,d){this.y+=i,this.updateCenter(),h!==null&&(this.velocity.y=h);var c=this.blocked;u&&(c.up=!0),d&&(c.down=!0)},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s,n,l,i,h){this.world=o,this.name="",this.active=!0,this.overlapOnly=a,this.object1=s,this.object2=n,this.collideCallback=l,this.processCallback=i,this.callbackContext=h},setName:function(r){return this.name=r,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(3),r=new f,o=new f,a=function(s,n,l,i,h,u,d){var c=d.tilemapLayer.tilemap._convert.WorldToTileXY;c(s,n,!0,r,u,d);var p=r.x,g=r.y;c(s+l,n+i,!1,o,u,d);var x=Math.ceil(o.x),y=Math.ceil(o.y);return e(p,g,x-p,y-g,h,d)};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.collisionCallback?!e.collisionCallback.call(e.collisionCallbackContext,f,e):e.layer.callbacks[e.index]?!e.layer.callbacks[e.index].callback.call(e.layer.callbacks[e.index].callbackContext,f,e):!0};m.exports=t},function(m,C,t){/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(436);function f(y){var T=[".left",".top",".right",".bottom"];if(!(this instanceof f))return new f(y,T);this._maxEntries=Math.max(4,y||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}f.prototype={all:function(){return this._all(this.data,[])},search:function(y){var T=this.data,E=[],w=this.toBBox;if(!p(y,T))return E;for(var A=[],b,R,L,B;T;){for(b=0,R=T.children.length;b<R;b++)L=T.children[b],B=T.leaf?w(L):L,p(y,B)&&(T.leaf?E.push(L):c(y,B)?this._all(L,E):A.push(L));T=A.pop()}return E},collides:function(y){var T=this.data,E=this.toBBox;if(!p(y,T))return!1;for(var w=[],A,b,R,L;T;){for(A=0,b=T.children.length;A<b;A++)if(R=T.children[A],L=T.leaf?E(R):R,p(y,L)){if(T.leaf||c(y,L))return!0;w.push(R)}T=w.pop()}return!1},load:function(y){if(!(y&&y.length))return this;if(y.length<this._minEntries){for(var T=0,E=y.length;T<E;T++)this.insert(y[T]);return this}var w=this._build(y.slice(),0,y.length-1,0);if(!this.data.children.length)this.data=w;else if(this.data.height===w.height)this._splitRoot(this.data,w);else{if(this.data.height<w.height){var A=this.data;this.data=w,w=A}this._insert(w,this.data.height-w.height-1,!0)}return this},insert:function(y){return y&&this._insert(y,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(y,T){if(!y)return this;for(var E=this.data,w=this.toBBox(y),A=[],b=[],R,L,B,D;E||A.length;){if(E||(E=A.pop(),L=A[A.length-1],R=b.pop(),D=!0),E.leaf&&(B=r(y,E.children,T),B!==-1))return E.children.splice(B,1),A.push(E),this._condense(A),this;!D&&!E.leaf&&c(E,w)?(A.push(E),b.push(R),R=0,L=E,E=E.children[0]):L?(R++,E=L.children[R],D=!1):E=null}return this},toBBox:function(y){return y},compareMinX:n,compareMinY:l,toJSON:function(){return this.data},fromJSON:function(y){return this.data=y,this},_all:function(y,T){for(var E=[];y;)y.leaf?T.push.apply(T,y.children):E.push.apply(E,y.children),y=E.pop();return T},_build:function(y,T,E,w){var A=E-T+1,b=this._maxEntries,R;if(A<=b)return R=g(y.slice(T,E+1)),o(R,this.toBBox),R;w||(w=Math.ceil(Math.log(A)/Math.log(b)),b=Math.ceil(A/Math.pow(b,w-1))),R=g([]),R.leaf=!1,R.height=w;var L=Math.ceil(A/b),B=L*Math.ceil(Math.sqrt(b)),D,G,X,H;for(x(y,T,E,B,this.compareMinX),D=T;D<=E;D+=B)for(X=Math.min(D+B-1,E),x(y,D,X,L,this.compareMinY),G=D;G<=X;G+=L)H=Math.min(G+L-1,X),R.children.push(this._build(y,G,H,w-1));return o(R,this.toBBox),R},_chooseSubtree:function(y,T,E,w){for(var A,b,R,L,B,D,G,X;w.push(T),!(T.leaf||w.length-1===E);){for(G=X=1/0,A=0,b=T.children.length;A<b;A++)R=T.children[A],B=i(R),D=u(y,R)-B,D<X?(X=D,G=B<G?B:G,L=R):D===X&&B<G&&(G=B,L=R);T=L||T.children[0]}return T},_insert:function(y,T,E){var w=this.toBBox,A=E?y:w(y),b=[],R=this._chooseSubtree(A,this.data,T,b);for(R.children.push(y),s(R,A);T>=0&&b[T].children.length>this._maxEntries;)this._split(b,T),T--;this._adjustParentBBoxes(A,b,T)},_split:function(y,T){var E=y[T],w=E.children.length,A=this._minEntries;this._chooseSplitAxis(E,A,w);var b=this._chooseSplitIndex(E,A,w),R=g(E.children.splice(b,E.children.length-b));R.height=E.height,R.leaf=E.leaf,o(E,this.toBBox),o(R,this.toBBox),T?y[T-1].children.push(R):this._splitRoot(E,R)},_splitRoot:function(y,T){this.data=g([y,T]),this.data.height=y.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(y,T,E){var w,A,b,R,L,B,D,G;for(B=D=1/0,w=T;w<=E-T;w++)A=a(y,0,w,this.toBBox),b=a(y,w,E,this.toBBox),R=d(A,b),L=i(A)+i(b),R<B?(B=R,G=w,D=L<D?L:D):R===B&&L<D&&(D=L,G=w);return G},_chooseSplitAxis:function(y,T,E){var w=y.leaf?this.compareMinX:n,A=y.leaf?this.compareMinY:l,b=this._allDistMargin(y,T,E,w),R=this._allDistMargin(y,T,E,A);b<R&&y.children.sort(w)},_allDistMargin:function(y,T,E,w){y.children.sort(w);var A=this.toBBox,b=a(y,0,T,A),R=a(y,E-T,E,A),L=h(b)+h(R),B,D;for(B=T;B<E-T;B++)D=y.children[B],s(b,y.leaf?A(D):D),L+=h(b);for(B=E-T-1;B>=T;B--)D=y.children[B],s(R,y.leaf?A(D):D),L+=h(R);return L},_adjustParentBBoxes:function(y,T,E){for(var w=E;w>=0;w--)s(T[w],y)},_condense:function(y){for(var T=y.length-1,E;T>=0;T--)y[T].children.length===0?T>0?(E=y[T-1].children,E.splice(E.indexOf(y[T]),1)):this.clear():o(y[T],this.toBBox)},compareMinX:function(y,T){return y.left-T.left},compareMinY:function(y,T){return y.top-T.top},toBBox:function(y){return{minX:y.left,minY:y.top,maxX:y.right,maxY:y.bottom}}};function r(y,T,E){if(!E)return T.indexOf(y);for(var w=0;w<T.length;w++)if(E(y,T[w]))return w;return-1}function o(y,T){a(y,0,y.children.length,T,y)}function a(y,T,E,w,A){A||(A=g(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var b=T,R;b<E;b++)R=y.children[b],s(A,y.leaf?w(R):R);return A}function s(y,T){return y.minX=Math.min(y.minX,T.minX),y.minY=Math.min(y.minY,T.minY),y.maxX=Math.max(y.maxX,T.maxX),y.maxY=Math.max(y.maxY,T.maxY),y}function n(y,T){return y.minX-T.minX}function l(y,T){return y.minY-T.minY}function i(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function h(y){return y.maxX-y.minX+(y.maxY-y.minY)}function u(y,T){return(Math.max(T.maxX,y.maxX)-Math.min(T.minX,y.minX))*(Math.max(T.maxY,y.maxY)-Math.min(T.minY,y.minY))}function d(y,T){var E=Math.max(y.minX,T.minX),w=Math.max(y.minY,T.minY),A=Math.min(y.maxX,T.maxX),b=Math.min(y.maxY,T.maxY);return Math.max(0,A-E)*Math.max(0,b-w)}function c(y,T){return y.minX<=T.minX&&y.minY<=T.minY&&T.maxX<=y.maxX&&T.maxY<=y.maxY}function p(y,T){return T.minX<=y.maxX&&T.minY<=y.maxY&&T.maxX>=y.minX&&T.maxY>=y.minY}function g(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(y,T,E,w,A){for(var b=[T,E],R;b.length;)E=b.pop(),T=b.pop(),!(E-T<=w)&&(R=T+Math.ceil((E-T)/w/2)*w,e(y,R,T,E,A),b.push(T,R,R,E))}m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(533),f=t(535),r=t(248),o=function(a,s,n,l,i,h,u){var d=l.left,c=l.top,p=l.right,g=l.bottom,x=n.faceLeft||n.faceRight,y=n.faceTop||n.faceBottom;if(u||(x=!0,y=!0),!x&&!y)return!1;var T=0,E=0,w=0,A=1;if(s.deltaAbsX()>s.deltaAbsY()?w=-1:s.deltaAbsX()<s.deltaAbsY()&&(A=-1),s.deltaX()!==0&&s.deltaY()!==0&&x&&y&&(w=Math.min(Math.abs(s.position.x-p),Math.abs(s.right-d)),A=Math.min(Math.abs(s.position.y-g),Math.abs(s.bottom-c))),w<A){if(x&&(T=e(s,n,d,p,h,u),T!==0&&!r(l,s)))return!0;y&&(E=f(s,n,c,g,h,u))}else{if(y&&(E=f(s,n,c,g,h,u),E!==0&&!r(l,s)))return!0;x&&(T=e(s,n,d,p,h,u))}return T!==0||E!==0};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(534),f=function(r,o,a,s,n,l){var i=0,h=o.faceLeft,u=o.faceRight,d=o.collideLeft,c=o.collideRight;return l||(h=!0,u=!0,d=!0,c=!0),r.deltaX()<0&&c&&r.checkCollision.left?u&&r.x<s&&(i=r.x-s,i<-n&&(i=0)):r.deltaX()>0&&d&&r.checkCollision.right&&h&&r.right>a&&(i=r.right-a,i>n&&(i=0)),i!==0&&(r.customSeparateX?r.overlapX=i:e(r,i)),i};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f<0?(e.blocked.none=!1,e.blocked.left=!0):f>0&&(e.blocked.none=!1,e.blocked.right=!0),e.position.x-=f,e.bounce.x===0?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(536),f=function(r,o,a,s,n,l){var i=0,h=o.faceTop,u=o.faceBottom,d=o.collideUp,c=o.collideDown;return l||(h=!0,u=!0,d=!0,c=!0),r.deltaY()<0&&c&&r.checkCollision.up?u&&r.y<s&&(i=r.y-s,i<-n&&(i=0)):r.deltaY()>0&&d&&r.checkCollision.down&&h&&r.bottom>a&&(i=r.bottom-a,i>n&&(i=0)),i!==0&&(r.customSeparateY?r.overlapY=i:e(r,i)),i};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f<0?(e.blocked.none=!1,e.blocked.up=!0):f>0&&(e.blocked.none=!1,e.blocked.down=!0),e.position.y-=f,e.bounce.y===0?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(246),f=t(1389),r=function(o,a,s,n){var l=e(o,a,s,n),i=o.immovable,h=a.immovable;if(s||l===0||i&&h||o.customSeparateX||a.customSeparateX)return l!==0||o.embedded&&a.embedded;var u=f.Set(o,a,l);return!i&&!h?u>0?!0:f.Check():(i?f.RunImmovableBody1(u):h&&f.RunImmovableBody2(u),!0)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(247),f=t(1390),r=function(o,a,s,n){var l=e(o,a,s,n),i=o.immovable,h=a.immovable;if(s||l===0||i&&h||o.customSeparateY||a.customSeparateY)return l!==0||o.embedded&&a.embedded;var u=f.Set(o,a,l);return!i&&!h?u>0?!0:f.Check():(i?f.RunImmovableBody1(u):h&&f.RunImmovableBody2(u),!0)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),f=t(0),r=t(62),o=t(57),a=t(3),s=new f({initialize:function(l,i){var h=i.displayWidth?i.displayWidth:64,u=i.displayHeight?i.displayHeight:64;this.world=l,this.gameObject=i,this.debugShowBody=l.defaults.debugShowStaticBody,this.debugBodyColor=l.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(i.x-h*i.originX,i.y-u*i.originY),this.width=h,this.height=u,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=a.ZERO,this.allowGravity=!1,this.gravity=a.ZERO,this.bounce=a.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=r.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(n,l){return n&&n!==this.gameObject&&(this.gameObject.body=null,n.body=this,this.gameObject=n),l&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var n=this.gameObject;return n.getTopLeft(this.position),this.width=n.displayWidth,this.height=n.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(n,l){return l===void 0&&(l=n),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(n,l),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(n,l,i){i===void 0&&(i=!0);var h=this.gameObject;if(!n&&h.frame&&(n=h.frame.realWidth),!l&&h.frame&&(l=h.frame.realHeight),this.world.staticTree.remove(this),this.width=n,this.height=l,this.halfWidth=Math.floor(n/2),this.halfHeight=Math.floor(l/2),i&&h.getCenter){var u=h.displayWidth/2,d=h.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u-this.halfWidth,d-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(n,l,i){return l===void 0&&(l=this.offset.x),i===void 0&&(i=this.offset.y),n>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=n,this.width=n*2,this.height=n*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(n,l){var i=this.gameObject;n===void 0&&(n=i.x),l===void 0&&(l=i.y),this.world.staticTree.remove(this),i.setPosition(n,l),i.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(n){return n.x=this.x,n.y=this.y,n.right=this.right,n.bottom=this.bottom,n},hitTest:function(n,l){return this.isCircle?e(this,n,l):o(this,n,l)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(n){var l=this.position,i=l.x+this.halfWidth,h=l.y+this.halfHeight;this.debugShowBody&&(n.lineStyle(n.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?n.strokeCircle(i,h,this.width/2):n.strokeRect(l.x,l.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(n){return n<=0&&(n=.1),this.mass=n,this},x:{get:function(){return this.position.x},set:function(n){this.world.staticTree.remove(this),this.position.x=n,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(n){this.world.staticTree.remove(this),this.position.y=n,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});m.exports=s},function(m,C,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var e=t(0),f=new e({initialize:function(o){this.pluginManager=o,this.game=o.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=new e,r=function(o,a,s,n){var l=s.tilemapLayer,i=l.cullPaddingX,h=l.cullPaddingY,u=l.tilemap.tileToWorldXY(o,a,f,n,l);return u.x>n.worldView.x+l.scaleX*s.tileWidth*(-i-.5)&&u.x<n.worldView.right+l.scaleX*s.tileWidth*(i-.5)&&u.y>n.worldView.y+l.scaleY*s.tileHeight*(-h-1)&&u.y<n.worldView.bottom+l.scaleY*s.tileHeight*(h-.5)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(r,o,a,s,n,l,i){for(var h=e(a,s,n,l,null,i),u=0;u<h.length;u++)h[u]&&h[u].index===r&&(h[u].index=o)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(139),r=t(76),o=new e,a=function(s,n){var l=s.tilemapLayer.tilemap,i=s.tilemapLayer,h=Math.floor(l.tileWidth*i.scaleX),u=Math.floor(l.tileHeight*i.scaleY),d=r(n.worldView.x-i.x,h,0,!0)-i.cullPaddingX,c=f(n.worldView.right-i.x,h,0,!0)+i.cullPaddingX,p=r(n.worldView.y-i.y,u,0,!0)-i.cullPaddingY,g=f(n.worldView.bottom-i.y,u,0,!0)+i.cullPaddingY;return o.setTo(d,p,c-d,g-p)};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(543),f=t(159),r=function(o,a,s,n){s===void 0&&(s=[]),n===void 0&&(n=0),s.length=0;var l=o.tilemapLayer,i=e(o,a);return(l.skipCull||l.scrollFactorX!==1||l.scrollFactorY!==1)&&(i.left=0,i.right=o.width,i.top=0,i.bottom=o.height),f(o,i,n,s),s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(546),f=t(159),r=function(o,a,s,n){s===void 0&&(s=[]),n===void 0&&(n=0),s.length=0;var l=o.tilemapLayer;if(!l.skipCull&&l.scrollFactorX===1&&l.scrollFactorY===1){var i=e(o,a);f(o,i,n,s)}return s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(139),f=t(76),r=function(o,a){var s=o.tilemapLayer.tilemap,n=o.tilemapLayer,l=Math.floor(s.tileWidth*n.scaleX),i=Math.floor(s.tileHeight*n.scaleY),h=o.hexSideLength,u=(i-h)/2+h,d=f(a.worldView.x-n.x,l,0,!0)-n.cullPaddingX,c=e(a.worldView.right-n.x,l,0,!0)+n.cullPaddingX,p=f(a.worldView.y-n.y,u,0,!0)-n.cullPaddingY,g=e(a.worldView.bottom-n.y,u,0,!0)+n.cullPaddingY;return{left:d,right:c,top:p,bottom:g}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(541),f=function(r,o,a,s){a===void 0&&(a=[]),s===void 0&&(s=0),a.length=0;var n=r.tilemapLayer,l=r.data,i=r.width,h=r.height,u=0,d=i,c=0,p=h;if(!n.skipCull){var g,x,y;if(s===0){for(x=c;x<p;x++)for(g=u;l[x]&&g<d;g++)if(e(g,x,r,o)){if(y=l[x][g],!y||y.index===-1||!y.visible||y.alpha===0)continue;a.push(y)}}else if(s===1){for(x=c;x<p;x++)for(g=d;l[x]&&g>=u;g--)if(e(g,x,r,o)){if(y=l[x][g],!y||y.index===-1||!y.visible||y.alpha===0)continue;a.push(y)}}else if(s===2){for(x=p;x>=c;x--)for(g=u;l[x]&&g<d;g++)if(e(g,x,r,o)){if(y=l[x][g],!y||y.index===-1||!y.visible||y.alpha===0)continue;a.push(y)}}else if(s===3){for(x=p;x>=c;x--)for(g=d;l[x]&&g>=u;g--)if(e(g,x,r,o)){if(y=l[x][g],!y||y.index===-1||!y.visible||y.alpha===0)continue;a.push(y)}}}return n.tilesDrawn=a.length,n.tilesTotal=i*h,a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(549),f=t(159),r=function(o,a,s,n){s===void 0&&(s=[]),n===void 0&&(n=0),s.length=0;var l=o.tilemapLayer;if(!l.skipCull&&l.scrollFactorX===1&&l.scrollFactorY===1){var i=e(o,a);f(o,i,n,s)}return s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(139),f=t(76),r=function(o,a){var s=o.tilemapLayer.tilemap,n=o.tilemapLayer,l=Math.floor(s.tileWidth*n.scaleX),i=Math.floor(s.tileHeight*n.scaleY),h=f(a.worldView.x-n.x,l,0,!0)-n.cullPaddingX,u=e(a.worldView.right-n.x,l,0,!0)+n.cullPaddingX,d=f(a.worldView.y-n.y,i/2,0,!0)-n.cullPaddingY,c=e(a.worldView.bottom-n.y,i/2,0,!0)+n.cullPaddingY;return{left:h,right:u,top:d,bottom:c}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s,n){a||(a=new e);var l=n.baseTileWidth,i=n.baseTileHeight,h=n.tilemapLayer,u=0,d=0;h&&(s||(s=h.scene.cameras.main),u=h.x+s.scrollX*(1-h.scrollFactorX),l*=h.scaleX,d=h.y+s.scrollY*(1-h.scrollFactorY),i*=h.scaleY);var c=n.hexSideLength,p=(i-c)/2+c,g=u+r*l+o%2*(l/2),x=d+o*p;return a.set(g,x)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s,n){a||(a=new e);var l=n.baseTileWidth,i=n.baseTileHeight,h=n.tilemapLayer,u=0,d=0;h&&(s||(s=h.scene.cameras.main),u=h.x+s.scrollX*(1-h.scrollFactorX),l*=h.scaleX,d=h.y+s.scrollY*(1-h.scrollFactorY),i*=h.scaleY);var c=u+(r-o)*(l/2),p=d+(r+o)*(i/2);return a.set(c,p)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s,n){a||(a=new e);var l=n.baseTileWidth,i=n.baseTileHeight,h=n.tilemapLayer,u=0,d=0;h&&(s||(s=h.scene.cameras.main),u=h.x+s.scrollX*(1-h.scrollFactorX),l*=h.scaleX,d=h.y+s.scrollY*(1-h.scrollFactorY),i*=h.scaleY);var c=u+r*l+o%2*(l/2),p=d+o*(i/2);return a.set(c,p)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(253),f=t(254),r=t(3),o=function(a,s,n,l,i){return n||(n=new r(0,0)),n.x=e(a,l,i),n.y=f(s,l,i),n};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=r.baseTileHeight,a=r.tilemapLayer,s=0;a&&(f===void 0&&(f=a.scene.cameras.main),s=a.y+f.scrollY*(1-a.scrollFactorY),o*=a.scaleY);var n=a.tilemap.hexSideLength,l=(o-n)/2+n;return s+e*l};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=r.baseTileHeight,a=r.tilemapLayer,s=0;return a&&(f===void 0&&(f=a.scene.cameras.main),s=a.y+f.scrollY*(1-a.scrollFactorY),o*=a.scaleY),s+e*(o/2)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s,n,l){s||(s=new e);var i=l.baseTileWidth,h=l.baseTileHeight,u=l.tilemapLayer;u&&(n||(n=u.scene.cameras.main),o=o-(u.y+n.scrollY*(1-u.scrollFactorY)),h*=u.scaleY,r=r-(u.x+n.scrollX*(1-u.scrollFactorX)),i*=u.scaleX);var d=l.hexSideLength,c=(h-d)/2+d,p=a?Math.floor(o/c):o/c,g=a?Math.floor((r-p%2*.5*i)/i):(r-p%2*.5*i)/i;return s.set(g,p)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s,n,l){s||(s=new e);var i=l.baseTileWidth,h=l.baseTileHeight,u=l.tilemapLayer;u&&(n||(n=u.scene.cameras.main),o=o-(u.y+n.scrollY*(1-u.scrollFactorY)),h*=u.scaleY,r=r-(u.x+n.scrollX*(1-u.scrollFactorX)),i*=u.scaleX);var d=a?Math.floor((r/(i/2)+o/(h/2))/2):(r/(i/2)+o/(h/2))/2,c=a?Math.floor((o/(h/2)-r/(i/2))/2):(o/(h/2)-r/(i/2))/2;return s.set(d,c)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s,n,l){s||(s=new e);var i=l.baseTileWidth,h=l.baseTileHeight,u=l.tilemapLayer;u&&(n||(n=u.scene.cameras.main),o=o-(u.y+n.scrollY*(1-u.scrollFactorY)),h*=u.scaleY,r=r-(u.x+n.scrollX*(1-u.scrollFactorX)),i*=u.scaleX);var d=a?Math.floor(o/(h/2)):o/(h/2),c=a?Math.floor((r+d%2*.5*i)/i):(r+d%2*.5*i)/i;return s.set(c,d)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(255),f=t(256),r=t(3),o=function(a,s,n,l,i,h){return n===void 0&&(n=!0),l||(l=new r(0,0)),l.x=e(a,n,i,h),l.y=f(s,n,i,h),l};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=o.baseTileHeight,s=o.tilemapLayer;s&&(r||(r=s.scene.cameras.main),e=e-(s.y+r.scrollY*(1-s.scrollFactorY)),a*=s.scaleY);var n=o.hexSideLength,l=(a-n)/2+n;return f?Math.floor(e/l):e/l};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=o.baseTileHeight,s=o.tilemapLayer;return s&&(r||(r=s.scene.cameras.main),e=e-(s.y+r.scrollY*(1-s.scrollFactorY)),a*=s.scaleY),f?Math.floor(e/(a/2)):e/(a/2)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(119),f=function(r,o,a){if(e(r,o,a)){var s=a.data[o][r];return s!==null&&s.index>-1}else return!1};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(85),f=t(119),r=t(252),o=function(a,s,n,l,i){if(n===void 0&&(n=!0),l===void 0&&(l=!0),!f(a,s,i))return null;var h=i.data[s][a];if(h)i.data[s][a]=n?null:new e(i,-1,a,s,i.tileWidth,i.tileHeight);else return null;return l&&h&&h.collides&&r(a,s,i),h};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(259),r=t(565),o=t(566),a=t(577),s=function(n,l,i,h,u,d){var c;switch(l){case e.ARRAY_2D:c=f(n,i,h,u,d);break;case e.CSV:c=r(n,i,h,u,d);break;case e.TILED_JSON:c=o(n,i,d);break;case e.WELTMEISTER:c=a(n,i,d);break;default:console.warn("Unrecognized tilemap data format: "+l),c=null}return c};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(259),r=function(o,a,s,n,l){var i=a.trim().split(`
`).map(function(u){return u.split(",")}),h=f(o,i,s,n,l);return h.format=e.CSV,h};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(567),f=t(568),r=t(29),o=t(40),a=t(258),s=t(121),n=t(569),l=t(570),i=t(573),h=t(575),u=function(d,c,p){var g=new s({width:c.width,height:c.height,name:d,tileWidth:c.tilewidth,tileHeight:c.tileheight,orientation:a(c.orientation),format:o.TILED_JSON,version:c.version,properties:c.properties,renderOrder:c.renderorder,infinite:c.infinite});g.orientation===r.HEXAGONAL&&(g.hexSideLength=c.hexsidelength),g.layers=i(c,p),g.images=n(c);var x=h(c);return g.tilesets=x.tilesets,g.imageCollections=x.imageCollections,g.objects=l(c),g.tiles=f(g),e(g),g};m.exports=u},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=function(r){for(var o,a,s,n,l,i=0;i<r.layers.length;i++){o=r.layers[i],n=null;for(var h=0;h<o.data.length;h++){l=o.data[h];for(var u=0;u<l.length;u++)a=l[u],!(a===null||a.index<0)&&(s=r.tiles[a.index][2],n=r.tilesets[s],a.width=n.tileWidth,a.height=n.tileHeight,n.tileProperties&&n.tileProperties[a.index-n.firstgid]&&(a.properties=e(a.properties,n.tileProperties[a.index-n.firstgid])))}}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),f=function(r){var o,a,s=[];for(o=0;o<r.imageCollections.length;o++)for(var n=r.imageCollections[o],l=n.images,i=0;i<l.length;i++){var h=l[i];a=new e(h.image,h.gid,n.imageWidth,n.imageHeight,0,0),a.updateTileData(n.imageWidth,n.imageHeight),r.tilesets.push(a)}for(o=0;o<r.tilesets.length;o++){a=r.tilesets[o];for(var u=a.tileMargin,d=a.tileMargin,c=0,p=0,g=0,x=a.firstgid;x<a.firstgid+a.total&&(s[x]=[u,d,o],u+=a.tileWidth+a.tileSpacing,c++,!(c===a.total||(p++,p===a.columns&&(u=a.tileMargin,d+=a.tileHeight+a.tileSpacing,p=0,g++,g===a.rows))));x++);}return s};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=t(161),r=function(o){for(var a=[],s=[],n=f(o);n.i<n.layers.length||s.length>0;){if(n.i>=n.layers.length){if(s.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=s.pop();continue}var l=n.layers[n.i];if(n.i++,l.type!=="imagelayer"){if(l.type==="group"){var i=f(o,l,n);s.push(n),n=i}continue}var h=e(l,"offsetx",0)+e(l,"startx",0),u=e(l,"offsety",0)+e(l,"starty",0);a.push({name:n.name+l.name,image:l.image,x:n.x+h+l.x,y:n.y+u+l.y,alpha:n.opacity*l.opacity,visible:n.visible&&l.visible,properties:e(l,"properties",{})})}return a};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=t(260),r=t(572),o=t(161),a=function(s){for(var n=[],l=[],i=o(s);i.i<i.layers.length||l.length>0;){if(i.i>=i.layers.length){if(l.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}i=l.pop();continue}var h=i.layers[i.i];if(i.i++,h.opacity*=i.opacity,h.visible=i.visible&&h.visible,h.type!=="objectgroup"){if(h.type==="group"){var u=o(s,h,i);l.push(i),i=u}continue}h.name=i.name+h.name;for(var d=i.x+e(h,"startx",0)+e(h,"offsetx",0),c=i.y+e(h,"starty",0)+e(h,"offsety",0),p=[],g=0;g<h.objects.length;g++){var x=f(h.objects[g],d,c);p.push(x)}var y=new r(h);y.objects=p,n.push(y)}return n};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(126),f=function(r,o){for(var a={},s=0;s<o.length;s++){var n=o[s];e(r,n)&&(a[n]=r[n])}return a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=new e({initialize:function(a){a===void 0&&(a={}),this.name=f(a,"name","object layer"),this.opacity=f(a,"opacity",1),this.properties=f(a,"properties",{}),this.propertyTypes=f(a,"propertytypes",{}),this.type=f(a,"type","objectgroup"),this.visible=f(a,"visible",!0),this.objects=f(a,"objects",[])}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(574),f=t(29),r=t(161),o=t(258),a=t(2),s=t(120),n=t(261),l=t(85),i=function(h,u){for(var d=a(h,"infinite",!1),c=[],p=[],g=r(h);g.i<g.layers.length||p.length>0;){if(g.i>=g.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}g=p.pop();continue}var x=g.layers[g.i];if(g.i++,x.type!=="tilelayer"){if(x.type==="group"){var y=r(h,x,g);p.push(g),g=y}continue}if(x.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+x.name+"'");continue}else if(x.encoding&&x.encoding==="base64"){if(x.chunks)for(var T=0;T<x.chunks.length;T++)x.chunks[T].data=e(x.chunks[T].data);x.data&&(x.data=e(x.data)),delete x.encoding}var E,w,A,b,R=[],L=0;if(d){var B=a(x,"startx",0)+x.x,D=a(x,"starty",0)+x.y;E=new s({name:g.name+x.name,x:g.x+a(x,"offsetx",0)+B*h.tilewidth,y:g.y+a(x,"offsety",0)+D*h.tileheight,width:x.width,height:x.height,tileWidth:h.tilewidth,tileHeight:h.tileheight,alpha:g.opacity*x.opacity,visible:g.visible&&x.visible,properties:a(x,"properties",[]),orientation:o(h.orientation)}),E.orientation===f.HEXAGONAL&&(E.hexSideLength=h.hexsidelength);for(var G=0;G<x.height;G++){R.push([null]);for(var X=0;X<x.width;X++)R[G][X]=null}for(G=0,J=x.chunks.length;G<J;G++)for(var H=x.chunks[G],K=H.x-B,$=H.y-D,N=0,I=0,z=H.data.length;I<z;I++){var U=L+K,W=N+$;w=n(H.data[I]),w.gid>0?(A=new l(E,w.gid,U,W,h.tilewidth,h.tileheight),A.rotation=w.rotation,A.flipX=w.flipped,R[W][U]=A):(b=u?null:new l(E,-1,U,W,h.tilewidth,h.tileheight),R[W][U]=b),L++,L===H.width&&(N++,L=0)}}else{E=new s({name:g.name+x.name,x:g.x+a(x,"offsetx",0)+x.x,y:g.y+a(x,"offsety",0)+x.y,width:x.width,height:x.height,tileWidth:h.tilewidth,tileHeight:h.tileheight,alpha:g.opacity*x.opacity,visible:g.visible&&x.visible,properties:a(x,"properties",[]),orientation:o(h.orientation)}),E.orientation===f.HEXAGONAL&&(E.hexSideLength=h.hexsidelength);for(var V=[],Z=0,J=x.data.length;Z<J;Z++)w=n(x.data[Z]),w.gid>0?(A=new l(E,w.gid,L,R.length,h.tilewidth,h.tileheight),A.rotation=w.rotation,A.flipX=w.flipped,V.push(A)):(b=u?null:new l(E,-1,L,R.length,h.tilewidth,h.tileheight),V.push(b)),L++,L===x.width&&(R.push(V),L=0,V=[])}E.data=R,c.push(E)}return c};m.exports=i},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=window.atob(e),r=f.length,o=new Array(r/4),a=0;a<r;a+=4)o[a/4]=(f.charCodeAt(a)|f.charCodeAt(a+1)<<8|f.charCodeAt(a+2)<<16|f.charCodeAt(a+3)<<24)>>>0;return o};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),f=t(576),r=t(260),o=t(1453),a=function(s){for(var n=[],l=[],i=null,h,u=0;u<s.tilesets.length;u++){var d=s.tilesets[u];if(d.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(d.image){var c=new e(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing);if(s.version>1){var p=void 0,g=void 0;if(Array.isArray(d.tiles)){p=p||{},g=g||{};for(var x=0;x<d.tiles.length;x++){var y=d.tiles[x];if(y.properties){var T={};y.properties.forEach(function(G){T[G.name]=G.value}),g[y.id]=T}if(y.objectgroup&&((p[y.id]||(p[y.id]={})).objectgroup=y.objectgroup,y.objectgroup.objects)){var E=y.objectgroup.objects.map(function(G){return r(G)});p[y.id].objectgroup.objects=E}y.animation&&((p[y.id]||(p[y.id]={})).animation=y.animation),y.type&&((p[y.id]||(p[y.id]={})).type=y.type)}}Array.isArray(d.wangsets)&&(p=p||{},g=g||{},o(d.wangsets,p)),p&&(c.tileData=p,c.tileProperties=g)}else if(d.tileproperties&&(c.tileProperties=d.tileproperties),d.tiles){c.tileData=d.tiles;for(h in c.tileData){var w=c.tileData[h].objectgroup;if(w&&w.objects){var A=w.objects.map(function(G){return r(G)});c.tileData[h].objectgroup.objects=A}}}c.updateTileData(d.imagewidth,d.imageheight),n.push(c)}else{var b=new f(d.name,d.firstgid,d.tilewidth,d.tileheight,d.margin,d.spacing,d.properties),R=0;for(x=0;x<d.tiles.length;x++){y=d.tiles[x];var L=y.image,B=parseInt(y.id,10),D=d.firstgid+B;b.addImage(D,L),R=Math.max(B,R)}b.maxId=R,l.push(b)}i&&(i.lastgid=d.firstgid-1),i=d}return{tilesets:n,imageCollections:l}};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o,a,s,n,l,i,h){(s===void 0||s<=0)&&(s=32),(n===void 0||n<=0)&&(n=32),l===void 0&&(l=0),i===void 0&&(i=0),this.name=o,this.firstgid=a|0,this.imageWidth=s|0,this.imageHeight=n|0,this.imageMargin=l|0,this.imageSpacing=i|0,this.properties=h||{},this.images=[],this.total=0},containsImageIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},addImage:function(r,o){return this.images.push({gid:r,image:o}),this.total++,this}});m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(40),f=t(121),r=t(578),o=t(579),a=function(s,n,l){if(n.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+s),null;for(var i=0,h=0,u=0;u<n.layer.length;u++)n.layer[u].width>i&&(i=n.layer[u].width),n.layer[u].height>h&&(h=n.layer[u].height);var d=new f({width:i,height:h,name:s,tileWidth:n.layer[0].tilesize,tileHeight:n.layer[0].tilesize,format:e.WELTMEISTER});return d.layers=r(n,l),d.tilesets=o(n),d};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(120),f=t(85),r=function(o,a){for(var s=[],n=0;n<o.layer.length;n++){for(var l=o.layer[n],i=new e({name:l.name,width:l.width,height:l.height,tileWidth:l.tilesize,tileHeight:l.tilesize,visible:l.visible===1}),h=[],u=[],d=0;d<l.data.length;d++){for(var c=0;c<l.data[d].length;c++){var p=l.data[d][c]-1,g;p>-1?g=new f(i,p,c,d,l.tilesize,l.tilesize):g=a?null:new f(i,-1,c,d,l.tilesize,l.tilesize),h.push(g)}u.push(h),h=[]}i.data=u,s.push(i)}return s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(122),f=function(r){for(var o=[],a=[],s=0;s<r.layer.length;s++){var n=r.layer[s],l=n.tilesetName;l!==""&&a.indexOf(l)===-1&&(a.push(l),o.push(new e(l,0,n.tilesize,n.tilesize,0,0)))}return o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(36),r=t(40),o=t(2),a=t(120),s=t(29),n=t(362),l=t(74),i=t(73),h=t(85),u=t(251),d=t(581),c=t(122),p=new e({initialize:function(x,y){this.scene=x,this.tileWidth=y.tileWidth,this.tileHeight=y.tileHeight,this.width=y.width,this.height=y.height,this.orientation=y.orientation,this.renderOrder=y.renderOrder,this.format=y.format,this.version=y.version,this.properties=y.properties,this.widthInPixels=y.widthInPixels,this.heightInPixels=y.heightInPixels,this.imageCollections=y.imageCollections,this.images=y.images,this.layers=y.layers,this.tilesets=y.tilesets,this.objects=y.objects,this.currentLayerIndex=0,this.hexSideLength=y.hexSideLength;var T=this.orientation;this._convert={WorldToTileXY:u.GetWorldToTileXYFunction(T),WorldToTileX:u.GetWorldToTileXFunction(T),WorldToTileY:u.GetWorldToTileYFunction(T),TileToWorldXY:u.GetTileToWorldXYFunction(T),TileToWorldX:u.GetTileToWorldXFunction(T),TileToWorldY:u.GetTileToWorldYFunction(T)}},createBlankDynamicLayer:function(g,x,y,T,E,w,A,b){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(g,x,y,T,E,w,A,b)},createDynamicLayer:function(g,x,y,T){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(g,x,y,T)},createStaticLayer:function(g,x,y,T){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(g,x,y,T)},setRenderOrder:function(g){var x=["right-down","left-down","right-up","left-up"];return typeof g=="number"&&(g=x[g]),x.indexOf(g)>-1&&(this.renderOrder=g),this},addTilesetImage:function(g,x,y,T,E,w,A){if(g===void 0)return null;if(x==null&&(x=g),!this.scene.sys.textures.exists(x))return console.warn("Invalid Tileset Image: "+x),null;var b=this.scene.sys.textures.get(x),R=this.getTilesetIndex(g);if(R===null&&this.format===r.TILED_JSON)return console.warn("No data found for Tileset: "+g),null;var L=this.tilesets[R];return L?(L.setTileSize(y,T),L.setSpacing(E,w),L.setImage(b),L):(y===void 0&&(y=this.tileWidth),T===void 0&&(T=this.tileHeight),E===void 0&&(E=0),w===void 0&&(w=0),A===void 0&&(A=0),L=new c(g,A,y,T,E,w),L.setImage(b),this.tilesets.push(L),L)},copy:function(g,x,y,T,E,w,A,b){return b=this.getLayer(b),b!==null?(u.Copy(g,x,y,T,E,w,A,b),this):null},createBlankLayer:function(g,x,y,T,E,w,A,b){y===void 0&&(y=0),T===void 0&&(T=0),E===void 0&&(E=this.width),w===void 0&&(w=this.height),A===void 0&&(A=this.tileWidth),b===void 0&&(b=this.tileHeight);var R=this.getLayerIndex(g);if(R!==null)return console.warn("Invalid Tilemap Layer ID: "+g),null;for(var L=new a({name:g,tileWidth:A,tileHeight:b,width:E,height:w,orientation:this.orientation}),B,D=0;D<w;D++){B=[];for(var G=0;G<E;G++)B.push(new h(L,-1,G,D,A,b,this.tileWidth,this.tileHeight));L.data.push(B)}this.layers.push(L),this.currentLayerIndex=this.layers.length-1;var X=new d(this.scene,this,this.currentLayerIndex,x,y,T);return X.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(X),X},createLayer:function(g,x,y,T){var E=this.getLayerIndex(g);if(E===null)return console.warn("Invalid Tilemap Layer ID: "+g),typeof g=="string"&&console.warn(`Valid tilelayer names:
	`+this.getTileLayerNames().join(`,
	`)),null;var w=this.layers[E];if(w.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+g),null;this.currentLayerIndex=E,y===void 0&&(y=w.x),T===void 0&&(T=w.y);var A=new d(this.scene,this,E,x,y,T);return A.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(A),A},createFromObjects:function(g,x){var y=[],T=this.getObjectLayer(g);if(!T)return console.warn("createFromObjects: Invalid objectLayerName given: "+g),y;Array.isArray(x)||(x=[x]);for(var E=T.objects,w=0;w<x.length;w++){for(var A=x[w],b=o(A,"id",null),R=o(A,"gid",null),L=o(A,"name",null),B,D=[],G=0;G<E.length;G++)B=E[G],(b===null&&R===null&&L===null||b!==null&&B.id===b||R!==null&&B.gid===R||L!==null&&B.name===L)&&D.push(B);for(var X=o(A,"classType",i),H=o(A,"scene",this.scene),K=o(A,"container",null),$=o(A,"key",null),N=o(A,"frame",null),I=0;I<D.length;I++){B=D[I];var z=new X(H);z.setName(B.name),z.setPosition(B.x,B.y),z.setTexture($,N),B.width&&(z.displayWidth=B.width),B.height&&(z.displayHeight=B.height);var U={x:z.originX*B.width,y:(z.originY-1)*B.height};if(B.rotation){var W=f(B.rotation);n(U,W),z.rotation=W}if(z.x+=U.x,z.y+=U.y,(B.flippedHorizontal!==void 0||B.flippedVertical!==void 0)&&z.setFlip(B.flippedHorizontal,B.flippedVertical),B.visible||(z.visible=!1),Array.isArray(B.properties))B.properties.forEach(function(Z){var J=Z.name;z[J]!==void 0?z[J]=Z.value:z.setData(J,Z.value)});else for(var V in B.properties)z[V]!==void 0?z[V]=B.properties[V]:z.setData(V,B.properties[V]);K?K.add(z):H.add.existing(z),y.push(z)}}return y},createFromTiles:function(g,x,y,T,E,w){return w=this.getLayer(w),w===null?null:u.CreateFromTiles(g,x,y,T,E,w)},fill:function(g,x,y,T,E,w,A){return w===void 0&&(w=!0),A=this.getLayer(A),A===null?null:(u.Fill(g,x,y,T,E,w,A),this)},filterObjects:function(g,x,y){if(typeof g=="string"){var T=g;if(g=this.getObjectLayer(g),!g)return console.warn("No object layer found with the name: "+T),null}return g.objects.filter(x,y)},filterTiles:function(g,x,y,T,E,w,A,b){return b=this.getLayer(b),b===null?null:u.FilterTiles(g,x,y,T,E,w,A,b)},findByIndex:function(g,x,y,T){return T=this.getLayer(T),T===null?null:u.FindByIndex(g,x,y,T)},findObject:function(g,x,y){if(typeof g=="string"){var T=g;if(g=this.getObjectLayer(g),!g)return console.warn("No object layer found with the name: "+T),null}return g.objects.find(x,y)||null},findTile:function(g,x,y,T,E,w,A,b){return b=this.getLayer(b),b===null?null:u.FindTile(g,x,y,T,E,w,A,b)},forEachTile:function(g,x,y,T,E,w,A,b){return b=this.getLayer(b),b===null?null:(u.ForEachTile(g,x,y,T,E,w,A,b),this)},getImageIndex:function(g){return this.getIndex(this.images,g)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(g){return g.name})},getIndex:function(g,x){for(var y=0;y<g.length;y++)if(g[y].name===x)return y;return null},getLayer:function(g){var x=this.getLayerIndex(g);return x!==null?this.layers[x]:null},getObjectLayer:function(g){var x=this.getIndex(this.objects,g);return x!==null?this.objects[x]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(g){return g.name})},getLayerIndex:function(g){return g===void 0?this.currentLayerIndex:typeof g=="string"?this.getLayerIndexByName(g):typeof g=="number"&&g<this.layers.length?g:g instanceof d?g.layerIndex:null},getLayerIndexByName:function(g){return this.getIndex(this.layers,g)},getTileAt:function(g,x,y,T){return T=this.getLayer(T),T===null?null:u.GetTileAt(g,x,y,T)},getTileAtWorldXY:function(g,x,y,T,E){return E=this.getLayer(E),E===null?null:u.GetTileAtWorldXY(g,x,y,T,E)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(g){return g.name})},getTilesWithin:function(g,x,y,T,E,w){return w=this.getLayer(w),w===null?null:u.GetTilesWithin(g,x,y,T,E,w)},getTilesWithinShape:function(g,x,y,T){return T=this.getLayer(T),T===null?null:u.GetTilesWithinShape(g,x,y,T)},getTilesWithinWorldXY:function(g,x,y,T,E,w,A){return A=this.getLayer(A),A===null?null:u.GetTilesWithinWorldXY(g,x,y,T,E,w,A)},getTileset:function(g){var x=this.getIndex(this.tilesets,g);return x!==null?this.tilesets[x]:null},getTilesetIndex:function(g){return this.getIndex(this.tilesets,g)},hasTileAt:function(g,x,y){return y=this.getLayer(y),y===null?null:u.HasTileAt(g,x,y)},hasTileAtWorldXY:function(g,x,y,T){return T=this.getLayer(T),T===null?null:u.HasTileAtWorldXY(g,x,y,T)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(g){this.setLayer(g)}},putTileAt:function(g,x,y,T,E){return T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:u.PutTileAt(g,x,y,T,E)},putTileAtWorldXY:function(g,x,y,T,E,w){return T===void 0&&(T=!0),w=this.getLayer(w),w===null?null:u.PutTileAtWorldXY(g,x,y,T,E,w)},putTilesAt:function(g,x,y,T,E){return T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:(u.PutTilesAt(g,x,y,T,E),this)},randomize:function(g,x,y,T,E,w){return w=this.getLayer(w),w===null?null:(u.Randomize(g,x,y,T,E,w),this)},calculateFacesAt:function(g,x,y){return y=this.getLayer(y),y===null?null:(u.CalculateFacesAt(g,x,y),this)},calculateFacesWithin:function(g,x,y,T,E){return E=this.getLayer(E),E===null?null:(u.CalculateFacesWithin(g,x,y,T,E),this)},removeLayer:function(g){var x=this.getLayerIndex(g);if(x!==null){l(this.layers,x);for(var y=x;y<this.layers.length;y++)this.layers[y].tilemapLayer&&this.layers[y].tilemapLayer.layerIndex--;return this.currentLayerIndex===x&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(g){var x=this.getLayerIndex(g);return x!==null?(g=this.layers[x],g.destroy(),l(this.layers,x),this.currentLayerIndex===x&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var g=this.layers,x=0;x<g.length;x++)g[x].tilemapLayer&&g[x].tilemapLayer.destroy(!1);return g.length=0,this.currentLayerIndex=0,this},removeTile:function(g,x,y){x===void 0&&(x=-1),y===void 0&&(y=!0);var T=[];Array.isArray(g)||(g=[g]);for(var E=0;E<g.length;E++){var w=g[E];T.push(this.removeTileAt(w.x,w.y,!0,y,w.tilemapLayer)),x>-1&&this.putTileAt(x,w.x,w.y,y,w.tilemapLayer)}return T},removeTileAt:function(g,x,y,T,E){return y===void 0&&(y=!0),T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:u.RemoveTileAt(g,x,y,T,E)},removeTileAtWorldXY:function(g,x,y,T,E,w){return y===void 0&&(y=!0),T===void 0&&(T=!0),w=this.getLayer(w),w===null?null:u.RemoveTileAtWorldXY(g,x,y,T,E,w)},renderDebug:function(g,x,y){return y=this.getLayer(y),y===null?null:(this.orientation===s.ORTHOGONAL&&u.RenderDebug(g,x,y),this)},renderDebugFull:function(g,x){for(var y=this.layers,T=0;T<y.length;T++)u.RenderDebug(g,x,y[T]);return this},replaceByIndex:function(g,x,y,T,E,w,A){return A=this.getLayer(A),A===null?null:(u.ReplaceByIndex(g,x,y,T,E,w,A),this)},setCollision:function(g,x,y,T,E){return x===void 0&&(x=!0),y===void 0&&(y=!0),E===void 0&&(E=!0),T=this.getLayer(T),T===null?null:(u.SetCollision(g,x,y,T,E),this)},setCollisionBetween:function(g,x,y,T,E){return y===void 0&&(y=!0),T===void 0&&(T=!0),E=this.getLayer(E),E===null?null:(u.SetCollisionBetween(g,x,y,T,E),this)},setCollisionByProperty:function(g,x,y,T){return x===void 0&&(x=!0),y===void 0&&(y=!0),T=this.getLayer(T),T===null?null:(u.SetCollisionByProperty(g,x,y,T),this)},setCollisionByExclusion:function(g,x,y,T){return x===void 0&&(x=!0),y===void 0&&(y=!0),T=this.getLayer(T),T===null?null:(u.SetCollisionByExclusion(g,x,y,T),this)},setCollisionFromCollisionGroup:function(g,x,y){return g===void 0&&(g=!0),x===void 0&&(x=!0),y=this.getLayer(y),y===null?null:(u.SetCollisionFromCollisionGroup(g,x,y),this)},setTileIndexCallback:function(g,x,y,T){return T=this.getLayer(T),T===null?null:(u.SetTileIndexCallback(g,x,y,T),this)},setTileLocationCallback:function(g,x,y,T,E,w,A){return A=this.getLayer(A),A===null?null:(u.SetTileLocationCallback(g,x,y,T,E,w,A),this)},setLayer:function(g){var x=this.getLayerIndex(g);return x!==null&&(this.currentLayerIndex=x),this},setBaseTileSize:function(g,x){this.tileWidth=g,this.tileHeight=x,this.widthInPixels=this.width*g,this.heightInPixels=this.height*x;for(var y=0;y<this.layers.length;y++){this.layers[y].baseTileWidth=g,this.layers[y].baseTileHeight=x;for(var T=this.layers[y].data,E=this.layers[y].width,w=this.layers[y].height,A=0;A<w;A++)for(var b=0;b<E;b++){var R=T[A][b];R!==null&&R.setSize(void 0,void 0,g,x)}}return this},setLayerTileSize:function(g,x,y){if(y=this.getLayer(y),y===null)return this;y.tileWidth=g,y.tileHeight=x;for(var T=y.data,E=y.width,w=y.height,A=0;A<w;A++)for(var b=0;b<E;b++){var R=T[A][b];R!==null&&R.setSize(g,x)}return this},shuffle:function(g,x,y,T,E){return E=this.getLayer(E),E===null?null:(u.Shuffle(g,x,y,T,E),this)},swapByIndex:function(g,x,y,T,E,w,A){return A=this.getLayer(A),A===null?null:(u.SwapByIndex(g,x,y,T,E,w,A),this)},tileToWorldX:function(g,x,y){return y=this.getLayer(y),y===null?null:this._convert.TileToWorldX(g,x,y)},tileToWorldY:function(g,x,y){return y=this.getLayer(y),y===null?null:this._convert.TileToWorldY(g,x,y)},tileToWorldXY:function(g,x,y,T,E){return E=this.getLayer(E),E===null?null:this._convert.TileToWorldXY(g,x,y,T,E)},weightedRandomize:function(g,x,y,T,E,w){return w=this.getLayer(w),w===null?null:(u.WeightedRandomize(x,y,T,E,g,w),this)},worldToTileX:function(g,x,y,T){return T=this.getLayer(T),T===null?null:this._convert.WorldToTileX(g,x,y,T)},worldToTileY:function(g,x,y,T){return T=this.getLayer(T),T===null?null:this._convert.WorldToTileY(g,x,y,T)},worldToTileXY:function(g,x,y,T,E,w){return w=this.getLayer(w),w===null?null:this._convert.WorldToTileXY(g,x,y,T,E,w)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});m.exports=p},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(11),r=t(15),o=t(251),a=t(1456),s=new e({Extends:r,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Depth,f.Flip,f.GetBounds,f.Origin,f.Pipeline,f.Transform,f.Visible,f.ScrollFactor,a],initialize:function(l,i,h,u,d,c){r.call(this,l,"TilemapLayer"),this.isTilemap=!0,this.tilemap=i,this.layerIndex=h,this.layer=i.layers[h],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=o.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(u),this.setAlpha(this.layer.alpha),this.setPosition(d,c),this.setOrigin(),this.setSize(i.tileWidth*this.layer.width,i.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(n){var l=[],i=[],h=this.tilemap;Array.isArray(n)||(n=[n]);for(var u=0;u<n.length;u++){var d=n[u];if(typeof d=="string"&&(d=h.getTileset(d)),d){i.push(d);for(var c=d.firstgid,p=0;p<d.total;p++)l[c+p]=d}}this.gidMap=l,this.tileset=i},setRenderOrder:function(n){var l=["right-down","left-down","right-up","left-up"];return typeof n=="string"&&(n=l.indexOf(n)),n>=0&&n<4&&(this._renderOrder=n),this},calculateFacesAt:function(n,l){return o.CalculateFacesAt(n,l,this.layer),this},calculateFacesWithin:function(n,l,i,h){return o.CalculateFacesWithin(n,l,i,h,this.layer),this},createFromTiles:function(n,l,i,h,u){return o.CreateFromTiles(n,l,i,h,u,this.layer)},cull:function(n){return this.cullCallback(this.layer,n,this.culledTiles,this._renderOrder)},copy:function(n,l,i,h,u,d,c){return o.Copy(n,l,i,h,u,d,c,this.layer),this},fill:function(n,l,i,h,u,d){return o.Fill(n,l,i,h,u,d,this.layer),this},filterTiles:function(n,l,i,h,u,d,c){return o.FilterTiles(n,l,i,h,u,d,c,this.layer)},findByIndex:function(n,l,i){return o.FindByIndex(n,l,i,this.layer)},findTile:function(n,l,i,h,u,d,c){return o.FindTile(n,l,i,h,u,d,c,this.layer)},forEachTile:function(n,l,i,h,u,d,c){return o.ForEachTile(n,l,i,h,u,d,c,this.layer),this},getTileAt:function(n,l,i){return o.GetTileAt(n,l,i,this.layer)},getTileAtWorldXY:function(n,l,i,h){return o.GetTileAtWorldXY(n,l,i,h,this.layer)},getTilesWithin:function(n,l,i,h,u){return o.GetTilesWithin(n,l,i,h,u,this.layer)},getTilesWithinShape:function(n,l,i){return o.GetTilesWithinShape(n,l,i,this.layer)},getTilesWithinWorldXY:function(n,l,i,h,u,d){return o.GetTilesWithinWorldXY(n,l,i,h,u,d,this.layer)},hasTileAt:function(n,l){return o.HasTileAt(n,l,this.layer)},hasTileAtWorldXY:function(n,l,i){return o.HasTileAtWorldXY(n,l,i,this.layer)},putTileAt:function(n,l,i,h){return o.PutTileAt(n,l,i,h,this.layer)},putTileAtWorldXY:function(n,l,i,h,u){return o.PutTileAtWorldXY(n,l,i,h,u,this.layer)},putTilesAt:function(n,l,i,h){return o.PutTilesAt(n,l,i,h,this.layer),this},randomize:function(n,l,i,h,u){return o.Randomize(n,l,i,h,u,this.layer),this},removeTileAt:function(n,l,i,h){return o.RemoveTileAt(n,l,i,h,this.layer)},removeTileAtWorldXY:function(n,l,i,h,u){return o.RemoveTileAtWorldXY(n,l,i,h,u,this.layer)},renderDebug:function(n,l){return o.RenderDebug(n,l,this.layer),this},replaceByIndex:function(n,l,i,h,u,d){return o.ReplaceByIndex(n,l,i,h,u,d,this.layer),this},setSkipCull:function(n){return n===void 0&&(n=!0),this.skipCull=n,this},setCullPadding:function(n,l){return n===void 0&&(n=1),l===void 0&&(l=1),this.cullPaddingX=n,this.cullPaddingY=l,this},setCollision:function(n,l,i,h){return o.SetCollision(n,l,i,this.layer,h),this},setCollisionBetween:function(n,l,i,h){return o.SetCollisionBetween(n,l,i,h,this.layer),this},setCollisionByProperty:function(n,l,i){return o.SetCollisionByProperty(n,l,i,this.layer),this},setCollisionByExclusion:function(n,l,i){return o.SetCollisionByExclusion(n,l,i,this.layer),this},setCollisionFromCollisionGroup:function(n,l){return o.SetCollisionFromCollisionGroup(n,l,this.layer),this},setTileIndexCallback:function(n,l,i){return o.SetTileIndexCallback(n,l,i,this.layer),this},setTileLocationCallback:function(n,l,i,h,u,d){return o.SetTileLocationCallback(n,l,i,h,u,d,this.layer),this},shuffle:function(n,l,i,h){return o.Shuffle(n,l,i,h,this.layer),this},swapByIndex:function(n,l,i,h,u,d){return o.SwapByIndex(n,l,i,h,u,d,this.layer),this},tileToWorldX:function(n,l){return this.tilemap.tileToWorldX(n,l,this)},tileToWorldY:function(n,l){return this.tilemap.tileToWorldY(n,l,this)},tileToWorldXY:function(n,l,i,h){return this.tilemap.tileToWorldXY(n,l,i,h,this)},weightedRandomize:function(n,l,i,h,u){return o.WeightedRandomize(l,i,h,u,n,this.layer),this},worldToTileX:function(n,l,i){return this.tilemap.worldToTileX(n,l,i,this)},worldToTileY:function(n,l,i){return this.tilemap.worldToTileY(n,l,i,this)},worldToTileXY:function(n,l,i,h,u){return this.tilemap.worldToTileXY(n,l,i,h,u,this)},destroy:function(n){n===void 0&&(n=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),n&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(2),r=new e({initialize:function(a){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(a)},reset:function(o){return this.delay=f(o,"delay",0),this.repeat=f(o,"repeat",0),this.loop=f(o,"loop",!1),this.callback=f(o,"callback",void 0),this.callbackScope=f(o,"callbackScope",this.callback),this.args=f(o,"args",[]),this.timeScale=f(o,"timeScale",1),this.startAt=f(o,"startAt",0),this.paused=f(o,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var o=this.delay+this.delay*this.repeat,a=this.elapsed+this.delay*(this.repeat-this.repeatCount);return a/o}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(o){o===void 0&&(o=!1),this.elapsed=this.delay,this.hasDispatched=!o,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1465),f=function(r){var o,a=[];if(r.hasOwnProperty("props"))for(o in r.props)o.substr(0,1)!=="_"&&a.push({key:o,value:r.props[o]});else for(o in r)e.indexOf(o)===-1&&o.substr(0,1)!=="_"&&a.push({key:o,value:r[o]});return a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=function(r){var o=e(r,"tweens",null);return o===null?[]:(typeof o=="function"&&(o=o.call()),Array.isArray(o)||(o=[o]),o)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(265),f=t(13),r=t(99),o=t(80),a=t(162),s=t(6),n=t(264),l=t(266),i=t(268),h=function(u,d,c){c===void 0&&(c=e);var p=s(d,"from",0),g=s(d,"to",1),x=[{value:p}],y=a(d,"delay",c.delay),T=a(d,"duration",c.duration),E=s(d,"easeParams",c.easeParams),w=o(s(d,"ease",c.ease),E),A=a(d,"hold",c.hold),b=a(d,"repeat",c.repeat),R=a(d,"repeatDelay",c.repeatDelay),L=r(d,"yoyo",c.yoyo),B=[],D=n("value",g),G=i(x[0],0,"value",D.getEnd,D.getStart,D.getActive,w,y,T,L,A,b,R,!1,!1);G.start=p,G.current=p,G.to=g,B.push(G);var X=new l(u,B,x);X.offset=f(d,"offset",null),X.completeDelay=f(d,"completeDelay",0),X.loop=Math.round(f(d,"loop",0)),X.loopDelay=Math.round(f(d,"loopDelay",0)),X.paused=r(d,"paused",!1),X.useFrames=r(d,"useFrames",!1);for(var H=s(d,"callbackScope",X),K=[X,null],$=l.TYPES,N=0;N<$.length;N++){var I=$[N],z=s(d,I,!1);if(z){var U=s(d,I+"Scope",H),W=s(d,I+"Params",[]);X.setCallback(I,z,K.concat(W),U)}}return X};m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(80),f=t(6),r=t(14),o=function(a,s){s===void 0&&(s={});var n,l=f(s,"start",0),i=f(s,"ease",null),h=f(s,"grid",null),u=f(s,"from",0),d=u==="first",c=u==="center",p=u==="last",g=typeof u=="number",x=Array.isArray(a),y=parseFloat(x?a[0]:a),T=x?parseFloat(a[1]):0,E=Math.max(y,T);if(x&&(l+=y),h){var w=h[0],A=h[1],b=0,R=0,L=0,B=0,D=[];p?(b=w-1,R=A-1):g?(b=u%w,R=Math.floor(u/w)):c&&(b=(w-1)/2,R=(A-1)/2);for(var G=r.MIN_SAFE_INTEGER,X=0;X<A;X++){D[X]=[];for(var H=0;H<w;H++){L=b-H,B=R-X;var K=Math.sqrt(L*L+B*B);K>G&&(G=K),D[X][H]=K}}}var $=i?e(i):null;return h?n=function(N,I,z,U){var W=0,V=U%w,Z=Math.floor(U/w);V>=0&&V<w&&Z>=0&&Z<A&&(W=D[Z][V]);var J;if(x){var tt=T-y;$?J=W/G*tt*$(W/G):J=W/G*tt}else $?J=W*y*$(W/G):J=W*y;return J+l}:n=function(N,I,z,U,W){W--;var V;d?V=U:c?V=Math.abs(W/2-U):p?V=W-U:g&&(V=Math.abs(u-U));var Z;if(x){var J;c?J=(T-y)/W*(V*2):J=(T-y)/W*V,$?Z=J*$(V/W):Z=J}else $?Z=W*E*$(V/W):Z=V*y;return Z+l},n};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=t(265),r=t(13),o=t(99),a=t(80),s=t(162),n=t(263),l=t(584),i=t(6),h=t(588),u=t(163),d=function(c,p){var g=new h(c);g.completeDelay=r(p,"completeDelay",0),g.loop=Math.round(r(p,"loop",0)),g.loopDelay=Math.round(r(p,"loopDelay",0)),g.paused=o(p,"paused",!1),g.useFrames=o(p,"useFrames",!1);var x=i(p,"callbackScope",g),y=[g],T=i(p,"onStart",!1);if(T){var E=i(p,"onStartScope",x),w=i(p,"onStartParams",[]);g.setCallback("onStart",T,y.concat(w),E)}var A=i(p,"onUpdate",!1);if(A){var b=i(p,"onUpdateScope",x),R=i(p,"onUpdateParams",[]);g.setCallback("onUpdate",A,y.concat(R),b)}var L=i(p,"onLoop",!1);if(L){var B=i(p,"onLoopScope",x),D=i(p,"onLoopParams",[]);g.setCallback("onLoop",L,y.concat(D),B)}var G=i(p,"onYoyo",!1);if(G){var X=i(p,"onYoyoScope",x),H=i(p,"onYoyoParams",[]);g.setCallback("onYoyo",G,y.concat(null,H),X)}var K=i(p,"onComplete",!1);if(K){var $=i(p,"onCompleteScope",x),N=i(p,"onCompleteParams",[]);g.setCallback("onComplete",K,y.concat(N),$)}var I=l(p);if(I.length===0)return g.paused=!0,g;var z=e(f);z.targets=n(p);var U=r(p,"totalDuration",0);U>0?z.duration=Math.floor(U/I.length):z.duration=s(p,"duration",z.duration),z.delay=s(p,"delay",z.delay),z.easeParams=i(p,"easeParams",z.easeParams),z.ease=a(i(p,"ease",z.ease),z.easeParams),z.hold=s(p,"hold",z.hold),z.repeat=s(p,"repeat",z.repeat),z.repeatDelay=s(p,"repeatDelay",z.repeatDelay),z.yoyo=o(p,"yoyo",z.yoyo),z.flipX=o(p,"flipX",z.flipX),z.flipY=o(p,"flipY",z.flipY);for(var W=0;W<I.length;W++)g.queue(u(g,I[W],z));return g};m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),r=t(267),o=t(163),a=t(100),s=new e({Extends:f,initialize:function(l){f.call(this),this.manager=l,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING_ADD,this._pausedState=a.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(n,l){this.emit(n,this),l&&l.func.apply(l.scope,l.params)},setTimeScale:function(n){return this.timeScale=n,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},add:function(n){return this.queue(o(this,n))},queue:function(n){return this.isPlaying()||(n.parent=this,n.parentIsTimeline=!0,this.data.push(n),this.totalData=this.data.length),this},hasOffset:function(n){return n.offset!==null},isOffsetAbsolute:function(n){return typeof n=="number"},isOffsetRelative:function(n){var l=typeof n;if(l==="string"){var i=n[0];if(i==="-"||i==="+")return!0}return!1},getRelativeOffset:function(n,l){var i=n[0],h=parseFloat(n.substr(2)),u=l;switch(i){case"+":u+=h;break;case"-":u-=h;break}return Math.max(0,u)},calcDuration:function(){for(var n=0,l=0,i=0,h=0;h<this.totalData;h++){var u=this.data[h];u.init(),this.hasOffset(u)?this.isOffsetAbsolute(u.offset)?(u.calculatedOffset=u.offset,u.offset===0&&(i=0)):this.isOffsetRelative(u.offset)&&(u.calculatedOffset=this.getRelativeOffset(u.offset,n)):u.calculatedOffset=i,n=u.totalDuration+u.calculatedOffset,l+=u.totalDuration,i+=u.totalDuration}this.duration=l,this.loopCounter=this.loop===-1?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,this.paused?(this.state=a.PAUSED,!1):!0},resetTweens:function(n){for(var l=0;l<this.totalData;l++){var i=this.data[l];i.play(n)}},setCallback:function(n,l,i,h){return s.TYPES.indexOf(n)!==-1&&(this.callbacks[n]={func:l,scope:h,params:i}),this},makeActive:function(n){return this.manager.makeActive(n)},play:function(){if(this.state!==a.ACTIVE){if(this.paused){this.paused=!1,this.manager.makeActive(this);return}else this.resetTweens(!1),this.state=a.ACTIVE;this.dispatchTimelineEvent(r.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(n,l){if(this.state!==a.PAUSED){switch(this.useFrames&&(l=1*this.manager.timeScale),l*=this.timeScale,this.elapsed+=l,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=l,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:for(var i=this.totalData,h=0;h<this.totalData;h++){var u=this.data[h];u.update(n,l)&&i--}this.dispatchTimelineEvent(r.TIMELINE_UPDATE,this.callbacks.onUpdate),i===0&&this.nextState();break;case a.LOOP_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTimelineEvent(r.TIMELINE_LOOP,this.callbacks.onLoop));break;case a.COMPLETE_DELAY:this.countdown-=l,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(r.TIMELINE_COMPLETE,this.callbacks.onComplete));break}return this.state===a.PENDING_REMOVE}},stop:function(){this.state=a.PENDING_REMOVE},pause:function(){if(this.state!==a.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this.emit(r.TIMELINE_PAUSE,this),this},resume:function(){return this.state===a.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(r.TIMELINE_RESUME,this)),this},hasTarget:function(n){for(var l=0;l<this.data.length;l++)if(this.data[l].hasTarget(n))return!0;return!1},destroy:function(){for(var n=0;n<this.data.length;n++)this.data[n].stop()}});s.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],m.exports=s},function(m,C,t){/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),r=t(32),o=t(2),a=t(64),s={parseBody:function(n,l,i,h){h===void 0&&(h={});for(var u=o(i,"fixtures",[]),d=[],c=0;c<u.length;c++)for(var p=this.parseFixture(u[c]),g=0;g<p.length;g++)d.push(p[g]);var x=r.clone(i,!0);r.extend(x,h,!0),delete x.fixtures,delete x.type;var y=f.create(x);return f.setParts(y,d),f.setPosition(y,{x:n,y:l}),y},parseFixture:function(n){var l=r.extend({},!1,n);delete l.circle,delete l.vertices;var i;if(n.circle){var h=o(n.circle,"x"),u=o(n.circle,"y"),d=o(n.circle,"radius");i=[e.circle(h,u,d,l)]}else n.vertices&&(i=this.parseVertices(n.vertices,l));return i},parseVertices:function(n,l){l===void 0&&(l={});for(var i=[],h=0;h<n.length;h++)a.clockwiseSort(n[h]),i.push(f.create(r.extend({position:a.centre(n[h]),vertices:n[h]},l)));return e.flagCoincidentParts(i)}};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),r={parseBody:function(o,a,s,n){n===void 0&&(n={});var l,i=s.vertices;if(i.length===1)n.vertices=i[0],l=f.create(n),e.flagCoincidentParts(l.parts);else{for(var h=[],u=0;u<i.length;u++){var d=f.create({vertices:i[u]});h.push(d)}e.flagCoincidentParts(h),n.parts=h,l=f.create(n)}return l.label=s.label,f.setPosition(l,{x:o,y:a}),l}};m.exports=r},function(m,C,t){var e={};m.exports=e;var f=t(118),r=t(128),o=t(32),a=t(41),s=t(86);(function(){e.stack=function(n,l,i,h,u,d,c){for(var p=f.create({label:"Stack"}),g=n,x=l,y,T=0,E=0;E<h;E++){for(var w=0,A=0;A<i;A++){var b=c(g,x,A,E,y,T);if(b){var R=b.bounds.max.y-b.bounds.min.y,L=b.bounds.max.x-b.bounds.min.x;R>w&&(w=R),a.translate(b,{x:L*.5,y:R*.5}),g=b.bounds.max.x+u,f.addBody(p,b),y=b,T+=1}else g+=u}x+=w+d,g=n}return p},e.chain=function(n,l,i,h,u,d){for(var c=n.bodies,p=1;p<c.length;p++){var g=c[p-1],x=c[p],y=g.bounds.max.y-g.bounds.min.y,T=g.bounds.max.x-g.bounds.min.x,E=x.bounds.max.y-x.bounds.min.y,w=x.bounds.max.x-x.bounds.min.x,A={bodyA:g,pointA:{x:T*l,y:y*i},bodyB:x,pointB:{x:w*h,y:E*u}},b=o.extend(A,d);f.addConstraint(n,r.create(b))}return n.label+=" Chain",n},e.mesh=function(n,l,i,h,u){var d=n.bodies,c,p,g,x,y;for(c=0;c<i;c++){for(p=1;p<l;p++)g=d[p-1+c*l],x=d[p+c*l],f.addConstraint(n,r.create(o.extend({bodyA:g,bodyB:x},u)));if(c>0)for(p=0;p<l;p++)g=d[p+(c-1)*l],x=d[p+c*l],f.addConstraint(n,r.create(o.extend({bodyA:g,bodyB:x},u))),h&&p>0&&(y=d[p-1+(c-1)*l],f.addConstraint(n,r.create(o.extend({bodyA:y,bodyB:x},u)))),h&&p<l-1&&(y=d[p+1+(c-1)*l],f.addConstraint(n,r.create(o.extend({bodyA:y,bodyB:x},u))))}return n.label+=" Mesh",n},e.pyramid=function(n,l,i,h,u,d,c){return e.stack(n,l,i,h,u,d,function(p,g,x,y,T,E){var w=Math.min(h,Math.ceil(i/2)),A=T?T.bounds.max.x-T.bounds.min.x:0;if(!(y>w)){y=w-y;var b=y,R=i-1-y;if(!(x<b||x>R)){E===1&&a.translate(T,{x:(x+(i%2===1?1:-1))*A,y:0});var L=T?x*A:0;return c(n+L+x*u,g,x,y,T,E)}}})},e.newtonsCradle=function(n,l,i,h,u){for(var d=f.create({label:"Newtons Cradle"}),c=0;c<i;c++){var p=1.9,g=s.circle(n+c*(h*p),l+u,h,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=r.create({pointA:{x:n+c*(h*p),y:l},bodyB:g});f.addBody(d,g),f.addConstraint(d,x)}return d},e.car=function(n,l,i,h,u){var d=a.nextGroup(!0),c=20,p=-i*.5+c,g=i*.5-c,x=0,y=f.create({label:"Car"}),T=s.rectangle(n,l,i,h,{collisionFilter:{group:d},chamfer:{radius:h*.5},density:2e-4}),E=s.circle(n+p,l+x,u,{collisionFilter:{group:d},friction:.8}),w=s.circle(n+g,l+x,u,{collisionFilter:{group:d},friction:.8}),A=r.create({bodyB:T,pointB:{x:p,y:x},bodyA:E,stiffness:1,length:0}),b=r.create({bodyB:T,pointB:{x:g,y:x},bodyA:w,stiffness:1,length:0});return f.addBody(y,T),f.addBody(y,E),f.addBody(y,w),f.addConstraint(y,A),f.addConstraint(y,b),y},e.softBody=function(n,l,i,h,u,d,c,p,g,x){g=o.extend({inertia:1/0},g),x=o.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var y=e.stack(n,l,i,h,u,d,function(T,E){return s.circle(T,E,p,g)});return e.mesh(y,i,h,c,x),y.label="Soft Body",y}})()},function(m,C,t){var e={};m.exports=e;var f=t(84),r=t(32);(function(){e.pathToVertices=function(o,a){typeof window!="undefined"&&!("SVGPathSeg"in window)&&r.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var s,n,l,i,h,u,d,c,p,g,x=[],y,T,E=0,w=0,A=0;a=a||15;var b=function(L,B,D){var G=D%2===1&&D>1;if(!p||L!=p.x||B!=p.y){p&&G?(y=p.x,T=p.y):(y=0,T=0);var X={x:y+L,y:T+B};(G||!p)&&(p=X),x.push(X),w=y+L,A=T+B}},R=function(L){var B=L.pathSegTypeAsLetter.toUpperCase();if(B!=="Z"){switch(B){case"M":case"L":case"T":case"C":case"S":case"Q":w=L.x,A=L.y;break;case"H":w=L.x;break;case"V":A=L.y;break}b(w,A,L.pathSegType)}};for(e._svgPathToAbsolute(o),l=o.getTotalLength(),u=[],s=0;s<o.pathSegList.numberOfItems;s+=1)u.push(o.pathSegList.getItem(s));for(d=u.concat();E<l;){if(g=o.getPathSegAtLength(E),h=u[g],h!=c){for(;d.length&&d[0]!=h;)R(d.shift());c=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=o.getPointAtLength(E),b(i.x,i.y,0);break}E+=a}for(s=0,n=d.length;s<n;++s)R(d[s]);return x},e._svgPathToAbsolute=function(o){for(var a,s,n,l,i,h,u=o.pathSegList,d=0,c=0,p=u.numberOfItems,g=0;g<p;++g){var x=u.getItem(g),y=x.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(y))"x"in x&&(d=x.x),"y"in x&&(c=x.y);else switch("x1"in x&&(n=d+x.x1),"x2"in x&&(i=d+x.x2),"y1"in x&&(l=c+x.y1),"y2"in x&&(h=c+x.y2),"x"in x&&(d+=x.x),"y"in x&&(c+=x.y),y){case"m":u.replaceItem(o.createSVGPathSegMovetoAbs(d,c),g);break;case"l":u.replaceItem(o.createSVGPathSegLinetoAbs(d,c),g);break;case"h":u.replaceItem(o.createSVGPathSegLinetoHorizontalAbs(d),g);break;case"v":u.replaceItem(o.createSVGPathSegLinetoVerticalAbs(c),g);break;case"c":u.replaceItem(o.createSVGPathSegCurvetoCubicAbs(d,c,n,l,i,h),g);break;case"s":u.replaceItem(o.createSVGPathSegCurvetoCubicSmoothAbs(d,c,i,h),g);break;case"q":u.replaceItem(o.createSVGPathSegCurvetoQuadraticAbs(d,c,n,l),g);break;case"t":u.replaceItem(o.createSVGPathSegCurvetoQuadraticSmoothAbs(d,c),g);break;case"a":u.replaceItem(o.createSVGPathSegArcAbs(d,c,x.r1,x.r2,x.angle,x.largeArcFlag,x.sweepFlag),g);break;case"z":case"Z":d=a,c=s;break}(y=="M"||y=="m")&&(a=d,s=c)}}})()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),r=t(0),o=t(249),a=t(9),s=t(2),n=t(126),l=t(64),i=new r({Extends:a,Mixins:[o.Bounce,o.Collision,o.Friction,o.Gravity,o.Mass,o.Sensor,o.Sleep,o.Static],initialize:function(u,d,c){a.call(this),this.tile=d,this.world=u,d.physics.matterBody&&d.physics.matterBody.destroy(),d.physics.matterBody=this;var p=s(c,"body",null),g=s(c,"addToWorld",!0);if(p)this.setBody(p,g);else{var x=d.getCollisionGroup(),y=s(x,"objects",[]);y.length>0?this.setFromTileCollision(c):this.setFromTileRectangle(c)}},setFromTileRectangle:function(h){h===void 0&&(h={}),n(h,"isStatic")||(h.isStatic=!0),n(h,"addToWorld")||(h.addToWorld=!0);var u=this.tile.getBounds(),d=u.x+u.width/2,c=u.y+u.height/2,p=e.rectangle(d,c,u.width,u.height,h);return this.setBody(p,h.addToWorld),this},setFromTileCollision:function(h){h===void 0&&(h={}),n(h,"isStatic")||(h.isStatic=!0),n(h,"addToWorld")||(h.addToWorld=!0);for(var u=this.tile.tilemapLayer.scaleX,d=this.tile.tilemapLayer.scaleY,c=this.tile.getLeft(),p=this.tile.getTop(),g=this.tile.getCollisionGroup(),x=s(g,"objects",[]),y=[],T=0;T<x.length;T++){var E=x[T],w=c+E.x*u,A=p+E.y*d,b=E.width*u,R=E.height*d,L=null;if(E.rectangle)L=e.rectangle(w+b/2,A+R/2,b,R,h);else if(E.ellipse)L=e.circle(w+b/2,A+R/2,b/2,h);else if(E.polygon||E.polyline){var B=E.polygon?E.polygon:E.polyline,D=B.map(function(H){return{x:H.x*u,y:H.y*d}}),G=l.create(D),X=l.centre(G);w+=X.x,A+=X.y,L=e.fromVertices(w,A,G,h)}L&&y.push(L)}return y.length===1?this.setBody(y[0],h.addToWorld):y.length>1&&(h.parts=y,this.setBody(f.create(h),h.addToWorld)),this},setBody:function(h,u){return u===void 0&&(u=!0),this.body&&this.removeBody(),this.body=h,this.body.gameObject=this,u&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1399);e.Body=t(41),e.Composite=t(118),e.World=t(596),e.Detector=t(273),e.Grid=t(597),e.Pairs=t(598),e.Pair=t(250),e.Query=t(1400),e.Resolver=t(599),e.SAT=t(274),e.Constraint=t(128),e.Common=t(32),e.Engine=t(1401),e.Events=t(166),e.Sleeping=t(165),e.Plugin=t(595),e.Bodies=t(86),e.Composites=t(591),e.Axes=t(271),e.Bounds=t(84),e.Svg=t(592),e.Vector=t(83),e.Vertices=t(64),e.World.add=e.Composite.add,e.World.remove=e.Composite.remove,e.World.addComposite=e.Composite.addComposite,e.World.addBody=e.Composite.addBody,e.World.addConstraint=e.Composite.addConstraint,e.World.clear=e.Composite.clear,m.exports=e},function(m,C,t){var e={};m.exports=e;var f=t(32);(function(){e._registry={},e.register=function(r){if(e.isPlugin(r)||f.warn("Plugin.register:",e.toString(r),"does not implement all required fields."),r.name in e._registry){var o=e._registry[r.name],a=e.versionParse(r.version).number,s=e.versionParse(o.version).number;a>s?(f.warn("Plugin.register:",e.toString(o),"was upgraded to",e.toString(r)),e._registry[r.name]=r):a<s?f.warn("Plugin.register:",e.toString(o),"can not be downgraded to",e.toString(r)):r!==o&&f.warn("Plugin.register:",e.toString(r),"is already registered to different plugin object")}else e._registry[r.name]=r;return r},e.resolve=function(r){return e._registry[e.dependencyParse(r).name]},e.toString=function(r){return typeof r=="string"?r:(r.name||"anonymous")+"@"+(r.version||r.range||"0.0.0")},e.isPlugin=function(r){return r&&r.name&&r.version&&r.install},e.isUsed=function(r,o){return r.used.indexOf(o)>-1},e.isFor=function(r,o){var a=r.for&&e.dependencyParse(r.for);return!r.for||o.name===a.name&&e.versionSatisfies(o.version,a.range)},e.use=function(r,o){if(r.uses=(r.uses||[]).concat(o||[]),r.uses.length===0){f.warn("Plugin.use:",e.toString(r),"does not specify any dependencies to install.");return}for(var a=e.dependencies(r),s=f.topologicalSort(a),n=[],l=0;l<s.length;l+=1)if(s[l]!==r.name){var i=e.resolve(s[l]);if(!i){n.push("\u274C "+s[l]);continue}e.isUsed(r,i.name)||(e.isFor(i,r)||(f.warn("Plugin.use:",e.toString(i),"is for",i.for,"but installed on",e.toString(r)+"."),i._warned=!0),i.install?i.install(r):(f.warn("Plugin.use:",e.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(n.push("\u{1F536} "+e.toString(i)),delete i._warned):n.push("\u2705 "+e.toString(i)),r.used.push(i.name))}n.length>0&&!i.silent&&f.info(n.join("  "))},e.dependencies=function(r,o){var a=e.dependencyParse(r),s=a.name;if(o=o||{},!(s in o)){r=e.resolve(r)||r,o[s]=f.map(r.uses||[],function(l){e.isPlugin(l)&&e.register(l);var i=e.dependencyParse(l),h=e.resolve(l);return h&&!e.versionSatisfies(h.version,i.range)?(f.warn("Plugin.dependencies:",e.toString(h),"does not satisfy",e.toString(i),"used by",e.toString(a)+"."),h._warned=!0,r._warned=!0):h||(f.warn("Plugin.dependencies:",e.toString(l),"used by",e.toString(a),"could not be resolved."),r._warned=!0),i.name});for(var n=0;n<o[s].length;n+=1)e.dependencies(o[s][n],o);return o}},e.dependencyParse=function(r){if(f.isString(r)){var o=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return o.test(r)||f.warn("Plugin.dependencyParse:",r,"is not a valid dependency string."),{name:r.split("@")[0],range:r.split("@")[1]||"*"}}return{name:r.name,range:r.range||r.version}},e.versionParse=function(r){var o=/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/;o.test(r)||f.warn("Plugin.versionParse:",r,"is not a valid version or range.");var a=r.split("-");r=a[0];var s=isNaN(Number(r[0])),n=s?r.substr(1):r,l=f.map(n.split("."),function(i){return Number(i)});return{isRange:s,version:n,range:r,operator:s?r[0]:"",parts:l,prerelease:a[1],number:l[0]*1e8+l[1]*1e4+l[2]}},e.versionSatisfies=function(r,o){o=o||"*";var a=e.versionParse(o),s=a.parts,n=e.versionParse(r),l=n.parts;if(a.isRange){if(a.operator==="*"||r==="*")return!0;if(a.operator==="~")return l[0]===s[0]&&l[1]===s[1]&&l[2]>=s[2];if(a.operator==="^")return s[0]>0?l[0]===s[0]&&n.number>=a.number:s[1]>0?l[1]===s[1]&&l[2]>=s[2]:l[2]===s[2]}return r===o||r==="*"}})()},function(m,C,t){var e={};m.exports=e;var f=t(118),r=t(128),o=t(32);(function(){e.create=function(a){var s=f.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return o.extend(s,n,a)}})()},function(m,C,t){var e={};m.exports=e;var f=t(250),r=t(273),o=t(32);(function(){e.create=function(a){var s={controller:e,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return o.extend(s,a)},e.update=function(a,s,n,l){var i,h,u,d=n.world,c=a.buckets,p,g,x=!1,y=n.metrics;for(y.broadphaseTests=0,i=0;i<s.length;i++){var T=s[i];if(!(T.isSleeping&&!l)&&!(T.bounds.max.x<d.bounds.min.x||T.bounds.min.x>d.bounds.max.x||T.bounds.max.y<d.bounds.min.y||T.bounds.min.y>d.bounds.max.y)){var E=e._getRegion(a,T);if(!T.region||E.id!==T.region.id||l){y.broadphaseTests+=1,(!T.region||l)&&(T.region=E);var w=e._regionUnion(E,T.region);for(h=w.startCol;h<=w.endCol;h++)for(u=w.startRow;u<=w.endRow;u++){g=e._getBucketId(h,u),p=c[g];var A=h>=E.startCol&&h<=E.endCol&&u>=E.startRow&&u<=E.endRow,b=h>=T.region.startCol&&h<=T.region.endCol&&u>=T.region.startRow&&u<=T.region.endRow;!A&&b&&b&&p&&e._bucketRemoveBody(a,p,T),(T.region===E||A&&!b||l)&&(p||(p=e._createBucket(c,g)),e._bucketAddBody(a,p,T))}T.region=E,x=!0}}}x&&(a.pairsList=e._createActivePairsList(a))},e.clear=function(a){a.buckets={},a.pairs={},a.pairsList=[]},e._regionUnion=function(a,s){var n=Math.min(a.startCol,s.startCol),l=Math.max(a.endCol,s.endCol),i=Math.min(a.startRow,s.startRow),h=Math.max(a.endRow,s.endRow);return e._createRegion(n,l,i,h)},e._getRegion=function(a,s){var n=s.bounds,l=Math.floor(n.min.x/a.bucketWidth),i=Math.floor(n.max.x/a.bucketWidth),h=Math.floor(n.min.y/a.bucketHeight),u=Math.floor(n.max.y/a.bucketHeight);return e._createRegion(l,i,h,u)},e._createRegion=function(a,s,n,l){return{id:a+","+s+","+n+","+l,startCol:a,endCol:s,startRow:n,endRow:l}},e._getBucketId=function(a,s){return"C"+a+"R"+s},e._createBucket=function(a,s){var n=a[s]=[];return n},e._bucketAddBody=function(a,s,n){for(var l=0;l<s.length;l++){var i=s[l];if(!(n.id===i.id||n.isStatic&&i.isStatic)){var h=f.id(n,i),u=a.pairs[h];u?u[2]+=1:a.pairs[h]=[n,i,1]}}s.push(n)},e._bucketRemoveBody=function(a,s,n){s.splice(s.indexOf(n),1);for(var l=0;l<s.length;l++){var i=s[l],h=f.id(n,i),u=a.pairs[h];u&&(u[2]-=1)}},e._createActivePairsList=function(a){var s,n,l=[];s=o.keys(a.pairs);for(var i=0;i<s.length;i++)n=a.pairs[s[i]],n[2]>0?l.push(n):delete a.pairs[s[i]];return l}})()},function(m,C,t){var e={};m.exports=e;var f=t(250),r=t(32);(function(){e._pairMaxIdleLife=1e3,e.create=function(o){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},o)},e.update=function(o,a,s){var n=o.list,l=o.table,i=o.collisionStart,h=o.collisionEnd,u=o.collisionActive,d,c,p,g;for(i.length=0,h.length=0,u.length=0,g=0;g<n.length;g++)n[g].confirmedActive=!1;for(g=0;g<a.length;g++)d=a[g],d.collided&&(c=f.id(d.bodyA,d.bodyB),p=l[c],p?(p.isActive?u.push(p):i.push(p),f.update(p,d,s),p.confirmedActive=!0):(p=f.create(d,s),l[c]=p,i.push(p),n.push(p)));for(g=0;g<n.length;g++)p=n[g],p.isActive&&!p.confirmedActive&&(f.setActive(p,!1,s),h.push(p))},e.removeOld=function(o,a){var s=o.list,n=o.table,l=[],i,h,u,d;for(d=0;d<s.length;d++){if(i=s[d],h=i.collision,h.bodyA.isSleeping||h.bodyB.isSleeping){i.timeUpdated=a;continue}a-i.timeUpdated>e._pairMaxIdleLife&&l.push(d)}for(d=0;d<l.length;d++)u=l[d]-d,i=s[u],delete n[i.id],s.splice(u,1)},e.clear=function(o){return o.table={},o.list.length=0,o.collisionStart.length=0,o.collisionActive.length=0,o.collisionEnd.length=0,o}})()},function(m,C,t){var e={};m.exports=e;var f=t(64),r=t(83),o=t(32),a=t(84);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(s){var n,l,i;for(n=0;n<s.length;n++)l=s[n],l.isActive&&(i=l.activeContacts.length,l.collision.parentA.totalContacts+=i,l.collision.parentB.totalContacts+=i)},e.solvePosition=function(s,n,l){var i,h,u,d,c,p,g,x,y,T,E,w,A,b,R,L,B=l*e._positionDampen;for(i=0;i<n.length;i++){var D=n[i];D.previousPositionImpulse.x=D.positionImpulse.x,D.previousPositionImpulse.y=D.positionImpulse.y}for(i=0;i<s.length;i++)d=s[i],!(!d.isActive||d.isSensor)&&(c=d.collision,p=c.parentA,g=c.parentB,x=c.normal,E=p.previousPositionImpulse,w=g.previousPositionImpulse,T=c.penetration,b=w.x-E.x+T.x,R=w.y-E.y+T.y,h=x.x,u=x.y,y=h*b+u*R,d.separation=y,L=(y-d.slop)*B,(p.isStatic||g.isStatic)&&(L*=2),p.isStatic||p.isSleeping||(A=L/p.totalContacts,p.positionImpulse.x+=h*A,p.positionImpulse.y+=u*A),g.isStatic||g.isSleeping||(A=L/g.totalContacts,g.positionImpulse.x-=h*A,g.positionImpulse.y-=u*A))},e.postSolvePosition=function(s){for(var n=0;n<s.length;n++){var l=s[n];if(l.totalContacts=0,l.positionImpulse.x!==0||l.positionImpulse.y!==0){for(var i=0;i<l.parts.length;i++){var h=l.parts[i];f.translate(h.vertices,l.positionImpulse),a.update(h.bounds,h.vertices,l.velocity),h.position.x+=l.positionImpulse.x,h.position.y+=l.positionImpulse.y}l.positionPrev.x+=l.positionImpulse.x,l.positionPrev.y+=l.positionImpulse.y,r.dot(l.positionImpulse,l.velocity)<0?(l.positionImpulse.x=0,l.positionImpulse.y=0):(l.positionImpulse.x*=e._positionWarming,l.positionImpulse.y*=e._positionWarming)}}},e.preSolveVelocity=function(s){var n,l,i,h,u,d,c,p,g,x,y,T,E,w,A=r._temp[0],b=r._temp[1];for(n=0;n<s.length;n++)if(i=s[n],!(!i.isActive||i.isSensor))for(h=i.activeContacts,u=i.collision,d=u.parentA,c=u.parentB,p=u.normal,g=u.tangent,l=0;l<h.length;l++)x=h[l],y=x.vertex,T=x.normalImpulse,E=x.tangentImpulse,(T!==0||E!==0)&&(A.x=p.x*T+g.x*E,A.y=p.y*T+g.y*E,d.isStatic||d.isSleeping||(w=r.sub(y,d.position,b),d.positionPrev.x+=A.x*d.inverseMass,d.positionPrev.y+=A.y*d.inverseMass,d.anglePrev+=r.cross(w,A)*d.inverseInertia),c.isStatic||c.isSleeping||(w=r.sub(y,c.position,b),c.positionPrev.x-=A.x*c.inverseMass,c.positionPrev.y-=A.y*c.inverseMass,c.anglePrev-=r.cross(w,A)*c.inverseInertia))},e.solveVelocity=function(s,n){for(var l=n*n,i=r._temp[0],h=r._temp[1],u=r._temp[2],d=r._temp[3],c=r._temp[4],p=r._temp[5],g=0;g<s.length;g++){var x=s[g];if(!(!x.isActive||x.isSensor)){var y=x.collision,T=y.parentA,E=y.parentB,w=y.normal,A=y.tangent,b=x.activeContacts,R=1/b.length;T.velocity.x=T.position.x-T.positionPrev.x,T.velocity.y=T.position.y-T.positionPrev.y,E.velocity.x=E.position.x-E.positionPrev.x,E.velocity.y=E.position.y-E.positionPrev.y,T.angularVelocity=T.angle-T.anglePrev,E.angularVelocity=E.angle-E.anglePrev;for(var L=0;L<b.length;L++){var B=b[L],D=B.vertex,G=r.sub(D,T.position,h),X=r.sub(D,E.position,u),H=r.add(T.velocity,r.mult(r.perp(G),T.angularVelocity),d),K=r.add(E.velocity,r.mult(r.perp(X),E.angularVelocity),c),$=r.sub(H,K,p),N=r.dot(w,$),I=r.dot(A,$),z=Math.abs(I),U=o.sign(I),W=(1+x.restitution)*N,V=o.clamp(x.separation+N,0,1)*e._frictionNormalMultiplier,Z=I,J=1/0;z>x.friction*x.frictionStatic*V*l&&(J=z,Z=o.clamp(x.friction*U*l,-J,J));var tt=r.cross(G,w),st=r.cross(X,w),at=R/(T.inverseMass+E.inverseMass+T.inverseInertia*tt*tt+E.inverseInertia*st*st);if(W*=at,Z*=at,N<0&&N*N>e._restingThresh*l)B.normalImpulse=0;else{var lt=B.normalImpulse;B.normalImpulse=Math.min(B.normalImpulse+W,0),W=B.normalImpulse-lt}if(I*I>e._restingThreshTangent*l)B.tangentImpulse=0;else{var ut=B.tangentImpulse;B.tangentImpulse=o.clamp(B.tangentImpulse+Z,-J,J),Z=B.tangentImpulse-ut}i.x=w.x*W+A.x*Z,i.y=w.y*W+A.y*Z,T.isStatic||T.isSleeping||(T.positionPrev.x+=i.x*T.inverseMass,T.positionPrev.y+=i.y*T.inverseMass,T.anglePrev+=r.cross(G,i)*T.inverseInertia),E.isStatic||E.isSleeping||(E.positionPrev.x-=i.x*E.inverseMass,E.positionPrev.y-=i.y*E.inverseMass,E.anglePrev-=r.cross(X,i)*E.inverseInertia)}}}}})()},function(m,C){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(e){typeof window=="object"&&(t=window)}m.exports=t},function(m,C,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(276),f=function(r,o,a,s){for(var n=r[0],l=1;l<r.length;l++){var i=r[l];e(i,n,o,a,s),n=i}return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n){return e(r,"angle",o,a,s,n)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){for(var o=0;o<e.length;o++){var a=e[o];f.call(r,a)}return e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){r===void 0&&(r=0);for(var o=r;o<e.length;o++){var a=e[o],s=!0;for(var n in f)a[n]!==f[n]&&(s=!1);if(s)return a}return null};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){r===void 0&&(r=0);for(var o=r;o<e.length;o++){var a=e[o],s=!0;for(var n in f)a[n]!==f[n]&&(s=!1);if(s)return a}return null};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(289),f=t(123),r=t(2),o=t(1),a=t(129),s=new a({sys:{queueDepthSort:o,events:{once:o}}},0,0,1,1),n=function(l,i){i===void 0&&(i={});var h=i.hasOwnProperty("width"),u=i.hasOwnProperty("height"),d=r(i,"width",-1),c=r(i,"height",-1),p=r(i,"cellWidth",1),g=r(i,"cellHeight",p),x=r(i,"position",f.TOP_LEFT),y=r(i,"x",0),T=r(i,"y",0),E=0,w=0,A=d*p,b=c*g;s.setPosition(y,T),s.setSize(p,g);for(var R=0;R<l.length;R++)if(e(l[R],s,x),h&&d===-1)s.x+=p;else if(u&&c===-1)s.y+=g;else if(u&&!h){if(w+=g,s.y+=g,w===b&&(w=0,E+=p,s.y=T,s.x+=p,E===A))break}else if(E+=p,s.x+=p,E===A&&(E=0,w+=g,s.x=y,s.y+=g,w===b))break;return l};m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=2,r={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(o,a,s,n){return o===void 0&&(o=1),a===void 0?this.alpha=o:(this._alphaTL=e(o,0,1),this._alphaTR=e(a,0,1),this._alphaBL=e(s,0,1),this._alphaBR=e(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(o){var a=e(o,0,1);this._alpha=a,this._alphaTL=a,this._alphaTR=a,this._alphaBL=a,this._alphaBR=a,a===0?this.renderFlags&=~f:this.renderFlags|=f}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(o){var a=e(o,0,1);this._alphaTL=a,a!==0&&(this.renderFlags|=f)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(o){var a=e(o,0,1);this._alphaTR=a,a!==0&&(this.renderFlags|=f)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(o){var a=e(o,0,1);this._alphaBL=a,a!==0&&(this.renderFlags|=f)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(o){var a=e(o,0,1);this._alphaBR=a,a!==0&&(this.renderFlags|=f)}}};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}},setSize:function(e,f){return this.width=e,this.height=f,this},setDisplaySize:function(e,f){return this.displayWidth=e,this.displayHeight=f,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={texture:null,frame:null,isCropped:!1,setCrop:function(e,f,r,o){if(e===void 0)this.isCropped=!1;else if(this.frame){if(typeof e=="number")this.frame.setCropUVs(this._crop,e,f,r,o,this.flipX,this.flipY);else{var a=e;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(e){return this.flipX=e,this},setFlipY:function(e){return this.flipY=e,this},setFlip:function(e,f){return this.flipX=e,this.flipY=f,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(308),r=t(3),o={prepareBoundsOutput:function(a,s){if(s===void 0&&(s=!1),this.rotation!==0&&f(a,this.x,this.y,this.rotation),s&&this.parentContainer){var n=this.parentContainer.getBoundsTransformMatrix();n.transformPoint(a.x,a.y,a)}return a},getCenter:function(a){return a===void 0&&(a=new r),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,a},getTopLeft:function(a,s){return a||(a=new r),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,s)},getTopCenter:function(a,s){return a||(a=new r),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,s)},getTopRight:function(a,s){return a||(a=new r),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(a,s)},getLeftCenter:function(a,s){return a||(a=new r),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,s)},getRightCenter:function(a,s){return a||(a=new r),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(a,s)},getBottomLeft:function(a,s){return a||(a=new r),a.x=this.x-this.displayWidth*this.originX,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,s)},getBottomCenter:function(a,s){return a||(a=new r),a.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,s)},getBottomRight:function(a,s){return a||(a=new r),a.x=this.x-this.displayWidth*this.originX+this.displayWidth,a.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(a,s)},getBounds:function(a){a===void 0&&(a=new e);var s,n,l,i,h,u,d,c;if(this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(a),p.transformPoint(a.x,a.y,a),s=a.x,n=a.y,this.getTopRight(a),p.transformPoint(a.x,a.y,a),l=a.x,i=a.y,this.getBottomLeft(a),p.transformPoint(a.x,a.y,a),h=a.x,u=a.y,this.getBottomRight(a),p.transformPoint(a.x,a.y,a),d=a.x,c=a.y}else this.getTopLeft(a),s=a.x,n=a.y,this.getTopRight(a),l=a.x,i=a.y,this.getBottomLeft(a),h=a.x,u=a.y,this.getBottomRight(a),d=a.x,c=a.y;return a.x=Math.min(s,l,h,d),a.y=Math.min(n,i,u,c),a.width=Math.max(s,l,h,d)-a.x,a.height=Math.max(n,i,u,c)-a.y,a}};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="blur"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="boot"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="contextlost"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="contextrestored"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="focus"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="hidden"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postrender"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="poststep"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prerender"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prestep"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="ready"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="step"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="visible"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postrender"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prerender"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="render"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resize"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(e){this._displayOriginX=e,this.originX=e/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(e){this._displayOriginY=e,this.originY=e/this.height}},setOrigin:function(e,f){return e===void 0&&(e=.5),f===void 0&&(f=e),this.originX=e,this.originY=f,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(e,f){return e===void 0&&(e=0),f===void 0&&(f=e),this.displayOriginX=e,this.displayOriginY=f,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(36),f=t(99),r=t(6),o=t(100),a=t(3),s={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:o.PLAYING_FORWARD,setPath:function(n,l){l===void 0&&(l=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=n,l&&this.startFollow(l),this},setRotateToPath:function(n,l){return l===void 0&&(l=0),this.rotateToPath=n,this.pathRotationOffset=l,this},isFollowing:function(){var n=this.pathTween;return n&&n.isPlaying()},startFollow:function(n,l){n===void 0&&(n={}),l===void 0&&(l=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),typeof n=="number"&&(n={duration:n}),n.from=r(n,"from",0),n.to=r(n,"to",1);var h=f(n,"positionOnPath",!1);this.rotateToPath=f(n,"rotateToPath",!1),this.pathRotationOffset=r(n,"rotationOffset",0);var u=r(n,"startAt",l);if(u&&(n.onStart=function(c){var p=c.data[0];p.progress=u,p.elapsed=p.duration*u;var g=p.ease(p.progress);p.current=p.start+(p.end-p.start)*g,p.target[p.key]=p.current}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(n),this.path.getStartPoint(this.pathOffset),h&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=o.PLAYING_FORWARD,this.rotateToPath){var d=this.path.getPoint(.1);this.rotation=Math.atan2(d.y-this.y,d.x-this.x)+e(this.pathRotationOffset)}return this.pathConfig=n,this},pauseFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.pause(),this},resumeFollow:function(){var n=this.pathTween;return n&&n.isPaused()&&n.resume(),this},stopFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this},pathUpdate:function(){var n=this.pathTween;if(n){var l=n.data[0],i=this.pathDelta,h=this.pathVector;if(i.copy(h).negate(),l.state===o.COMPLETE){this.path.getPoint(1,h),i.add(h),h.add(this.pathOffset),this.setPosition(h.x,h.y);return}else if(l.state!==o.PLAYING_FORWARD&&l.state!==o.PLAYING_BACKWARD)return;this.path.getPoint(n.getValue(),h),i.add(h),h.add(this.pathOffset);var u=this.x,d=this.y;this.setPosition(h.x,h.y);var c=this.x-u,p=this.y-d;if(c===0&&p===0)return;if(l.state!==this._prevDirection){this._prevDirection=l.state;return}this.rotateToPath&&(this.rotation=Math.atan2(p,c)+e(this.pathRotationOffset))}}};m.exports=s},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(e){this.scaleX=e/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(e){this.scaleY=e/this.frame.realHeight}},setSizeToFrame:function(e){return e===void 0&&(e=this.frame),this.width=e.realWidth,this.height=e.realHeight,this},setSize:function(e,f){return this.width=e,this.height=f,this},setDisplaySize:function(e,f){return this.displayWidth=e,this.displayHeight=f,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,e={texture:null,frame:null,isCropped:!1,setTexture:function(f,r){return this.texture=this.scene.sys.textures.get(f),this.setFrame(r)},setFrame:function(f,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!0),this.frame=this.texture.get(f),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=8,e={texture:null,frame:null,isCropped:!1,setCrop:function(f,r,o,a){if(f===void 0)this.isCropped=!1;else if(this.frame){if(typeof f=="number")this.frame.setCropUVs(this._crop,f,r,o,a,this.flipX,this.flipY);else{var s=f;this.frame.setCropUVs(this._crop,s.x,s.y,s.width,s.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(f,r){return this.texture=this.scene.sys.textures.get(f),this.setFrame(r)},setFrame:function(f,r,o){return r===void 0&&(r=!0),o===void 0&&(o=!0),this.frame=this.texture.get(f),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~t:this.renderFlags|=t,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(e,f,r,o){return e===void 0&&(e=16777215),f===void 0&&(f=e,r=e,o=e),this.tintTopLeft=e,this.tintTopRight=f,this.tintBottomLeft=r,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(e,f,r,o){return this.setTint(e,f,r,o),this.tintFill=!0,this},tint:{set:function(e){this.setTint(e,e,e,e)}},isTinted:{get:function(){var e=16777215;return this.tintFill||this.tintTopLeft!==e||this.tintTopRight!==e||this.tintBottomLeft!==e||this.tintBottomRight!==e}}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="changedata"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="changedata-"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removedata"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="setdata"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addedtoscene"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removedfromscene"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="created"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="error"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="play"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="seeked"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="seeking"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="timeout"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="unlocked"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addedtoscene"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="boot"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="create"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postupdate"},function(m,C){/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prerender"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="preupdate"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="ready"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removedfromscene"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="render"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="shutdown"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="sleep"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitioncomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitioninit"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitionout"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitionstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="transitionwake"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="wake"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n){return e(r,"alpha",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n){return e(r,"x",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n,l,i){return a==null&&(a=o),e(r,"x",o,s,l,i),e(r,"y",a,n,l,i)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n){return e(r,"y",o,a,s,n)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r===void 0&&(r=0),o===void 0&&(o=6.28);for(var a=r,s=(o-r)/e.length,n=0;n<e.length;n++)e[n].x=f.x+f.radius*Math.cos(a),e[n].y=f.y+f.radius*Math.sin(a),a+=s;return e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r===void 0&&(r=0),o===void 0&&(o=6.28);for(var a=r,s=(o-r)/e.length,n=f.width/2,l=f.height/2,i=0;i<e.length;i++)e[i].x=f.x+n*Math.cos(a),e[i].y=f.y+l*Math.sin(a),a+=s;return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(172),f=function(r,o){for(var a=e(o,r.length),s=0;s<r.length;s++){var n=r[s],l=a[s];n.x=l.x,n.y=l.y}return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(316),f=t(178),r=t(179),o=function(a,s,n){n===void 0&&(n=0);var l=e(s,!1,a.length);n>0?f(l,n):n<0&&r(l,Math.abs(n));for(var i=0;i<a.length;i++)a[i].x=l[i].x,a[i].y=l[i].y;return a};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(317),f=function(r,o,a){var s=e({x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2},a),n=e({x1:o.x2,y1:o.y2,x2:o.x3,y2:o.y3},a),l=e({x1:o.x3,y1:o.y3,x2:o.x1,y2:o.y1},a);s.pop(),n.pop(),l.pop(),s=s.concat(n,l);for(var i=s.length/r.length,h=0,u=0;u<r.length;u++){var d=r[u],c=s[Math.floor(h)];d.x=c.x,d.y=c.y,h+=i}return r};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){for(var o=0;o<e.length;o++){var a=e[o];a.anims&&a.anims.play(f,r)}return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(170),f=function(r,o){for(var a=0;a<r.length;a++)e(o,r[a]);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(180),f=function(r,o){for(var a=0;a<r.length;a++)e(o,r[a]);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(173),f=function(r,o){for(var a=0;a<r.length;a++)e(o,r[a]);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(174),f=function(r,o){for(var a=0;a<r.length;a++)e(o,r[a]);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(181),f=function(r,o){for(var a=0;a<r.length;a++)e(o,r[a]);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n){return e(r,"rotation",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(182),f=t(50),r=function(o,a,s){for(var n=a.x,l=a.y,i=0;i<o.length;i++){var h=o[i];e(h,n,l,s,Math.max(1,f(h.x,h.y,n,l)))}return o};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(182),f=function(r,o,a,s){var n=o.x,l=o.y;if(s===0)return r;for(var i=0;i<r.length;i++)e(r[i],n,l,a,s);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n){return e(r,"scaleX",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n,l,i){return a==null&&(a=o),e(r,"scaleX",o,s,l,i),e(r,"scaleY",a,n,l,i)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(46),f=function(r,o,a,s,n){return e(r,"scaleY",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"alpha",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s){return e(r,"blendMode",o,0,a,s)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"depth",o,a,s,n)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){for(var o=0;o<e.length;o++)e[o].setInteractive(f,r);return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n,l,i){return a==null&&(a=o),e(r,"originX",o,s,l,i),e(r,"originY",a,n,l,i),r.forEach(function(h){h.updateDisplayOrigin()}),r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"rotation",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n,l,i){return a==null&&(a=o),e(r,"scaleX",o,s,l,i),e(r,"scaleY",a,n,l,i)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"scaleX",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"scaleY",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n,l,i){return a==null&&(a=o),e(r,"scrollFactorX",o,s,l,i),e(r,"scrollFactorY",a,n,l,i)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"scrollFactorX",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"scrollFactorY",o,a,s,n)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a){for(var s=0;s<e.length;s++)e[s].setTint(f,r,o,a);return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s){return e(r,"visible",o,0,a,s)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"x",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n,l,i){return a==null&&(a=o),e(r,"x",o,s,l,i),e(r,"y",a,n,l,i)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(27),f=function(r,o,a,s,n){return e(r,"y",o,a,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s,n){s===void 0&&(s=0),n===void 0&&(n=new e);var l,i;if(r.length>1){var h,u,d,c;if(s===0){var p=r.length-1;for(l=r[p].x,i=r[p].y,h=p-1;h>=0;h--)c=r[h],u=c.x,d=c.y,c.x=l,c.y=i,l=u,i=d;r[p].x=o,r[p].y=a}else{for(l=r[0].x,i=r[0].y,h=1;h<r.length;h++)c=r[h],u=c.x,d=c.y,c.x=l,c.y=i,l=u,i=d;r[0].x=o,r[0].y=a}}else l=r[0].x,i=r[0].y,r[0].x=o,r[0].y=a;return n.x=l,n.y=i,n};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(131),f=function(r){return e(r)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(183),f=function(r,o,a,s,n){n===void 0&&(n=!1);var l=Math.abs(s-a)/r.length,i;if(n)for(i=0;i<r.length;i++)r[i][o]+=e(i*l,a,s);else for(i=0;i<r.length;i++)r[i][o]=e(i*l,a,s);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(184),f=function(r,o,a,s,n){n===void 0&&(n=!1);var l=Math.abs(s-a)/r.length,i;if(n)for(i=0;i<r.length;i++)r[i][o]+=e(i*l,a,s);else for(i=0;i<r.length;i++)r[i][o]=e(i*l,a,s);return r};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a){a===void 0&&(a=!1);var s=Math.abs(o-r)/e.length,n;if(a)for(n=0;n<e.length;n++)e[n][f]+=n*s+r;else for(n=0;n<e.length;n++)e[n][f]=n*s+r;return e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=0;f<e.length;f++)e[f].visible=!e[f].visible;return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(68),f=function(r,o,a){a===void 0&&(a=0);for(var s=0;s<r.length;s++){var n=r[s];n.x=e(n.x,o.left-a,o.right+a),n.y=e(n.y,o.top-a,o.bottom+a)}return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="add"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationcomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationcomplete-"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationrepeat"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationrestart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationstop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="animationupdate"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pauseall"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="remove"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resumeall"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="add"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="remove"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Controls:t(739),Scene2D:t(742)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(6),r=new e({initialize:function(a){this.camera=f(a,"camera",null),this.left=f(a,"left",null),this.right=f(a,"right",null),this.up=f(a,"up",null),this.down=f(a,"down",null),this.zoomIn=f(a,"zoomIn",null),this.zoomOut=f(a,"zoomOut",null),this.zoomSpeed=f(a,"zoomSpeed",.01),this.minZoom=f(a,"minZoom",.001),this.maxZoom=f(a,"maxZoom",1e3),this.speedX=0,this.speedY=0;var s=f(a,"speed",null);typeof s=="number"?(this.speedX=s,this.speedY=s):(this.speedX=f(a,"speed.x",0),this.speedY=f(a,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var a=this.camera;this.up&&this.up.isDown?a.scrollY-=this.speedY*o|0:this.down&&this.down.isDown&&(a.scrollY+=this.speedY*o|0),this.left&&this.left.isDown?a.scrollX-=this.speedX*o|0:this.right&&this.right.isDown&&(a.scrollX+=this.speedX*o|0),this.zoomIn&&this.zoomIn.isDown?(a.zoom-=this.zoomSpeed,a.zoom<this.minZoom&&(a.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(a.zoom+=this.zoomSpeed,a.zoom>this.maxZoom&&(a.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(6),r=new e({initialize:function(a){this.camera=f(a,"camera",null),this.left=f(a,"left",null),this.right=f(a,"right",null),this.up=f(a,"up",null),this.down=f(a,"down",null),this.zoomIn=f(a,"zoomIn",null),this.zoomOut=f(a,"zoomOut",null),this.zoomSpeed=f(a,"zoomSpeed",.01),this.minZoom=f(a,"minZoom",.001),this.maxZoom=f(a,"maxZoom",1e3),this.accelX=0,this.accelY=0;var s=f(a,"acceleration",null);typeof s=="number"?(this.accelX=s,this.accelY=s):(this.accelX=f(a,"acceleration.x",0),this.accelY=f(a,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=f(a,"drag",null);typeof n=="number"?(this.dragX=n,this.dragY=n):(this.dragX=f(a,"drag.x",0),this.dragY=f(a,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var l=f(a,"maxSpeed",null);typeof l=="number"?(this.maxSpeedX=l,this.maxSpeedY=l):(this.maxSpeedX=f(a,"maxSpeed.x",0),this.maxSpeedY=f(a,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(o){return this.camera=o,this},update:function(o){if(!!this.active){o===void 0&&(o=1);var a=this.camera;this._speedX>0?(this._speedX-=this.dragX*o,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*o,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*o,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*o,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(a.scrollX-=this._speedX*o|0),this._speedY!==0&&(a.scrollY-=this._speedY*o|0),this._zoom!==0&&(a.zoom+=this._zoom,a.zoom<this.minZoom?a.zoom=this.minZoom:a.zoom>this.maxZoom&&(a.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="cameradestroy"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerafadeincomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerafadeinstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerafadeoutcomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerafadeoutstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="cameraflashcomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="cameraflashstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="followupdate"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerapancomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerapanstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postrender"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="prerender"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerarotatecomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerarotatestart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerashakecomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerashakestart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerazoomcomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="camerazoomstart"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(37),o=new f({initialize:function(s){this.camera=s,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,s,n,l,i,h,u,d){if(a===void 0&&(a=!0),s===void 0&&(s=1e3),n===void 0&&(n=0),l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=!1),u===void 0&&(u=null),d===void 0&&(d=this.camera.scene),!h&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=s,this.direction=a,this.progress=0,this.red=n,this.green=l,this.blue=i,this.alpha=a?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=u,this._onUpdateScope=d;var c=a?r.FADE_OUT_START:r.FADE_IN_START;return this.camera.emit(c,this.camera,this,s,n,l,i),this.camera},update:function(a,s){!this.isRunning||(this._elapsed+=s,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(a){if(!this.isRunning&&!this.isComplete)return!1;var s=this.camera;return a.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",a.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(a,s){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,l=this.red/255,i=this.green/255,h=this.blue/255;return a.drawFillRect(n.x,n.y,n.width,n.height,s(h,i,l,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var a=this.direction?r.FADE_OUT_COMPLETE:r.FADE_IN_COMPLETE;this.camera.emit(a,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(37),o=new f({initialize:function(s){this.camera=s,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(a,s,n,l,i,h,u){return a===void 0&&(a=250),s===void 0&&(s=255),n===void 0&&(n=255),l===void 0&&(l=255),i===void 0&&(i=!1),h===void 0&&(h=null),u===void 0&&(u=this.camera.scene),!i&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=a,this.progress=0,this.red=s,this.green=n,this.blue=l,this.alpha=1,this._elapsed=0,this._onUpdate=h,this._onUpdateScope=u,this.camera.emit(r.FLASH_START,this.camera,this,a,s,n,l),this.camera)},update:function(a,s){!this.isRunning||(this._elapsed+=s,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(a){if(!this.isRunning)return!1;var s=this.camera;return a.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",a.fillRect(s.x,s.y,s.width,s.height),!0},postRenderWebGL:function(a,s){if(!this.isRunning)return!1;var n=this.camera,l=this.red/255,i=this.green/255,h=this.blue/255;return a.drawFillRect(n.x,n.y,n.width,n.height,s(h,i,l,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(134),o=t(37),a=t(3),s=new f({initialize:function(l){this.camera=l,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,l,i,h,u,d,c){i===void 0&&(i=1e3),h===void 0&&(h=r.Linear),u===void 0&&(u=!1),d===void 0&&(d=null),c===void 0&&(c=this.camera.scene);var p=this.camera;return!u&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(n,l),p.getScroll(n,l,this.current),typeof h=="string"&&r.hasOwnProperty(h)?this.ease=r[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=c,this.camera.emit(o.PAN_START,this.camera,this,i,n,l)),p},update:function(n,l){if(!!this.isRunning){this._elapsed+=l;var i=e(this._elapsed/this.duration,0,1);this.progress=i;var h=this.camera;if(this._elapsed<this.duration){var u=this.ease(i);h.getScroll(this.destination.x,this.destination.y,this.current);var d=this.source.x+(this.current.x-this.source.x)*u,c=this.source.y+(this.current.y-this.source.y)*u;h.setScroll(d,c),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,i,d,c)}else h.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,i,h.scrollX,h.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});m.exports=s},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1.70158),e*e*((f+1)*e-f)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1.70158),--e*e*((f+1)*e+f)+1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1.70158);var r=f*1.525;return(e*=2)<1?.5*(e*e*((r+1)*e-r)):.5*((e-=2)*e*((r+1)*e+r)+2)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e=1-e,e<.36363636363636365?1-7.5625*e*e:e<.7272727272727273?1-(7.5625*(e-=.5454545454545454)*e+.75):e<.9090909090909091?1-(7.5625*(e-=.8181818181818182)*e+.9375):1-(7.5625*(e-=.9545454545454546)*e+.984375)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e<.36363636363636365?7.5625*e*e:e<.7272727272727273?7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?7.5625*(e-=.8181818181818182)*e+.9375:7.5625*(e-=.9545454545454546)*e+.984375};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=!1;return e<.5?(e=1-e*2,f=!0):e=e*2-1,e<.36363636363636365?e=7.5625*e*e:e<.7272727272727273?e=7.5625*(e-=.5454545454545454)*e+.75:e<.9090909090909091?e=7.5625*(e-=.8181818181818182)*e+.9375:e=7.5625*(e-=.9545454545454546)*e+.984375,f?(1-e)*.5:e*.5+.5};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1-Math.sqrt(1-e*e)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.sqrt(1- --e*e)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return--e*e*e+1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(f===void 0&&(f=.1),r===void 0&&(r=.1),e===0)return 0;if(e===1)return 1;var o=r/4;return f<1?f=1:o=r*Math.asin(1/f)/(2*Math.PI),-(f*Math.pow(2,10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/r))};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(f===void 0&&(f=.1),r===void 0&&(r=.1),e===0)return 0;if(e===1)return 1;var o=r/4;return f<1?f=1:o=r*Math.asin(1/f)/(2*Math.PI),f*Math.pow(2,-10*e)*Math.sin((e-o)*(2*Math.PI)/r)+1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(f===void 0&&(f=.1),r===void 0&&(r=.1),e===0)return 0;if(e===1)return 1;var o=r/4;return f<1?f=1:o=r*Math.asin(1/f)/(2*Math.PI),(e*=2)<1?-.5*(f*Math.pow(2,10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/r)):f*Math.pow(2,-10*(e-=1))*Math.sin((e-o)*(2*Math.PI)/r)*.5+1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.pow(2,10*(e-1))-.001};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1-Math.pow(2,-10*e)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*(2-e)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e*e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return 1- --e*e*e*e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e*e*e*e*e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return--e*e*e*e*e+1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:1-Math.cos(e*Math.PI/2)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:Math.sin(e*Math.PI/2)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===0?0:e===1?1:.5*(1-Math.cos(Math.PI*e))};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1),e<=0?0:e>=1?1:((f*e|0)+1)*(1/f)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(37),o=t(3),a=new f({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.intensity=new o,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(s,n,l,i,h){return s===void 0&&(s=100),n===void 0&&(n=.05),l===void 0&&(l=!1),i===void 0&&(i=null),h===void 0&&(h=this.camera.scene),!l&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=s,this.progress=0,typeof n=="number"?this.intensity.set(n):this.intensity.set(n.x,n.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=i,this._onUpdateScope=h,this.camera.emit(r.SHAKE_START,this.camera,this,s,n),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(s,n){if(!!this.isRunning)if(this._elapsed+=n,this.progress=e(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var l=this.intensity,i=this.camera.width,h=this.camera.height,u=this.camera.zoom;this._offsetX=(Math.random()*l.x*i*2-l.x*i)*u,this._offsetY=(Math.random()*l.y*h*2-l.y*h)*u,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});m.exports=a},function(m,C,t){/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var e=t(18),f=t(0),r=t(37),o=t(134),a=new f({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(s,n,l,i,h,u,d){l===void 0&&(l=1e3),i===void 0&&(i=o.Linear),h===void 0&&(h=!1),u===void 0&&(u=null),d===void 0&&(d=this.camera.scene),n===void 0&&(n=!1),this.shortestPath=n;var c=s;s<0?(c=-1*s,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;c=c-Math.floor(c/p)*p;var g=this.camera;if(!h&&this.isRunning)return g;if(this.isRunning=!0,this.duration=l,this.progress=0,this.source=g.rotation,this.destination=c,typeof i=="string"&&o.hasOwnProperty(i)?this.ease=o[i]:typeof i=="function"&&(this.ease=i),this._elapsed=0,this._onUpdate=u,this._onUpdateScope=d,this.shortestPath){var x=0,y=0;this.destination>this.source?x=Math.abs(this.destination-this.source):x=Math.abs(this.destination+p)-this.source,this.source>this.destination?y=Math.abs(this.source-this.destination):y=Math.abs(this.source+p)-this.destination,x<y?this.clockwise=!0:x>y&&(this.clockwise=!1)}return this.camera.emit(r.ROTATE_START,this.camera,this,l,c),g},update:function(s,n){if(!!this.isRunning){this._elapsed+=n;var l=e(this._elapsed/this.duration,0,1);this.progress=l;var i=this.camera;if(this._elapsed<this.duration){var h=this.ease(l);this.current=i.rotation;var u=0,d=360*Math.PI/180,c=this.destination,p=this.current;this.clockwise===!1&&(c=this.current,p=this.destination),c>=p?u=Math.abs(c-p):u=Math.abs(c+d)-p;var g=0;this.clockwise?g=i.rotation+u*h:g=i.rotation-u*h,i.rotation=g,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,l,g)}else i.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,l,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(134),o=t(37),a=new f({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,n,l,i,h,u){n===void 0&&(n=1e3),l===void 0&&(l=r.Linear),i===void 0&&(i=!1),h===void 0&&(h=null),u===void 0&&(u=this.camera.scene);var d=this.camera;return!i&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source=d.zoom,this.destination=s,typeof l=="string"&&r.hasOwnProperty(l)?this.ease=r[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=h,this._onUpdateScope=u,this.camera.emit(o.ZOOM_START,this.camera,this,n,s)),d},update:function(s,n){!this.isRunning||(this._elapsed+=n,this.progress=e(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(326),f=t(0),r=t(2),o=t(24),a=t(57),s=t(104),n=t(20),l=new f({initialize:function(h){this.scene=h,this.systems=h.sys,this.roundPixels=h.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,h.sys.events.once(n.BOOT,this.boot,this),h.sys.events.on(n.START,this.start,this)},boot:function(){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new e(0,0,i.scale.width,i.scale.height).setScene(this.scene),i.game.scale.on(s.RESIZE,this.onResize,this),this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){if(!this.main){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0]}var h=this.systems.events;h.on(n.UPDATE,this.update,this),h.once(n.SHUTDOWN,this.shutdown,this)},add:function(i,h,u,d,c,p){i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=this.scene.sys.scale.width),d===void 0&&(d=this.scene.sys.scale.height),c===void 0&&(c=!1),p===void 0&&(p="");var g=new e(i,h,u,d);return g.setName(p),g.setScene(this.scene),g.setRoundPixels(this.roundPixels),g.id=this.getNextID(),this.cameras.push(g),c&&(this.main=g),g},addExisting:function(i,h){h===void 0&&(h=!1);var u=this.cameras.indexOf(i);return u===-1?(i.id=this.getNextID(),i.setRoundPixels(this.roundPixels),this.cameras.push(i),h&&(this.main=i),i):null},getNextID:function(){for(var i=this.cameras,h=1,u=0;u<32;u++){for(var d=!1,c=0;c<i.length;c++){var p=i[c];if(p&&p.id===h){d=!0;continue}}if(d)h=h<<1;else return h}return 0},getTotal:function(i){i===void 0&&(i=!1);for(var h=0,u=this.cameras,d=0;d<u.length;d++){var c=u[d];(!i||i&&c.visible)&&h++}return h},fromJSON:function(i){Array.isArray(i)||(i=[i]);for(var h=this.scene.sys.scale.width,u=this.scene.sys.scale.height,d=0;d<i.length;d++){var c=i[d],p=r(c,"x",0),g=r(c,"y",0),x=r(c,"width",h),y=r(c,"height",u),T=this.add(p,g,x,y);T.name=r(c,"name",""),T.zoom=r(c,"zoom",1),T.rotation=r(c,"rotation",0),T.scrollX=r(c,"scrollX",0),T.scrollY=r(c,"scrollY",0),T.roundPixels=r(c,"roundPixels",!1),T.visible=r(c,"visible",!0);var E=r(c,"backgroundColor",!1);E&&T.setBackgroundColor(E);var w=r(c,"bounds",null);if(w){var A=r(w,"x",0),b=r(w,"y",0),R=r(w,"width",h),L=r(w,"height",u);T.setBounds(A,b,R,L)}}return this},getCamera:function(i){for(var h=this.cameras,u=0;u<h.length;u++)if(h[u].name===i)return h[u];return null},getCamerasBelowPointer:function(i){for(var h=this.cameras,u=i.x,d=i.y,c=[],p=0;p<h.length;p++){var g=h[p];g.visible&&g.inputEnabled&&a(g,u,d)&&c.unshift(g)}return c},remove:function(i,h){h===void 0&&(h=!0),Array.isArray(i)||(i=[i]);for(var u=0,d=this.cameras,c=0;c<i.length;c++){var p=d.indexOf(i[c]);p!==-1&&(h?d[p].destroy():d[p].renderList=[],d.splice(p,1),u++)}return!this.main&&d[0]&&(this.main=d[0]),u},render:function(i,h){for(var u=this.scene,d=this.cameras,c=0;c<this.cameras.length;c++){var p=d[c];if(p.visible&&p.alpha>0){p.preRender();var g=this.getVisibleChildren(h.getChildren(),p);i.render(u,g,p)}}},getVisibleChildren:function(i,h){for(var u=[],d=0;d<i.length;d++){var c=i[d];c.willRender(h)&&u.push(c)}return u},resetAll:function(){for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(i,h){for(var u=0;u<this.cameras.length;u++)this.cameras[u].update(i,h)},onResize:function(i,h,u,d,c){for(var p=0;p<this.cameras.length;p++){var g=this.cameras[p];g._x===0&&g._y===0&&g._width===d&&g._height===c&&g.setSize(h.width,h.height)}},resize:function(i,h){for(var u=0;u<this.cameras.length;u++)this.cameras[u].setSize(i,h)},shutdown:function(){this.main=void 0;for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();this.cameras=[];var h=this.systems.events;h.off(n.UPDATE,this.update,this),h.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(n.START,this.start,this),this.scene=null,this.systems=null}});o.register("CameraManager",l,"cameras"),m.exports=l},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="enterfullscreen"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="fullscreenfailed"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="fullscreenunsupported"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="leavefullscreen"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="orientationchange"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resize"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(m,C){var t=m.exports={},e,f;function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=r}catch(g){e=r}try{typeof clearTimeout=="function"?f=clearTimeout:f=o}catch(g){f=o}})();function a(g){if(e===setTimeout)return setTimeout(g,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(g,0);try{return e(g,0)}catch(x){try{return e.call(null,g,0)}catch(y){return e.call(this,g,0)}}}function s(g){if(f===clearTimeout)return clearTimeout(g);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(g);try{return f(g)}catch(x){try{return f.call(null,g)}catch(y){return f.call(this,g)}}}var n=[],l=!1,i,h=-1;function u(){!l||!i||(l=!1,i.length?n=i.concat(n):h=-1,n.length&&d())}function d(){if(!l){var g=a(u);l=!0;for(var x=n.length;x;){for(i=n,n=[];++h<x;)i&&i[h].run();h=-1,x=n.length}i=null,l=!1,s(g)}}t.nextTick=function(g){var x=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)x[y-1]=arguments[y];n.push(new c(g,x)),n.length===1&&!l&&a(d)};function c(g,x){this.fun=g,this.array=x}c.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function p(){}t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(g){return[]},t.binding=function(g){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(g){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(136),f={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function r(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(f.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(f.mspointer=!0),navigator.getGamepads&&(f.gamepads=!0),"onwheel"in window||e.ie&&"WheelEvent"in window?f.wheelEvent="wheel":"onmousewheel"in window?f.wheelEvent="mousewheel":e.firefox&&"MouseScrollEvent"in window&&(f.wheelEvent="DOMMouseScroll")),f}m.exports=r()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(136),f={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function r(){if(typeof importScripts=="function")return f;f.audioData=!!window.Audio,f.webAudio=!!(window.AudioContext||window.webkitAudioContext);var o=document.createElement("audio"),a=!!o.canPlayType;try{if(a&&(o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(f.ogg=!0),(o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||o.canPlayType("audio/opus;").replace(/^no$/,""))&&(f.opus=!0),o.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(f.mp3=!0),o.canPlayType("audio/wav").replace(/^no$/,"")&&(f.wav=!0),(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/aac;").replace(/^no$/,""))&&(f.m4a=!0),o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(f.webm=!0),o.canPlayType('audio/mp4;codecs="ec-3"')!=="")){if(e.edge)f.dolby=!0;else if(e.safari&&e.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var s=parseInt(RegExp.$1,10),n=parseInt(RegExp.$2,10);(s===10&&n>=11||s>10)&&(f.dolby=!0)}}}catch(l){}return f}m.exports=r()},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};function e(){if(typeof importScripts=="function")return t;var f=document.createElement("video"),r=!!f.canPlayType;try{r&&(f.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),f.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),f.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),f.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),f.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch(o){}return t}m.exports=e()},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={available:!1,cancel:"",keyboard:!1,request:""};function e(){if(typeof importScripts=="function")return t;var f,r="Fullscreen",o="FullScreen",a=["request"+r,"request"+o,"webkitRequest"+r,"webkitRequest"+o,"msRequest"+r,"msRequest"+o,"mozRequest"+o,"mozRequest"+r];for(f=0;f<a.length;f++)if(document.documentElement[a[f]]){t.available=!0,t.request=a[f];break}var s=["cancel"+o,"exit"+r,"webkitCancel"+o,"webkitExit"+r,"msCancel"+o,"msExit"+r,"mozCancel"+o,"mozExit"+r];if(t.available){for(f=0;f<s.length;f++)if(document[s[f]]){t.cancel=s[f];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}m.exports=e()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.atan2(f.x-e.x,f.y-e.y)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){return Math.atan2(r-e,o-f)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=function(r){return r>Math.PI&&(r-=e.PI2),Math.abs(((r+e.TAU)%e.PI2-e.PI2)%e.PI2)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(137),f=function(){return e(-Math.PI,Math.PI)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       @samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(137),f=function(){return e(-180,180)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(351),f=function(r){return e(r+Math.PI)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=function(r,o,a){return a===void 0&&(a=.05),r===o||(Math.abs(o-r)<=a||Math.abs(o-r)>=e.PI2-a?r=o:(Math.abs(o-r)>Math.PI&&(o<r?o+=e.PI2:o-=e.PI2),o>r?r+=a:o<r&&(r-=a))),r};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=f-e;if(r===0)return 0;var o=Math.floor((r- -180)/360);return r-o*360};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(m,C){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.x-f.x,o=e.y-f.y;return r*r+o*o};m.exports=t},function(m,C){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){return Math.max(Math.abs(e-r),Math.abs(f-o))};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a){return a===void 0&&(a=2),Math.sqrt(Math.pow(r-e,a)+Math.pow(o-f,a))};m.exports=t},function(m,C){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){return Math.abs(e-r)+Math.abs(f-o)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1e-4),Math.ceil(e-f)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1e-4),Math.floor(e+f)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(356),f=function(r,o){for(var a=0,s=r.length-1,n=0;n<=s;n++)a+=Math.pow(1-o,s-n)*Math.pow(o,n)*r[n]*e(s,n);return a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(194),f=function(r,o){var a=r.length-1,s=a*o,n=Math.floor(s);return r[0]===r[a]?(o<0&&(n=Math.floor(s=a*(1+o))),e(s-n,r[(n-1+a)%a],r[n],r[(n+1)%a],r[(n+2)%a])):o<0?r[0]-(e(-s,r[0],r[0],r[1],r[1])-r[0]):o>1?r[a]-(e(s-a,r[a],r[a],r[a-1],r[a-1])-r[a]):e(s-n,r[n?n-1:0],r[n],r[a<n+1?a:n+1],r[a<n+2?a:n+2])};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(135),f=function(r,o){var a=r.length-1,s=a*o,n=Math.floor(s);return o<0?e(r[0],r[1],s):o>1?e(r[a],r[a-1],a-s):e(r[n],r[n+1>a?a:n+1],s-n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(183),f=function(r,o,a){return o+(a-o)*e(r,0,1)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e>0&&(e&e-1)===0};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){return r===void 0&&(r=0),f===0?e:(e-=r,e=f*Math.round(e/f),o?(r+e)/f:r+e)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=new e({initialize:function(o){o===void 0&&(o=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],o&&this.init(o)},rnd:function(){var r=2091639*this.s0+this.c*23283064365386963e-26;return this.c=r|0,this.s0=this.s1,this.s1=this.s2,this.s2=r-this.c,this.s2},hash:function(r){var o,a=this.n;r=r.toString();for(var s=0;s<r.length;s++)a+=r.charCodeAt(s),o=.02519603282416938*a,a=o>>>0,o-=a,o*=a,a=o>>>0,o-=a,a+=o*4294967296;return this.n=a,(a>>>0)*23283064365386963e-26},init:function(r){typeof r=="string"?this.state(r):this.sow(r)},sow:function(r){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!r)for(var o=0;o<r.length&&r[o]!=null;o++){var a=r[o];this.s0-=this.hash(a),this.s0+=~~(this.s0<0),this.s1-=this.hash(a),this.s1+=~~(this.s1<0),this.s2-=this.hash(a),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(r,o){return Math.floor(this.realInRange(0,o-r+1)+r)},between:function(r,o){return Math.floor(this.realInRange(0,o-r+1)+r)},realInRange:function(r,o){return this.frac()*(o-r)+r},normal:function(){return 1-2*this.frac()},uuid:function(){var r="",o="";for(o=r="";r++<36;o+=~r%5|r*3&4?(r^15?8^this.frac()*(r^20?16:4):4).toString(16):"-");return o},pick:function(r){return r[this.integerInRange(0,r.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(r){return r[~~(Math.pow(this.frac(),2)*(r.length-1)+.5)]},timestamp:function(r,o){return this.realInRange(r||9466848e5,o||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(r){return typeof r=="string"&&r.match(/^!rnd/)&&(r=r.split(","),this.c=parseFloat(r[1]),this.s0=parseFloat(r[2]),this.s1=parseFloat(r[3]),this.s2=parseFloat(r[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(r){for(var o=r.length-1,a=o;a>0;a--){var s=Math.floor(this.frac()*(a+1)),n=r[s];r[s]=r[a],r[a]=n}return r}});m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=0,r=0;r<e.length;r++)f+=+e[r];return f/e.length};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){f===void 0&&(f=0),r===void 0&&(r=10);var o=Math.pow(r,-f);return Math.ceil(e*o)/o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return Math.abs(e-f)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(69),o=t(1),a=new r,s=new f({initialize:function n(l,i,h,u){l===void 0&&(l=0),i===void 0&&(i=0),h===void 0&&(h=0),u===void 0&&(u=n.DefaultOrder),this._x=l,this._y=i,this._z=h,this._order=u,this.onChangeCallback=o},x:{get:function(){return this._x},set:function(n){this._x=n,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(n){this._y=n,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(n){this._z=n,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(n){this._order=n,this.onChangeCallback(this)}},set:function(n,l,i,h){return h===void 0&&(h=this._order),this._x=n,this._y=l,this._z=i,this._order=h,this.onChangeCallback(this),this},copy:function(n){return this.set(n.x,n.y,n.z,n.order)},setFromQuaternion:function(n,l,i){return l===void 0&&(l=this._order),i===void 0&&(i=!1),a.fromQuat(n),this.setFromRotationMatrix(a,l,i)},setFromRotationMatrix:function(n,l,i){l===void 0&&(l=this._order),i===void 0&&(i=!1);var h=n.val,u=h[0],d=h[4],c=h[8],p=h[1],g=h[5],x=h[9],y=h[2],T=h[6],E=h[10],w=0,A=0,b=0,R=.99999;switch(l){case"XYZ":{A=Math.asin(e(c,-1,1)),Math.abs(c)<R?(w=Math.atan2(-x,E),b=Math.atan2(-d,u)):w=Math.atan2(T,g);break}case"YXZ":{w=Math.asin(-e(x,-1,1)),Math.abs(x)<R?(A=Math.atan2(c,E),b=Math.atan2(p,g)):A=Math.atan2(-y,u);break}case"ZXY":{w=Math.asin(e(T,-1,1)),Math.abs(T)<R?(A=Math.atan2(-y,E),b=Math.atan2(-d,g)):b=Math.atan2(p,u);break}case"ZYX":{A=Math.asin(-e(y,-1,1)),Math.abs(y)<R?(w=Math.atan2(T,E),b=Math.atan2(p,u)):b=Math.atan2(-d,g);break}case"YZX":{b=Math.asin(e(p,-1,1)),Math.abs(p)<R?(w=Math.atan2(-x,g),A=Math.atan2(-y,u)):A=Math.atan2(c,E);break}case"XZY":{b=Math.asin(-e(d,-1,1)),Math.abs(d)<R?(w=Math.atan2(T,g),A=Math.atan2(c,u)):w=Math.atan2(-x,E);break}}return this._x=w,this._y=A,this._z=b,this._order=l,i&&this.onChangeCallback(this),this}});s.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],s.DefaultOrder="XYZ",m.exports=s},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){f===void 0&&(f=0),r===void 0&&(r=10);var o=Math.pow(r,-f);return Math.floor(e*o)/o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e/f/1e3};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e==parseFloat(e)?!(e%2):void 0};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e===parseFloat(e)?!(e%2):void 0};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return Math.min(e+f,r)};m.exports=t},function(m,C){/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=e.length;if(f===0)return 0;e.sort(function(o,a){return o-a});var r=Math.floor(f/2);return f%2===0?(e[r]+e[r-1])/2:e[r]};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return Math.max(e-f,r)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r===void 0&&(r=f+1);var a=(e-f)/(r-f);return a>1?o!==void 0?(a=(o-e)/(o-r),a<0&&(a=0)):a=1:a<0&&(a=0),a};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1);var r=Math.random()*2*Math.PI;return e.x=Math.cos(r)*f,e.y=Math.sin(r)*f,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=1);var r=Math.random()*2*Math.PI,o=Math.random()*2-1,a=Math.sqrt(1-o*o)*f;return e.x=Math.cos(r)*a,e.y=Math.sin(r)*a,e.z=o*f,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f=1),e.x=(Math.random()*2-1)*f,e.y=(Math.random()*2-1)*f,e.z=(Math.random()*2-1)*f,e.w=(Math.random()*2-1)*f,e};m.exports=t},function(m,C){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a){return e.x=f+a*Math.cos(o),e.y=r+a*Math.sin(o),e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){f===void 0&&(f=0),r===void 0&&(r=10);var o=Math.pow(r,-f);return Math.round(e*o)/o};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f===void 0&&(f=1),r===void 0&&(r=1),o===void 0&&(o=1),o*=Math.PI/e;for(var a=[],s=[],n=0;n<e;n++)r-=f*o,f+=r*o,a[n]=r,s[n]=f;return{sin:s,cos:a,length:e}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3),f=function(r,o,a,s){s===void 0&&(s=new e);var n=0,l=0,i=o*a;return r>0&&r<=i&&(r>o-1?(l=Math.floor(r/o),n=r-l*o):n=r),s.set(n,l)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return Math.abs(e-f)<=r};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(39),f=t(69),r=t(365),o=new f,a=new r,s=new e,n=function(l,i,h){return a.setAxisAngle(i,h),o.fromRotationTranslation(a,s.set(0,0,0)),l.transformMat4(o)};m.exports=n},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addtexture"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="onerror"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="onload"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="ready"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="removetexture"},function(m,C){m.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join(`
`)},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelineafterflush"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelinebeforeflush"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelinebind"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelineboot"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelinedestroy"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelinerebind"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pipelineresize"},function(m,C){m.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join(`
`)},function(m,C){m.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join(`
`)},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={GenerateTexture:t(388),Palettes:t(889)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(390),r=t(391),o=t(5),a=t(392),s=t(393),n=t(394),l=t(10),i=t(395),h=t(3),u=t(14),d=new e({initialize:function(p,g){p===void 0&&(p=0),g===void 0&&(g=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new h,this._tmpVec2A=new h,this._tmpVec2B=new h,typeof p=="object"?this.fromJSON(p):this.startPoint.set(p,g)},add:function(c){return this.curves.push(c),this},circleTo:function(c,p,g){return p===void 0&&(p=!1),this.ellipseTo(c,c,0,360,p,g)},closePath:function(){var c=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);return c.equals(p)||this.curves.push(new a(p,c)),this},cubicBezierTo:function(c,p,g,x,y,T){var E=this.getEndPoint(),w,A,b;return c instanceof h?(w=c,A=p,b=g):(w=new h(g,x),A=new h(y,T),b=new h(c,p)),this.add(new f(E,w,A,b))},quadraticBezierTo:function(c,p,g,x){var y=this.getEndPoint(),T,E;return c instanceof h?(T=c,E=p):(T=new h(g,x),E=new h(c,p)),this.add(new n(y,T,E))},draw:function(c,p){for(var g=0;g<this.curves.length;g++){var x=this.curves[g];!x.active||x.draw(c,p)}return c},ellipseTo:function(c,p,g,x,y,T){var E=new r(0,0,c,p,g,x,y,T),w=this.getEndPoint(this._tmpVec2A),A=E.getStartPoint(this._tmpVec2B);return w.subtract(A),E.x=w.x,E.y=w.y,this.add(E)},fromJSON:function(c){this.curves=[],this.cacheLengths=[],this.startPoint.set(c.x,c.y),this.autoClose=c.autoClose;for(var p=0;p<c.curves.length;p++){var g=c.curves[p];switch(g.type){case"LineCurve":this.add(a.fromJSON(g));break;case"EllipseCurve":this.add(r.fromJSON(g));break;case"SplineCurve":this.add(i.fromJSON(g));break;case"CubicBezierCurve":this.add(f.fromJSON(g));break;case"QuadraticBezierCurve":this.add(n.fromJSON(g));break}}return this},getBounds:function(c,p){c===void 0&&(c=new l),p===void 0&&(p=16),c.x=Number.MAX_VALUE,c.y=Number.MAX_VALUE;for(var g=new l,x=u.MIN_SAFE_INTEGER,y=u.MIN_SAFE_INTEGER,T=0;T<this.curves.length;T++){var E=this.curves[T];!E.active||(E.getBounds(g,p),c.x=Math.min(c.x,g.x),c.y=Math.min(c.y,g.y),x=Math.max(x,g.right),y=Math.max(y,g.bottom))}return c.right=x,c.bottom=y,c},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var c=[],p=0,g=0;g<this.curves.length;g++)p+=this.curves[g].getLength(),c.push(p);return this.cacheLengths=c,c},getEndPoint:function(c){return c===void 0&&(c=new h),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,c):c.copy(this.startPoint),c},getLength:function(){var c=this.getCurveLengths();return c[c.length-1]},getPoint:function(c,p){p===void 0&&(p=new h);for(var g=c*this.getLength(),x=this.getCurveLengths(),y=0;y<x.length;){if(x[y]>=g){var T=x[y]-g,E=this.curves[y],w=E.getLength(),A=w===0?0:1-T/w;return E.getPointAt(A,p)}y++}return null},getPoints:function(c){c===void 0&&(c=12);for(var p=[],g,x=0;x<this.curves.length;x++){var y=this.curves[x];if(!!y.active)for(var T=y.getResolution(c),E=y.getPoints(T),w=0;w<E.length;w++){var A=E[w];g&&g.equals(A)||(p.push(A),g=A)}}return this.autoClose&&p.length>1&&!p[p.length-1].equals(p[0])&&p.push(p[0]),p},getRandomPoint:function(c){return c===void 0&&(c=new h),this.getPoint(Math.random(),c)},getSpacedPoints:function(c){c===void 0&&(c=40);for(var p=[],g=0;g<=c;g++)p.push(this.getPoint(g/c));return this.autoClose&&p.push(p[0]),p},getStartPoint:function(c){return c===void 0&&(c=new h),c.copy(this.startPoint)},getTangent:function(c,p){p===void 0&&(p=new h);for(var g=c*this.getLength(),x=this.getCurveLengths(),y=0;y<x.length;){if(x[y]>=g){var T=x[y]-g,E=this.curves[y],w=E.getLength(),A=w===0?0:1-T/w;return E.getTangentAt(A,p)}y++}return null},lineTo:function(c,p){c instanceof h?this._tmpVec2B.copy(c):this._tmpVec2B.set(c,p);var g=this.getEndPoint(this._tmpVec2A);return this.add(new a([g.x,g.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(c){return c.unshift(this.getEndPoint()),this.add(new i(c))},moveTo:function(c,p){return c instanceof h?this.add(new s(c.x,c.y)):this.add(new s(c,p))},toJSON:function(){for(var c=[],p=0;p<this.curves.length;p++)c.push(this.curves[p].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:c}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});o.register("path",function(c,p){return new d(c,p)}),m.exports=d},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(101),r=t(24),o=t(20),a=new e({Extends:f,initialize:function(n){f.call(this,n,n.sys.events),this.scene=n,this.systems=n.sys,n.sys.events.once(o.BOOT,this.boot,this),n.sys.events.on(o.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){f.prototype.destroy.call(this),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("DataManagerPlugin",a,"data"),m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),f=t(17),r={In:t(900),To:t(901)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(m,C,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(42),f=t(43),r=t(44),o=t(45),a=function(s,n){n===void 0&&(n={});var l=f(s),i=o(s);return n.x=l,n.y=i,n.width=r(s)-l,n.height=e(s)-i,n};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.width*e.originX};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.height*e.originY};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===void 0&&(f="none"),e.style.msTouchAction=f,e.style["ms-touch-action"]=f,e.style["touch-action"]=f,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f="none");var r=["-webkit-","-khtml-","-moz-","-ms-",""];return r.forEach(function(o){e.style[o+"user-select"]=f}),e.style["-webkit-touch-callout"]=f,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(103),f=function(r){r===void 0&&(r=1024);var o=[],a=255,s,n=255,l=0,i=0;for(s=0;s<=a;s++)o.push({r:n,g:s,b:i,color:e(n,s,i)});for(l=255,s=a;s>=0;s--)o.push({r:s,g:l,b:i,color:e(s,l,i)});for(n=0,s=0;s<=a;s++,l--)o.push({r:n,g:l,b:s,color:e(n,l,s)});for(l=0,i=255,s=0;s<=a;s++,i--,n++)o.push({r:n,g:l,b:i,color:e(n,l,i)});if(r===1024)return o;var h=[],u=0,d=1024/r;for(s=0;s<r;s++)h.push(o[Math.floor(u)]),u+=d;return h};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f={r:e>>16&255,g:e>>8&255,b:e&255,a:255};return e>16777215&&(f.a=e>>>24),f};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(38),f=t(399),r=function(o,a,s){var n=s,l=s,i=s;if(a!==0){var h=s<.5?s*(1+a):s+a-s*a,u=2*s-h;n=f(u,h,o+1/3),l=f(u,h,o),i=f(u,h,o-1/3)}var d=new e;return d.setGLTo(n,l,i,1)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(188),f=function(r,o){r===void 0&&(r=1),o===void 0&&(o=1);for(var a=[],s=0;s<=359;s++)a.push(e(s/359,r,o));return a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(135),f=function(a,s,n,l,i,h,u,d){u===void 0&&(u=100),d===void 0&&(d=0);var c=d/u;return{r:e(a,l,c),g:e(s,i,c),b:e(n,h,c)}},r=function(a,s,n,l){return n===void 0&&(n=100),l===void 0&&(l=0),f(a.r,a.g,a.b,s.r,s.g,s.b,n,l)},o=function(a,s,n,l,i,h){return i===void 0&&(i=100),h===void 0&&(h=0),f(a.r,a.g,a.b,s,n,l,i,h)};m.exports={RGBWithRGB:f,ColorWithRGB:o,ColorWithColor:r}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(195),f=t(38),r=function(o,a){return o===void 0&&(o=0),a===void 0&&(a=255),new f(e(o,a),e(o,a),e(o,a))};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(398),f=function(r,o,a,s,n){return s===void 0&&(s=255),n===void 0&&(n="#"),n==="#"?"#"+((1<<24)+(r<<16)+(o<<8)+a).toString(16).slice(1,7):"0x"+e(s)+e(r)+e(o)+e(a)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={EventEmitter:t(919)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),r=t(24),o=new e({Extends:f,initialize:function(){f.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});r.register("EventEmitter",o,"events"),m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),f=t(321),r=t(325),o=t(31),a=t(0),s=t(346),n=t(921),l=t(366),i=t(101),h=t(384),u=t(347),d=t(400),c=t(9),p=t(22),g=t(409),x=t(24),y=t(414),T=t(415),E=t(417),w=t(106),A=t(422),b=t(385),R=t(387),L=t(426);if(!1)var B;var D=new a({initialize:function(X){this.config=new s(X),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new c,this.anims=new f(this),this.textures=new A(this),this.cache=new r(this),this.registry=new i(this),this.input=new g(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=u,this.scale=new T(this,this.config),this.sound=null,this.sound=L.create(this),this.loop=new b(this,this.config.fps),this.plugins=new y(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,d(this.boot.bind(this))},boot:function(){if(!x.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),l(this),n(this),h(this),e(this.canvas,this.config.parent),this.textures.once(w.READY,this.texturesReady,this),this.events.emit(p.BOOT)},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),R(this);var G=this.events;G.on(p.HIDDEN,this.onHidden,this),G.on(p.VISIBLE,this.onVisible,this),G.on(p.BLUR,this.onBlur,this),G.on(p.FOCUS,this.onFocus,this)},step:function(G,X){if(this.pendingDestroy)return this.runDestroy();var H=this.events;H.emit(p.PRE_STEP,G,X),H.emit(p.STEP,G,X),this.scene.update(G,X),H.emit(p.POST_STEP,G,X);var K=this.renderer;K.preRender(),H.emit(p.PRE_RENDER,K,G,X),this.scene.render(K),K.postRender(),H.emit(p.POST_RENDER,K,G,X)},headlessStep:function(G,X){if(this.pendingDestroy)return this.runDestroy();var H=this.events;H.emit(p.PRE_STEP,G,X),H.emit(p.STEP,G,X),this.scene.update(G,X),H.emit(p.POST_STEP,G,X),H.emit(p.PRE_RENDER),H.emit(p.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(G,X){X===void 0&&(X=!1),this.pendingDestroy=!0,this.removeCanvas=G,this.noReturn=X},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(o.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});m.exports=D},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(142),f=function(r){var o=r.config;if(!(!o.parent||!o.domCreateContainer)){var a=document.createElement("div");a.style.cssText=["display: block;","width: "+r.scale.width+"px;","height: "+r.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+o.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),r.domContainer=a,e(a,o.parent)}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="boot"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragend"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragenter"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drag"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragleave"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragover"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameout"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameover"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectdown"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragend"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragenter"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drag"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragleave"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragover"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectmove"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectout"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectover"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerdown"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointermove"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerout"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerover"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerup"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="wheel"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectup"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="gameobjectwheel"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="boot"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="process"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerdown"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerdownoutside"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointermove"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerout"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerover"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerup"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerupoutside"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="wheel"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pointerlockchange"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="preupdate"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="shutdown"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="addfile"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="filecomplete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="filecomplete-"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loaderror"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="load"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="fileprogress"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="postprocess"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="progress"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(!r.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var o=e.source[f];e.add("__BASE",f,0,0,o.width,o.height);for(var a=r.getElementsByTagName("SubTexture"),s,n=0;n<a.length;n++){var l=a[n].attributes,i=l.name.value,h=parseInt(l.x.value,10),u=parseInt(l.y.value,10),d=parseInt(l.width.value,10),c=parseInt(l.height.value,10);if(s=e.add(i,f,h,u,d,c),l.frameX){var p=Math.abs(parseInt(l.frameX.value,10)),g=Math.abs(parseInt(l.frameY.value,10)),x=parseInt(l.frameWidth.value,10),y=parseInt(l.frameHeight.value,10);s.setTrim(d,c,p,g,x,y)}}return e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.source[f];return e.add("__BASE",f,0,0,r.width,r.height),e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.source[f];return e.add("__BASE",f,0,0,r.width,r.height),e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=function(r,o,a){if(!a.frames&&!a.textures){console.warn("Invalid Texture Atlas JSON Array");return}var s=r.source[o];r.add("__BASE",o,0,0,s.width,s.height);for(var n=Array.isArray(a.textures)?a.textures[o].frames:a.frames,l,i=0;i<n.length;i++){var h=n[i];l=r.add(h.filename,o,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&l.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(l.rotated=!0,l.updateUVsInverted());var u=h.anchor||h.pivot;u&&(l.customPivot=!0,l.pivotX=u.x,l.pivotY=u.y),l.customData=e(h)}for(var d in a)d!=="frames"&&(Array.isArray(a[d])?r.customData[d]=a[d].slice(0):r.customData[d]=a[d]);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=function(r,o,a){if(!a.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var s=r.source[o];r.add("__BASE",o,0,0,s.width,s.height);var n=a.frames,l;for(var i in n)if(!!n.hasOwnProperty(i)){var h=n[i];l=r.add(i,o,h.frame.x,h.frame.y,h.frame.w,h.frame.h),h.trimmed&&l.setTrim(h.sourceSize.w,h.sourceSize.h,h.spriteSourceSize.x,h.spriteSourceSize.y,h.spriteSourceSize.w,h.spriteSourceSize.h),h.rotated&&(l.rotated=!0,l.updateUVsInverted());var u=h.anchor||h.pivot;u&&(l.customPivot=!0,l.pivotX=u.x,l.pivotY=u.y),l.customData=e(h)}for(var d in a)d!=="frames"&&(Array.isArray(a[d])?r.customData[d]=a[d].slice(0):r.customData[d]=a[d]);return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(r,o,a,s,n,l,i){var h=e(i,"frameWidth",null),u=e(i,"frameHeight",h);if(h===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var d=r.source[o];r.add("__BASE",o,0,0,d.width,d.height);var c=e(i,"startFrame",0),p=e(i,"endFrame",-1),g=e(i,"margin",0),x=e(i,"spacing",0),y=Math.floor((n-g+x)/(h+x)),T=Math.floor((l-g+x)/(u+x)),E=y*T;E===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",r.key),(c>E||c<-E)&&(c=0),c<0&&(c=E+c),p!==-1&&(E=c+(p+1));for(var w=g,A=g,b=0,R=0,L=0;L<E;L++){b=0,R=0;var B=w+h,D=A+u;B>n&&(b=B-n),D>l&&(R=D-l),r.add(L,o,a+w,s+A,h-b,u-R),w+=h+x,w+h>n&&(w=g,A+=u+x)}return r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(2),f=function(r,o,a){var s=e(a,"frameWidth",null),n=e(a,"frameHeight",s);if(!s)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var l=r.source[0];r.add("__BASE",0,0,0,l.width,l.height);var i=e(a,"startFrame",0),h=e(a,"endFrame",-1),u=e(a,"margin",0),d=e(a,"spacing",0),c=o.cutX,p=o.cutY,g=o.cutWidth,x=o.cutHeight,y=o.realWidth,T=o.realHeight,E=Math.floor((y-u+d)/(s+d)),w=Math.floor((T-u+d)/(n+d)),A=E*w,b=o.x,R=s-b,L=s-(y-g-b),B=o.y,D=n-B,G=n-(T-x-B);(i>A||i<-A)&&(i=0),i<0&&(i=A+i),h!==-1&&(A=i+(h+1));for(var X,H=u,K=u,$=0,N=o.sourceIndex,I=0;I<w;I++){for(var z=I===0,U=I===w-1,W=0;W<E;W++){var V=W===0,Z=W===E-1;if(X=r.add($,N,c+H,p+K,s,n),V||z||Z||U){var J=V?b:0,tt=z?B:0,st=0,at=0;V&&(st+=s-R),Z&&(st+=s-L),z&&(at+=n-D),U&&(at+=n-G);var lt=s-st,ut=n-at;X.cutWidth=lt,X.cutHeight=ut,X.setTrim(s,n,J,tt,lt,ut)}H+=d,V?H+=R:Z?H+=L:H+=s,$++}H=u,K+=d,z?K+=D:U?K+=G:K+=n}return r};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=0,e=function(r,o,a,s){var n=t-s.y-s.height;r.add(a,o,s.x,n,s.width,s.height)},f=function(r,o,a){var s=r.source[o];r.add("__BASE",o,0,0,s.width,s.height),t=s.height;for(var n=a.split(`
`),l=/^[ ]*(- )*(\w+)+[: ]+(.*)/,i="",h="",u={x:0,y:0,width:0,height:0},d=0;d<n.length;d++){var c=n[d].match(l);if(!!c){var p=c[1]==="- ",g=c[2],x=c[3];if(p&&(h!==i&&(e(r,o,h,u),i=h),u={x:0,y:0,width:0,height:0}),g==="name"){h=x;continue}switch(g){case"x":case"y":case"width":case"height":u[g]=parseInt(x,10);break}}}return h!==i&&e(r,o,h,u),r};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="decoded"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="decodedall"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="destroy"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="detune"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="detune"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="mute"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="rate"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="volume"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="looped"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="mute"},function(m,C){/**
 * @author       pi-kei
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pan"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pauseall"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="play"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="rate"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resumeall"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="seek"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stopall"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="unlocked"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="volume"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};e.Shader=t(229),e.Mesh=t(230),e.PointLight=t(150),e.Factories.Shader=t(1184),e.Factories.Mesh=t(1185),e.Factories.PointLight=t(1186),e.Creators.Shader=t(1187),e.Creators.Mesh=t(1188),e.Creators.PointLight=t(1189),e.Light=t(481),e.LightsManager=t(482),e.LightsPlugin=t(1190),m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(110),r=t(24),o=t(75),a=t(20),s=t(79),n=new e({Extends:f,initialize:function(i){f.call(this,i),this.sortChildrenFlag=!1,this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(l){l.displayList&&l.displayList!==this&&l.removeFromDisplayList(),l.displayList||(this.queueDepthSort(),l.displayList=this,l.emit(o.ADDED_TO_SCENE,l,this.scene),this.events.emit(a.ADDED_TO_SCENE,l,this.scene))},removeChildCallback:function(l){this.queueDepthSort(),l.displayList=null,l.emit(o.REMOVED_FROM_SCENE,l,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,l,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(s(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(l,i){return l._depth-i._depth},getChildren:function(){return this.list},shutdown:function(){for(var l=this.list,i=l.length;i--;)l[i].destroy(!0);l.length=0,this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});r.register("DisplayList",n,"displayList"),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(186),f=t(209),r=function(o){var a="";if(!f(o))return a;for(var s=0;s<o.length;s++){for(var n=0;n<o[s].length;n++){var l=o[s][n].toString();l!=="undefined"?a+=e(l,2):a+="?",n<o[s].length-1&&(a+=" |")}if(s<o.length-1){a+=`
`;for(var i=0;i<o[s].length;i++)a+="---",i<o[s].length-1&&(a+="+");a+=`
`}}return a};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.reverse()};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){for(var f=0;f<e.length;f++)e[f].reverse();return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),f=function(r){return e(r,180)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),f=function(r){return e(r,90)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(147),f=function(r){return e(r,-90)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(178),f=t(179),r=function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),s!==0&&(s<0?e(o,Math.abs(s)):f(o,s)),a!==0)for(var n=0;n<o.length;n++){var l=o[n];a<0?e(l,Math.abs(a)):f(l,a)}return o};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a){if(a===void 0&&(a=e),r>0){var s=r-e.length;if(s<=0)return null}if(!Array.isArray(f))return e.indexOf(f)===-1?(e.push(f),o&&o.call(a,f),f):null;for(var n=f.length-1;n>=0;)e.indexOf(f[n])!==-1&&f.splice(n,1),n--;if(n=f.length,n===0)return null;r>0&&n>s&&(f.splice(s),n=s);for(var l=0;l<n;l++){var i=f[l];e.push(i),o&&o.call(a,i)}return f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a,s){if(r===void 0&&(r=0),s===void 0&&(s=e),o>0){var n=o-e.length;if(n<=0)return null}if(!Array.isArray(f))return e.indexOf(f)===-1?(e.splice(r,0,f),a&&a.call(s,f),f):null;for(var l=f.length-1;l>=0;)e.indexOf(f[l])!==-1&&f.pop(),l--;if(l=f.length,l===0)return null;o>0&&l>n&&(f.splice(n),l=n);for(var i=l-1;i>=0;i--){var h=f[i];e.splice(r,0,h),a&&a.call(s,h)}return f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.indexOf(f);return r!==-1&&r<e.length&&(e.splice(r,1),e.push(f)),f};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(r,o,a,s,n){s===void 0&&(s=0),n===void 0&&(n=r.length);var l=0;if(e(r,s,n))for(var i=s;i<n;i++){var h=r[i];h[o]===a&&l++}return l};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o,a=[null];for(o=3;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<e.length;o++)a[0]=e[o],f.apply(r,a);return e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(r,o,a,s,n){if(s===void 0&&(s=0),n===void 0&&(n=r.length),e(r,s,n)){var l,i=[null];for(l=5;l<arguments.length;l++)i.push(arguments[l]);for(l=s;l<n;l++)i[0]=r[l],o.apply(a,i)}return r};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.indexOf(f);if(r>0){var o=e[r-1],a=e.indexOf(o);e[r]=o,e[a]=f}return e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=e.indexOf(f);if(o===-1||r<0||r>=e.length)throw new Error("Supplied index out of bounds");return o!==r&&(e.splice(o,1),e.splice(r,0,f)),f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.indexOf(f);if(r!==-1&&r<e.length-1){var o=e[r+1],a=e.indexOf(o);e[r]=o,e[a]=f}return e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(f===r)return e;var o=e.indexOf(f),a=e.indexOf(r);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o>a||(e.splice(o,1),a===e.length-1?e.push(f):e.splice(a,0,f)),e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(f===r)return e;var o=e.indexOf(f),a=e.indexOf(r);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o<a||(e.splice(o,1),a===0?e.unshift(f):e.splice(a,0,f)),e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(363),f=function(r,o,a){r===void 0&&(r=0),o===void 0&&(o=null),a===void 0&&(a=1),o===null&&(o=r,r=0);for(var s=[],n=Math.max(e((o-r)/(a||1)),0),l=0;l<n;l++)s.push(r),r+=a;return s};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),f=function(r,o,a,s){if(s===void 0&&(s=r),o<0||o>r.length-1)throw new Error("Index out of bounds");var n=e(r,o);return a&&a.call(s,n),n};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(r,o,a,s,n){if(o===void 0&&(o=0),a===void 0&&(a=r.length),n===void 0&&(n=r),e(r,o,a)){var l=a-o,i=r.splice(o,l);if(s)for(var h=0;h<i.length;h++){var u=i[h];s.call(n,u)}return i}else return[]};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(74),f=function(r,o,a){o===void 0&&(o=0),a===void 0&&(a=r.length);var s=o+Math.floor(Math.random()*a);return e(r,s)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=e.indexOf(f),a=e.indexOf(r);return o!==-1&&a===-1?(e[o]=r,!0):!1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.indexOf(f);return r!==-1&&r>0&&(e.splice(r,1),e.unshift(f)),f};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(78),f=function(r,o,a,s,n){if(s===void 0&&(s=0),n===void 0&&(n=r.length),e(r,s,n))for(var l=s;l<n;l++){var i=r[l];i.hasOwnProperty(o)&&(i[o]=a)}return r};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){if(f===r)return e;var o=e.indexOf(f),a=e.indexOf(r);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return e[o]=r,e[a]=f,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(211),r=t(24),o=t(20),a=new e({Extends:f,initialize:function(n){f.call(this),this.checkQueue=!0,this.scene=n,this.systems=n.sys,n.sys.events.once(o.BOOT,this.boot,this),n.sys.events.on(o.START,this.start,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var s=this.systems.events;s.on(o.PRE_UPDATE,this.update,this),s.on(o.UPDATE,this.sceneUpdate,this),s.once(o.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(s,n){for(var l=this._active,i=l.length,h=0;h<i;h++){var u=l[h];u.active&&u.preUpdate.call(u,s,n)}},shutdown:function(){for(var s=this._active.length;s--;)this._active[s].destroy(!0);for(s=this._pending.length;s--;)this._pending[s].destroy(!0);for(s=this._destroy.length;s--;)this._destroy[s].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var n=this.systems.events;n.off(o.PRE_UPDATE,this.update,this),n.off(o.UPDATE,this.sceneUpdate,this),n.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});r.register("UpdateList",a,"updateList"),m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="add"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="remove"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){if(r===void 0&&(r=!1),o===void 0)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},o;var a=e.text,s=a.length,n=e.maxWidth,l=e.wordWrapCharCode,i=Number.MAX_VALUE,h=Number.MAX_VALUE,u=0,d=0,c=e.fontData.chars,p=e.fontData.lineHeight,g=e.letterSpacing,x=0,y=0,T=0,E=null,w=e._align,A=0,b=0,R=e.fontSize/e.fontData.size,L=R*e.scaleX,B=R*e.scaleY,D=null,G=0,X=[],H=Number.MAX_VALUE,K=0,$=0,N=0,I,z=[],U=[],W=null;if(n>0){for(I=0;I<s;I++){if(T=a.charCodeAt(I),T===10){W!==null&&(z.push({word:W.word,i:W.i,x:W.x*L,y:W.y*B,w:W.w*L,h:W.h*B,cr:!0}),W=null),x=0,y+=p,D=null;continue}if(E=c[T],!!E){if(D!==null)var V=E.kerning[G];T===l?W!==null&&(z.push({word:W.word,i:W.i,x:W.x*L,y:W.y*B,w:W.w*L,h:W.h*B,cr:!1}),W=null):(W===null&&(W={word:"",i:I,x,y,w:0,h:p,cr:!1}),W.word=W.word.concat(a[I]),W.w+=E.xOffset+E.xAdvance+(V!==void 0?V:0)),x+=E.xAdvance+g,D=E,G=T}}W!==null&&z.push({word:W.word,i:W.i,x:W.x*L,y:W.y*B,w:W.w*L,h:W.h*B,cr:!1}),x=0,y=0,D=null,G=0;var Z,J=0,tt=[];for(I=0;I<z.length;I++){var st=z[I],at=st.x,lt=st.x+st.w;if(Z){var ut=at-(Z.x+Z.w);J=at-(ut+Z.w),Z=null}var mt=at-J,dt=lt-J;mt>n||dt>n?(tt.push(st.i-1),st.cr?(tt.push(st.i+st.word.length),J=0,Z=null):Z=st):st.cr&&(tt.push(st.i+st.word.length),J=0,Z=null)}var xt=function($t,Wt,de){return $t.substr(0,Wt)+de+$t.substr(Wt+1)};for(I=tt.length-1;I>=0;I--)a=xt(a,tt[I],`
`);o.wrappedText=a,s=a.length,z=[],W=null}var Tt=0;for(I=0;I<s;I++){if(T=a.charCodeAt(I),T===10){W!==null&&(z.push({word:W.word,i:W.i,x:W.x*L,y:W.y*B,w:W.w*L,h:W.h*B}),W=null),x=0,y+=p,D=null,X[$]=N,N>K&&(K=N),N<H&&(H=N),$++,N=0;continue}if(E=c[T],!!E){if(A=x,b=y,D!==null){var Ct=E.kerning[G];A+=Ct!==void 0?Ct:0}i>A&&(i=A),h>b&&(h=b);var Et=A+E.xAdvance,vt=b+p;u<Et&&(u=Et),d<vt&&(d=vt);var It=E.xOffset+E.xAdvance+(Ct!==void 0?Ct:0);T===l?W!==null&&(z.push({word:W.word,i:W.i,x:W.x*L,y:W.y*B,w:W.w*L,h:W.h*B}),W=null):(W===null&&(W={word:"",i:Tt,x,y,w:0,h:p}),W.word=W.word.concat(a[I]),W.w+=It),U.push({i:Tt,char:a[I],code:T,x:(E.xOffset+x)*R,y:(E.yOffset+y)*R,w:E.width*R,h:E.height*R,t:y*R,r:Et*R,b:p*R,line:$,glyph:E}),x+=E.xAdvance+g,D=E,G=T,N=Et*R,Tt++}}if(W!==null&&z.push({word:W.word,i:W.i,x:W.x*L,y:W.y*B,w:W.w*L,h:W.h*B}),X[$]=N,N>K&&(K=N),N<H&&(H=N),w>0)for(var Pt=0;Pt<U.length;Pt++){var Rt=U[Pt];if(w===1){var Jt=(K-X[Rt.line])/2;Rt.x+=Jt,Rt.r+=Jt}else if(w===2){var qt=K-X[Rt.line];Rt.x+=qt,Rt.r+=qt}}var zt=o.local,Nt=o.global,Vt=o.lines;return zt.x=i*R,zt.y=h*R,zt.width=u*R,zt.height=d*R,Nt.x=e.x-e._displayOriginX+i*L,Nt.y=e.y-e._displayOriginY+h*B,Nt.width=u*L,Nt.height=d*B,Vt.shortest=H,Vt.longest=K,Vt.lengths=X,f&&(zt.x=Math.ceil(zt.x),zt.y=Math.ceil(zt.y),zt.width=Math.ceil(zt.width),zt.height=Math.ceil(zt.height),Nt.x=Math.ceil(Nt.x),Nt.y=Math.ceil(Nt.y),Nt.width=Math.ceil(Nt.width),Nt.height=Math.ceil(Nt.height),Vt.shortest=Math.ceil(H),Vt.longest=Math.ceil(K)),r&&(e._displayOriginX=e.originX*zt.width,e._displayOriginY=e.originY*zt.height,Nt.x=e.x-e._displayOriginX*e.scaleX,Nt.y=e.y-e._displayOriginY*e.scaleY,f&&(Nt.x=Math.ceil(Nt.x),Nt.y=Math.ceil(Nt.y))),o.words=z,o.characters=U,o.lines.height=p,o.scale=R,o.scaleX=e.scaleX,o.scaleY=e.scaleY,o};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(212),f=function(r,o,a,s,n,l,i){var h=r.sys.textures.get(a),u=h.get(s),d=r.sys.cache.xml.get(n);if(u&&d){var c=e(d,u,l,i,h);return r.sys.cache.bitmapFont.add(o,{data:c,texture:a,frame:s,fromAtlas:!0}),!0}else return!1};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1046),f=t(1048),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1047),f=t(19),r=t(12),o=function(a,s,n,l){var i=s._text,h=i.length;if(h!==0){n.addToRenderList(s);var u=a.pipelines.set(s.pipeline,s),d=f(s,n,l).calc,c=n.roundPixels,p=n.alpha,g=s.charColors,x=s.tintFill,y=r.getTintAppendFloatAlpha,T=y(s.tintTopLeft,p*s._alphaTL),E=y(s.tintTopRight,p*s._alphaTR),w=y(s.tintBottomLeft,p*s._alphaBL),A=y(s.tintBottomRight,p*s._alphaBR),b=s.frame.glTexture,R=u.setGameObject(s),L=s.getTextBounds(!1),B,D,G,X=L.characters,H=s.dropShadowX,K=s.dropShadowY,$=H!==0||K!==0;if(a.pipelines.preBatch(s),$){var N=s.dropShadowColor,I=s.dropShadowAlpha,z=y(N,p*I*s._alphaTL),U=y(N,p*I*s._alphaTR),W=y(N,p*I*s._alphaBL),V=y(N,p*I*s._alphaBR);for(B=0;B<X.length;B++)D=X[B],G=D.glyph,!(D.code===32||G.width===0||G.height===0)&&e(u,s,D,G,H,K,d,c,z,U,W,V,1,b,R)}for(B=0;B<X.length;B++)if(D=X[B],G=D.glyph,!(D.code===32||G.width===0||G.height===0))if(g[D.i]){var Z=g[D.i],J=Z.tintEffect,tt=y(Z.tintTL,p*s._alphaTL),st=y(Z.tintTR,p*s._alphaTR),at=y(Z.tintBL,p*s._alphaBL),lt=y(Z.tintBR,p*s._alphaBR);e(u,s,D,G,0,0,d,c,tt,st,at,lt,J,b,R)}else e(u,s,D,G,0,0,d,c,T,E,w,A,x,b,R);a.pipelines.postBatch(s)}};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a,s,n,l,i,h,u,d,c,p,g){var x=r.x-f.displayOriginX+a,y=r.y-f.displayOriginY+s,T=x+r.w,E=y+r.h,w=n.getXRound(x,y,l),A=n.getYRound(x,y,l),b=n.getXRound(x,E,l),R=n.getYRound(x,E,l),L=n.getXRound(T,E,l),B=n.getYRound(T,E,l),D=n.getXRound(T,y,l),G=n.getYRound(T,y,l);e.batchQuad(f,w,A,b,R,L,B,D,G,o.u0,o.v0,o.u1,o.v1,i,h,u,d,c,p,g)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(30),f=function(r,o,a,s){var n=o._text,l=n.length,i=r.currentContext;if(!(l===0||!e(r,i,o,a,s))){a.addToRenderList(o);var h=o.fromAtlas?o.frame:o.texture.frames.__BASE,u=o.fontData.chars,d=o.fontData.lineHeight,c=o._letterSpacing,p=0,g=0,x=0,y=null,T=0,E=0,w=0,A=0,b=0,R=0,L=null,B=0,D=h.source.image,G=h.cutX,X=h.cutY,H=o._fontSize/o.fontData.size,K=o._align,$=0,N=0,I=o.getTextBounds(!1);o.maxWidth>0&&(n=I.wrappedText,l=n.length);var z=o._bounds.lines;K===1?N=(z.longest-z.lengths[0])/2:K===2&&(N=z.longest-z.lengths[0]),i.translate(-o.displayOriginX,-o.displayOriginY);for(var U=a.roundPixels,W=0;W<l;W++){if(x=n.charCodeAt(W),x===10){$++,K===1?N=(z.longest-z.lengths[$])/2:K===2&&(N=z.longest-z.lengths[$]),p=0,g+=d,L=null;continue}if(y=u[x],!!y){if(T=G+y.x,E=X+y.y,w=y.width,A=y.height,b=y.xOffset+p,R=y.yOffset+g,L!==null){var V=y.kerning[B];b+=V!==void 0?V:0}b*=H,R*=H,b+=N,p+=y.xAdvance+c,L=y,B=x,!(w===0||A===0||x===32)&&(U&&(b=Math.round(b),R=Math.round(R)),i.save(),i.translate(b,R),i.scale(H,H),i.drawImage(D,T,E,w,A,0,0,w,A),i.restore())}}i.restore()}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1050),f=t(1051),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=t(12),r=new e,o=function(a,s,n,l){var i=s.getRenderList();if(i.length!==0){var h=n.alpha*s.alpha;if(h!==0){n.addToRenderList(s);var u=a.pipelines.set(this.pipeline,s),d=n.scrollX*s.scrollFactorX,c=n.scrollY*s.scrollFactorY,p=r.copyFrom(n.matrix);l&&(p.multiplyWithOffset(l,-d,-c),d=0,c=0);var g=s.x-d,x=s.y-c,y=-1,T=!1,E=n.roundPixels;a.pipelines.preBatch(s);for(var w=0;w<i.length;w++){var A=i[w],b=A.frame,R=A.alpha*h;if(R!==0){var L=b.width,B=b.height,D=g+A.x+b.x,G=x+A.y+b.y;A.flipX&&(L*=-1,D+=b.width),A.flipY&&(B*=-1,G+=b.height);var X=D+L,H=G+B,K=p.getX(D,G),$=p.getY(D,G),N=p.getX(X,H),I=p.getY(X,H),z=f.getTintAppendFloatAlpha(A.tint,R);if(b.sourceIndex!==y){var U=u.setGameObject(s,b);y=b.sourceIndex}E&&(K=Math.round(K),$=Math.round($),N=Math.round(N),I=Math.round(I)),u.batchQuad(s,K,$,K,I,N,I,N,$,b.u0,b.v0,b.u1,b.v1,z,z,z,z,T,b.glTexture,U)&&(y=-1)}}a.pipelines.postBatch(s)}}};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a=f.getRenderList();if(a.length!==0){var s=e.currentContext,n=r.alpha*f.alpha;if(n!==0){r.addToRenderList(f),s.globalCompositeOperation=e.blendModes[f.blendMode],s.imageSmoothingEnabled=!(!e.antialias||f.frame.source.scaleMode);var l=f.x-r.scrollX*f.scrollFactorX,i=f.y-r.scrollY*f.scrollFactorY;s.save(),o&&o.copyToContext(s);for(var h=r.roundPixels,u=0;u<a.length;u++){var d=a[u],c=d.flipX||d.flipY,p=d.frame,g=p.canvasData,x=p.x,y=p.y,T=1,E=1,w=d.alpha*n;w!==0&&(s.globalAlpha=w,c?(d.flipX&&(T=-1,x-=g.width),d.flipY&&(E=-1,y-=g.height),s.save(),s.translate(d.x+l,d.y+i),s.scale(T,E),s.drawImage(p.source.image,g.x,g.y,g.width,g.height,x,y,g.width,g.height),s.restore()):(h&&(x=Math.round(x),y=Math.round(y)),s.drawImage(p.source.image,g.x,g.y,g.width,g.height,x+d.x+l,y+d.y+i,g.width,g.height)))}s.restore()}}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1053),f=t(1054),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r.addToRenderList(f);var a=f.list,s=a.length;if(s!==0){var n=f.localTransform;o?(n.loadIdentity(),n.multiply(o),n.translate(f.x,f.y),n.rotate(f.rotation),n.scale(f.scaleX,f.scaleY)):n.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY),e.pipelines.preBatch(f);var l=f.blendMode!==-1;l||e.setBlendMode(0);for(var i=f.alpha,h=f.scrollFactorX,u=f.scrollFactorY,d=0;d<s;d++){var c=a[d];if(!!c.willRender(r)){var p,g,x,y;if(c.alphaTopLeft!==void 0)p=c.alphaTopLeft,g=c.alphaTopRight,x=c.alphaBottomLeft,y=c.alphaBottomRight;else{var T=c.alpha;p=T,g=T,x=T,y=T}var E=c.scrollFactorX,w=c.scrollFactorY;!l&&c.blendMode!==e.currentBlendMode&&e.setBlendMode(c.blendMode);var A=c.mask;A&&A.preRenderWebGL(e,c,r);var b=c.type;b!==e.currentType&&(e.newType=!0,e.currentType=b),e.nextTypeMatch=d<s-1?a[d+1].type===e.currentType:!1,c.setScrollFactor(E*h,w*u),c.setAlpha(p*i,g*i,x*i,y*i),c.renderWebGL(e,c,r,n),c.setAlpha(p,g,x,y),c.setScrollFactor(E,w),A&&A.postRenderWebGL(e,r),e.newType=!1}}e.pipelines.postBatch(f)}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r.addToRenderList(f);var a=f.list;if(a.length!==0){var s=f.localTransform;o?(s.loadIdentity(),s.multiply(o),s.translate(f.x,f.y),s.rotate(f.rotation),s.scale(f.scaleX,f.scaleY)):s.applyITRS(f.x,f.y,f.rotation,f.scaleX,f.scaleY);var n=f.blendMode!==-1;n||e.setBlendMode(0);var l=f._alpha,i=f.scrollFactorX,h=f.scrollFactorY;f.mask&&f.mask.preRenderCanvas(e,null,r);for(var u=0;u<a.length;u++){var d=a[u];if(!!d.willRender(r)){var c=d.alpha,p=d.scrollFactorX,g=d.scrollFactorY;!n&&d.blendMode!==e.currentBlendMode&&e.setBlendMode(d.blendMode),d.setScrollFactor(p*i,g*h),d.setAlpha(c*l),d.renderCanvas(e,d,r,s),d.setAlpha(c),d.setScrollFactor(p,g)}}f.mask&&f.mask.postRenderCanvas(e)}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(443),f=t(443),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1058),f=t(1059),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(25),r=t(12),o=new f,a=function(s,n,l,i){var h=n.text,u=h.length;if(u!==0){l.addToRenderList(n);var d=s.pipelines.set(n.pipeline,n),c=e(n,l,i),p=c.sprite,g=c.calc,x=o,y=n.cropWidth>0||n.cropHeight>0;y&&(d.flush(),s.pushScissor(g.tx,g.ty,n.cropWidth*g.scaleX,n.cropHeight*g.scaleY));var T=n.frame,E=T.glTexture,w=n.tintFill,A=r.getTintAppendFloatAlpha(n.tintTopLeft,l.alpha*n._alphaTL),b=r.getTintAppendFloatAlpha(n.tintTopRight,l.alpha*n._alphaTR),R=r.getTintAppendFloatAlpha(n.tintBottomLeft,l.alpha*n._alphaBL),L=r.getTintAppendFloatAlpha(n.tintBottomRight,l.alpha*n._alphaBR),B=d.setGameObject(n),D=0,G=0,X=0,H=0,K=n.letterSpacing,$,N=0,I=0,z,U=n.scrollX,W=n.scrollY,V=n.fontData,Z=V.chars,J=V.lineHeight,tt=n.fontSize/V.size,st=0,at=n._align,lt=0,ut=0,mt=n.getTextBounds(!1);n.maxWidth>0&&(h=mt.wrappedText,u=h.length);var dt=n._bounds.lines;at===1?ut=(dt.longest-dt.lengths[0])/2:at===2&&(ut=dt.longest-dt.lengths[0]);var xt=l.roundPixels,Tt=n.displayCallback,Ct=n.callbackData;s.pipelines.preBatch(n);for(var Et=0;Et<u;Et++){if(X=h.charCodeAt(Et),X===10){lt++,at===1?ut=(dt.longest-dt.lengths[lt])/2:at===2&&(ut=dt.longest-dt.lengths[lt]),D=0,G+=J,z=null;continue}if($=Z[X],!!$){N=$.width,I=$.height;var vt=$.xOffset+D-U,It=$.yOffset+G-W;if(z!==null){var Pt=$.kerning[H];vt+=Pt!==void 0?Pt:0}if(D+=$.xAdvance+K,z=$,H=X,!(N===0||I===0||X===32)){if(tt=n.fontSize/n.fontData.size,st=0,Tt){Ct.color=0,Ct.tint.topLeft=A,Ct.tint.topRight=b,Ct.tint.bottomLeft=R,Ct.tint.bottomRight=L,Ct.index=Et,Ct.charCode=X,Ct.x=vt,Ct.y=It,Ct.scale=tt,Ct.rotation=st,Ct.data=$.data;var Rt=Tt(Ct);vt=Rt.x,It=Rt.y,tt=Rt.scale,st=Rt.rotation,Rt.color?(A=Rt.color,b=Rt.color,R=Rt.color,L=Rt.color):(A=Rt.tint.topLeft,b=Rt.tint.topRight,R=Rt.tint.bottomLeft,L=Rt.tint.bottomRight),A=r.getTintAppendFloatAlpha(A,l.alpha*n._alphaTL),b=r.getTintAppendFloatAlpha(b,l.alpha*n._alphaTR),R=r.getTintAppendFloatAlpha(R,l.alpha*n._alphaBL),L=r.getTintAppendFloatAlpha(L,l.alpha*n._alphaBR)}vt*=tt,It*=tt,vt-=n.displayOriginX,It-=n.displayOriginY,vt+=ut,x.applyITRS(vt,It,st,tt,tt),g.multiply(x,p);var Jt=$.u0,qt=$.v0,zt=$.u1,Nt=$.v1,Vt=N,$t=I,Wt=p.e,de=p.f,Ce=$t*p.c+p.e,ve=$t*p.d+p.f,pe=Vt*p.a+$t*p.c+p.e,me=Vt*p.b+$t*p.d+p.f,Oe=Vt*p.a+p.e,q=Vt*p.b+p.f;xt&&(Wt=Math.round(Wt),de=Math.round(de),Ce=Math.round(Ce),ve=Math.round(ve),pe=Math.round(pe),me=Math.round(me),Oe=Math.round(Oe),q=Math.round(q)),d.batchQuad(n,Wt,de,Ce,ve,pe,me,Oe,q,Jt,qt,zt,Nt,A,b,R,L,w,E,B)}}}y&&(d.flush(),s.popScissor()),s.pipelines.postBatch(n)}};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(30),f=function(r,o,a,s){var n=o._text,l=n.length,i=r.currentContext;if(!(l===0||!e(r,i,o,a,s))){a.addToRenderList(o);var h=o.fromAtlas?o.frame:o.texture.frames.__BASE,u=o.displayCallback,d=o.callbackData,c=o.fontData.chars,p=o.fontData.lineHeight,g=o._letterSpacing,x=0,y=0,T=0,E=null,w=0,A=0,b=0,R=0,L=0,B=0,D=null,G=0,X=o.frame.source.image,H=h.cutX,K=h.cutY,$=0,N=0,I=o._fontSize/o.fontData.size,z=o._align,U=0,W=0;o.getTextBounds(!1);var V=o._bounds.lines;z===1?W=(V.longest-V.lengths[0])/2:z===2&&(W=V.longest-V.lengths[0]),i.translate(-o.displayOriginX,-o.displayOriginY);var Z=a.roundPixels;o.cropWidth>0&&o.cropHeight>0&&(i.beginPath(),i.rect(0,0,o.cropWidth,o.cropHeight),i.clip());for(var J=0;J<l;J++){if(N=I,$=0,T=n.charCodeAt(J),T===10){U++,z===1?W=(V.longest-V.lengths[U])/2:z===2&&(W=V.longest-V.lengths[U]),x=0,y+=p,D=null;continue}if(E=c[T],!!E){if(w=H+E.x,A=K+E.y,b=E.width,R=E.height,L=E.xOffset+x-o.scrollX,B=E.yOffset+y-o.scrollY,D!==null){var tt=E.kerning[G];L+=tt!==void 0?tt:0}if(u){d.index=J,d.charCode=T,d.x=L,d.y=B,d.scale=N,d.rotation=$,d.data=E.data;var st=u(d);L=st.x,B=st.y,N=st.scale,$=st.rotation}L*=N,B*=N,L+=W,x+=E.xAdvance+g,D=E,G=T,!(b===0||R===0||T===32)&&(Z&&(L=Math.round(L),B=Math.round(B)),i.save(),i.translate(L,B),i.rotate($),i.scale(N,N),i.drawImage(X,w,A,b,R,0,0,b,R),i.restore())}}i.restore()}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1061),f=t(1062),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(r,o,a,s){r.pipelines.clear();var n=e(o,a,s).calc;o.render.call(o,r,a,n),r.pipelines.rebind()};m.exports=f},function(m,C){},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1064),f=t(448),f=t(448),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(217),f=t(19),r=t(25),o=t(12),a=function(h,u,d){this.x=h,this.y=u,this.width=d},s=function(h,u,d){this.points=[],this.pointsLength=1,this.points[0]=new a(h,u,d)},n=[],l=new r,i=function(h,u,d,c){if(u.commandBuffer.length!==0){d.addToRenderList(u);var p=h.pipelines.set(u.pipeline,u);h.pipelines.preBatch(u);for(var g=f(u,d,c).calc,x=l.loadIdentity(),y=u.commandBuffer,T=d.alpha*u.alpha,E=1,w=p.fillTint,A=p.strokeTint,b=0,R=0,L=0,B=.01,D=Math.PI*2,G,X=[],H=0,K=!0,$=null,N=o.getTintAppendFloatAlpha,I=0;I<y.length;I++)switch(G=y[I],G){case e.BEGIN_PATH:{X.length=0,$=null,K=!0;break}case e.CLOSE_PATH:{K=!1,$&&$.points.length&&$.points.push($.points[0]);break}case e.FILL_PATH:{for(H=0;H<X.length;H++)p.batchFillPath(X[H].points,x,g);break}case e.STROKE_PATH:{for(H=0;H<X.length;H++)p.batchStrokePath(X[H].points,E,K,x,g);break}case e.LINE_STYLE:{E=y[++I];var z=y[++I],U=y[++I]*T,W=N(z,U);A.TL=W,A.TR=W,A.BL=W,A.BR=W;break}case e.FILL_STYLE:{var V=y[++I],Z=y[++I]*T,J=N(V,Z);w.TL=J,w.TR=J,w.BL=J,w.BR=J;break}case e.GRADIENT_FILL_STYLE:{var tt=y[++I]*T,st=y[++I]*T,at=y[++I]*T,lt=y[++I]*T;w.TL=N(y[++I],tt),w.TR=N(y[++I],st),w.BL=N(y[++I],at),w.BR=N(y[++I],lt);break}case e.GRADIENT_LINE_STYLE:{E=y[++I];var ut=y[++I]*T;A.TL=N(y[++I],ut),A.TR=N(y[++I],ut),A.BL=N(y[++I],ut),A.BR=N(y[++I],ut);break}case e.ARC:{var mt=0,dt=y[++I],xt=y[++I],Tt=y[++I],Ct=y[++I],Et=y[++I],vt=y[++I],It=y[++I];for(Et-=Ct,vt?Et<-D?Et=-D:Et>0&&(Et=-D+Et%D):Et>D?Et=D:Et<0&&(Et=D+Et%D),$===null&&($=new s(dt+Math.cos(Ct)*Tt,xt+Math.sin(Ct)*Tt,E),X.push($),mt+=B);mt<1+It;)L=Et*mt+Ct,b=dt+Math.cos(L)*Tt,R=xt+Math.sin(L)*Tt,$.points.push(new a(b,R,E)),mt+=B;L=Et+Ct,b=dt+Math.cos(L)*Tt,R=xt+Math.sin(L)*Tt,$.points.push(new a(b,R,E));break}case e.FILL_RECT:{p.batchFillRect(y[++I],y[++I],y[++I],y[++I],x,g);break}case e.FILL_TRIANGLE:{p.batchFillTriangle(y[++I],y[++I],y[++I],y[++I],y[++I],y[++I],x,g);break}case e.STROKE_TRIANGLE:{p.batchStrokeTriangle(y[++I],y[++I],y[++I],y[++I],y[++I],y[++I],E,x,g);break}case e.LINE_TO:{$!==null?$.points.push(new a(y[++I],y[++I],E)):($=new s(y[++I],y[++I],E),X.push($));break}case e.MOVE_TO:{$=new s(y[++I],y[++I],E),X.push($);break}case e.SAVE:{n.push(x.copyToArray());break}case e.RESTORE:{x.copyFromArray(n.pop());break}case e.TRANSLATE:{dt=y[++I],xt=y[++I],x.translate(dt,xt);break}case e.SCALE:{dt=y[++I],xt=y[++I],x.scale(dt,xt);break}case e.ROTATE:{x.rotate(y[++I]);break}}h.pipelines.postBatch(u)}};m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1066),f=t(1067),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r.addToRenderList(f),f.pipeline.batchSprite(f,r,o)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r.addToRenderList(f),e.batchSprite(f,f.frame,r,o)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1069),f=t(1070),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r.addToRenderList(f),this.pipeline.batchSprite(f,r,o)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r.addToRenderList(f),e.batchSprite(f,f.frame,r,o)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1072),f=t(1073),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=f.list,a=o.length;if(a!==0){f.depthSort(),e.pipelines.preBatch(f);var s=f.blendMode!==-1;s||e.setBlendMode(0);for(var n=f.alpha,l=0;l<a;l++){var i=o[l];if(!!i.willRender(r)){var h,u,d,c;if(i.alphaTopLeft!==void 0)h=i.alphaTopLeft,u=i.alphaTopRight,d=i.alphaBottomLeft,c=i.alphaBottomRight;else{var p=i.alpha;h=p,u=p,d=p,c=p}!s&&i.blendMode!==e.currentBlendMode&&e.setBlendMode(i.blendMode);var g=i.mask;g&&g.preRenderWebGL(e,i,r);var x=i.type;x!==e.currentType&&(e.newType=!0,e.currentType=x),e.nextTypeMatch=l<a-1?o[l+1].type===e.currentType:!1,i.setAlpha(h*n,u*n,d*n,c*n),i.renderWebGL(e,i,r),i.setAlpha(h,u,d,c),g&&g.postRenderWebGL(e,r),e.newType=!1}}e.pipelines.postBatch(f)}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=f.list;if(o.length!==0){f.depthSort();var a=f.blendMode!==-1;a||e.setBlendMode(0);var s=f._alpha;f.mask&&f.mask.preRenderCanvas(e,null,r);for(var n=0;n<o.length;n++){var l=o[n];if(!!l.willRender(r)){var i=l.alpha;!a&&l.blendMode!==e.currentBlendMode&&e.setBlendMode(l.blendMode),l.setAlpha(i*s),l.renderCanvas(e,l,r),l.setAlpha(i)}}f.mask&&f.mask.postRenderCanvas(e)}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1076),f=t(1077),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=t(12),r=new e,o=new e,a=new e,s=new e,n=function(l,i,h,u){var d=i.emitters.list,c=d.length;if(c!==0){var p=l.pipelines.set(i.pipeline),g=r,x=o,y=a,T=s;u?(T.loadIdentity(),T.multiply(u),T.translate(i.x,i.y),T.rotate(i.rotation),T.scale(i.scaleX,i.scaleY)):T.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var E=h.roundPixels,w=i.defaultFrame.glTexture,A=f.getTintAppendFloatAlpha,b=p.setGameObject(i,i.defaultFrame);l.pipelines.preBatch(i);for(var R=0;R<c;R++){var L=d[R],B=L.alive,D=B.length;if(!(!L.visible||D===0)){h.addToRenderList(L);var G=L.scrollFactorX,X=L.scrollFactorY;l.setBlendMode(L.blendMode),L.mask&&(L.mask.preRenderWebGL(l,L,h),l.pipelines.set(i.pipeline));for(var H=0,K=0;K<D;K++){var $=B[K],N=$.alpha*h.alpha;if(!(N<=0)){y.applyITRS($.x,$.y,$.rotation,$.scaleX,$.scaleY),g.copyFrom(h.matrix),g.multiplyWithOffset(T,-h.scrollX*G,-h.scrollY*X),y.e=$.x,y.f=$.y,g.multiply(y,x);var I=$.frame,z=-I.halfWidth,U=-I.halfHeight,W=z+I.width,V=U+I.height,Z=x.getXRound(z,U,E),J=x.getYRound(z,U,E),tt=x.getXRound(z,V,E),st=x.getYRound(z,V,E),at=x.getXRound(W,V,E),lt=x.getYRound(W,V,E),ut=x.getXRound(W,U,E),mt=x.getYRound(W,U,E),dt=A($.tint,N);p.batchQuad(L,Z,J,tt,st,at,lt,ut,mt,I.u0,I.v0,I.u1,I.v1,dt,dt,dt,dt,H,w,b)}}L.mask&&L.mask.postRenderWebGL(l,h)}}l.pipelines.postBatch(i)}};m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=new e,r=new e,o=new e,a=new e,s=function(n,l,i,h){var u=l.emitters.list,d=u.length;if(d!==0){var c=f.copyFrom(i.matrix),p=r,g=o,x=a;h?(x.loadIdentity(),x.multiply(h),x.translate(l.x,l.y),x.rotate(l.rotation),x.scale(l.scaleX,l.scaleY)):x.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);for(var y=n.currentContext,T=i.roundPixels,E=0;E<d;E++){var w=u[E],A=w.alive,b=A.length;if(!(!w.visible||b===0)){i.addToRenderList(w);var R=w.scrollFactorX,L=w.scrollFactorY;y.save(),y.globalCompositeOperation=n.blendModes[w.blendMode];for(var B=0;B<b;B++){var D=A[B],G=D.alpha*i.alpha;if(!(G<=0)){g.applyITRS(D.x,D.y,D.rotation,D.scaleX,D.scaleY),c.copyFrom(i.matrix),c.multiplyWithOffset(x,-i.scrollX*R,-i.scrollY*L),g.e=D.x,g.f=D.y,c.multiply(g,p);var X=D.frame,H=X.canvasData,K=-X.halfWidth,$=-X.halfHeight;y.globalAlpha=G,y.save(),p.setToContext(y),T&&(K=Math.round(K),$=Math.round($)),y.imageSmoothingEnabled=!(!n.antialias||X.source.scaleMode),y.drawImage(X.source.image,H.x,H.y,H.width,H.height,K,$,H.width,H.height),y.restore()}}y.restore()}}}};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1080),f=t(1081),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(r,o,a,s){a.addToRenderList(o);var n=a.alpha,l=o.renderTarget,i=l.width,h=l.height,u=e.getTintAppendFloatAlpha,d=r.pipelines.set(o.pipeline),c=d.setTexture2D(l.texture);r.pipelines.preBatch(o),d.batchTexture(o,l.texture,i,h,o.x,o.y,i,h,o.scaleX,o.scaleY,o.rotation,o.flipX,!o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,i,h,u(o.tintTopLeft,n*o._alphaTL),u(o.tintTopRight,n*o._alphaTR),u(o.tintBottomLeft,n*o._alphaBL),u(o.tintBottomRight,n*o._alphaBR),o.tintFill,0,0,a,s,!0,c),r.resetTextures(),r.pipelines.postBatch(o)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){r.addToRenderList(f),e.batchSprite(f,f.frame,r,o)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1083),f=t(17),r={Parse:t(1084)};r=f(!1,r,e),m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=function(r,o){var a=o.width,s=o.height,n=Math.floor(a/2),l=Math.floor(s/2),i=e(o,"chars","");if(i!==""){var h=e(o,"image",""),u=r.sys.textures.getFrame(h),d=u.cutX,c=u.cutY,p=u.source.width,g=u.source.height,x=e(o,"offset.x",0),y=e(o,"offset.y",0),T=e(o,"spacing.x",0),E=e(o,"spacing.y",0),w=e(o,"lineSpacing",0),A=e(o,"charsPerRow",null);A===null&&(A=p/a,A>i.length&&(A=i.length));for(var b=x,R=y,L={retroFont:!0,font:h,size:a,lineHeight:s+w,chars:{}},B=0,D=0;D<i.length;D++){var G=i.charCodeAt(D),X=(d+b)/p,H=(c+R)/g,K=(d+b+a)/p,$=(c+R+s)/g;L.chars[G]={x:b,y:R,width:a,height:s,centerX:n,centerY:l,xOffset:0,yOffset:0,xAdvance:a,data:{},kerning:{},u0:X,v0:H,u1:K,v1:$},B++,B===A?(B=0,b=x,R+=s+E):b+=a+T}var N={data:L,frame:null,texture:h};return N}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1086),f=t(1087),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),r=function(o,a,s,n){s.addToRenderList(a);var l=o.pipelines.set(a.pipeline,a),i=e(a,s,n).calc,h=a.vertices,u=a.uv,d=a.colors,c=a.alphas,p=a.alpha,g=f.getTintAppendFloatAlpha,x=s.roundPixels,y=h.length,T=Math.floor(y*.5);l.flush(),o.pipelines.preBatch(a);var E=l.setGameObject(a),w=l.vertexViewF32,A=l.vertexViewU32,b=l.vertexCount*l.currentShader.vertexComponentCount-1,R=0,L=a.tintFill;a.dirty&&a.updateVertices();for(var B=a.debugCallback,D=[],G=0;G<y;G+=2){var X=h[G+0],H=h[G+1],K=X*i.a+H*i.c+i.e,$=X*i.b+H*i.d+i.f;x&&(K=Math.round(K),$=Math.round($)),w[++b]=K,w[++b]=$,w[++b]=u[G+0],w[++b]=u[G+1],w[++b]=E,w[++b]=L,A[++b]=g(d[R],s.alpha*(c[R]*p)),R++,B&&(D[G+0]=K,D[G+1]=$)}B&&B.call(a,a,y,D),l.vertexCount+=T,o.pipelines.postBatch(a)};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1089),f=t(1090),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(r,o,a,s){if(!(o.width===0||o.height===0)){a.addToRenderList(o);var n=o.frame,l=n.width,i=n.height,h=e.getTintAppendFloatAlpha,u=r.pipelines.set(o.pipeline,o),d=u.setTexture2D(n.glTexture,o);r.pipelines.preBatch(o),u.batchTexture(o,n.glTexture,l,i,o.x,o.y,l/o.style.resolution,i/o.style.resolution,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.displayOriginX,o.displayOriginY,0,0,l,i,h(o.tintTopLeft,a.alpha*o._alphaTL),h(o.tintTopRight,a.alpha*o._alphaTR),h(o.tintBottomLeft,a.alpha*o._alphaBL),h(o.tintBottomRight,a.alpha*o._alphaBR),o.tintFill,0,0,a,s,!1,d),r.pipelines.postBatch(o)}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f.width===0||f.height===0||(r.addToRenderList(f),e.batchSprite(f,f.frame,r,o))};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1092),f=t(1093),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(r,o,a,s){o.updateCanvas();var n=o.width,l=o.height;if(!(n===0||l===0)){a.addToRenderList(o),r.pipelines.preBatch(o);var i=e.getTintAppendFloatAlpha,h=r.pipelines.set(o.pipeline,o),u=h.setTexture2D(o.fillPattern,o);h.batchTexture(o,o.fillPattern,o.displayFrame.width*o.tileScaleX,o.displayFrame.height*o.tileScaleY,o.x,o.y,n,l,o.scaleX,o.scaleY,o.rotation,o.flipX,o.flipY,o.scrollFactorX,o.scrollFactorY,o.originX*n,o.originY*l,0,0,n,l,i(o.tintTopLeft,a.alpha*o._alphaTL),i(o.tintTopRight,a.alpha*o._alphaTR),i(o.tintBottomLeft,a.alpha*o._alphaBL),i(o.tintBottomRight,a.alpha*o._alphaBR),o.tintFill,o.tilePositionX%o.displayFrame.width/o.displayFrame.width,o.tilePositionY%o.displayFrame.height/o.displayFrame.height,a,s,!1,u),r.pipelines.postBatch(o)}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f.updateCanvas(),r.addToRenderList(f),e.batchSprite(f,f.frame,r,o)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1095),f=t(1096),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f.videoTexture&&(r.addToRenderList(f),f.pipeline.batchSprite(f,r,o))};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f.videoTexture&&(r.addToRenderList(f),e.batchSprite(f,f.frame,r,o))};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1098),f=t(1099),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(114),r=t(81),o=function(a,s,n,l){n.addToRenderList(s);var i=a.pipelines.set(s.pipeline),h=e(s,n,l),u=i.calcMatrix.copyFrom(h.calc),d=s._displayOriginX,c=s._displayOriginY,p=n.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&f(i,u,s,p,d,c),s.isStroked&&r(i,s,p,d,c),a.pipelines.postBatch(s)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(36),f=t(48),r=t(60),o=t(30),a=function(s,n,l,i){l.addToRenderList(n);var h=s.currentContext;if(o(s,h,n,l,i)){var u=n.radius;h.beginPath(),h.arc(u-n.originX*(u*2),u-n.originY*(u*2),u,e(n._startAngle),e(n._endAngle),n.anticlockwise),n.closePath&&h.closePath(),n.isFilled&&(f(h,n),h.fill()),n.isStroked&&(r(h,n),h.stroke()),h.restore()}};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1101),f=t(1102),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),f=t(19),r=t(81),o=function(a,s,n,l){n.addToRenderList(s);var i=a.pipelines.set(s.pipeline),h=f(s,n,l),u=i.calcMatrix.copyFrom(h.calc),d=s._displayOriginX+s._curveBounds.x,c=s._displayOriginY+s._curveBounds.y,p=n.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&e(i,u,s,p,d,c),s.isStroked&&r(i,s,p,d,c),a.pipelines.postBatch(s)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),r=t(30),o=function(a,s,n,l){n.addToRenderList(s);var i=a.currentContext;if(r(a,i,s,n,l)){var h=s._displayOriginX+s._curveBounds.x,u=s._displayOriginY+s._curveBounds.y,d=s.pathData,c=d.length-1,p=d[0]-h,g=d[1]-u;i.beginPath(),i.moveTo(p,g),s.closePath||(c-=2);for(var x=2;x<c;x+=2){var y=d[x]-h,T=d[x+1]-u;i.lineTo(y,T)}s.closePath&&i.closePath(),s.isFilled&&(e(i,s),i.fill()),s.isStroked&&(f(i,s),i.stroke()),i.restore()}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1104),f=t(1105),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),f=t(19),r=t(81),o=function(a,s,n,l){n.addToRenderList(s);var i=a.pipelines.set(s.pipeline),h=f(s,n,l),u=i.calcMatrix.copyFrom(h.calc),d=s._displayOriginX,c=s._displayOriginY,p=n.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&e(i,u,s,p,d,c),s.isStroked&&r(i,s,p,d,c),a.pipelines.postBatch(s)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),r=t(30),o=function(a,s,n,l){n.addToRenderList(s);var i=a.currentContext;if(r(a,i,s,n,l)){var h=s._displayOriginX,u=s._displayOriginY,d=s.pathData,c=d.length-1,p=d[0]-h,g=d[1]-u;i.beginPath(),i.moveTo(p,g),s.closePath||(c-=2);for(var x=2;x<c;x+=2){var y=d[x]-h,T=d[x+1]-u;i.lineTo(y,T)}i.closePath(),s.isFilled&&(e(i,s),i.fill()),s.isStroked&&(f(i,s),i.stroke()),i.restore()}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1107),f=t(1108),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),r=function(o,a,s,n){s.addToRenderList(a);var l=o.pipelines.set(a.pipeline),i=e(a,s,n),h=l.calcMatrix.copyFrom(i.calc);h.translate(-a._displayOriginX,-a._displayOriginY);var u=s.alpha*a.alpha,d=a.width,c=a.height,p=a.cellWidth,g=a.cellHeight,x=Math.ceil(d/p),y=Math.ceil(c/g),T=p,E=g,w=p-(x*p-d),A=g-(y*g-c),b,R,L=a.showCells,B=a.showAltCells,D=a.showOutline,G=0,X=0,H=0,K=0,$=0;if(D&&(T--,E--,w===p&&w--,A===g&&A--),o.pipelines.preBatch(a),L&&a.fillAlpha>0)for(b=l.fillTint,R=f.getTintAppendFloatAlpha(a.fillColor,a.fillAlpha*u),b.TL=R,b.TR=R,b.BL=R,b.BR=R,X=0;X<y;X++)for(B&&(H=X%2),G=0;G<x;G++){if(B&&H){H=0;continue}H++,K=G<x-1?T:w,$=X<y-1?E:A,l.batchFillRect(G*p,X*g,K,$)}if(B&&a.altFillAlpha>0)for(b=l.fillTint,R=f.getTintAppendFloatAlpha(a.altFillColor,a.altFillAlpha*u),b.TL=R,b.TR=R,b.BL=R,b.BR=R,X=0;X<y;X++)for(B&&(H=X%2),G=0;G<x;G++){if(B&&!H){H=1;continue}H=0,K=G<x-1?T:w,$=X<y-1?E:A,l.batchFillRect(G*p,X*g,K,$)}if(D&&a.outlineFillAlpha>0){var N=l.strokeTint,I=f.getTintAppendFloatAlpha(a.outlineFillColor,a.outlineFillAlpha*u);for(N.TL=I,N.TR=I,N.BL=I,N.BR=I,G=1;G<x;G++){var z=G*p;l.batchLine(z,0,z,c,1,1,1,0,!1)}for(X=1;X<y;X++){var U=X*g;l.batchLine(0,U,d,U,1,1,1,0,!1)}}o.pipelines.postBatch(a)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),r=t(30),o=function(a,s,n,l){n.addToRenderList(s);var i=a.currentContext;if(r(a,i,s,n,l)){var h=-s._displayOriginX,u=-s._displayOriginY,d=n.alpha*s.alpha,c=s.width,p=s.height,g=s.cellWidth,x=s.cellHeight,y=Math.ceil(c/g),T=Math.ceil(p/x),E=g,w=x,A=g-(y*g-c),b=x-(T*x-p),R=s.showCells,L=s.showAltCells,B=s.showOutline,D=0,G=0,X=0,H=0,K=0;if(B&&(E--,w--,A===g&&A--,b===x&&b--),R&&s.fillAlpha>0)for(e(i,s),G=0;G<T;G++)for(L&&(X=G%2),D=0;D<y;D++){if(L&&X){X=0;continue}X++,H=D<y-1?E:A,K=G<T-1?w:b,i.fillRect(h+D*g,u+G*x,H,K)}if(L&&s.altFillAlpha>0)for(e(i,s,s.altFillColor,s.altFillAlpha*d),G=0;G<T;G++)for(L&&(X=G%2),D=0;D<y;D++){if(L&&!X){X=1;continue}X=0,H=D<y-1?E:A,K=G<T-1?w:b,i.fillRect(h+D*g,u+G*x,H,K)}if(B&&s.outlineFillAlpha>0){for(f(i,s,s.outlineFillColor,s.outlineFillAlpha*d),D=1;D<y;D++){var $=D*g;i.beginPath(),i.moveTo($+h,u),i.lineTo($+h,p+u),i.stroke()}for(G=1;G<T;G++){var N=G*x;i.beginPath(),i.moveTo(h,N+u),i.lineTo(h+c,N+u),i.stroke()}}i.restore()}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1110),f=t(1111),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),r=function(o,a,s,n){s.addToRenderList(a);var l=o.pipelines.set(a.pipeline),i=e(a,s,n),h=l.calcMatrix.copyFrom(i.calc),u=a.width,d=a.height,c=u/2,p=u/a.projection,g=s.alpha*a.alpha;if(!!a.isFilled){var x,y,T,E,w,A,b,R,L;o.pipelines.preBatch(a),a.showTop&&(x=f.getTintAppendFloatAlpha(a.fillTop,g),y=h.getX(-c,-d),T=h.getY(-c,-d),E=h.getX(0,-p-d),w=h.getY(0,-p-d),A=h.getX(c,-d),b=h.getY(c,-d),R=h.getX(0,p-d),L=h.getY(0,p-d),l.batchQuad(a,y,T,E,w,A,b,R,L,0,0,1,1,x,x,x,x,2)),a.showLeft&&(x=f.getTintAppendFloatAlpha(a.fillLeft,g),y=h.getX(-c,0),T=h.getY(-c,0),E=h.getX(0,p),w=h.getY(0,p),A=h.getX(0,p-d),b=h.getY(0,p-d),R=h.getX(-c,-d),L=h.getY(-c,-d),l.batchQuad(a,y,T,E,w,A,b,R,L,0,0,1,1,x,x,x,x,2)),a.showRight&&(x=f.getTintAppendFloatAlpha(a.fillRight,g),y=h.getX(c,0),T=h.getY(c,0),E=h.getX(0,p),w=h.getY(0,p),A=h.getX(0,p-d),b=h.getY(0,p-d),R=h.getX(c,-d),L=h.getY(c,-d),l.batchQuad(a,y,T,E,w,A,b,R,L,0,0,1,1,x,x,x,x,2)),o.pipelines.postBatch(a)}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(30),r=function(o,a,s,n){s.addToRenderList(a);var l=o.currentContext;if(f(o,l,a,s,n)&&a.isFilled){var i=a.width,h=a.height,u=i/2,d=i/a.projection;a.showTop&&(e(l,a,a.fillTop),l.beginPath(),l.moveTo(-u,-h),l.lineTo(0,-d-h),l.lineTo(u,-h),l.lineTo(u,-1),l.lineTo(0,d-1),l.lineTo(-u,-1),l.lineTo(-u,-h),l.fill()),a.showLeft&&(e(l,a,a.fillLeft),l.beginPath(),l.moveTo(-u,0),l.lineTo(0,d),l.lineTo(0,d-h),l.lineTo(-u,-h),l.lineTo(-u,0),l.fill()),a.showRight&&(e(l,a,a.fillRight),l.beginPath(),l.moveTo(u,0),l.lineTo(0,d),l.lineTo(0,d-h),l.lineTo(u,-h),l.lineTo(u,0),l.fill()),l.restore()}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1113),f=t(1114),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),r=function(o,a,s,n){s.addToRenderList(a);var l=o.pipelines.set(a.pipeline),i=e(a,s,n),h=l.calcMatrix.copyFrom(i.calc),u=a.width,d=a.height,c=u/2,p=u/a.projection,g=a.isReversed,x=s.alpha*a.alpha;if(!!a.isFilled){o.pipelines.preBatch(a);var y,T,E,w,A,b,R;if(a.showTop&&g){y=f.getTintAppendFloatAlpha(a.fillTop,x),T=h.getX(-c,-d),E=h.getY(-c,-d),w=h.getX(0,-p-d),A=h.getY(0,-p-d),b=h.getX(c,-d),R=h.getY(c,-d);var L=h.getX(0,p-d),B=h.getY(0,p-d);l.batchQuad(a,T,E,w,A,b,R,L,B,0,0,1,1,y,y,y,y,2)}a.showLeft&&(y=f.getTintAppendFloatAlpha(a.fillLeft,x),g?(T=h.getX(-c,-d),E=h.getY(-c,-d),w=h.getX(0,p),A=h.getY(0,p),b=h.getX(0,p-d),R=h.getY(0,p-d)):(T=h.getX(-c,0),E=h.getY(-c,0),w=h.getX(0,p),A=h.getY(0,p),b=h.getX(0,p-d),R=h.getY(0,p-d)),l.batchTri(a,T,E,w,A,b,R,0,0,1,1,y,y,y,2)),a.showRight&&(y=f.getTintAppendFloatAlpha(a.fillRight,x),g?(T=h.getX(c,-d),E=h.getY(c,-d),w=h.getX(0,p),A=h.getY(0,p),b=h.getX(0,p-d),R=h.getY(0,p-d)):(T=h.getX(c,0),E=h.getY(c,0),w=h.getX(0,p),A=h.getY(0,p),b=h.getX(0,p-d),R=h.getY(0,p-d)),l.batchTri(a,T,E,w,A,b,R,0,0,1,1,y,y,y,2)),o.pipelines.postBatch(a)}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(30),r=function(o,a,s,n){s.addToRenderList(a);var l=o.currentContext;if(f(o,l,a,s,n)&&a.isFilled){var i=a.width,h=a.height,u=i/2,d=i/a.projection,c=a.isReversed;a.showTop&&c&&(e(l,a,a.fillTop),l.beginPath(),l.moveTo(-u,-h),l.lineTo(0,-d-h),l.lineTo(u,-h),l.lineTo(0,d-h),l.fill()),a.showLeft&&(e(l,a,a.fillLeft),l.beginPath(),c?(l.moveTo(-u,-h),l.lineTo(0,d),l.lineTo(0,d-h)):(l.moveTo(-u,0),l.lineTo(0,d),l.lineTo(0,d-h)),l.fill()),a.showRight&&(e(l,a,a.fillRight),l.beginPath(),c?(l.moveTo(u,-h),l.lineTo(0,d),l.lineTo(0,d-h)):(l.moveTo(u,0),l.lineTo(0,d),l.lineTo(0,d-h)),l.fill()),l.restore()}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1116),f=t(1117),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(12),r=function(o,a,s,n){s.addToRenderList(a);var l=o.pipelines.set(a.pipeline),i=e(a,s,n);l.calcMatrix.copyFrom(i.calc);var h=a._displayOriginX,u=a._displayOriginY,d=s.alpha*a.alpha;if(o.pipelines.preBatch(a),a.isStroked){var c=l.strokeTint,p=f.getTintAppendFloatAlpha(a.strokeColor,a.strokeAlpha*d);c.TL=p,c.TR=p,c.BL=p,c.BR=p;var g=a._startWidth,x=a._endWidth;l.batchLine(a.geom.x1-h,a.geom.y1-u,a.geom.x2-h,a.geom.y2-u,g,x,1,0,!1,i.sprite,i.camera)}o.pipelines.postBatch(a)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(60),f=t(30),r=function(o,a,s,n){s.addToRenderList(a);var l=o.currentContext;if(f(o,l,a,s,n)){var i=a._displayOriginX,h=a._displayOriginY;a.isStroked&&(e(l,a),l.beginPath(),l.moveTo(a.geom.x1-i,a.geom.y1-h),l.lineTo(a.geom.x2-i,a.geom.y2-h),l.stroke()),l.restore()}};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1119),f=t(1120),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),f=t(19),r=t(81),o=function(a,s,n,l){n.addToRenderList(s);var i=a.pipelines.set(s.pipeline),h=f(s,n,l),u=i.calcMatrix.copyFrom(h.calc),d=s._displayOriginX,c=s._displayOriginY,p=n.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&e(i,u,s,p,d,c),s.isStroked&&r(i,s,p,d,c),a.pipelines.postBatch(s)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),r=t(30),o=function(a,s,n,l){n.addToRenderList(s);var i=a.currentContext;if(r(a,i,s,n,l)){var h=s._displayOriginX,u=s._displayOriginY,d=s.pathData,c=d.length-1,p=d[0]-h,g=d[1]-u;i.beginPath(),i.moveTo(p,g),s.closePath||(c-=2);for(var x=2;x<c;x+=2){var y=d[x]-h,T=d[x+1]-u;i.lineTo(y,T)}i.closePath(),s.isFilled&&(e(i,s),i.fill()),s.isStroked&&(f(i,s),i.stroke()),i.restore()}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1122),f=t(1123),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(81),r=t(12),o=function(a,s,n,l){n.addToRenderList(s);var i=a.pipelines.set(s.pipeline),h=e(s,n,l);i.calcMatrix.copyFrom(h.calc);var u=s._displayOriginX,d=s._displayOriginY,c=n.alpha*s.alpha;if(a.pipelines.preBatch(s),s.isFilled){var p=i.fillTint,g=r.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*c);p.TL=g,p.TR=g,p.BL=g,p.BR=g,i.batchFillRect(-u,-d,s.width,s.height)}s.isStroked&&f(i,s,c,u,d),a.pipelines.postBatch(s)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),r=t(30),o=function(a,s,n,l){n.addToRenderList(s);var i=a.currentContext;if(r(a,i,s,n,l)){var h=s._displayOriginX,u=s._displayOriginY;s.isFilled&&(e(i,s),i.fillRect(-h,-u,s.width,s.height)),s.isStroked&&(f(i,s),i.beginPath(),i.rect(-h,-u,s.width,s.height),i.stroke()),i.restore()}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1125),f=t(1126),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(114),f=t(19),r=t(81),o=function(a,s,n,l){n.addToRenderList(s);var i=a.pipelines.set(s.pipeline),h=f(s,n,l),u=i.calcMatrix.copyFrom(h.calc),d=s._displayOriginX,c=s._displayOriginY,p=n.alpha*s.alpha;a.pipelines.preBatch(s),s.isFilled&&e(i,u,s,p,d,c),s.isStroked&&r(i,s,p,d,c),a.pipelines.postBatch(s)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),r=t(30),o=function(a,s,n,l){n.addToRenderList(s);var i=a.currentContext;if(r(a,i,s,n,l)){var h=s._displayOriginX,u=s._displayOriginY,d=s.pathData,c=d.length-1,p=d[0]-h,g=d[1]-u;i.beginPath(),i.moveTo(p,g),s.closePath||(c-=2);for(var x=2;x<c;x+=2){var y=d[x]-h,T=d[x+1]-u;i.lineTo(y,T)}i.closePath(),s.isFilled&&(e(i,s),i.fill()),s.isStroked&&(f(i,s),i.stroke()),i.restore()}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1128),f=t(1129),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=t(81),r=t(12),o=function(a,s,n,l){n.addToRenderList(s);var i=a.pipelines.set(s.pipeline),h=e(s,n,l);i.calcMatrix.copyFrom(h.calc);var u=s._displayOriginX,d=s._displayOriginY,c=n.alpha*s.alpha;if(a.pipelines.preBatch(s),s.isFilled){var p=i.fillTint,g=r.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*c);p.TL=g,p.TR=g,p.BL=g,p.BR=g;var x=s.geom.x1-u,y=s.geom.y1-d,T=s.geom.x2-u,E=s.geom.y2-d,w=s.geom.x3-u,A=s.geom.y3-d;i.batchFillTriangle(x,y,T,E,w,A,h.sprite,h.camera)}s.isStroked&&f(i,s,c,u,d),a.pipelines.postBatch(s)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(48),f=t(60),r=t(30),o=function(a,s,n,l){n.addToRenderList(s);var i=a.currentContext;if(r(a,i,s,n,l)){var h=s._displayOriginX,u=s._displayOriginY,d=s.geom.x1-h,c=s.geom.y1-u,p=s.geom.x2-h,g=s.geom.y2-u,x=s.geom.x3-h,y=s.geom.y3-u;i.beginPath(),i.moveTo(d,c),i.lineTo(p,g),i.lineTo(x,y),i.closePath(),s.isFilled&&(e(i,s),i.fill()),s.isStroked&&(f(i,s),i.stroke()),i.restore()}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(213),f=t(5);f.register("blitter",function(r,o,a,s){return this.displayList.add(new e(this.scene,r,o,a,s))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(214),f=t(5);f.register("container",function(r,o,a){return this.displayList.add(new e(this.scene,r,o,a))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(442),f=t(5);f.register("dom",function(r,o,a,s,n){var l=new e(this.scene,r,o,a,s,n);return this.displayList.add(l),l})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(215),f=t(5);f.register("dynamicBitmapText",function(r,o,a,s,n){return this.displayList.add(new e(this.scene,r,o,a,s,n))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(444),f=t(5);f.register("extern",function(){var r=new e(this.scene);return this.displayList.add(r),r})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(216),f=t(5);f.register("graphics",function(r){return this.displayList.add(new e(this.scene,r))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(113),f=t(5);f.register("group",function(r,o){return this.updateList.add(new e(this.scene,r,o))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(125),f=t(5);f.register("image",function(r,o,a,s){return this.displayList.add(new e(this.scene,r,o,a,s))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(219),f=t(5);f.register("layer",function(r){return this.displayList.add(new e(this.scene,r))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(220);e.register("particles",function(r,o,a){return this.displayList.add(new f(this.scene,r,o,a))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(457);e.register("follower",function(r,o,a,s,n){var l=new f(this.scene,r,o,a,s,n);return this.displayList.add(l),this.updateList.add(l),l})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(221);e.register("renderTexture",function(r,o,a,s,n,l){return this.displayList.add(new f(this.scene,r,o,a,s,n,l))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(223),f=t(5);f.register("rope",function(r,o,a,s,n,l,i,h){return this.displayList.add(new e(this.scene,r,o,a,s,n,l,i,h))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(73);e.register("sprite",function(r,o,a,s){var n=new f(this.scene,r,o,a,s);return this.displayList.add(n),n})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),f=t(5);f.register("bitmapText",function(r,o,a,s,n,l){return this.displayList.add(new e(this.scene,r,o,a,s,n,l))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(224),f=t(5);f.register("text",function(r,o,a,s){return this.displayList.add(new e(this.scene,r,o,a,s))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(225),f=t(5);f.register("tileSprite",function(r,o,a,s,n,l){return this.displayList.add(new e(this.scene,r,o,a,s,n,l))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(129),f=t(5);f.register("zone",function(r,o,a,s){return this.displayList.add(new e(this.scene,r,o,a,s))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(226),f=t(5);f.register("video",function(r,o,a){return this.displayList.add(new e(this.scene,r,o,a))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(461),f=t(5);f.register("arc",function(r,o,a,s,n,l,i,h){return this.displayList.add(new e(this.scene,r,o,a,s,n,l,i,h))}),f.register("circle",function(r,o,a,s,n){return this.displayList.add(new e(this.scene,r,o,a,0,360,!1,s,n))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(462);e.register("curve",function(r,o,a,s,n){return this.displayList.add(new f(this.scene,r,o,a,s,n))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(463),f=t(5);f.register("ellipse",function(r,o,a,s,n,l){return this.displayList.add(new e(this.scene,r,o,a,s,n,l))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(464);e.register("grid",function(r,o,a,s,n,l,i,h,u,d){return this.displayList.add(new f(this.scene,r,o,a,s,n,l,i,h,u,d))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(465);e.register("isobox",function(r,o,a,s,n,l,i){return this.displayList.add(new f(this.scene,r,o,a,s,n,l,i))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(466);e.register("isotriangle",function(r,o,a,s,n,l,i,h){return this.displayList.add(new f(this.scene,r,o,a,s,n,l,i,h))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(467);e.register("line",function(r,o,a,s,n,l,i,h){return this.displayList.add(new f(this.scene,r,o,a,s,n,l,i,h))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(468);e.register("polygon",function(r,o,a,s,n){return this.displayList.add(new f(this.scene,r,o,a,s,n))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(473);e.register("rectangle",function(r,o,a,s,n,l){return this.displayList.add(new f(this.scene,r,o,a,s,n,l))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(474),f=t(5);f.register("star",function(r,o,a,s,n,l,i){return this.displayList.add(new e(this.scene,r,o,a,s,n,l,i))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(475);e.register("triangle",function(r,o,a,s,n,l,i,h,u,d){return this.displayList.add(new f(this.scene,r,o,a,s,n,l,i,h,u,d))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(213),f=t(28),r=t(16),o=t(13);r.register("blitter",function(a,s){a===void 0&&(a={});var n=o(a,"key",null),l=o(a,"frame",null),i=new e(this.scene,0,0,n,l);return s!==void 0&&(a.add=s),f(this.scene,i,a),i})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(214),r=t(16),o=t(13);r.register("container",function(a,s){a===void 0&&(a={});var n=o(a,"x",0),l=o(a,"y",0),i=o(a,"children",null),h=new f(this.scene,n,l,i);return s!==void 0&&(a.add=s),e(this.scene,h,a),h})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(215),f=t(28),r=t(16),o=t(13);r.register("dynamicBitmapText",function(a,s){a===void 0&&(a={});var n=o(a,"font",""),l=o(a,"text",""),i=o(a,"size",!1),h=new e(this.scene,0,0,n,l,i);return s!==void 0&&(a.add=s),f(this.scene,h,a),h})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(216);e.register("graphics",function(r,o){r===void 0&&(r={}),o!==void 0&&(r.add=o);var a=new f(this.scene,r);return r.add&&this.scene.sys.displayList.add(a),a})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(113);e.register("group",function(r){return new f(this.scene,null,r)})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(125);f.register("image",function(a,s){a===void 0&&(a={});var n=r(a,"key",null),l=r(a,"frame",null),i=new o(this.scene,0,0,n,l);return s!==void 0&&(a.add=s),e(this.scene,i,a),i})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(219),r=t(16),o=t(13);r.register("layer",function(a,s){a===void 0&&(a={});var n=o(a,"children",null),l=new f(this.scene,n);return s!==void 0&&(a.add=s),e(this.scene,l,a),l})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(13),r=t(2),o=t(220);e.register("particles",function(a,s){a===void 0&&(a={});var n=f(a,"key",null),l=f(a,"frame",null),i=r(a,"emitters",null),h=new o(this.scene,n,l,i);s!==void 0&&(a.add=s);var u=r(a,"add",!1);return u?this.displayList.add(h):this.updateList.add(h),h})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(221);f.register("renderTexture",function(a,s){a===void 0&&(a={});var n=r(a,"x",0),l=r(a,"y",0),i=r(a,"width",32),h=r(a,"height",32),u=r(a,"key",void 0),d=r(a,"frame",void 0),c=new o(this.scene,n,l,i,h,u,d);return s!==void 0&&(a.add=s),e(this.scene,c,a),c})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(6),a=t(223);f.register("rope",function(s,n){s===void 0&&(s={});var l=r(s,"key",null),i=r(s,"frame",null),h=r(s,"horizontal",!0),u=o(s,"points",void 0),d=o(s,"colors",void 0),c=o(s,"alphas",void 0),p=new a(this.scene,0,0,l,i,u,h,d,c);return n!==void 0&&(s.add=n),e(this.scene,p,s),s.add||this.updateList.add(p),p})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(439),r=t(16),o=t(13),a=t(73);r.register("sprite",function(s,n){s===void 0&&(s={});var l=o(s,"key",null),i=o(s,"frame",null),h=new a(this.scene,0,0,l,i);return n!==void 0&&(s.add=n),e(this.scene,h,s),f(h,s),h})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(148),f=t(28),r=t(16),o=t(13),a=t(6);r.register("bitmapText",function(s,n){s===void 0&&(s={});var l=a(s,"font",""),i=o(s,"text",""),h=o(s,"size",!1),u=a(s,"align",0),d=new e(this.scene,0,0,l,i,h,u);return n!==void 0&&(s.add=n),f(this.scene,d,s),d})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(224);f.register("text",function(a,s){a===void 0&&(a={});var n=r(a,"text",""),l=r(a,"style",null),i=r(a,"padding",null);i!==null&&(l.padding=i);var h=new o(this.scene,0,0,n,l);return s!==void 0&&(a.add=s),e(this.scene,h,a),h.autoRound=r(a,"autoRound",!0),h.resolution=r(a,"resolution",1),h})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(225);f.register("tileSprite",function(a,s){a===void 0&&(a={});var n=r(a,"x",0),l=r(a,"y",0),i=r(a,"width",512),h=r(a,"height",512),u=r(a,"key",""),d=r(a,"frame",""),c=new o(this.scene,n,l,i,h,u,d);return s!==void 0&&(a.add=s),e(this.scene,c,a),c})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(13),r=t(129);e.register("zone",function(o){var a=f(o,"x",0),s=f(o,"y",0),n=f(o,"width",1),l=f(o,"height",n);return new r(this.scene,a,s,n,l)})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(226);f.register("video",function(a,s){a===void 0&&(a={});var n=r(a,"key",null),l=new o(this.scene,0,0,n);return s!==void 0&&(a.add=s),e(this.scene,l,a),a.add||this.updateList.add(l),l})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1177),f=t(1178),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(r,o,a,s){if(!!o.shader){if(a.addToRenderList(o),r.pipelines.clear(),o.renderToTexture)o.load(),o.flush();else{var n=e(o,a,s).calc;(r.width!==o._rendererWidth||r.height!==o._rendererHeight)&&o.projOrtho(0,r.width,r.height,0),o.load(n.matrix),o.flush()}r.pipelines.rebind()}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1180),f=t(1181),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(r,o,a,s){var n=o.faces,l=n.length;if(l!==0){a.addToRenderList(o);var i=r.pipelines.set(o.pipeline,o),h=e(o,a,s).calc,u=i.setGameObject(o),d=i.vertexViewF32,c=i.vertexViewU32,p=i.vertexCount*i.currentShader.vertexComponentCount-1,g=o.tintFill,x=[],y=o.debugCallback,T=h.a,E=h.b,w=h.c,A=h.d,b=h.e,R=h.f,L=o.viewPosition.z,B=o.hideCCW,D=a.roundPixels,G=a.alpha*o.alpha,X=0;r.pipelines.preBatch(o);for(var H=0;H<l;H++){var K=n[H];!K.isInView(a,B,L,G,T,E,w,A,b,R,D)||(i.shouldFlush(3)&&(i.flush(),p=0),p=K.load(d,c,p,u,g),X++,i.vertexCount+=3,y&&x.push(K))}o.totalFrame+=X,y&&y.call(o,o,x),r.pipelines.postBatch(o)}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(){};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1183),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(19),f=function(r,o,a,s){a.addToRenderList(o);var n=r.pipelines.set(o.pipeline),l=e(o,a,s).calc,i=o.width,h=o.height,u=-o._radius,d=-o._radius,c=u+i,p=d+h,g=l.getX(0,0),x=l.getY(0,0),y=l.getX(u,d),T=l.getY(u,d),E=l.getX(u,p),w=l.getY(u,p),A=l.getX(c,p),b=l.getY(c,p),R=l.getX(c,d),L=l.getY(c,d);r.pipelines.preBatch(o),n.batchPointLight(o,a,y,T,E,w,A,b,R,L,g,x),r.pipelines.postBatch(o)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(229),f=t(5);f.register("shader",function(r,o,a,s,n,l,i){return this.displayList.add(new e(this.scene,r,o,a,s,n,l,i))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(230),f=t(5);f.register("mesh",function(r,o,a,s,n,l,i,h,u,d,c){return this.displayList.add(new e(this.scene,r,o,a,s,n,l,i,h,u,d,c))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(150);e.register("pointlight",function(r,o,a,s,n,l){return this.displayList.add(new f(this.scene,r,o,a,s,n,l))})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(229);f.register("shader",function(a,s){a===void 0&&(a={});var n=r(a,"key",null),l=r(a,"x",0),i=r(a,"y",0),h=r(a,"width",128),u=r(a,"height",128),d=new o(this.scene,n,l,i,h,u);return s!==void 0&&(a.add=s),e(this.scene,d,a),d})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(6),a=t(230);f.register("mesh",function(s,n){s===void 0&&(s={});var l=r(s,"key",null),i=r(s,"frame",null),h=o(s,"vertices",[]),u=o(s,"uvs",[]),d=o(s,"indicies",[]),c=o(s,"containsZ",!1),p=o(s,"normals",[]),g=o(s,"colors",16777215),x=o(s,"alphas",1),y=new a(this.scene,0,0,l,i,h,u,d,c,p,g,x);return n!==void 0&&(s.add=n),e(this.scene,y,s),y})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(28),f=t(16),r=t(13),o=t(150);f.register("pointlight",function(a,s){a===void 0&&(a={});var n=r(a,"color",16777215),l=r(a,"radius",128),i=r(a,"intensity",1),h=r(a,"attenuation",.1),u=new o(this.scene,0,0,n,l,i,h);return s!==void 0&&(a.add=s),e(this.scene,u,a),u})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(482),r=t(24),o=t(20),a=new e({Extends:f,initialize:function(n){this.scene=n,this.systems=n.sys,n.sys.settings.isBooted||n.sys.events.once(o.BOOT,this.boot,this),f.call(this)},boot:function(){var s=this.systems.events;s.on(o.SHUTDOWN,this.shutdown,this),s.on(o.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});r.register("LightsPlugin",a,"lights"),m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65);e.Area=t(1192),e.Circumference=t(302),e.CircumferencePoint=t(169),e.Clone=t(1193),e.Contains=t(66),e.ContainsPoint=t(1194),e.ContainsRect=t(1195),e.CopyFrom=t(1196),e.Equals=t(1197),e.GetBounds=t(1198),e.GetPoint=t(300),e.GetPoints=t(301),e.Offset=t(1199),e.OffsetPoint=t(1200),e.Random=t(170),m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.radius>0?Math.PI*e.radius*e.radius:0};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),f=function(r){return new e(r.x,r.y,r.radius)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),f=function(r,o){return e(r,o.x,o.y)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(66),f=function(r,o){return e(r,o.x,o.y)&&e(r,o.right,o.y)&&e(r,o.x,o.bottom)&&e(r,o.right,o.bottom)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x,e.y,e.radius)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x===f.x&&e.y===f.y&&e.radius===f.radius};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(r,o){return o===void 0&&(o=new e),o.x=r.left,o.y=r.top,o.width=r.diameter,o.height=r.diameter,o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e.x+=f,e.y+=r,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x+=f.x,e.y+=f.y,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(111);e.Area=t(1202),e.Circumference=t(447),e.CircumferencePoint=t(218),e.Clone=t(1203),e.Contains=t(112),e.ContainsPoint=t(1204),e.ContainsRect=t(1205),e.CopyFrom=t(1206),e.Equals=t(1207),e.GetBounds=t(1208),e.GetPoint=t(445),e.GetPoints=t(446),e.Offset=t(1209),e.OffsetPoint=t(1210),e.Random=t(180),m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.isEmpty()?0:e.getMajorRadius()*e.getMinorRadius()*Math.PI};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(111),f=function(r){return new e(r.x,r.y,r.width,r.height)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(112),f=function(r,o){return e(r,o.x,o.y)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(112),f=function(r,o){return e(r,o.x,o.y)&&e(r,o.right,o.y)&&e(r,o.x,o.bottom)&&e(r,o.right,o.bottom)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x,e.y,e.width,e.height)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x===f.x&&e.y===f.y&&e.width===f.width&&e.height===f.height};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(r,o){return o===void 0&&(o=new e),o.x=r.left,o.y=r.top,o.width=r.width,o.height=r.height,o};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e.x+=f,e.y+=r,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x+=f.x,e.y+=f.y,e};m.exports=t},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(231),r=function(o,a,s){if(s===void 0&&(s=[]),f(o,a)){var n=o.x,l=o.y,i=o.radius,h=a.x,u=a.y,d=a.radius,c,p,g,x,y;if(l===u)y=(d*d-i*i-h*h+n*n)/(2*(n-h)),c=1,p=-2*u,g=h*h+y*y-2*h*y+u*u-d*d,x=p*p-4*c*g,x===0?s.push(new e(y,-p/(2*c))):x>0&&(s.push(new e(y,(-p+Math.sqrt(x))/(2*c))),s.push(new e(y,(-p-Math.sqrt(x))/(2*c))));else{var T=(n-h)/(l-u),E=(d*d-i*i-h*h+n*n-u*u+l*l)/(2*(l-u));c=T*T+1,p=2*l*T-2*E*T-2*n,g=n*n+l*l+E*E-i*i-2*l*E,x=p*p-4*c*g,x===0?(y=-p/(2*c),s.push(new e(y,E-y*T))):x>0&&(y=(-p+Math.sqrt(x))/(2*c),s.push(new e(y,E-y*T)),y=(-p-Math.sqrt(x))/(2*c),s.push(new e(y,E-y*T)))}}return s};m.exports=r},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(232),f=t(151),r=function(o,a,s){if(s===void 0&&(s=[]),f(o,a)){var n=a.getLineA(),l=a.getLineB(),i=a.getLineC(),h=a.getLineD();e(n,o,s),e(l,o,s),e(i,o,s),e(h,o,s)}return s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(140),f=t(487),r=t(47),o=new r;function a(l,i,h,u,d){var c=Math.cos(l),p=Math.sin(l);o.setTo(i,h,i+c,h+p);var g=f(o,u);g&&d.push(new e(g.x,g.y,l,g.w))}function s(l,i){return l.z-i.z}var n=function(l,i,h){Array.isArray(h)||(h=[h]);for(var u=[],d=[],c=0;c<h.length;c++)for(var p=h[c].points,g=0;g<p.length;g++){var x=Math.atan2(p[g].y-i,p[g].x-l);d.indexOf(x)===-1&&(a(x,l,i,h,u),a(x-1e-5,l,i,h,u),a(x+1e-5,l,i,h,u),d.push(x))}return u.sort(s)};m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(152),r=function(o,a,s){return s===void 0&&(s=new e),f(o,a)&&(s.x=Math.max(o.x,a.x),s.y=Math.max(o.y,a.y),s.width=Math.min(o.right,a.right)-s.x,s.height=Math.min(o.bottom,a.bottom)-s.y),s};m.exports=r},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(234),f=t(152),r=function(o,a,s){if(s===void 0&&(s=[]),f(o,a)){var n=o.getLineA(),l=o.getLineB(),i=o.getLineC(),h=o.getLineD();e(n,a,s),e(l,a,s),e(i,a,s),e(h,a,s)}return s};m.exports=r},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(489),f=t(234),r=function(o,a,s){if(s===void 0&&(s=[]),e(o,a)){var n=a.getLineA(),l=a.getLineB(),i=a.getLineC();f(n,o,s),f(l,o,s),f(i,o,s)}return s};m.exports=r},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(232),f=t(491),r=function(o,a,s){if(s===void 0&&(s=[]),f(o,a)){var n=o.getLineA(),l=o.getLineB(),i=o.getLineC();e(n,a,s),e(l,a,s),e(i,a,s)}return s};m.exports=r},function(m,C,t){/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(494),f=t(492),r=function(o,a,s){if(s===void 0&&(s=[]),e(o,a)){var n=a.getLineA(),l=a.getLineB(),i=a.getLineC();f(o,n,s),f(o,l,s),f(o,i,s)}return s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(496),f=function(r,o){if(!e(r,o))return!1;var a=Math.min(o.x1,o.x2),s=Math.max(o.x1,o.x2),n=Math.min(o.y1,o.y2),l=Math.max(o.y1,o.y2);return r.x>=a&&r.x<=s&&r.y>=n&&r.y<=l};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a,s){return s===void 0&&(s=0),!(f>e.right+s||r<e.left-s||o>e.bottom+s||a<e.top-s)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(47);e.Angle=t(97),e.BresenhamPoints=t(317),e.CenterOn=t(1222),e.Clone=t(1223),e.CopyFrom=t(1224),e.Equals=t(1225),e.Extend=t(1226),e.GetEasedPoints=t(1227),e.GetMidPoint=t(1228),e.GetNearestPoint=t(1229),e.GetNormal=t(1230),e.GetPoint=t(307),e.GetPoints=t(172),e.GetShortestDistance=t(1231),e.Height=t(1232),e.Length=t(67),e.NormalAngle=t(497),e.NormalX=t(1233),e.NormalY=t(1234),e.Offset=t(1235),e.PerpSlope=t(1236),e.Random=t(173),e.ReflectAngle=t(1237),e.Rotate=t(1238),e.RotateAroundPoint=t(1239),e.RotateAroundXY=t(236),e.SetToAngle=t(1240),e.Slope=t(1241),e.Width=t(1242),m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=f-(e.x1+e.x2)/2,a=r-(e.y1+e.y2)/2;return e.x1+=o,e.y1+=a,e.x2+=o,e.y2+=a,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(47),f=function(r){return new e(r.x1,r.y1,r.x2,r.y2)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x1,e.y1,e.x2,e.y2)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x1===f.x1&&e.y1===f.y1&&e.x2===f.x2&&e.y2===f.y2};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=function(r,o,a){a===void 0&&(a=o);var s=e(r),n=r.x2-r.x1,l=r.y2-r.y1;return o&&(r.x1=r.x1-n/s*o,r.y1=r.y1-l/s*o),a&&(r.x2=r.x2+n/s*a,r.y2=r.y2+l/s*a),r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(352),f=t(80),r=t(4),o=function(a,s,n,l,i){l===void 0&&(l=0),i===void 0&&(i=[]);var h=[],u=a.x1,d=a.y1,c=a.x2-u,p=a.y2-d,g=f(s,i),x,y,T=n-1;for(x=0;x<T;x++)y=g(x/T),h.push(new r(u+c*y,d+p*y));if(y=g(1),h.push(new r(u+c*y,d+p*y)),l>0){var E=h[0],w=[E];for(x=1;x<h.length-1;x++){var A=h[x];e(E,A)>=l&&(w.push(A),E=A)}var b=h[h.length-1];return e(E,b)<l&&w.pop(),w.push(b),w}else return h};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){return o===void 0&&(o=new e),o.x=(r.x1+r.x2)/2,o.y=(r.y1+r.y2)/2,o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o,a){a===void 0&&(a=new e);var s=r.x1,n=r.y1,l=r.x2,i=r.y2,h=(l-s)*(l-s)+(i-n)*(i-n);if(h===0)return a;var u=((o.x-s)*(l-s)+(o.y-n)*(i-n))/h;return a.x=s+u*(l-s),a.y=n+u*(i-n),a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(97),r=t(4),o=function(a,s){s===void 0&&(s=new r);var n=f(a)-e.TAU;return s.x=Math.cos(n),s.y=Math.sin(n),s};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Florian Mertens
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=e.x1,o=e.y1,a=e.x2,s=e.y2,n=(a-r)*(a-r)+(s-o)*(s-o);if(n===0)return!1;var l=((o-f.y)*(a-r)-(r-f.x)*(s-o))/n;return Math.abs(l)*Math.sqrt(n)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.abs(e.y1-e.y2)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(97),r=function(o){return Math.cos(f(o)-e.TAU)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(14),f=t(97),r=function(o){return Math.sin(f(o)-e.TAU)};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e.x1+=f,e.y1+=r,e.x2+=f,e.y2+=r,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return-((e.x2-e.x1)/(e.y2-e.y1))};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(97),f=t(497),r=function(o,a){return 2*f(a)-Math.PI-e(o)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(236),f=function(r,o){var a=(r.x1+r.x2)/2,s=(r.y1+r.y2)/2;return e(r,a,s,o)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(236),f=function(r,o,a){return e(r,o.x,o.y,a)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o,a){return e.x1=f,e.y1=r,e.x2=f+Math.cos(o)*a,e.y2=r+Math.sin(o)*a,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return(e.y2-e.y1)/(e.x2-e.x1)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return Math.abs(e.x1-e.x2)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(116),f=t(2),r=t(69),o=t(39),a=t(117),s=new o,n=new o,l=new r,i=function(h){var u=f(h,"mesh"),d=f(h,"texture",null),c=f(h,"frame"),p=f(h,"width",1),g=f(h,"height",p),x=f(h,"widthSegments",1),y=f(h,"heightSegments",x),T=f(h,"x",0),E=f(h,"y",0),w=f(h,"z",0),A=f(h,"rotateX",0),b=f(h,"rotateY",0),R=f(h,"rotateZ",0),L=f(h,"zIsUp",!0),B=f(h,"isOrtho",u?u.dirtyCache[11]:!1),D=f(h,"colors",[16777215]),G=f(h,"alphas",[1]),X=f(h,"tile",!1),H=f(h,"flipY",!1),K=f(h,"width",null),$={faces:[],verts:[]};if(s.set(T,E,w),n.set(A,b,R),l.fromRotationXYTranslation(n,s,L),!d&&u)d=u.texture;else if(u&&typeof d=="string")d=u.scene.sys.textures.get(d);else return $;var N=d.get(c);!K&&B&&d&&u&&(p=N.width/u.height,g=N.height/u.height);var I=p/2,z=g/2,U=Math.floor(x),W=Math.floor(y),V=U+1,Z=W+1,J=p/U,tt=g/W,st=[],at=[],lt,ut,mt=0,dt=1,xt=0,Tt=1;N&&(mt=N.u0,dt=N.u1,H?(xt=N.v1,Tt=N.v0):(xt=N.v0,Tt=N.v1));var Ct=dt-mt,Et=Tt-xt;for(ut=0;ut<Z;ut++){var vt=ut*tt-z;for(lt=0;lt<V;lt++){var It=lt*J-I;at.push(It,-vt);var Pt=mt+Ct*(lt/U),Rt=xt+Et*(ut/W);st.push(Pt,Rt)}}Array.isArray(D)||(D=[D]),Array.isArray(G)||(G=[G]);var Jt=0,qt=0;for(ut=0;ut<W;ut++)for(lt=0;lt<U;lt++){var zt=(lt+V*ut)*2,Nt=(lt+V*(ut+1))*2,Vt=(lt+1+V*(ut+1))*2,$t=(lt+1+V*ut)*2,Wt=D[qt],de=G[Jt],Ce=new a(at[zt],at[zt+1],0,st[zt],st[zt+1],Wt,de).transformMat4(l),ve=new a(at[Nt],at[Nt+1],0,st[Nt],st[Nt+1],Wt,de).transformMat4(l),pe=new a(at[$t],at[$t+1],0,st[$t],st[$t+1],Wt,de).transformMat4(l),me=new a(at[Nt],at[Nt+1],0,st[Nt],st[Nt+1],Wt,de).transformMat4(l),Oe=new a(at[Vt],at[Vt+1],0,st[Vt],st[Vt+1],Wt,de).transformMat4(l),q=new a(at[$t],at[$t+1],0,st[$t],st[$t+1],Wt,de).transformMat4(l);X&&(Ce.setUVs(mt,Tt),ve.setUVs(mt,xt),pe.setUVs(dt,Tt),me.setUVs(mt,xt),Oe.setUVs(dt,xt),q.setUVs(dt,Tt)),qt++,qt===D.length&&(qt=0),Jt++,Jt===G.length&&(Jt=0),$.verts.push(Ce,ve,pe,me,Oe,q),$.faces.push(new e(Ce,ve,pe),new e(me,Oe,q))}return u&&(u.faces=u.faces.concat($.faces),u.vertices=u.vertices.concat($.verts)),$};m.exports=i},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){var a,s;if(r===void 0&&o===void 0){var n=e.getInCenter();a=n.x,s=n.y}var l=Math.cos(f),i=Math.sin(f),h=e.vertex1,u=e.vertex2,d=e.vertex3,c=h.x-a,p=h.y-s;h.set(c*l-p*i+a,c*i+p*l+s),c=u.x-a,p=u.y-s,u.set(c*l-p*i+a,c*i+p*l+s),c=d.x-a,p=d.y-s,d.set(c*l-p*i+a,c*i+p*l+s)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4);e.Ceil=t(1247),e.Clone=t(1248),e.CopyFrom=t(1249),e.Equals=t(1250),e.Floor=t(1251),e.GetCentroid=t(1252),e.GetMagnitude=t(500),e.GetMagnitudeSq=t(501),e.GetRectangleFromPoints=t(1253),e.Interpolate=t(1254),e.Invert=t(1255),e.Negative=t(1256),e.Project=t(1257),e.ProjectUnit=t(1258),e.SetMagnitude=t(1259),m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(Math.ceil(e.x),Math.ceil(e.y))};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r){return new e(r.x,r.y)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x,e.y)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x===f.x&&e.y===f.y};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(Math.floor(e.x),Math.floor(e.y))};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){if(o===void 0&&(o=new e),!Array.isArray(r))throw new Error("GetCentroid points argument must be an array");var a=r.length;if(a<1)throw new Error("GetCentroid points array must not be empty");if(a===1)o.x=r[0].x,o.y=r[0].y;else{for(var s=0;s<a;s++)o.x+=r[s].x,o.y+=r[s].y;o.x/=a,o.y/=a}return o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(r,o){o===void 0&&(o=new e);for(var a=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,i=0;i<r.length;i++){var h=r[i];h.x>a&&(a=h.x),h.x<s&&(s=h.x),h.y>n&&(n=h.y),h.y<l&&(l=h.y)}return o.x=s,o.y=l,o.width=a-s,o.height=n-l,o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o,a,s){return a===void 0&&(a=0),s===void 0&&(s=new e),s.x=r.x+(o.x-r.x)*a,s.y=r.y+(o.y-r.y)*a,s};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.setTo(e.y,e.x)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){return o===void 0&&(o=new e),o.setTo(-r.x,-r.y)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(501),r=function(o,a,s){s===void 0&&(s=new e);var n=o.x*a.x+o.y*a.y,l=n/f(a);return l!==0&&(s.x=l*a.x,s.y=l*a.y),s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o,a){a===void 0&&(a=new e);var s=r.x*o.x+r.y*o.y;return s!==0&&(a.x=s*o.x,a.y=s*o.y),a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(500),f=function(r,o){if(r.x!==0||r.y!==0){var a=e(r);r.x/=a,r.y/=a}return r.x*=o,r.y*=o,r};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(227);e.Clone=t(1261),e.Contains=t(228),e.ContainsPoint=t(1262),e.Earcut=t(59),e.GetAABB=t(469),e.GetNumberArray=t(1263),e.GetPoints=t(470),e.Perimeter=t(471),e.Reverse=t(1264),e.Simplify=t(1265),e.Smooth=t(472),e.Translate=t(1266),m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(227),f=function(r){return new e(r.points)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(228),f=function(r,o){return e(r,o.x,o.y)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=[]);for(var r=0;r<e.points.length;r++)f.push(e.points[r].x),f.push(e.points[r].y);return f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.points.reverse(),e};m.exports=t},function(m,C){function t(s,n){var l=s.x-n.x,i=s.y-n.y;return l*l+i*i}function e(s,n,l){var i=n.x,h=n.y,u=l.x-i,d=l.y-h;if(u!==0||d!==0){var c=((s.x-i)*u+(s.y-h)*d)/(u*u+d*d);c>1?(i=l.x,h=l.y):c>0&&(i+=u*c,h+=d*c)}return u=s.x-i,d=s.y-h,u*u+d*d}function f(s,n){for(var l=s[0],i=[l],h,u=1,d=s.length;u<d;u++)h=s[u],t(h,l)>n&&(i.push(h),l=h);return l!==h&&i.push(h),i}function r(s,n,l,i,h){for(var u=i,d,c=n+1;c<l;c++){var p=e(s[c],s[n],s[l]);p>u&&(d=c,u=p)}u>i&&(d-n>1&&r(s,n,d,i,h),h.push(s[d]),l-d>1&&r(s,d,l,i,h))}function o(s,n){var l=s.length-1,i=[s[0]];return r(s,0,l,n,i),i.push(s[l]),i}var a=function(s,n,l){n===void 0&&(n=1),l===void 0&&(l=!1);var i=s.points;if(i.length>2){var h=n*n;l||(i=f(i,h)),s.setTo(o(i,h))}return s};m.exports=a},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){for(var o=e.points,a=0;a<o.length;a++)o[a].x+=f,o[a].y+=r;return e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.width*e.height};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(r){return new e(r.x,r.y,r.width,r.height)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(57),f=function(r,o){return e(r,o.x,o.y)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x,e.y,e.width,e.height)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x===f.x&&e.y===f.y&&e.width===f.width&&e.height===f.height};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(237),f=function(r,o){var a=e(r);return a<e(o)?r.setSize(o.height*a,o.height):r.setSize(o.width,o.width/a),r.setPosition(o.centerX-r.width/2,o.centerY-r.height/2)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(237),f=function(r,o){var a=e(r);return a>e(o)?r.setSize(o.height*a,o.height):r.setSize(o.width,o.width/a),r.setPosition(o.centerX-r.width/2,o.centerY-r.height/2)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.width=Math.floor(e.width),e.height=Math.floor(e.height),e};m.exports=t},function(m,C,t){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=function(r,o,a,s,n){return n===void 0&&(n=new e),n.setTo(Math.min(r,a),Math.min(o,s),Math.abs(r-a),Math.abs(o-s))};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){return o===void 0&&(o=new e),o.x=r.centerX,o.y=r.centerY,o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=function(r,o){return o===void 0&&(o=new e),o.x=r.width,o.y=r.height,o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(190),f=function(r,o,a){var s=r.centerX,n=r.centerY;return r.setSize(r.width+o*2,r.height+a*2),e(r,s,n)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(10),f=t(152),r=function(o,a,s){return s===void 0&&(s=new e),f(o,a)?(s.x=Math.max(o.x,a.x),s.y=Math.max(o.y,a.y),s.width=Math.min(o.right,a.right)-s.x,s.height=Math.min(o.bottom,a.bottom)-s.y):s.setEmpty(),s};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){for(var r=e.x,o=e.right,a=e.y,s=e.bottom,n=0;n<f.length;n++)r=Math.min(r,f[n].x),o=Math.max(o,f[n].x),a=Math.min(a,f[n].y),s=Math.max(s,f[n].y);return e.x=r,e.y=a,e.width=o-r,e.height=s-a,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){var r=Math.min(e.x,f.x),o=Math.max(e.right,f.right);e.x=r,e.width=o-r;var a=Math.min(e.y,f.y),s=Math.max(e.bottom,f.bottom);return e.y=a,e.height=s-a,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){var o=Math.min(e.x,f),a=Math.max(e.right,f);e.x=o,e.width=a-o;var s=Math.min(e.y,r),n=Math.max(e.bottom,r);return e.y=s,e.height=n-s,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return e.x+=f,e.y+=r,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x+=f.x,e.y+=f.y,e};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x<f.right&&e.right>f.x&&e.y<f.bottom&&e.bottom>f.y};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(4),f=t(36),r=function(o,a,s){s===void 0&&(s=new e),a=f(a);var n=Math.sin(a),l=Math.cos(a),i=l>0?o.width/2:o.width/-2,h=n>0?o.height/2:o.height/-2;return Math.abs(i*n)<Math.abs(h*l)?h=i*n/l:i=h*l/n,s.x=i+o.centerX,s.y=h+o.centerY,s};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(195),f=t(503),r=t(4),o=function(a,s,n){if(n===void 0&&(n=new r),f(a,s))switch(e(0,3)){case 0:n.x=a.x+Math.random()*(s.right-a.x),n.y=a.y+Math.random()*(s.top-a.y);break;case 1:n.x=s.x+Math.random()*(a.right-s.x),n.y=s.bottom+Math.random()*(a.bottom-s.bottom);break;case 2:n.x=a.x+Math.random()*(s.x-a.x),n.y=s.y+Math.random()*(a.bottom-s.y);break;case 3:n.x=s.right+Math.random()*(a.right-s.right),n.y=a.y+Math.random()*(s.bottom-a.y);break}return n};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.width===f.width&&e.height===f.height};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r){return r===void 0&&(r=f),e.width*=f,e.height*=r,e};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82);e.Area=t(1294),e.BuildEquilateral=t(1295),e.BuildFromPolygon=t(1296),e.BuildRight=t(1297),e.CenterOn=t(1298),e.Centroid=t(504),e.CircumCenter=t(1299),e.CircumCircle=t(1300),e.Clone=t(1301),e.Contains=t(115),e.ContainsArray=t(235),e.ContainsPoint=t(1302),e.CopyFrom=t(1303),e.Decompose=t(495),e.Equals=t(1304),e.GetPoint=t(476),e.GetPoints=t(477),e.InCenter=t(506),e.Perimeter=t(1305),e.Offset=t(505),e.Random=t(181),e.Rotate=t(1306),e.RotateAroundPoint=t(1307),e.RotateAroundXY=t(238),m.exports=e},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){var f=e.x1,r=e.y1,o=e.x2,a=e.y2,s=e.x3,n=e.y3;return Math.abs(((s-f)*(a-r)-(o-f)*(n-r))/2)};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),f=function(r,o,a){var s=a*(Math.sqrt(3)/2),n=r,l=o,i=r+a/2,h=o+s,u=r-a/2,d=o+s;return new e(n,l,i,h,u,d)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(59),f=t(82),r=function(o,a,s,n,l){a===void 0&&(a=null),s===void 0&&(s=1),n===void 0&&(n=1),l===void 0&&(l=[]);for(var i=e(o,a),h,u,d,c,p,g,x,y,T,E=0;E<i.length;E+=3)h=i[E],u=i[E+1],d=i[E+2],c=o[h*2]*s,p=o[h*2+1]*n,g=o[u*2]*s,x=o[u*2+1]*n,y=o[d*2]*s,T=o[d*2+1]*n,l.push(new f(c,p,g,x,y,T));return l};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),f=function(r,o,a,s){s===void 0&&(s=a);var n=r,l=o,i=r,h=o-s,u=r+a,d=o;return new e(n,l,i,h,u,d)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(504),f=t(505),r=function(o,a,s,n){n===void 0&&(n=e);var l=n(o),i=a-l.x,h=s-l.y;return f(o,i,h)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(3);function f(o,a,s,n){return o*n-a*s}var r=function(o,a){a===void 0&&(a=new e);var s=o.x3,n=o.y3,l=o.x1-s,i=o.y1-n,h=o.x2-s,u=o.y2-n,d=2*f(l,i,h,u),c=f(i,l*l+i*i,u,h*h+u*u),p=f(l,l*l+i*i,h,h*h+u*u);return a.x=s-c/d,a.y=n+p/d,a};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),f=function(r,o){o===void 0&&(o=new e);var a=r.x1,s=r.y1,n=r.x2,l=r.y2,i=r.x3,h=r.y3,u=n-a,d=l-s,c=i-a,p=h-s,g=u*(a+n)+d*(s+l),x=c*(a+i)+p*(s+h),y=2*(u*(h-l)-d*(i-n)),T,E;if(Math.abs(y)<1e-6){var w=Math.min(a,n,i),A=Math.min(s,l,h);T=(Math.max(a,n,i)-w)*.5,E=(Math.max(s,l,h)-A)*.5,o.x=w+T,o.y=A+E,o.radius=Math.sqrt(T*T+E*E)}else o.x=(p*g-d*x)/y,o.y=(u*x-c*g)/y,T=o.x-a,E=o.y-s,o.radius=Math.sqrt(T*T+E*E);return o};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(82),f=function(r){return new e(r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(115),f=function(r,o){return e(r,o.x,o.y)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f.setTo(e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.x1===f.x1&&e.y1===f.y1&&e.x2===f.x2&&e.y2===f.y2&&e.x3===f.x3&&e.y3===f.y3};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(67),f=function(r){var o=r.getLineA(),a=r.getLineB(),s=r.getLineC();return e(o)+e(a)+e(s)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(238),f=t(506),r=function(o,a){var s=f(o);return e(o,s.x,s.y,a)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(238),f=function(r,o,a){return e(r,o.x,o.y,a)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(203),f=t(17),r={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="down"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="up"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="connected"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="disconnected"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="down"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="up"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),r=t(239),o=t(511),a=t(6),s=t(153),n=t(51),l=new e({Extends:f,initialize:function(h){f.call(this),this.scene=h.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=h,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,h.pluginEvents.once(n.BOOT,this.boot,this),h.pluginEvents.on(n.START,this.start,this)},boot:function(){var i=this.scene.sys.game,h=this.settings.input,u=i.config;this.enabled=a(h,"gamepad",u.inputGamepad)&&i.device.input.gamepads,this.target=a(h,"gamepad.target",u.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var i=this,h=this.target,u=function(d){d.defaultPrevented||!i.isActive()||(i.refreshPads(),i.queue.push(d))};this.onGamepadHandler=u,h.addEventListener("gamepadconnected",u,!1),h.addEventListener("gamepaddisconnected",u,!1),this.sceneInputPlugin.pluginEvents.on(n.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(n.UPDATE,this.update);for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].removeAllListeners()},disconnectAll:function(){for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].pad.connected=!1},refreshPads:function(){var i=navigator.getGamepads();if(!i)this.disconnectAll();else for(var h=this.gamepads,u=0;u<i.length;u++){var d=i[u];if(!!d){var c=d.id,p=d.index,g=h[p];if(g)g.id!==c?(g.destroy(),h[p]=new o(this,d)):g.update(d);else{var x=new o(this,d);h[p]=x,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=x):this._pad3=x:this._pad2=x:this._pad1=x}}}},getAll:function(){for(var i=[],h=this.gamepads,u=0;u<h.length;u++)h[u]&&i.push(h[u]);return i},getPad:function(i){for(var h=this.gamepads,u=0;u<h.length;u++)if(h[u]&&h[u].index===i)return h[u]},update:function(){if(!!this.enabled){this.refreshPads();var i=this.queue.length;if(i!==0)for(var h=this.queue.splice(0,i),u=0;u<i;u++){var d=h[u],c=this.getPad(d.gamepad.index);d.type==="gamepadconnected"?this.emit(r.CONNECTED,c,d):d.type==="gamepaddisconnected"&&this.emit(r.DISCONNECTED,c,d)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var i=0;i<this.gamepads.length;i++)this.gamepads[i]&&this.gamepads[i].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});s.register("GamepadPlugin",l,"gamepad","gamepad","inputGamepad"),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(65),f=t(66),r=t(0),o=t(203),a=t(508),s=t(507),n=t(50),l=t(111),i=t(112),h=t(51),u=t(9),d=t(2),c=t(56),p=t(153),g=t(7),x=t(24),y=t(10),T=t(57),E=t(20),w=t(82),A=t(115),b=new r({Extends:u,initialize:function(L){u.call(this),this.scene=L,this.systems=L.sys,this.settings=L.sys.settings,this.manager=L.sys.game.input,this.pluginEvents=new u,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var B={cancelled:!1};this._eventContainer={stopPropagation:function(){B.cancelled=!0}},this._eventData=B,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,L.sys.events.once(E.BOOT,this.boot,this),L.sys.events.on(E.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(h.BOOT)},start:function(){var R=this.systems.events;R.on(E.TRANSITION_START,this.transitionIn,this),R.on(E.TRANSITION_OUT,this.transitionOut,this),R.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),R.on(E.PRE_UPDATE,this.preUpdate,this),R.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(h.GAME_OUT,this.onGameOut,this),this.manager.events.on(h.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(h.START)},onGameOver:function(R){this.isActive()&&this.emit(h.GAME_OVER,R.timeStamp,R)},onGameOut:function(R){this.isActive()&&this.emit(h.GAME_OUT,R.timeStamp,R)},preUpdate:function(){this.pluginEvents.emit(h.PRE_UPDATE);var R=this._pendingRemoval,L=this._pendingInsertion,B=R.length,D=L.length;if(!(B===0&&D===0)){for(var G=this._list,X=0;X<B;X++){var H=R[X],K=G.indexOf(H);K>-1&&(G.splice(K,1),this.clear(H,!0))}R.length=0,this._pendingRemoval.length=0,this._list=G.concat(L.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(R,L){if(!this.isActive())return!1;if(this.pluginEvents.emit(h.UPDATE,R,L),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var B,D=this.manager,G=D.pointers,X=D.pointersTotal;for(B=0;B<X;B++)G[B].updateMotion();if(this._list.length===0)return!1;var H=this.pollRate;if(H===-1)return!1;if(H>0)if(this._pollTimer-=L,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var K=!1;for(B=0;B<X;B++){var $=0,N=G[B];this._tempZones=[],this._temp=this.hitTestPointer(N),this.sortGameObjects(this._temp,N),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),$+=this.processOverOutEvents(N),this.getDragState(N)===2&&this.processDragThresholdEvent(N,R),$>0&&(K=!0)}return K},update:function(R,L){if(!this.isActive())return!1;for(var B=L.length,D=!1,G=0;G<B;G++){var X=0,H=L[G];switch(this._tempZones=[],this._temp=this.hitTestPointer(H),this.sortGameObjects(this._temp,H),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),R){case o.MOUSE_DOWN:X+=this.processDragDownEvent(H),X+=this.processDownEvents(H),X+=this.processOverOutEvents(H);break;case o.MOUSE_UP:X+=this.processDragUpEvent(H),X+=this.processUpEvents(H),X+=this.processOverOutEvents(H);break;case o.TOUCH_START:X+=this.processDragDownEvent(H),X+=this.processDownEvents(H),X+=this.processOverEvents(H);break;case o.TOUCH_END:case o.TOUCH_CANCEL:X+=this.processDragUpEvent(H),X+=this.processUpEvents(H),X+=this.processOutEvents(H);break;case o.MOUSE_MOVE:case o.TOUCH_MOVE:X+=this.processDragMoveEvent(H),X+=this.processMoveEvents(H),X+=this.processOverOutEvents(H);break;case o.MOUSE_WHEEL:X+=this.processWheelEvent(H);break}X>0&&(D=!0)}return this._updatedThisFrame=!0,D},clear:function(R,L){L===void 0&&(L=!1);var B=R.input;if(!!B){L||this.queueForRemoval(R),B.gameObject=void 0,B.target=void 0,B.hitArea=void 0,B.hitAreaCallback=void 0,B.callbackContext=void 0,R.input=null;var D=this._draggable.indexOf(R);return D>-1&&this._draggable.splice(D,1),D=this._drag[0].indexOf(R),D>-1&&this._drag[0].splice(D,1),D=this._over[0].indexOf(R),D>-1&&(this._over[0].splice(D,1),this.manager.resetCursor(B)),R}},disable:function(R){R.input.enabled=!1},enable:function(R,L,B,D){return D===void 0&&(D=!1),R.input?R.input.enabled=!0:this.setHitArea(R,L,B),R.input&&D&&!R.input.dropZone&&(R.input.dropZone=D),this},hitTestPointer:function(R){for(var L=this.cameras.getCamerasBelowPointer(R),B=0;B<L.length;B++){for(var D=L[B],G=this.manager.hitTest(R,this._list,D),X=0;X<G.length;X++){var H=G[X];H.input.dropZone&&this._tempZones.push(H)}if(G.length>0)return R.camera=D,G}return R.camera=L[0],[]},processDownEvents:function(R){var L=0,B=this._temp,D=this._eventData,G=this._eventContainer;D.cancelled=!1;for(var X=!1,H=0;H<B.length;H++){var K=B[H];if(!!K.input){if(L++,K.emit(h.GAMEOBJECT_POINTER_DOWN,R,K.input.localX,K.input.localY,G),D.cancelled||!K.input){X=!0;break}if(this.emit(h.GAMEOBJECT_DOWN,R,K,G),D.cancelled||!K.input){X=!0;break}}}return!X&&this.manager&&(R.downElement===this.manager.game.canvas?this.emit(h.POINTER_DOWN,R,B):this.emit(h.POINTER_DOWN_OUTSIDE,R)),L},getDragState:function(R){return this._dragState[R.id]},setDragState:function(R,L){this._dragState[R.id]=L},processDragThresholdEvent:function(R,L){var B=!1,D=this.dragTimeThreshold,G=this.dragDistanceThreshold;if((G>0&&n(R.x,R.y,R.downX,R.downY)>=G||D>0&&L>=R.downTime+D)&&(B=!0),B)return this.setDragState(R,3),this.processDragStartList(R)},processDragStartList:function(R){if(this.getDragState(R)!==3)return 0;for(var L=this._drag[R.id],B=0;B<L.length;B++){var D=L[B],G=D.input;G.dragState=2,G.dragStartX=D.x,G.dragStartY=D.y,G.dragStartXGlobal=R.worldX,G.dragStartYGlobal=R.worldY,G.dragX=G.dragStartXGlobal-G.dragStartX,G.dragY=G.dragStartYGlobal-G.dragStartY,D.emit(h.GAMEOBJECT_DRAG_START,R,G.dragX,G.dragY),this.emit(h.DRAG_START,R,D)}return this.setDragState(R,4),L.length},processDragDownEvent:function(R){var L=this._temp;if(this._draggable.length===0||L.length===0||!R.primaryDown||this.getDragState(R)!==0)return 0;this.setDragState(R,1);for(var B=[],D=0;D<L.length;D++){var G=L[D];G.input.draggable&&G.input.dragState===0&&B.push(G)}return B.length===0?(this.setDragState(R,0),0):(B.length>1&&(this.sortGameObjects(B,R),this.topOnly&&B.splice(1)),this._drag[R.id]=B,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(R,3),this.processDragStartList(R)):(this.setDragState(R,2),0))},processDragMoveEvent:function(R){if(this.getDragState(R)===2&&this.processDragThresholdEvent(R,this.manager.game.loop.now),this.getDragState(R)!==4)return 0;for(var L=this._tempZones,B=this._drag[R.id],D=0;D<B.length;D++){var G=B[D],X=G.input,H=X.target;if(H){var K=L.indexOf(H);K===0?(G.emit(h.GAMEOBJECT_DRAG_OVER,R,H),this.emit(h.DRAG_OVER,R,G,H)):K>0?(G.emit(h.GAMEOBJECT_DRAG_LEAVE,R,H),this.emit(h.DRAG_LEAVE,R,G,H),X.target=L[0],H=X.target,G.emit(h.GAMEOBJECT_DRAG_ENTER,R,H),this.emit(h.DRAG_ENTER,R,G,H)):(G.emit(h.GAMEOBJECT_DRAG_LEAVE,R,H),this.emit(h.DRAG_LEAVE,R,G,H),L[0]?(X.target=L[0],H=X.target,G.emit(h.GAMEOBJECT_DRAG_ENTER,R,H),this.emit(h.DRAG_ENTER,R,G,H)):X.target=null)}else!H&&L[0]&&(X.target=L[0],H=X.target,G.emit(h.GAMEOBJECT_DRAG_ENTER,R,H),this.emit(h.DRAG_ENTER,R,G,H));var $,N;if(!G.parentContainer)$=R.worldX-X.dragX,N=R.worldY-X.dragY;else{var I=R.worldX-X.dragStartXGlobal,z=R.worldY-X.dragStartYGlobal,U=G.getParentRotation(),W=I*Math.cos(U)+z*Math.sin(U),V=z*Math.cos(U)-I*Math.sin(U);W*=1/G.parentContainer.scaleX,V*=1/G.parentContainer.scaleY,$=W+X.dragStartX,N=V+X.dragStartY}G.emit(h.GAMEOBJECT_DRAG,R,$,N),this.emit(h.DRAG,R,G,$,N)}return B.length},processDragUpEvent:function(R){for(var L=this._drag[R.id],B=0;B<L.length;B++){var D=L[B],G=D.input;if(G&&G.dragState===2){G.dragState=0,G.dragX=G.localX-D.displayOriginX,G.dragY=G.localY-D.displayOriginY;var X=!1,H=G.target;H&&(D.emit(h.GAMEOBJECT_DROP,R,H),this.emit(h.DROP,R,D,H),G.target=null,X=!0),D.input&&(D.emit(h.GAMEOBJECT_DRAG_END,R,G.dragX,G.dragY,X),this.emit(h.DRAG_END,R,D,X))}}return this.setDragState(R,0),L.splice(0),0},processMoveEvents:function(R){var L=0,B=this._temp,D=this._eventData,G=this._eventContainer;D.cancelled=!1;for(var X=!1,H=0;H<B.length;H++){var K=B[H];if(!!K.input){if(L++,K.emit(h.GAMEOBJECT_POINTER_MOVE,R,K.input.localX,K.input.localY,G),D.cancelled||!K.input){X=!0;break}if(this.emit(h.GAMEOBJECT_MOVE,R,K,G),D.cancelled||!K.input){X=!0;break}if(this.topOnly)break}}return X||this.emit(h.POINTER_MOVE,R,B),L},processWheelEvent:function(R){var L=0,B=this._temp,D=this._eventData,G=this._eventContainer;D.cancelled=!1;for(var X=!1,H=R.deltaX,K=R.deltaY,$=R.deltaZ,N=0;N<B.length;N++){var I=B[N];if(!!I.input){if(L++,I.emit(h.GAMEOBJECT_POINTER_WHEEL,R,H,K,$,G),D.cancelled||!I.input){X=!0;break}if(this.emit(h.GAMEOBJECT_WHEEL,R,I,H,K,$,G),D.cancelled||!I.input){X=!0;break}}}return X||this.emit(h.POINTER_WHEEL,R,B,H,K,$),L},processOverEvents:function(R){var L=this._temp,B=0,D=L.length,G=[];if(D>0){var X=this.manager,H=this._eventData,K=this._eventContainer;H.cancelled=!1;for(var $=!1,N=0;N<D;N++){var I=L[N];if(!!I.input){if(G.push(I),X.setCursor(I.input),I.emit(h.GAMEOBJECT_POINTER_OVER,R,I.input.localX,I.input.localY,K),B++,H.cancelled||!I.input){$=!0;break}if(this.emit(h.GAMEOBJECT_OVER,R,I,K),H.cancelled||!I.input){$=!0;break}}}$||this.emit(h.POINTER_OVER,R,G)}return this._over[R.id]=G,B},processOutEvents:function(R){var L=this._over[R.id],B=0,D=L.length;if(D>0){var G=this.manager,X=this._eventData,H=this._eventContainer;X.cancelled=!1;var K=!1;this.sortGameObjects(L,R);for(var $=0;$<D;$++){var N=L[$];if(N=L[$],!!N.input){if(G.resetCursor(N.input),N.emit(h.GAMEOBJECT_POINTER_OUT,R,H),B++,X.cancelled||!N.input){K=!0;break}if(this.emit(h.GAMEOBJECT_OUT,R,N,H),X.cancelled||!N.input){K=!0;break}K||this.emit(h.POINTER_OUT,R,L)}}this._over[R.id]=[]}return B},processOverOutEvents:function(R){var L=this._temp,B,D,G=[],X=[],H=[],K=this._over[R.id],$=this._drag[R.id],N=this.manager;for(B=0;B<K.length;B++)D=K[B],L.indexOf(D)===-1&&$.indexOf(D)===-1?G.push(D):H.push(D);for(B=0;B<L.length;B++)D=L[B],K.indexOf(D)===-1&&X.push(D);var I=G.length,z=0,U=this._eventData,W=this._eventContainer;U.cancelled=!1;var V=!1;if(I>0){for(this.sortGameObjects(G,R),B=0;B<I;B++)if(D=G[B],!!D.input){if(N.resetCursor(D.input),D.emit(h.GAMEOBJECT_POINTER_OUT,R,W),z++,U.cancelled||!D.input){V=!0;break}if(this.emit(h.GAMEOBJECT_OUT,R,D,W),U.cancelled||!D.input){V=!0;break}}V||this.emit(h.POINTER_OUT,R,G)}if(I=X.length,U.cancelled=!1,V=!1,I>0){for(this.sortGameObjects(X,R),B=0;B<I;B++)if(D=X[B],!!D.input){if(N.setCursor(D.input),D.emit(h.GAMEOBJECT_POINTER_OVER,R,D.input.localX,D.input.localY,W),z++,U.cancelled||!D.input){V=!0;break}if(this.emit(h.GAMEOBJECT_OVER,R,D,W),U.cancelled||!D.input){V=!0;break}}V||this.emit(h.POINTER_OVER,R,X)}return K=H.concat(X),this._over[R.id]=this.sortGameObjects(K,R),z},processUpEvents:function(R){var L=this._temp,B=this._eventData,D=this._eventContainer;B.cancelled=!1;for(var G=!1,X=0;X<L.length;X++){var H=L[X];if(!!H.input){if(H.emit(h.GAMEOBJECT_POINTER_UP,R,H.input.localX,H.input.localY,D),B.cancelled||!H.input){G=!0;break}if(this.emit(h.GAMEOBJECT_UP,R,H,D),B.cancelled||!H.input){G=!0;break}}}return!G&&this.manager&&(R.upElement===this.manager.game.canvas?this.emit(h.POINTER_UP,R,L):this.emit(h.POINTER_UP_OUTSIDE,R)),L.length},queueForInsertion:function(R){return this._pendingInsertion.indexOf(R)===-1&&this._list.indexOf(R)===-1&&this._pendingInsertion.push(R),this},queueForRemoval:function(R){return this._pendingRemoval.push(R),this},setDraggable:function(R,L){L===void 0&&(L=!0),Array.isArray(R)||(R=[R]);for(var B=0;B<R.length;B++){var D=R[B];D.input.draggable=L;var G=this._draggable.indexOf(D);L&&G===-1?this._draggable.push(D):!L&&G>-1&&this._draggable.splice(G,1)}return this},makePixelPerfect:function(R){R===void 0&&(R=1);var L=this.systems.textures;return s(L,R)},setHitArea:function(R,L,B){if(L===void 0)return this.setHitAreaFromTexture(R);Array.isArray(R)||(R=[R]);var D=!1,G=!1,X=!1,H=!1,K=!1,$=!0;if(g(L)){var N=L;L=d(N,"hitArea",null),B=d(N,"hitAreaCallback",null),D=d(N,"draggable",!1),G=d(N,"dropZone",!1),X=d(N,"cursor",!1),H=d(N,"useHandCursor",!1),K=d(N,"pixelPerfect",!1);var I=d(N,"alphaTolerance",1);K&&(L={},B=this.makePixelPerfect(I)),(!L||!B)&&(this.setHitAreaFromTexture(R),$=!1)}else typeof L=="function"&&!B&&(B=L,L={});for(var z=0;z<R.length;z++){var U=R[z];if(K&&U.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var W=U.input?U.input:a(U,L,B);W.customHitArea=$,W.dropZone=G,W.cursor=H?"pointer":X,U.input=W,D&&this.setDraggable(U),this.queueForInsertion(U)}return this},setHitAreaCircle:function(R,L,B,D,G){G===void 0&&(G=f);var X=new e(L,B,D);return this.setHitArea(R,X,G)},setHitAreaEllipse:function(R,L,B,D,G,X){X===void 0&&(X=i);var H=new l(L,B,D,G);return this.setHitArea(R,H,X)},setHitAreaFromTexture:function(R,L){L===void 0&&(L=T),Array.isArray(R)||(R=[R]);for(var B=0;B<R.length;B++){var D=R[B],G=D.frame,X=0,H=0;if(D.width?(X=D.width,H=D.height):G&&(X=G.realWidth,H=G.realHeight),D.type==="Container"&&(X===0||H===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}X!==0&&H!==0&&(D.input=a(D,new y(0,0,X,H),L),this.queueForInsertion(D))}return this},setHitAreaRectangle:function(R,L,B,D,G,X){X===void 0&&(X=T);var H=new y(L,B,D,G);return this.setHitArea(R,H,X)},setHitAreaTriangle:function(R,L,B,D,G,X,H,K){K===void 0&&(K=A);var $=new w(L,B,D,G,X,H);return this.setHitArea(R,$,K)},enableDebug:function(R,L){L===void 0&&(L=65280);var B=R.input;if(!B||!B.hitArea)return this;var D=B.hitArea,G=D.type,X=B.hitAreaDebug,H=this.systems.add,K=this.systems.updateList;X&&(K.remove(X),X.destroy(),X=null);var $=0,N=0;switch(G){case c.CIRCLE:X=H.arc(0,0,D.radius),$=D.x-D.radius,N=D.y-D.radius;break;case c.ELLIPSE:X=H.ellipse(0,0,D.width,D.height),$=D.x-D.width/2,N=D.y-D.height/2;break;case c.LINE:X=H.line(0,0,D.x1,D.y1,D.x2,D.y2);break;case c.POLYGON:X=H.polygon(0,0,D.points);break;case c.RECTANGLE:X=H.rectangle(0,0,D.width,D.height),$=D.x,N=D.y;break;case c.TRIANGLE:X=H.triangle(0,0,D.x1,D.y1,D.x2,D.y2,D.x3,D.y3);break}return X&&(X.isFilled=!1,X.preUpdate=function(){X.setStrokeStyle(1/R.scale,L),X.setDisplayOrigin(R.displayOriginX,R.displayOriginY);var I=R.x,z=R.y,U=R.rotation,W=R.scaleX,V=R.scaleY;if(R.parentContainer){var Z=R.getWorldTransformMatrix();I=Z.tx,z=Z.ty,U=Z.rotation,W=Z.scaleX,V=Z.scaleY}X.setRotation(U),X.setScale(W,V),X.setPosition(I+$,z+N),X.setScrollFactor(R.scrollFactorX,R.scrollFactorY),X.setDepth(R.depth)},K.add(X),B.hitAreaDebug=X),this},removeDebug:function(R){var L=R.input;if(L&&L.hitAreaDebug){var B=L.hitAreaDebug;this.systems.updateList.remove(B),B.destroy(),L.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(R){return this.pollRate=R,this._pollTimer=0,this},setGlobalTopOnly:function(R){return this.manager.globalTopOnly=R,this},setTopOnly:function(R){return this.topOnly=R,this},sortGameObjects:function(R,L){if(R.length<2)return R;var B=L.camera.renderList;return R.sort(function(D,G){return B.indexOf(G)-B.indexOf(D)})},sortDropZones:function(R){return R.length<2?R:(this.scene.sys.depthSort(),R.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(R,L){if(!R.parentContainer&&!L.parentContainer)return this.displayList.getIndex(L)-this.displayList.getIndex(R);if(R.parentContainer===L.parentContainer)return L.parentContainer.getIndex(L)-R.parentContainer.getIndex(R);if(R.parentContainer===L)return-1;if(L.parentContainer===R)return 1;for(var B=R.getIndexList(),D=L.getIndexList(),G=Math.min(B.length,D.length),X=0;X<G;X++){var H=B[X],K=D[X];if(H!==K)return K-H}return D.length-B.length;return 0},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(R){return this.manager.addPointer(R)},setDefaultCursor:function(R){return this.manager.setDefaultCursor(R),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(h.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var R=0;R<10;R++)this._drag[R]=[],this._over[R]=[];this.removeAllListeners();var L=this.manager;L.canvas.style.cursor=L.defaultCursor;var B=this.systems.events;B.off(E.TRANSITION_START,this.transitionIn,this),B.off(E.TRANSITION_OUT,this.transitionOut,this),B.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),B.off(E.PRE_UPDATE,this.preUpdate,this),L.events.off(h.GAME_OUT,this.onGameOut,this),L.events.off(h.GAME_OVER,this.onGameOver,this),B.off(E.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(h.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});x.register("InputPlugin",b,"input"),m.exports=b},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keydown"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keyup"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keycombomatch"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="down"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keydown-"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="keyup-"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="up"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(9),r=t(154),o=t(22),a=t(6),s=t(51),n=t(153),l=t(512),i=t(143),h=t(513),u=t(1331),d=t(20),c=t(76),p=new e({Extends:f,initialize:function(x){f.call(this),this.game=x.systems.game,this.scene=x.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=x,this.manager=x.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,x.pluginEvents.once(s.BOOT,this.boot,this),x.pluginEvents.on(s.START,this.start,this)},boot:function(){var g=this.settings.input;this.enabled=a(g,"keyboard",!0);var x=a(g,"keyboard.capture",null);x&&this.addCaptures(x),this.sceneInputPlugin.pluginEvents.once(s.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(s.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(s.SHUTDOWN,this.shutdown,this),this.game.events.on(o.BLUR,this.resetKeys,this),this.scene.sys.events.on(d.PAUSE,this.resetKeys,this),this.scene.sys.events.on(d.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(g){return this.manager.addCapture(g),this},removeCapture:function(g){return this.manager.removeCapture(g),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:i.UP,down:i.DOWN,left:i.LEFT,right:i.RIGHT,space:i.SPACE,shift:i.SHIFT})},addKeys:function(g,x,y){x===void 0&&(x=!0),y===void 0&&(y=!1);var T={};if(typeof g=="string"){g=g.split(",");for(var E=0;E<g.length;E++){var w=g[E].trim();w&&(T[w]=this.addKey(w,x,y))}}else for(var A in g)T[A]=this.addKey(g[A],x,y);return T},addKey:function(g,x,y){x===void 0&&(x=!0),y===void 0&&(y=!1);var T=this.keys;if(g instanceof l){var E=T.indexOf(g);return E>-1?T[E]=g:T[g.keyCode]=g,x&&this.addCapture(g.keyCode),g.setEmitOnRepeat(y),g}return typeof g=="string"&&(g=i[g.toUpperCase()]),T[g]||(T[g]=new l(this,g),x&&this.addCapture(g),T[g].setEmitOnRepeat(y)),T[g]},removeKey:function(g,x){x===void 0&&(x=!1);var y=this.keys,T;if(g instanceof l){var E=y.indexOf(g);E>-1&&(T=this.keys[E],this.keys[E]=void 0)}else typeof g=="string"&&(g=i[g.toUpperCase()]);return y[g]&&(T=y[g],y[g]=void 0),T&&(T.plugin=null,x&&T.destroy()),this},removeAllKeys:function(g){for(var x=this.keys,y=0;y<x.length;y++){var T=x[y];T&&(x[y]=void 0,g&&T.destroy())}return this},createCombo:function(g,x){return new h(this,g,x)},checkDown:function(g,x){if(x===void 0&&(x=0),this.enabled&&g.isDown){var y=c(this.time-g.timeDown,x);if(y>g._tick)return g._tick=y,!0}return!1},update:function(){var g=this.manager.queue,x=g.length;if(!(!this.isActive()||x===0))for(var y=this.keys,T=0;T<x;T++){var E=g[T],w=E.keyCode,A=y[w],b=!1;E.cancelled===void 0&&(E.cancelled=0,E.stopImmediatePropagation=function(){E.cancelled=1},E.stopPropagation=function(){E.cancelled=-1}),E.cancelled!==-1&&(w===this.prevCode&&E.timeStamp===this.prevTime&&E.type===this.prevType||(this.prevCode=w,this.prevTime=E.timeStamp,this.prevType=E.type,E.type==="keydown"?(A&&(b=A.isDown,A.onDown(E)),!E.cancelled&&(!A||!b)&&(u[w]&&this.emit(r.KEY_DOWN+u[w],E),E.cancelled||this.emit(r.ANY_KEY_DOWN,E))):(A&&A.onUp(E),E.cancelled||(u[w]&&this.emit(r.KEY_UP+u[w],E),E.cancelled||this.emit(r.ANY_KEY_UP,E))),E.cancelled===1&&(E.cancelled=0)))}},resetKeys:function(){for(var g=this.keys,x=0;x<g.length;x++)g[x]&&g[x].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(s.MANAGER_PROCESS,this.update,this),this.game.events.off(o.BLUR,this.resetKeys),this.scene.sys.events.off(d.PAUSE,this.resetKeys,this),this.scene.sys.events.off(d.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var g=this.keys,x=0;x<g.length;x++)g[x]&&g[x].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});n.register("KeyboardPlugin",p,"keyboard","keyboard","inputKeyboard"),m.exports=p},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(143),f={};for(var r in e)f[e[r]]=r;m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e._justDown?(e._justDown=!1,!0):!1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e._justUp?(e._justUp=!1,!0):!1};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=50);var r=e.plugin.game.loop.time-e.timeDown;return e.isDown&&r<f};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){f===void 0&&(f=50);var r=e.plugin.game.loop.time-e.timeUp;return e.isUp&&r<f};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={MouseManager:t(411)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={TouchManager:t(413)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(21),f=t(17),r={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(61),o=t(95),a=new e({Extends:r,initialize:function(n,l,i,h,u){r.call(this,n,l,i,h,u),this.type="animationJSON"},onProcess:function(){this.loader.once(o.POST_PROCESS,this.onLoadComplete,this),r.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});f.register("animation",function(s,n,l,i){if(Array.isArray(s))for(var h=0;h<s.length;h++)this.addFile(new a(this,s[h]));else this.addFile(new a(this,s,n,i,l));return this}),m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(2),o=t(71),a=t(7),s=t(61),n=t(49),l=new e({Extends:n,initialize:function(h,u,d,c,p,g){var x,y;if(a(u)){var T=u;u=r(T,"key"),x=new o(h,{key:u,url:r(T,"textureURL"),extension:r(T,"textureExtension","png"),normalMap:r(T,"normalMap"),xhrSettings:r(T,"textureXhrSettings")}),y=new s(h,{key:u,url:r(T,"atlasURL"),extension:r(T,"atlasExtension","json"),xhrSettings:r(T,"atlasXhrSettings")})}else x=new o(h,u,d,p),y=new s(h,u,c,g);x.linkFile?n.call(this,h,"atlasjson",u,[x,y,x.linkFile]):n.call(this,h,"atlasjson",u,[x,y])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1],u=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(i.key,i.data,h.data,u),h.addToCache(),this.complete=!0}}});f.register("aseprite",function(i,h,u,d,c){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,u,d,c),this.addFile(p.files);return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(2),o=t(71),a=t(7),s=t(61),n=t(49),l=new e({Extends:n,initialize:function(h,u,d,c,p,g){var x,y;if(a(u)){var T=u;u=r(T,"key"),x=new o(h,{key:u,url:r(T,"textureURL"),extension:r(T,"textureExtension","png"),normalMap:r(T,"normalMap"),xhrSettings:r(T,"textureXhrSettings")}),y=new s(h,{key:u,url:r(T,"atlasURL"),extension:r(T,"atlasExtension","json"),xhrSettings:r(T,"atlasXhrSettings")})}else x=new o(h,u,d,p),y=new s(h,u,c,g);x.linkFile?n.call(this,h,"atlasjson",u,[x,y,x.linkFile]):n.call(this,h,"atlasjson",u,[x,y])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1],u=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(i.key,i.data,h.data,u),h.pendingDestroy(),this.complete=!0}}});f.register("atlas",function(i,h,u,d,c){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,u,d,c),this.addFile(p.files);return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(2),o=t(71),a=t(7),s=t(49),n=t(241),l=new e({Extends:s,initialize:function(h,u,d,c,p,g){var x,y;if(a(u)){var T=u;u=r(T,"key"),x=new o(h,{key:u,url:r(T,"textureURL"),extension:r(T,"textureExtension","png"),normalMap:r(T,"normalMap"),xhrSettings:r(T,"textureXhrSettings")}),y=new n(h,{key:u,url:r(T,"atlasURL"),extension:r(T,"atlasExtension","xml"),xhrSettings:r(T,"atlasXhrSettings")})}else x=new o(h,u,d,p),y=new n(h,u,c,g);x.linkFile?s.call(this,h,"atlasxml",u,[x,y,x.linkFile]):s.call(this,h,"atlasxml",u,[x,y])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1],u=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(i.key,i.data,h.data,u),h.pendingDestroy(),this.complete=!0}}});f.register("atlasXML",function(i,h,u,d,c){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,u,d,c),this.addFile(p.files);return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(518),f=t(0),r=t(8),o=t(2),a=t(7),s=t(61),n=t(49),l=new f({Extends:n,initialize:function(h,u,d,c,p,g,x){if(a(u)){var y=u;u=o(y,"key"),d=o(y,"jsonURL"),c=o(y,"audioURL"),p=o(y,"audioConfig"),g=o(y,"audioXhrSettings"),x=o(y,"jsonXhrSettings")}var T;if(!c)T=new s(h,u,d,x),n.call(this,h,"audiosprite",u,[T]),this.config.resourceLoad=!0,this.config.audioConfig=p,this.config.audioXhrSettings=g;else{var E=e.create(h,u,c,p,g);E&&(T=new s(h,u,d,x),n.call(this,h,"audiosprite",u,[E,T]),this.config.resourceLoad=!1)}},onFileComplete:function(i){var h=this.files.indexOf(i);if(h!==-1&&(this.pending--,this.config.resourceLoad&&i.type==="json"&&i.data.hasOwnProperty("resources"))){var u=i.data.resources,d=o(this.config,"audioConfig"),c=o(this.config,"audioXhrSettings"),p=e.create(this.loader,i.key,u,d,c);p&&(this.addToMultiFile(p),this.loader.addFile(p))}},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1];i.addToCache(),h.addToCache(),this.complete=!0}}});r.register("audioSprite",function(i,h,u,d,c,p){var g=this.systems.game,x=g.config.audio,y=g.device.audio;if(x&&x.noAudio||!y.webAudio&&!y.audioData)return this;var T;if(Array.isArray(i))for(var E=0;E<i.length;E++)T=new l(this,i[E]),T.files&&this.addFile(T.files);else T=new l(this,i,h,u,d,c,p),T.files&&this.addFile(T.files);return this})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d,c){var p="bin";if(s(h)){var g=h;h=a(g,"key"),u=a(g,"url"),d=a(g,"xhrSettings"),p=a(g,"extension",p),c=a(g,"dataType",c)}var x={type:"binary",cache:i.cacheManager.binary,extension:p,responseType:"arraybuffer",key:h,url:u,xhrSettings:d,config:{dataType:c}};r.call(this,i,x)},onProcess:function(){this.state=f.FILE_PROCESSING;var l=this.config.dataType;this.data=l?new l(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});o.register("binary",function(l,i,h,u){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new n(this,l[d]));else this.addFile(new n(this,l,i,u,h));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(2),o=t(71),a=t(7),s=t(49),n=t(212),l=t(241),i=new e({Extends:s,initialize:function(u,d,c,p,g,x){var y,T;if(a(d)){var E=d;d=r(E,"key"),y=new o(u,{key:d,url:r(E,"textureURL"),extension:r(E,"textureExtension","png"),normalMap:r(E,"normalMap"),xhrSettings:r(E,"textureXhrSettings")}),T=new l(u,{key:d,url:r(E,"fontDataURL"),extension:r(E,"fontDataExtension","xml"),xhrSettings:r(E,"fontDataXhrSettings")})}else y=new o(u,d,c,g),T=new l(u,d,p,x);y.linkFile?s.call(this,u,"bitmapfont",d,[y,T,y.linkFile]):s.call(this,u,"bitmapfont",d,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],u=this.files[1];h.addToCache(),u.pendingDestroy();var d=h.cache.get(h.key),c=n(u.data,h.cache.getFrame(h.key),0,0,d);this.loader.cacheManager.bitmapFont.add(h.key,{data:c,texture:h.key,frame:null}),this.complete=!0}}});f.register("bitmapFont",function(h,u,d,c,p){var g;if(Array.isArray(h))for(var x=0;x<h.length;x++)g=new i(this,h[x]),this.addFile(g.files);else g=new i(this,h,u,d,c,p),this.addFile(g.files);return this}),m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d){var c="css";if(s(h)){var p=h;h=a(p,"key"),u=a(p,"url"),d=a(p,"xhrSettings"),c=a(p,"extension",c)}var g={type:"script",cache:!1,extension:c,responseType:"text",key:h,url:u,xhrSettings:d};r.call(this,i,g)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});o.register("css",function(l,i,h){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new n(this,l[u]));else this.addFile(new n(this,l,i,h));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=t(396),l=new e({Extends:r,initialize:function(h,u,d,c,p){var g="glsl";if(s(u)){var x=u;u=a(x,"key"),d=a(x,"url"),c=a(x,"shaderType","fragment"),p=a(x,"xhrSettings"),g=a(x,"extension",g)}else c===void 0&&(c="fragment");var y={type:"glsl",cache:h.cacheManager.shader,extension:g,responseType:"text",key:u,url:d,config:{shaderType:c},xhrSettings:p};r.call(this,h,y)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i=this.data.split(`
`),h=this.extractBlock(i,0);if(h)for(;h;){var u=this.getShaderName(h.header),d=this.getShaderType(h.header),c=this.getShaderUniforms(h.header),p=h.shader;if(this.cache.has(u)){var g=this.cache.get(u);d==="fragment"?g.fragmentSrc=p:g.vertexSrc=p,g.uniforms||(g.uniforms=c)}else d==="fragment"?this.cache.add(u,new n(u,p,"",c)):this.cache.add(u,new n(u,"",p,c));h=this.extractBlock(i,h.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new n(this.key,this.data)):this.cache.add(this.key,new n(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(i){for(var h=0;h<i.length;h++){var u=i[h].trim();if(u.substring(0,5)==="name:")return u.substring(5).trim()}return this.key},getShaderType:function(i){for(var h=0;h<i.length;h++){var u=i[h].trim();if(u.substring(0,5)==="type:")return u.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(i){for(var h={},u=0;u<i.length;u++){var d=i[u].trim();if(d.substring(0,8)==="uniform."){var c=d.indexOf(":");if(c){var p=d.substring(8,c);try{h[p]=JSON.parse(d.substring(c+1))}catch(g){console.warn("Invalid uniform JSON: "+p)}}}}return h},extractBlock:function(i,h){for(var u=-1,d=-1,c=-1,p=!1,g=!1,x=[],y=[],T=h;T<i.length;T++){var E=i[T].trim();if(E==="---")if(u===-1)u=T,p=!0;else if(p)d=T,p=!1,g=!0;else{g=!1;break}else p?x.push(E):g&&(y.push(E),c=T)}return!p&&d!==-1?{header:x,shader:y.join(`
`),offset:c}:null}});o.register("glsl",function(i,h,u,d){if(Array.isArray(i))for(var c=0;c<i.length;c++)this.addFile(new l(this,i[c]));else this.addFile(new l(this,i,h,u,d));return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d){var c="html";if(s(h)){var p=h;h=a(p,"key"),u=a(p,"url"),d=a(p,"xhrSettings"),c=a(p,"extension",c)}var g={type:"text",cache:i.cacheManager.html,extension:c,responseType:"text",key:h,url:u,xhrSettings:d};r.call(this,i,g)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});o.register("html",function(l,i,h){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new n(this,l[u]));else this.addFile(new n(this,l,i,h));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d,c,p){d===void 0&&(d=512),c===void 0&&(c=512);var g="html";if(s(h)){var x=h;h=a(x,"key"),u=a(x,"url"),p=a(x,"xhrSettings"),g=a(x,"extension",g),d=a(x,"width",d),c=a(x,"height",c)}var y={type:"html",cache:i.textureManager,extension:g,responseType:"text",key:h,url:u,xhrSettings:p,config:{width:d,height:c}};r.call(this,i,y)},onProcess:function(){this.state=f.FILE_PROCESSING;var l=this.config.width,i=this.config.height,h=[];h.push('<svg width="'+l+'px" height="'+i+'px" viewBox="0 0 '+l+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),h.push('<foreignObject width="100%" height="100%">'),h.push('<body xmlns="http://www.w3.org/1999/xhtml">'),h.push(this.xhrLoader.responseText),h.push("</body>"),h.push("</foreignObject>"),h.push("</svg>");var u=[h.join(`
`)],d=this;try{var c=new window.Blob(u,{type:"image/svg+xml;charset=utf-8"})}catch(p){d.state=f.FILE_ERRORED,d.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){r.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(d.data),d.onProcessError()},r.createObjectURL(this.data,c,"image/svg+xml")},addToCache:function(){var l=this.cache.addImage(this.key,this.data);this.pendingDestroy(l)}});o.register("htmlTexture",function(l,i,h,u,d){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new n(this,l[c]));else this.addFile(new n(this,l,i,h,u,d));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(2),o=t(71),a=t(7),s=t(61),n=t(49),l=new e({Extends:n,initialize:function(h,u,d,c,p,g,x){if(a(u)){var y=u;u=r(y,"key"),r(y,"url",!1)?d=r(y,"url"):d=r(y,"atlasURL"),g=r(y,"xhrSettings"),c=r(y,"path"),p=r(y,"baseURL"),x=r(y,"textureXhrSettings")}var T=new s(h,u,d,g);n.call(this,h,"multiatlas",u,[T]),this.config.path=c,this.config.baseURL=p,this.config.textureXhrSettings=x},onFileComplete:function(i){var h=this.files.indexOf(i);if(h!==-1&&(this.pending--,i.type==="json"&&i.data.hasOwnProperty("textures"))){var u=i.data.textures,d=this.config,c=this.loader,p=c.baseURL,g=c.path,x=c.prefix,y=r(d,"baseURL",this.baseURL),T=r(d,"path",this.path),E=r(d,"prefix",this.prefix),w=r(d,"textureXhrSettings");c.setBaseURL(y),c.setPath(T),c.setPrefix(E);for(var A=0;A<u.length;A++){var b=u[A].image,R="MA"+this.multiKeyIndex+"_"+b,L=new o(c,R,b,w);if(this.addToMultiFile(L),c.addFile(L),u[A].normalMap){var B=new o(c,R,u[A].normalMap,w);B.type="normalMap",L.setLink(B),this.addToMultiFile(B),c.addFile(B)}}c.setBaseURL(p),c.setPath(g),c.setPrefix(x)}},addToCache:function(){if(this.isReadyToProcess()){for(var i=this.files[0],h=[],u=[],d=[],c=1;c<this.files.length;c++){var p=this.files[c];if(p.type!=="normalMap")for(var g=p.key.indexOf("_"),x=p.key.substr(g+1),y=p.data,T=0;T<i.data.textures.length;T++){var E=i.data.textures[T];if(E.image===x){u.push(y),h.push(E),p.linkFile&&d.push(p.linkFile.data);break}}}for(d.length===0&&(d=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,u,h,d),this.complete=!0,c=0;c<this.files.length;c++)this.files[c].pendingDestroy()}}});f.register("multiatlas",function(i,h,u,d,c){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,u,d,c),this.addFile(p.files);return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(2),o=t(7),a=t(49),s=t(520),n=new e({Extends:a,initialize:function(i,h,u,d){var c="js",p=[];if(o(h)){var g=h;h=r(g,"key"),u=r(g,"url"),d=r(g,"xhrSettings"),c=r(g,"extension",c)}Array.isArray(u)||(u=[u]);for(var x=0;x<u.length;x++){var y=new s(i,{key:h+"_"+x.toString(),url:u[x],extension:c,xhrSettings:d});y.onProcess=function(){this.onProcessComplete()},p.push(y)}a.call(this,i,"scripts",h,p)},addToCache:function(){if(this.isReadyToProcess()){for(var l=0;l<this.files.length;l++){var i=this.files[l];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});f.register("scripts",function(l,i,h){var u;if(Array.isArray(l))for(var d=0;d<l.length;d++)u=new n(this,l[d]),this.addFile(u.files);else u=new n(this,l,i,h),this.addFile(u.files);return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(2),o=t(7),a=t(49),s=t(498),n=t(499),l=t(242),i=new e({Extends:a,initialize:function(u,d,c,p,g,x){var y,T,E=u.cacheManager.obj;if(o(d)){var w=d;d=r(w,"key"),y=new l(u,{key:d,type:"obj",cache:E,url:r(w,"url"),extension:r(w,"extension","obj"),xhrSettings:r(w,"xhrSettings"),config:{flipUV:r(w,"flipUV",g)}}),p=r(w,"matURL"),p&&(T=new l(u,{key:d,type:"mat",cache:E,url:p,extension:r(w,"matExtension","mat"),xhrSettings:r(w,"xhrSettings")}))}else y=new l(u,{key:d,url:c,type:"obj",cache:E,extension:"obj",xhrSettings:x,config:{flipUV:g}}),p&&(T=new l(u,{key:d,url:p,type:"mat",cache:E,extension:"mat",xhrSettings:x}));a.call(this,u,"obj",d,[y,T])},addToCache:function(){if(this.isReadyToProcess()){var h=this.files[0],u=this.files[1],d=s(h.data,h.config.flipUV);u&&(d.materials=n(u.data)),h.cache.add(h.key,d),this.complete=!0}}});f.register("obj",function(h,u,d,c,p){var g;if(Array.isArray(h))for(var x=0;x<h.length;x++)g=new i(this,h[x]),this.addFile(g.files);else g=new i(this,h,u,d,c,p),this.addFile(g.files);return this}),m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(8),o=t(61),a=new e({Extends:o,initialize:function(n,l,i,h,u){o.call(this,n,l,i,h,u),this.type="packfile"},onProcess:function(){this.state!==f.FILE_POPULATED&&(this.state=f.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});r.register("pack",function(s,n,l,i){if(Array.isArray(s))for(var h=0;h<s.length;h++)this.addFile(new a(this,s[h]));else this.addFile(new a(this,s,n,i,l));return this}),m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d,c,p){var g="js";if(s(h)){var x=h;h=a(x,"key"),u=a(x,"url"),p=a(x,"xhrSettings"),g=a(x,"extension",g),d=a(x,"start"),c=a(x,"mapping")}var y={type:"plugin",cache:!1,extension:g,responseType:"text",key:h,url:u,xhrSettings:p,config:{start:d,mapping:c}};r.call(this,i,y),typeof u=="function"&&(this.data=u,this.state=f.FILE_POPULATED)},onProcess:function(){var l=this.loader.systems.plugins,i=this.config,h=a(i,"start",!1),u=a(i,"mapping",null);if(this.state===f.FILE_POPULATED)l.install(this.key,this.data,h,u);else{this.state=f.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var d=l.install(this.key,window[this.key],h,u);(h||u)&&(this.loader.systems[u]=d,this.loader.scene[u]=d)}this.onProcessComplete()}});o.register("plugin",function(l,i,h,u,d){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new n(this,l[c]));else this.addFile(new n(this,l,i,h,u,d));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d){var c="js";if(s(h)){var p=h;h=a(p,"key"),u=a(p,"url"),d=a(p,"xhrSettings"),c=a(p,"extension",c)}var g={type:"text",extension:c,responseType:"text",key:h,url:u,xhrSettings:d};r.call(this,i,g)},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var l=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),i=eval;this.loader.sceneManager.add(this.key,i(l)),this.complete=!0}});o.register("sceneFile",function(l,i,h){if(Array.isArray(l))for(var u=0;u<l.length;u++)this.addFile(new n(this,l[u]));else this.addFile(new n(this,l,i,h));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d,c,p){var g="js";if(s(h)){var x=h;h=a(x,"key"),u=a(x,"url"),p=a(x,"xhrSettings"),g=a(x,"extension",g),d=a(x,"systemKey"),c=a(x,"sceneKey")}var y={type:"scenePlugin",cache:!1,extension:g,responseType:"text",key:h,url:u,xhrSettings:p,config:{systemKey:d,sceneKey:c}};r.call(this,i,y),typeof u=="function"&&(this.data=u,this.state=f.FILE_POPULATED)},onProcess:function(){var l=this.loader.systems.plugins,i=this.config,h=this.key,u=a(i,"systemKey",h),d=a(i,"sceneKey",h);this.state===f.FILE_POPULATED?l.installScenePlugin(u,this.data,d,this.loader.scene,!0):(this.state=f.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),l.installScenePlugin(u,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});o.register("scenePlugin",function(l,i,h,u,d){if(Array.isArray(l))for(var c=0;c<l.length;c++)this.addFile(new n(this,l[c]));else this.addFile(new n(this,l,i,h,u,d));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(71),o=new e({Extends:r,initialize:function(s,n,l,i,h){r.call(this,s,n,l,h,i),this.type="spritesheet"},addToCache:function(){var a=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(a)}});f.register("spritesheet",function(a,s,n,l){if(Array.isArray(a))for(var i=0;i<a.length;i++)this.addFile(new o(this,a[i]));else this.addFile(new o(this,a,s,n,l));return this}),m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=new e({Extends:r,initialize:function(i,h,u,d,c){var p="svg";if(s(h)){var g=h;h=a(g,"key"),u=a(g,"url"),d=a(g,"svgConfig",{}),c=a(g,"xhrSettings"),p=a(g,"extension",p)}var x={type:"svg",cache:i.textureManager,extension:p,responseType:"text",key:h,url:u,xhrSettings:c,config:{width:a(d,"width"),height:a(d,"height"),scale:a(d,"scale")}};r.call(this,i,x)},onProcess:function(){this.state=f.FILE_PROCESSING;var l=this.xhrLoader.responseText,i=[l],h=this.config.width,u=this.config.height,d=this.config.scale;t:if(h&&u||d){var c=null,p=new DOMParser;c=p.parseFromString(l,"text/xml");var g=c.getElementsByTagName("svg")[0],x=g.hasAttribute("viewBox"),y=parseFloat(g.getAttribute("width")),T=parseFloat(g.getAttribute("height"));if(!x&&y&&T)g.setAttribute("viewBox","0  0 "+y+" "+T);else if(x&&!y&&!T){var E=g.getAttribute("viewBox").split(/\s+|,/);y=E[2],T=E[3]}if(d)if(y&&T)h=y*d,u=T*d;else break t;g.setAttribute("width",h.toString()+"px"),g.setAttribute("height",u.toString()+"px"),i=[new XMLSerializer().serializeToString(g)]}try{var w=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(R){this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var A=this,b=!1;this.data.onload=function(){b||r.revokeObjectURL(A.data),A.onProcessComplete()},this.data.onerror=function(){b?A.onProcessError():(b=!0,r.revokeObjectURL(A.data),A.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},r.createObjectURL(this.data,w,"image/svg+xml")},addToCache:function(){var l=this.cache.addImage(this.key,this.data);this.pendingDestroy(l)}});o.register("svg",function(l,i,h,u){if(Array.isArray(l))for(var d=0;d<l.length;d++)this.addFile(new n(this,l[d]));else this.addFile(new n(this,l,i,h,u));return this}),m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(2),s=t(7),n=t(40),l=new e({Extends:r,initialize:function(h,u,d,c){var p="csv";if(s(u)){var g=u;u=a(g,"key"),d=a(g,"url"),c=a(g,"xhrSettings"),p=a(g,"extension",p)}var x={type:"tilemapCSV",cache:h.cacheManager.tilemap,extension:p,responseType:"text",key:u,url:d,xhrSettings:c};r.call(this,h,x),this.tilemapFormat=n.CSV},onProcess:function(){this.state=f.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,i),this.pendingDestroy(i)}});o.register("tilemapCSV",function(i,h,u){if(Array.isArray(i))for(var d=0;d<i.length;d++)this.addFile(new l(this,i[d]));else this.addFile(new l(this,i,h,u));return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(61),o=t(40),a=new e({Extends:r,initialize:function(n,l,i,h){r.call(this,n,l,i,h),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var s={format:o.WELTMEISTER,data:this.data};this.cache.add(this.key,s),this.pendingDestroy(s)}});f.register("tilemapImpact",function(s,n,l){if(Array.isArray(s))for(var i=0;i<s.length;i++)this.addFile(new a(this,s[i]));else this.addFile(new a(this,s,n,l));return this}),m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(61),o=t(40),a=new e({Extends:r,initialize:function(n,l,i,h){r.call(this,n,l,i,h),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var s={format:o.TILED_JSON,data:this.data};this.cache.add(this.key,s),this.pendingDestroy(s)}});f.register("tilemapTiledJSON",function(s,n,l){if(Array.isArray(s))for(var i=0;i<s.length;i++)this.addFile(new a(this,s[i]));else this.addFile(new a(this,s,n,l));return this}),m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(8),r=t(2),o=t(71),a=t(7),s=t(49),n=t(242),l=new e({Extends:s,initialize:function(h,u,d,c,p,g){var x,y;if(a(u)){var T=u;u=r(T,"key"),x=new o(h,{key:u,url:r(T,"textureURL"),extension:r(T,"textureExtension","png"),normalMap:r(T,"normalMap"),xhrSettings:r(T,"textureXhrSettings")}),y=new n(h,{key:u,url:r(T,"atlasURL"),extension:r(T,"atlasExtension","txt"),xhrSettings:r(T,"atlasXhrSettings")})}else x=new o(h,u,d,p),y=new n(h,u,c,g);x.linkFile?s.call(this,h,"unityatlas",u,[x,y,x.linkFile]):s.call(this,h,"unityatlas",u,[x,y])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],h=this.files[1],u=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(i.key,i.data,h.data,u),h.pendingDestroy(),this.complete=!0}}});f.register("unityAtlas",function(i,h,u,d,c){var p;if(Array.isArray(i))for(var g=0;g<i.length;g++)p=new l(this,i[g]),this.addFile(p.files);else p=new l(this,i,h,u,d,c),this.addFile(p.files);return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(23),o=t(8),a=t(155),s=t(2),n=t(7),l=new e({Extends:r,initialize:function(h,u,d,c,p,g,x){c===void 0&&(c="loadeddata"),p===void 0&&(p=!1),g===void 0&&(g=!1),c!=="loadeddata"&&c!=="canplay"&&c!=="canplaythrough"&&(c="loadeddata");var y={type:"video",cache:h.cacheManager.video,extension:d.type,responseType:"blob",key:u,url:d.url,xhrSettings:x,config:{loadEvent:c,asBlob:p,noAudio:g}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),r.call(this,h,y)},onProcess:function(){if(this.state=f.FILE_PROCESSING,!this.config.asBlob){this.onProcessComplete();return}var i=this.createVideoElement();this.data=i;var h=this;this.data.onloadeddata=function(){h.onProcessComplete()},this.data.onerror=function(){r.revokeObjectURL(h.data),h.onProcessError()},r.createObjectURL(i,this.xhrLoader.response,""),i.load()},createVideoElement:function(){var i=document.createElement("video");return i.controls=!1,i.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(i.muted=!0,i.defaultMuted=!0,i.setAttribute("autoplay","autoplay")),i.setAttribute("playsinline","playsinline"),i.setAttribute("preload","auto"),i},onVideoLoadHandler:function(i){var h=i.target;h.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),h.removeEventListener("error",this.onErrorCallback,!0),this.data=h,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(i){var h=i.target;h&&(h.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),h.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var i=this.config.loadEvent;if(this.config.asBlob)r.prototype.load.call(this);else{this.percentComplete=0;var h=this.createVideoElement();h.addEventListener(i,this.onLoadCallback,!0),h.addEventListener("error",this.onErrorCallback,!0),h.src=a(this,this.loader.baseURL),h.load()}}});l.create=function(i,h,u,d,c,p,g){var x=i.systems.game;n(h)&&(u=s(h,"url",[]),d=s(h,"loadEvent","loadeddata"),c=s(h,"asBlob",!1),p=s(h,"noAudio",!1),g=s(h,"xhrSettings"),h=s(h,"key"));var y=l.getVideoURL(x,u);if(y)return new l(i,h,y,d,c,p,g)},l.getVideoURL=function(i,h){Array.isArray(h)||(h=[h]);for(var u=0;u<h.length;u++){var d=s(h[u],"url",h[u]);if(d.indexOf("blob:")===0)return{url:d,type:""};var c;if(d.indexOf("data:")===0?c=d.split(",")[0].match(/\/(.*?);/):c=d.match(/\.([a-zA-Z0-9]+)($|\?)/),c=s(h[u],"type",c?c[1]:"").toLowerCase(),i.device.video[c])return{url:d,type:c}}return null},o.register("video",function(i,h,u,d,c,p){var g;if(Array.isArray(i))for(var x=0;x<i.length;x++)g=l.create(this,i[x]),g&&this.addFile(g);else g=l.create(this,i,h,u,d,c,p),g&&this.addFile(g);return this}),m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(21),r=t(149),o=t(9),a=t(95),s=t(8),n=t(2),l=t(24),i=t(20),h=t(156),u=new e({Extends:o,initialize:function(c){o.call(this);var p=c.sys.game.config,g=c.sys.settings.loader;this.scene=c,this.systems=c.sys,this.cacheManager=c.sys.cache,this.textureManager=c.sys.textures,this.sceneManager=c.sys.game.scene,s.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(n(g,"baseURL",p.loaderBaseURL)),this.setPath(n(g,"path",p.loaderPath)),this.setPrefix(n(g,"prefix",p.loaderPrefix)),this.maxParallelDownloads=n(g,"maxParallelDownloads",p.loaderMaxParallelDownloads),this.xhr=h(n(g,"responseType",p.loaderResponseType),n(g,"async",p.loaderAsync),n(g,"user",p.loaderUser),n(g,"password",p.loaderPassword),n(g,"timeout",p.loaderTimeout),n(g,"withCredentials",p.loaderWithCredentials)),this.crossOrigin=n(g,"crossOrigin",p.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new r,this.inflight=new r,this.queue=new r,this._deleteQueue=new r,this.totalFailed=0,this.totalComplete=0,this.state=f.LOADER_IDLE,this.multiKeyIndex=0,c.sys.events.once(i.BOOT,this.boot,this),c.sys.events.on(i.START,this.pluginStart,this)},boot:function(){this.systems.events.once(i.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(i.SHUTDOWN,this.shutdown,this)},setBaseURL:function(d){return d===void 0&&(d=""),d!==""&&d.substr(-1)!=="/"&&(d=d.concat("/")),this.baseURL=d,this},setPath:function(d){return d===void 0&&(d=""),d!==""&&d.substr(-1)!=="/"&&(d=d.concat("/")),this.path=d,this},setPrefix:function(d){return d===void 0&&(d=""),this.prefix=d,this},setCORS:function(d){return this.crossOrigin=d,this},addFile:function(d){Array.isArray(d)||(d=[d]);for(var c=0;c<d.length;c++){var p=d[c];this.keyExists(p)||(this.list.set(p),this.emit(a.ADD,p.key,p.type,this,p),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(d){var c=d.hasCacheConflict();return c||this.list.iterate(function(p){if(p.type===d.type&&p.key===d.key)return c=!0,!1}),!c&&this.isLoading()&&(this.inflight.iterate(function(p){if(p.type===d.type&&p.key===d.key)return c=!0,!1}),this.queue.iterate(function(p){if(p.type===d.type&&p.key===d.key)return c=!0,!1})),c},addPack:function(d,c){c&&d.hasOwnProperty(c)&&(d={packKey:d[c]});var p=0,g=this.baseURL,x=this.path,y=this.prefix;for(var T in d)if(!!Object.prototype.hasOwnProperty.call(d,T)){var E=d[T],w=n(E,"baseURL",g),A=n(E,"path",x),b=n(E,"prefix",y),R=n(E,"files",null),L=n(E,"defaultType","void");if(Array.isArray(R)){this.setBaseURL(w),this.setPath(A),this.setPrefix(b);for(var B=0;B<R.length;B++){var D=R[B],G=D.hasOwnProperty("type")?D.type:L;this[G]&&(this[G](D),p++)}}}return this.setBaseURL(g),this.setPath(x),this.setPrefix(y),p>0},isLoading:function(){return this.state===f.LOADER_LOADING||this.state===f.LOADER_PROCESSING},isReady:function(){return this.state===f.LOADER_IDLE||this.state===f.LOADER_COMPLETE},start:function(){!this.isReady()||(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),this.list.size===0?this.loadComplete():(this.state=f.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(i.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===f.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(d){if((d.state===f.FILE_POPULATED||d.state===f.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(d),this.list.delete(d),d.crossOrigin||(d.crossOrigin=this.crossOrigin),d.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(d,c){!this.inflight||(this.inflight.delete(d),this.updateProgress(),c?(this.totalComplete++,this.queue.set(d),this.emit(a.FILE_LOAD,d),d.onProcess()):(this.totalFailed++,this._deleteQueue.set(d),this.emit(a.FILE_LOAD_ERROR,d),this.fileProcessComplete(d)))},fileProcessComplete:function(d){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(d.state===f.FILE_ERRORED?d.multiFile&&d.multiFile.onFileFailed(d):d.state===f.FILE_COMPLETE&&(d.multiFile?d.multiFile.isReadyToProcess()&&d.multiFile.addToCache():d.addToCache()),this.queue.delete(d),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=f.LOADER_COMPLETE,this.systems.events.off(i.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(d){this._deleteQueue.set(d)},saveJSON:function(d,c){return this.save(JSON.stringify(d),c)},save:function(d,c,p){c===void 0&&(c="file.json"),p===void 0&&(p="application/json");var g=new Blob([d],{type:p}),x=URL.createObjectURL(g),y=document.createElement("a");return y.download=c,y.textContent="Download "+c,y.href=x,y.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var d=this.systems.game.config,c=this.systems.settings.loader;this.setBaseURL(n(c,"baseURL",d.loaderBaseURL)),this.setPath(n(c,"path",d.loaderPath)),this.setPrefix(n(c,"prefix",d.loaderPrefix)),this.state=f.LOADER_IDLE},shutdown:function(){this.reset(),this.state=f.LOADER_SHUTDOWN,this.systems.events.off(i.UPDATE,this.update,this),this.systems.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=f.LOADER_DESTROYED,this.systems.events.off(i.UPDATE,this.update,this),this.systems.events.off(i.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});l.register("Loader",u,"load"),m.exports=u},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(62),f=t(17),r={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(36),r=t(50),o=t(353),a=t(521),s=t(2),n=t(127),l=t(523),i=t(244),h=t(24),u=t(20),d=t(3),c=t(526),p=new e({initialize:function(x){this.scene=x,this.systems=x.sys,this.config=this.getConfig(),this.world,this.add,x.sys.events.once(u.BOOT,this.boot,this),x.sys.events.on(u.START,this.start,this)},boot:function(){this.world=new c(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new c(this.scene,this.config),this.add=new a(this.world));var g=this.systems.events;s(this.config,"customUpdate",!1)||g.on(u.UPDATE,this.world.update,this.world),g.on(u.POST_UPDATE,this.world.postUpdate,this.world),g.once(u.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(u.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(u.UPDATE,this.world.update,this.world)},getConfig:function(){var g=this.systems.game.config.physics,x=this.systems.settings.physics,y=n(s(x,"arcade",{}),s(g,"arcade",{}));return y},overlap:function(g,x,y,T,E){return y===void 0&&(y=null),T===void 0&&(T=null),E===void 0&&(E=y),this.world.collideObjects(g,x,y,T,E,!0)},collide:function(g,x,y,T,E){return y===void 0&&(y=null),T===void 0&&(T=null),E===void 0&&(E=y),this.world.collideObjects(g,x,y,T,E,!1)},collideTiles:function(g,x,y,T,E){return this.world.collideTiles(g,x,y,T,E)},overlapTiles:function(g,x,y,T,E){return this.world.overlapTiles(g,x,y,T,E)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(g,x,y,T,E,w){T===void 0&&(T=60);var A=Math.atan2(y-g.y,x-g.x);return g.body.acceleration.setToPolar(A,T),E!==void 0&&w!==void 0&&g.body.maxVelocity.set(E,w),A},accelerateToObject:function(g,x,y,T,E){return this.accelerateTo(g,x.x,x.y,y,T,E)},closest:function(g,x){x||(x=this.world.bodies.entries);for(var y=Number.MAX_VALUE,T=null,E=g.x,w=g.y,A=x.length,b=0;b<A;b++){var R=x[b],L=R.body||R;if(!(g===R||g===L||g===L.gameObject||g===L.center)){var B=o(E,w,L.center.x,L.center.y);B<y&&(T=R,y=B)}}return T},furthest:function(g,x){x||(x=this.world.bodies.entries);for(var y=-1,T=null,E=g.x,w=g.y,A=x.length,b=0;b<A;b++){var R=x[b],L=R.body||R;if(!(g===R||g===L||g===L.gameObject||g===L.center)){var B=o(E,w,L.center.x,L.center.y);B>y&&(T=R,y=B)}}return T},moveTo:function(g,x,y,T,E){T===void 0&&(T=60),E===void 0&&(E=0);var w=Math.atan2(y-g.y,x-g.x);return E>0&&(T=r(g.x,g.y,x,y)/(E/1e3)),g.body.velocity.setToPolar(w,T),w},moveToObject:function(g,x,y,T){return this.moveTo(g,x.x,x.y,y,T)},velocityFromAngle:function(g,x,y){return x===void 0&&(x=60),y===void 0&&(y=new d),y.setToPolar(f(g),x)},velocityFromRotation:function(g,x,y){return x===void 0&&(x=60),y===void 0&&(y=new d),y.setToPolar(g,x)},overlapRect:function(g,x,y,T,E,w){return i(this.world,g,x,y,T,E,w)},overlapCirc:function(g,x,y,T,E){return l(this.world,g,x,y,T,E)},shutdown:function(){if(!!this.world){var g=this.systems.events;g.off(u.UPDATE,this.world.update,this.world),g.off(u.POST_UPDATE,this.world.postUpdate,this.world),g.off(u.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});h.register("ArcadePhysics",p,"arcadePhysics"),m.exports=p},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAcceleration:function(e,f){return this.body.acceleration.set(e,f),this},setAccelerationX:function(e){return this.body.acceleration.x=e,this},setAccelerationY:function(e){return this.body.acceleration.y=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setAngularVelocity:function(e){return this.body.angularVelocity=e,this},setAngularAcceleration:function(e){return this.body.angularAcceleration=e,this},setAngularDrag:function(e){return this.body.angularDrag=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(e,f){return this.body.bounce.set(e,f),this},setBounceX:function(e){return this.body.bounce.x=e,this},setBounceY:function(e){return this.body.bounce.y=e,this},setCollideWorldBounds:function(e,f,r){return this.body.setCollideWorldBounds(e,f,r),this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDebug:function(e,f,r){return this.debugShowBody=e,this.debugShowVelocity=f,this.debugBodyColor=r,this},setDebugBodyColor:function(e){return this.body.debugBodyColor=e,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(e){this.body.debugShowBody=e}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(e){this.body.debugShowVelocity=e}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(e){this.body.debugBodyColor=e}}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setDrag:function(e,f){return this.body.drag.set(e,f),this},setDragX:function(e){return this.body.drag.x=e,this},setDragY:function(e){return this.body.drag.y=e,this},setDamping:function(e){return this.body.useDamping=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={enableBody:function(e,f,r,o,a){return e&&this.body.reset(f,r),o&&(this.body.gameObject.active=!0),a&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(e,f){return e===void 0&&(e=!1),f===void 0&&(f=!1),this.body.stop(),this.body.enable=!1,e&&(this.body.gameObject.active=!1),f&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(e,f){return this.body.friction.set(e,f),this},setFrictionX:function(e){return this.body.friction.x=e,this},setFrictionY:function(e){return this.body.friction.y=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setGravity:function(e,f){return this.body.gravity.set(e,f),this},setGravityX:function(e){return this.body.gravity.x=e,this},setGravityY:function(e){return this.body.gravity.y=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setImmovable:function(e){return e===void 0&&(e=!0),this.body.immovable=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setMass:function(e){return this.body.mass=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setPushable:function(e){return e===void 0&&(e=!0),this.body.pushable=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setOffset:function(e,f){return this.body.setOffset(e,f),this},setSize:function(e,f,r){return this.body.setSize(e,f,r),this},setBodySize:function(e,f,r){return this.body.setSize(e,f,r),this},setCircle:function(e,f,r){return this.body.setCircle(e,f,r),this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setVelocity:function(e,f){return this.body.setVelocity(e,f),this},setVelocityX:function(e){return this.body.setVelocityX(e),this},setVelocityY:function(e){return this.body.setVelocityY(e),this},setMaxVelocity:function(e,f){return this.body.maxVelocity.set(e,f),this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="collide"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="overlap"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="tilecollide"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="tileoverlap"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="worldbounds"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="worldstep"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,e,f,r,o,a,s,n,l,i,h,u,d,c,p,g,x,y=function(R,L,B){t=R,e=L;var D=t.velocity.x,G=e.velocity.x;return f=t.pushable,l=t._dx<0,i=t._dx>0,h=t._dx===0,p=Math.abs(t.right-e.x)<=Math.abs(e.right-t.x),s=G-D*t.bounce.x,r=e.pushable,u=e._dx<0,d=e._dx>0,c=e._dx===0,g=!p,n=D-G*e.bounce.x,x=Math.abs(B),T()},T=function(){return i&&p&&e.blocked.right?(t.processX(-x,s,!1,!0),1):l&&g&&e.blocked.left?(t.processX(x,s,!0),1):d&&g&&t.blocked.right?(e.processX(-x,n,!1,!0),2):u&&p&&t.blocked.left?(e.processX(x,n,!0),2):0},E=function(){var R=t.velocity.x,L=e.velocity.x,B=Math.sqrt(L*L*e.mass/t.mass)*(L>0?1:-1),D=Math.sqrt(R*R*t.mass/e.mass)*(R>0?1:-1),G=(B+D)*.5;return B-=G,D-=G,o=G+B*t.bounce.x,a=G+D*e.bounce.x,l&&g?w(0):u&&p?w(1):i&&p?w(2):d&&g?w(3):!1},w=function(R){if(f&&r)x*=.5,R===0||R===3?(t.processX(x,o),e.processX(-x,a)):(t.processX(-x,o),e.processX(x,a));else if(f&&!r)R===0||R===3?t.processX(x,s,!0):t.processX(-x,s,!1,!0);else if(!f&&r)R===0||R===3?e.processX(-x,n,!1,!0):e.processX(x,n,!0);else{var L=x*.5;R===0?c?(t.processX(x,0,!0),e.processX(0,null,!1,!0)):d?(t.processX(L,0,!0),e.processX(-L,0,!1,!0)):(t.processX(L,e.velocity.x,!0),e.processX(-L,null,!1,!0)):R===1?h?(t.processX(0,null,!1,!0),e.processX(x,0,!0)):i?(t.processX(-L,0,!1,!0),e.processX(L,0,!0)):(t.processX(-L,null,!1,!0),e.processX(L,t.velocity.x,!0)):R===2?c?(t.processX(-x,0,!1,!0),e.processX(0,null,!0)):u?(t.processX(-L,0,!1,!0),e.processX(L,0,!0)):(t.processX(-L,e.velocity.x,!1,!0),e.processX(L,null,!0)):R===3&&(h?(t.processX(0,null,!0),e.processX(-x,0,!1,!0)):l?(t.processX(L,0,!0),e.processX(-L,0,!1,!0)):(t.processX(L,e.velocity.y,!0),e.processX(-L,null,!1,!0)))}return!0},A=function(R){R===1?e.velocity.x=0:p?e.processX(x,n,!0):e.processX(-x,n,!1,!0),t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y,e._dy=e.y-e.prev.y)},b=function(R){R===2?t.velocity.x=0:g?t.processX(x,s,!0):t.processX(-x,s,!1,!0),e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y,t._dy=t.y-t.prev.y)};m.exports={BlockCheck:T,Check:E,Set:y,Run:w,RunImmovableBody1:A,RunImmovableBody2:b}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t,e,f,r,o,a,s,n,l,i,h,u,d,c,p,g,x,y=function(R,L,B){t=R,e=L;var D=t.velocity.y,G=e.velocity.y;return f=t.pushable,l=t._dy<0,i=t._dy>0,h=t._dy===0,p=Math.abs(t.bottom-e.y)<=Math.abs(e.bottom-t.y),s=G-D*t.bounce.y,r=e.pushable,u=e._dy<0,d=e._dy>0,c=e._dy===0,g=!p,n=D-G*e.bounce.y,x=Math.abs(B),T()},T=function(){return i&&p&&e.blocked.down?(t.processY(-x,s,!1,!0),1):l&&g&&e.blocked.up?(t.processY(x,s,!0),1):d&&g&&t.blocked.down?(e.processY(-x,n,!1,!0),2):u&&p&&t.blocked.up?(e.processY(x,n,!0),2):0},E=function(){var R=t.velocity.y,L=e.velocity.y,B=Math.sqrt(L*L*e.mass/t.mass)*(L>0?1:-1),D=Math.sqrt(R*R*t.mass/e.mass)*(R>0?1:-1),G=(B+D)*.5;return B-=G,D-=G,o=G+B*t.bounce.y,a=G+D*e.bounce.y,l&&g?w(0):u&&p?w(1):i&&p?w(2):d&&g?w(3):!1},w=function(R){if(f&&r)x*=.5,R===0||R===3?(t.processY(x,o),e.processY(-x,a)):(t.processY(-x,o),e.processY(x,a));else if(f&&!r)R===0||R===3?t.processY(x,s,!0):t.processY(-x,s,!1,!0);else if(!f&&r)R===0||R===3?e.processY(-x,n,!1,!0):e.processY(x,n,!0);else{var L=x*.5;R===0?c?(t.processY(x,0,!0),e.processY(0,null,!1,!0)):d?(t.processY(L,0,!0),e.processY(-L,0,!1,!0)):(t.processY(L,e.velocity.y,!0),e.processY(-L,null,!1,!0)):R===1?h?(t.processY(0,null,!1,!0),e.processY(x,0,!0)):i?(t.processY(-L,0,!1,!0),e.processY(L,0,!0)):(t.processY(-L,null,!1,!0),e.processY(L,t.velocity.y,!0)):R===2?c?(t.processY(-x,0,!1,!0),e.processY(0,null,!0)):u?(t.processY(-L,0,!1,!0),e.processY(L,0,!0)):(t.processY(-L,e.velocity.y,!1,!0),e.processY(L,null,!0)):R===3&&(h?(t.processY(0,null,!0),e.processY(-x,0,!1,!0)):l?(t.processY(L,0,!0),e.processY(-L,0,!1,!0)):(t.processY(L,e.velocity.y,!0),e.processY(-L,null,!1,!0)))}return!0},A=function(R){R===1?e.velocity.y=0:p?e.processY(x,n,!0):e.processY(-x,n,!1,!0),t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x,e._dx=e.x-e.prev.x)},b=function(R){R===2?t.velocity.y=0:g?t.processY(x,s,!0):t.processY(-x,s,!1,!0),e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x,t._dx=t.x-t.prev.x)};m.exports={BlockCheck:T,Check:E,Set:y,Run:w,RunImmovableBody1:A,RunImmovableBody2:b}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(3),r=new e({initialize:function(){this.boundsCenter=new f,this.centerDiff=new f},parseBody:function(o){if(o=o.hasOwnProperty("body")?o.body:o,!o.hasOwnProperty("bounds")||!o.hasOwnProperty("centerOfMass"))return!1;var a=this.boundsCenter,s=this.centerDiff,n=o.bounds.max.x-o.bounds.min.x,l=o.bounds.max.y-o.bounds.min.y,i=n*o.centerOfMass.x,h=l*o.centerOfMass.y;return a.set(n/2,l/2),s.set(i-a.x,h-a.y),!0},getTopLeft:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.boundsCenter,l=this.centerDiff;return new f(a+n.x+l.x,s+n.y+l.y)}return!1},getTopCenter:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.boundsCenter,l=this.centerDiff;return new f(a+l.x,s+n.y+l.y)}return!1},getTopRight:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.boundsCenter,l=this.centerDiff;return new f(a-(n.x-l.x),s+n.y+l.y)}return!1},getLeftCenter:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.boundsCenter,l=this.centerDiff;return new f(a+n.x+l.x,s+l.y)}return!1},getCenter:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.centerDiff;return new f(a+n.x,s+n.y)}return!1},getRightCenter:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.boundsCenter,l=this.centerDiff;return new f(a-(n.x-l.x),s+l.y)}return!1},getBottomLeft:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.boundsCenter,l=this.centerDiff;return new f(a+n.x+l.x,s-(n.y-l.y))}return!1},getBottomCenter:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.boundsCenter,l=this.centerDiff;return new f(a+l.x,s-(n.y-l.y))}return!1},getBottomRight:function(o,a,s){if(a===void 0&&(a=0),s===void 0&&(s=0),this.parseBody(o)){var n=this.boundsCenter,l=this.centerDiff;return new f(a-(n.x-l.x),s-(n.y-l.y))}return!1}});m.exports=r},function(m,C){/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={decomp:R,quickDecomp:G,isSimple:B,removeCollinearPoints:X,removeDuplicatePoints:H,makeCCW:p};function t(N,I,z){z=z||0;var U=[0,0],W,V,Z,J,tt,st,at;return W=N[1][1]-N[0][1],V=N[0][0]-N[1][0],Z=W*N[0][0]+V*N[0][1],J=I[1][1]-I[0][1],tt=I[0][0]-I[1][0],st=J*I[0][0]+tt*I[0][1],at=W*tt-J*V,K(at,0,z)||(U[0]=(tt*Z-V*st)/at,U[1]=(W*st-J*Z)/at),U}function e(N,I,z,U){var W=I[0]-N[0],V=I[1]-N[1],Z=U[0]-z[0],J=U[1]-z[1];if(Z*V-J*W===0)return!1;var tt=(W*(z[1]-N[1])+V*(N[0]-z[0]))/(Z*V-J*W),st=(Z*(N[1]-z[1])+J*(z[0]-N[0]))/(J*W-Z*V);return tt>=0&&tt<=1&&st>=0&&st<=1}function f(N,I,z){return(I[0]-N[0])*(z[1]-N[1])-(z[0]-N[0])*(I[1]-N[1])}function r(N,I,z){return f(N,I,z)>0}function o(N,I,z){return f(N,I,z)>=0}function a(N,I,z){return f(N,I,z)<0}function s(N,I,z){return f(N,I,z)<=0}var n=[],l=[];function i(N,I,z,U){if(U){var W=n,V=l;W[0]=I[0]-N[0],W[1]=I[1]-N[1],V[0]=z[0]-I[0],V[1]=z[1]-I[1];var Z=W[0]*V[0]+W[1]*V[1],J=Math.sqrt(W[0]*W[0]+W[1]*W[1]),tt=Math.sqrt(V[0]*V[0]+V[1]*V[1]),st=Math.acos(Z/(J*tt));return st<U}else return f(N,I,z)===0}function h(N,I){var z=I[0]-N[0],U=I[1]-N[1];return z*z+U*U}function u(N,I){var z=N.length;return N[I<0?I%z+z:I%z]}function d(N){N.length=0}function c(N,I,z,U){for(var W=z;W<U;W++)N.push(I[W])}function p(N){for(var I=0,z=N,U=1;U<N.length;++U)(z[U][1]<z[I][1]||z[U][1]===z[I][1]&&z[U][0]>z[I][0])&&(I=U);return r(u(N,I-1),u(N,I),u(N,I+1))?!1:(g(N),!0)}function g(N){for(var I=[],z=N.length,U=0;U!==z;U++)I.push(N.pop());for(var U=0;U!==z;U++)N[U]=I[U]}function x(N,I){return a(u(N,I-1),u(N,I),u(N,I+1))}var y=[],T=[];function E(N,I,z){var U,W,V=y,Z=T;if(o(u(N,I+1),u(N,I),u(N,z))&&s(u(N,I-1),u(N,I),u(N,z)))return!1;W=h(u(N,I),u(N,z));for(var J=0;J!==N.length;++J)if(!((J+1)%N.length===I||J===I)&&o(u(N,I),u(N,z),u(N,J+1))&&s(u(N,I),u(N,z),u(N,J))&&(V[0]=u(N,I),V[1]=u(N,z),Z[0]=u(N,J),Z[1]=u(N,J+1),U=t(V,Z),h(u(N,I),U)<W))return!1;return!0}function w(N,I,z){for(var U=0;U!==N.length;++U)if(!(U===I||U===z||(U+1)%N.length===I||(U+1)%N.length===z)&&e(u(N,I),u(N,z),u(N,U),u(N,U+1)))return!1;return!0}function A(N,I,z,U){var W=U||[];if(d(W),I<z)for(var V=I;V<=z;V++)W.push(N[V]);else{for(var V=0;V<=z;V++)W.push(N[V]);for(var V=I;V<N.length;V++)W.push(N[V])}return W}function b(N){for(var I=[],z=[],U=[],W=[],V=Number.MAX_VALUE,Z=0;Z<N.length;++Z)if(x(N,Z)){for(var J=0;J<N.length;++J)if(E(N,Z,J)){z=b(A(N,Z,J,W)),U=b(A(N,J,Z,W));for(var tt=0;tt<U.length;tt++)z.push(U[tt]);z.length<V&&(I=z,V=z.length,I.push([u(N,Z),u(N,J)]))}}return I}function R(N){var I=b(N);return I.length>0?L(N,I):[N]}function L(N,I){if(I.length===0)return[N];if(I instanceof Array&&I.length&&I[0]instanceof Array&&I[0].length===2&&I[0][0]instanceof Array){for(var z=[N],U=0;U<I.length;U++)for(var W=I[U],V=0;V<z.length;V++){var Z=z[V],J=L(Z,W);if(J){z.splice(V,1),z.push(J[0],J[1]);break}}return z}else{var W=I,U=N.indexOf(W[0]),V=N.indexOf(W[1]);return U!==-1&&V!==-1?[A(N,U,V),A(N,V,U)]:!1}}function B(N){var I=N,z;for(z=0;z<I.length-1;z++)for(var U=0;U<z-1;U++)if(e(I[z],I[z+1],I[U],I[U+1]))return!1;for(z=1;z<I.length-2;z++)if(e(I[0],I[I.length-1],I[z],I[z+1]))return!1;return!0}function D(N,I,z,U,W){W=W||0;var V=I[1]-N[1],Z=N[0]-I[0],J=V*N[0]+Z*N[1],tt=U[1]-z[1],st=z[0]-U[0],at=tt*z[0]+st*z[1],lt=V*st-tt*Z;return K(lt,0,W)?[0,0]:[(st*J-Z*at)/lt,(V*at-tt*J)/lt]}function G(N,I,z,U,W,V,Z){V=V||100,Z=Z||0,W=W||25,I=typeof I!="undefined"?I:[],z=z||[],U=U||[];var J=[0,0],tt=[0,0],st=[0,0],at=0,lt=0,ut=0,mt=0,dt=0,xt=0,Tt=0,Ct=[],Et=[],vt=N,It=N;if(It.length<3)return I;if(Z++,Z>V)return console.warn("quickDecomp: max level ("+V+") reached."),I;for(var Pt=0;Pt<N.length;++Pt)if(x(vt,Pt)){z.push(vt[Pt]),at=lt=Number.MAX_VALUE;for(var Rt=0;Rt<N.length;++Rt)r(u(vt,Pt-1),u(vt,Pt),u(vt,Rt))&&s(u(vt,Pt-1),u(vt,Pt),u(vt,Rt-1))&&(st=D(u(vt,Pt-1),u(vt,Pt),u(vt,Rt),u(vt,Rt-1)),a(u(vt,Pt+1),u(vt,Pt),st)&&(ut=h(vt[Pt],st),ut<lt&&(lt=ut,tt=st,xt=Rt))),r(u(vt,Pt+1),u(vt,Pt),u(vt,Rt+1))&&s(u(vt,Pt+1),u(vt,Pt),u(vt,Rt))&&(st=D(u(vt,Pt+1),u(vt,Pt),u(vt,Rt),u(vt,Rt+1)),r(u(vt,Pt-1),u(vt,Pt),st)&&(ut=h(vt[Pt],st),ut<at&&(at=ut,J=st,dt=Rt)));if(xt===(dt+1)%N.length)st[0]=(tt[0]+J[0])/2,st[1]=(tt[1]+J[1])/2,U.push(st),Pt<dt?(c(Ct,vt,Pt,dt+1),Ct.push(st),Et.push(st),xt!==0&&c(Et,vt,xt,vt.length),c(Et,vt,0,Pt+1)):(Pt!==0&&c(Ct,vt,Pt,vt.length),c(Ct,vt,0,dt+1),Ct.push(st),Et.push(st),c(Et,vt,xt,Pt+1));else{if(xt>dt&&(dt+=N.length),mt=Number.MAX_VALUE,dt<xt)return I;for(var Rt=xt;Rt<=dt;++Rt)o(u(vt,Pt-1),u(vt,Pt),u(vt,Rt))&&s(u(vt,Pt+1),u(vt,Pt),u(vt,Rt))&&(ut=h(u(vt,Pt),u(vt,Rt)),ut<mt&&w(vt,Pt,Rt)&&(mt=ut,Tt=Rt%N.length));Pt<Tt?(c(Ct,vt,Pt,Tt+1),Tt!==0&&c(Et,vt,Tt,It.length),c(Et,vt,0,Pt+1)):(Pt!==0&&c(Ct,vt,Pt,It.length),c(Ct,vt,0,Tt+1),c(Et,vt,Tt,Pt+1))}return Ct.length<Et.length?(G(Ct,I,z,U,W,V,Z),G(Et,I,z,U,W,V,Z)):(G(Et,I,z,U,W,V,Z),G(Ct,I,z,U,W,V,Z)),I}return I.push(N),I}function X(N,I){for(var z=0,U=N.length-1;N.length>3&&U>=0;--U)i(u(N,U-1),u(N,U),u(N,U+1),I)&&(N.splice(U%N.length,1),z++);return z}function H(N,I){for(var z=N.length-1;z>=1;--z)for(var U=N[z],W=z-1;W>=0;--W)if($(U,N[W],I)){N.splice(z,1);continue}}function K(N,I,z){return z=z||0,Math.abs(N-I)<=z}function $(N,I,z){return K(N[0],I[0],z)&&K(N[1],I[1],z)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(0),r=t(591),o=t(128),a=t(592),s=t(1395),n=t(1396),l=t(1397),i=t(593),h=t(589),u=t(590),d=t(1398),c=t(64),p=new f({initialize:function(x){this.world=x,this.scene=x.scene,this.sys=x.scene.sys},rectangle:function(g,x,y,T,E){var w=e.rectangle(g,x,y,T,E);return this.world.add(w),w},trapezoid:function(g,x,y,T,E,w){var A=e.trapezoid(g,x,y,T,E,w);return this.world.add(A),A},circle:function(g,x,y,T,E){var w=e.circle(g,x,y,T,E);return this.world.add(w),w},polygon:function(g,x,y,T,E){var w=e.polygon(g,x,y,T,E);return this.world.add(w),w},fromVertices:function(g,x,y,T,E,w,A){typeof y=="string"&&(y=c.fromPath(y));var b=e.fromVertices(g,x,y,T,E,w,A);return this.world.add(b),b},fromPhysicsEditor:function(g,x,y,T,E){E===void 0&&(E=!0);var w=h.parseBody(g,x,y,T);return E&&!this.world.has(w)&&this.world.add(w),w},fromSVG:function(g,x,y,T,E,w){T===void 0&&(T=1),E===void 0&&(E={}),w===void 0&&(w=!0);for(var A=y.getElementsByTagName("path"),b=[],R=0;R<A.length;R++){var L=a.pathToVertices(A[R],30);T!==1&&c.scale(L,T,T),b.push(L)}var B=e.fromVertices(g,x,b,E);return w&&this.world.add(B),B},fromJSON:function(g,x,y,T,E){T===void 0&&(T={}),E===void 0&&(E=!0);var w=u.parseBody(g,x,y,T);return w&&E&&this.world.add(w),w},imageStack:function(g,x,y,T,E,w,A,b,R){A===void 0&&(A=0),b===void 0&&(b=0),R===void 0&&(R={});var L=this.world,B=this.sys.displayList;R.addToWorld=!1;var D=r.stack(y,T,E,w,A,b,function(G,X){var H=new n(L,G,X,g,x,R);return B.add(H),H.body});return L.add(D),D},stack:function(g,x,y,T,E,w,A){var b=r.stack(g,x,y,T,E,w,A);return this.world.add(b),b},pyramid:function(g,x,y,T,E,w,A){var b=r.pyramid(g,x,y,T,E,w,A);return this.world.add(b),b},chain:function(g,x,y,T,E,w){return r.chain(g,x,y,T,E,w)},mesh:function(g,x,y,T,E){return r.mesh(g,x,y,T,E)},newtonsCradle:function(g,x,y,T,E){var w=r.newtonsCradle(g,x,y,T,E);return this.world.add(w),w},car:function(g,x,y,T,E){var w=r.car(g,x,y,T,E);return this.world.add(w),w},softBody:function(g,x,y,T,E,w,A,b,R,L){var B=r.softBody(g,x,y,T,E,w,A,b,R,L);return this.world.add(B),B},joint:function(g,x,y,T,E){return this.constraint(g,x,y,T,E)},spring:function(g,x,y,T,E){return this.constraint(g,x,y,T,E)},constraint:function(g,x,y,T,E){T===void 0&&(T=1),E===void 0&&(E={}),E.bodyA=g.type==="body"?g:g.body,E.bodyB=x.type==="body"?x:x.body,isNaN(y)||(E.length=y),E.stiffness=T;var w=o.create(E);return this.world.add(w),w},worldConstraint:function(g,x,y,T){y===void 0&&(y=1),T===void 0&&(T={}),T.bodyB=g.type==="body"?g:g.body,isNaN(x)||(T.length=x),T.stiffness=y;var E=o.create(T);return this.world.add(E),E},mouseSpring:function(g){return this.pointerConstraint(g)},pointerConstraint:function(g){g===void 0&&(g={}),g.hasOwnProperty("render")||(g.render={visible:!1});var x=new d(this.scene,this.world,g);return this.world.add(x.constraint),x},image:function(g,x,y,T,E){var w=new n(this.world,g,x,y,T,E);return this.sys.displayList.add(w),w},tileBody:function(g,x){return new i(this.world,g,x)},sprite:function(g,x,y,T,E){var w=new l(this.world,g,x,y,T,E);return this.sys.displayList.add(w),this.sys.updateList.add(w),w},gameObject:function(g,x,y){return s(this.world,g,x,y)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});m.exports=p},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(249),f=t(2),r=t(3);function o(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}var a=function(s,n,l,i){l===void 0&&(l={}),i===void 0&&(i=!0);var h=n.x,u=n.y;n.body={temp:!0,position:{x:h,y:u}};var d=[e.Bounce,e.Collision,e.Force,e.Friction,e.Gravity,e.Mass,e.Sensor,e.SetBody,e.Sleep,e.Static,e.Transform,e.Velocity];if(d.forEach(function(p){for(var g in p)o(p[g])?Object.defineProperty(n,g,{get:p[g].get,set:p[g].set}):Object.defineProperty(n,g,{value:p[g]})}),n.world=s,n._tempVec2=new r(h,u),l.hasOwnProperty("type")&&l.type==="body")n.setExistingBody(l,i);else{var c=f(l,"shape",null);c||(c="rectangle"),l.addToWorld=i,n.setBody(c,l)}return n};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(249),r=t(15),o=t(2),a=t(125),s=t(167),n=t(3),l=new e({Extends:a,Mixins:[f.Bounce,f.Collision,f.Force,f.Friction,f.Gravity,f.Mass,f.Sensor,f.SetBody,f.Sleep,f.Static,f.Transform,f.Velocity,s],initialize:function(h,u,d,c,p,g){r.call(this,h.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(c,p),this.setSizeToFrame(),this.setOrigin(),this.world=h,this._tempVec2=new n(u,d);var x=o(g,"shape",null);x?this.setBody(x,g):this.setRectangle(this.width,this.height,g),this.setPosition(u,d),this.initPipeline()}});m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(164),f=t(0),r=t(249),o=t(15),a=t(2),s=t(167),n=t(73),l=t(3),i=new f({Extends:n,Mixins:[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity,s],initialize:function(u,d,c,p,g,x){o.call(this,u.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new e(this),this.setTexture(p,g),this.setSizeToFrame(),this.setOrigin(),this.world=u,this._tempVec2=new l(d,c);var y=a(x,"shape",null);y?this.setBody(y,x):this.setRectangle(this.width,this.height,x),this.setPosition(d,c),this.initPipeline()}});m.exports=i},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(84),f=t(0),r=t(118),o=t(128),a=t(273),s=t(272),n=t(51),l=t(127),i=t(165),h=t(3),u=t(64),d=new f({initialize:function(p,g,x){x===void 0&&(x={});var y={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=p,this.world=g,this.camera=null,this.pointer=null,this.active=!0,this.position=new h,this.body=null,this.part=null,this.constraint=o.create(l(x,y)),this.world.on(s.BEFORE_UPDATE,this.update,this),p.sys.input.on(n.POINTER_DOWN,this.onDown,this),p.sys.input.on(n.POINTER_UP,this.onUp,this)},onDown:function(c){this.pointer||(this.pointer=c,this.camera=c.camera)},onUp:function(c){c===this.pointer&&(this.pointer=null)},getBody:function(c){var p=this.position,g=this.constraint;this.camera.getWorldPoint(c.x,c.y,p);for(var x=r.allBodies(this.world.localWorld),y=0;y<x.length;y++){var T=x[y];if(!T.ignorePointer&&e.contains(T.bounds,p)&&a.canCollide(T.collisionFilter,g.collisionFilter)&&this.hitTestBody(T,p))return this.world.emit(s.DRAG_START,T,this.part,this),!0}return!1},hitTestBody:function(c,p){for(var g=this.constraint,x=c.parts.length,y=x>1?1:0,T=y;T<x;T++){var E=c.parts[T];if(u.contains(E.vertices,p))return g.pointA=p,g.pointB={x:p.x-c.position.x,y:p.y-c.position.y},g.bodyB=c,g.angleB=c.angle,i.set(c,!1),this.part=E,this.body=c,!0}return!1},update:function(){var c=this.pointer,p=this.body;if(!this.active||!c){p&&this.stopDrag();return}if(!c.isDown&&p){this.stopDrag();return}else if(c.isDown){if(!p&&!this.getBody(c))return;p=this.body;var g=this.position,x=this.constraint;this.camera.getWorldPoint(c.x,c.y,g),x.pointA.x=g.x,x.pointA.y=g.y,i.set(p,!1),this.world.emit(s.DRAG,p,this)}},stopDrag:function(){var c=this.body,p=this.constraint;p.bodyB=null,p.pointB=null,this.pointer=null,this.body=null,this.part=null,c&&this.world.emit(s.DRAG_END,c,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(s.BEFORE_UPDATE,this.update),this.scene.sys.input.off(n.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(n.POINTER_UP,this.onUp,this)}});m.exports=d},function(m,C,t){var e={};m.exports=e;var f=t(595),r=t(32);(function(){e.name="matter-js",e.version="0.14.2",e.uses=[],e.used=[],e.use=function(){f.use(e,Array.prototype.slice.call(arguments))},e.before=function(o,a){return o=o.replace(/^Matter./,""),r.chainPathBefore(e,o,a)},e.after=function(o,a){return o=o.replace(/^Matter./,""),r.chainPathAfter(e,o,a)}})()},function(m,C,t){var e={};m.exports=e;var f=t(83),r=t(274),o=t(84),a=t(86),s=t(64);(function(){e.collides=function(n,l){for(var i=[],h=0;h<l.length;h++){var u=l[h];if(n!==u&&o.overlaps(u.bounds,n.bounds))for(var d=u.parts.length===1?0:1;d<u.parts.length;d++){var c=u.parts[d];if(o.overlaps(c.bounds,n.bounds)){var p=r.collides(c,n);if(p.collided){i.push(p);break}}}}return i},e.ray=function(n,l,i,h){h=h||1e-100;for(var u=f.angle(l,i),d=f.magnitude(f.sub(l,i)),c=(i.x+l.x)*.5,p=(i.y+l.y)*.5,g=a.rectangle(c,p,d,h,{angle:u}),x=e.collides(g,n),y=0;y<x.length;y+=1){var T=x[y];T.body=T.bodyB=T.bodyA}return x},e.region=function(n,l,i){for(var h=[],u=0;u<n.length;u++){var d=n[u],c=o.overlaps(d.bounds,l);(c&&!i||!c&&i)&&h.push(d)}return h},e.point=function(n,l){for(var i=[],h=0;h<n.length;h++){var u=n[h];if(o.contains(u.bounds,l))for(var d=u.parts.length===1?0:1;d<u.parts.length;d++){var c=u.parts[d];if(o.contains(c.bounds,l)&&s.contains(c.vertices,l)){i.push(u);break}}}return i}})()},function(m,C,t){var e={};m.exports=e;var f=t(596),r=t(165),o=t(599),a=t(598),s=t(1523),n=t(597),l=t(166),i=t(118),h=t(128),u=t(32),d=t(41);(function(){e.create=function(c,p){p=u.isElement(c)?p:c,c=u.isElement(c)?c:null,p=p||{},(c||p.render)&&u.warn("Engine.create: engine.render is deprecated (see docs)");var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:n}},x=u.extend(g,p);return x.world=p.world||f.create(x.world),x.pairs=a.create(),x.broadphase=x.broadphase.controller.create(x.broadphase),x.metrics=x.metrics||{extended:!1},x.metrics=s.create(x.metrics),x},e.update=function(c,p,g){p=p||16.666666666666668,g=g||1;var x=c.world,y=c.timing,T=c.broadphase,E=[],w;y.timestamp+=p*y.timeScale;var A={timestamp:y.timestamp};l.trigger(c,"beforeUpdate",A);var b=i.allBodies(x),R=i.allConstraints(x);for(s.reset(c.metrics),c.enableSleeping&&r.update(b,y.timeScale),e._bodiesApplyGravity(b,x.gravity),e._bodiesUpdate(b,p,y.timeScale,g,x.bounds),h.preSolveAll(b),w=0;w<c.constraintIterations;w++)h.solveAll(R,y.timeScale);h.postSolveAll(b),T.controller?(x.isModified&&T.controller.clear(T),T.controller.update(T,b,c,x.isModified),E=T.pairsList):E=b,x.isModified&&i.setModified(x,!1,!1,!0);var L=T.detector(E,c),B=c.pairs,D=y.timestamp;for(a.update(B,L,D),a.removeOld(B,D),c.enableSleeping&&r.afterCollisions(B.list,y.timeScale),B.collisionStart.length>0&&l.trigger(c,"collisionStart",{pairs:B.collisionStart}),o.preSolvePosition(B.list),w=0;w<c.positionIterations;w++)o.solvePosition(B.list,b,y.timeScale);for(o.postSolvePosition(b),h.preSolveAll(b),w=0;w<c.constraintIterations;w++)h.solveAll(R,y.timeScale);for(h.postSolveAll(b),o.preSolveVelocity(B.list),w=0;w<c.velocityIterations;w++)o.solveVelocity(B.list,y.timeScale);return B.collisionActive.length>0&&l.trigger(c,"collisionActive",{pairs:B.collisionActive}),B.collisionEnd.length>0&&l.trigger(c,"collisionEnd",{pairs:B.collisionEnd}),s.update(c.metrics,c),e._bodiesClearForces(b),l.trigger(c,"afterUpdate",A),c},e.merge=function(c,p){if(u.extend(c,p),p.world){c.world=p.world,e.clear(c);for(var g=i.allBodies(c.world),x=0;x<g.length;x++){var y=g[x];r.set(y,!1),y.id=u.nextId()}}},e.clear=function(c){var p=c.world;a.clear(c.pairs);var g=c.broadphase;if(g.controller){var x=i.allBodies(p);g.controller.clear(g),g.controller.update(g,x,c,!0)}},e._bodiesClearForces=function(c){for(var p=0;p<c.length;p++){var g=c[p];g.force.x=0,g.force.y=0,g.torque=0}},e._bodiesApplyGravity=function(c,p){var g=typeof p.scale!="undefined"?p.scale:.001;if(!(p.x===0&&p.y===0||g===0))for(var x=0;x<c.length;x++){var y=c[x];y.ignoreGravity||y.isStatic||y.isSleeping||(y.force.x+=y.mass*p.x*g*y.gravityScale.x,y.force.y+=y.mass*p.y*g*y.gravityScale.y)}},e._bodiesUpdate=function(c,p,g,x,y){for(var T=0;T<c.length;T++){var E=c[T];E.isStatic||E.isSleeping||d.update(E,p,g,x)}}})()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),r=t(0),o=t(32),a=t(118),s=t(1401),n=t(9),l=t(272),i=t(2),h=t(6),u=t(41),d=t(166),c=t(593),p=t(596),g=t(83),x=new r({Extends:n,initialize:function(T,E){n.call(this),this.scene=T,this.engine=s.create(E),this.localWorld=this.engine.world;var w=h(E,"gravity",null);w?this.setGravity(w.x,w.y,w.scale):w===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=h(E,"enabled",!0),this.correction=h(E,"correction",1),this.getDelta=h(E,"getDelta",this.update60Hz);var A=i(E,"runner",{}),b=i(A,"fps",!1),R=i(A,"fps",60),L=i(A,"delta",1e3/R),B=i(A,"deltaMin",1e3/R),D=i(A,"deltaMax",1e3/(R*.5));b||(R=1e3/L),this.runner={fps:R,correction:i(A,"correction",1),deltaSampleSize:i(A,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:i(A,"isFixed",!1),delta:L,deltaMin:B,deltaMax:D},this.autoUpdate=h(E,"autoUpdate",!0);var G=h(E,"debug",!1);if(this.drawDebug=typeof G=="object"?!0:G,this.debugGraphic,this.debugConfig={showAxes:i(G,"showAxes",!1),showAngleIndicator:i(G,"showAngleIndicator",!1),angleColor:i(G,"angleColor",15208787),showBroadphase:i(G,"showBroadphase",!1),broadphaseColor:i(G,"broadphaseColor",16757760),showBounds:i(G,"showBounds",!1),boundsColor:i(G,"boundsColor",16777215),showVelocity:i(G,"showVelocity",!1),velocityColor:i(G,"velocityColor",44783),showCollisions:i(G,"showCollisions",!1),collisionColor:i(G,"collisionColor",16094476),showSeparations:i(G,"showSeparations",!1),separationColor:i(G,"separationColor",16753920),showBody:i(G,"showBody",!0),showStaticBody:i(G,"showStaticBody",!0),showInternalEdges:i(G,"showInternalEdges",!1),renderFill:i(G,"renderFill",!1),renderLine:i(G,"renderLine",!0),fillColor:i(G,"fillColor",1075465),fillOpacity:i(G,"fillOpacity",1),lineColor:i(G,"lineColor",2678297),lineOpacity:i(G,"lineOpacity",1),lineThickness:i(G,"lineThickness",1),staticFillColor:i(G,"staticFillColor",857979),staticLineColor:i(G,"staticLineColor",1255396),showSleeping:i(G,"showSleeping",!1),staticBodySleepOpacity:i(G,"staticBodySleepOpacity",.7),sleepFillColor:i(G,"sleepFillColor",4605510),sleepLineColor:i(G,"sleepLineColor",10066585),showSensors:i(G,"showSensors",!0),sensorFillColor:i(G,"sensorFillColor",857979),sensorLineColor:i(G,"sensorLineColor",1255396),showPositions:i(G,"showPositions",!0),positionSize:i(G,"positionSize",4),positionColor:i(G,"positionColor",14697178),showJoint:i(G,"showJoint",!0),jointColor:i(G,"jointColor",14737474),jointLineOpacity:i(G,"jointLineOpacity",1),jointLineThickness:i(G,"jointLineThickness",2),pinSize:i(G,"pinSize",4),pinColor:i(G,"pinColor",4382944),springColor:i(G,"springColor",14697184),anchorColor:i(G,"anchorColor",15724527),anchorSize:i(G,"anchorSize",4),showConvexHulls:i(G,"showConvexHulls",!1),hullColor:i(G,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),i(E,"setBounds",!1)){var X=E.setBounds;if(typeof X=="boolean")this.setBounds();else{var H=i(X,"x",0),K=i(X,"y",0),$=i(X,"width",T.sys.scale.width),N=i(X,"height",T.sys.scale.height),I=i(X,"thickness",64),z=i(X,"left",!0),U=i(X,"right",!0),W=i(X,"top",!0),V=i(X,"bottom",!0);this.setBounds(H,K,$,N,I,z,U,W,V)}}},setCompositeRenderStyle:function(y){var T=y.bodies,E=y.constraints,w=y.composites,A,b,R;for(A=0;A<T.length;A++)b=T[A],R=b.render,this.setBodyRenderStyle(b,R.lineColor,R.lineOpacity,R.lineThickness,R.fillColor,R.fillOpacity);for(A=0;A<E.length;A++)b=E[A],R=b.render,this.setConstraintRenderStyle(b,R.lineColor,R.lineOpacity,R.lineThickness,R.pinSize,R.anchorColor,R.anchorSize);for(A=0;A<w.length;A++)b=w[A],this.setCompositeRenderStyle(b);return this},setBodyRenderStyle:function(y,T,E,w,A,b){var R=y.render,L=this.debugConfig;return R?(T==null&&(T=y.isStatic?L.staticLineColor:L.lineColor),E==null&&(E=L.lineOpacity),w==null&&(w=L.lineThickness),A==null&&(A=y.isStatic?L.staticFillColor:L.fillColor),b==null&&(b=L.fillOpacity),T!==!1&&(R.lineColor=T),E!==!1&&(R.lineOpacity=E),w!==!1&&(R.lineThickness=w),A!==!1&&(R.fillColor=A),b!==!1&&(R.fillOpacity=b),this):this},setConstraintRenderStyle:function(y,T,E,w,A,b,R){var L=y.render,B=this.debugConfig;if(!L)return this;if(T==null){var D=L.type;D==="line"?T=B.jointColor:D==="pin"?T=B.pinColor:D==="spring"&&(T=B.springColor)}return E==null&&(E=B.jointLineOpacity),w==null&&(w=B.jointLineThickness),A==null&&(A=B.pinSize),b==null&&(b=B.anchorColor),R==null&&(R=B.anchorSize),T!==!1&&(L.lineColor=T),E!==!1&&(L.lineOpacity=E),w!==!1&&(L.lineThickness=w),A!==!1&&(L.pinSize=A),b!==!1&&(L.anchorColor=b),R!==!1&&(L.anchorSize=R),this},setEventsProxy:function(){var y=this,T=this.engine,E=this.localWorld;this.drawDebug&&(d.on(E,"compositeModified",function(w){y.setCompositeRenderStyle(w)}),d.on(E,"beforeAdd",function(w){for(var A=[].concat(w.object),b=0;b<A.length;b++){var R=A[b],L=R.render;R.type==="body"?y.setBodyRenderStyle(R,L.lineColor,L.lineOpacity,L.lineThickness,L.fillColor,L.fillOpacity):R.type==="composite"?y.setCompositeRenderStyle(R):R.type==="constraint"&&y.setConstraintRenderStyle(R,L.lineColor,L.lineOpacity,L.lineThickness,L.pinSize,L.anchorColor,L.anchorSize)}})),d.on(E,"beforeAdd",function(w){y.emit(l.BEFORE_ADD,w)}),d.on(E,"afterAdd",function(w){y.emit(l.AFTER_ADD,w)}),d.on(E,"beforeRemove",function(w){y.emit(l.BEFORE_REMOVE,w)}),d.on(E,"afterRemove",function(w){y.emit(l.AFTER_REMOVE,w)}),d.on(T,"beforeUpdate",function(w){y.emit(l.BEFORE_UPDATE,w)}),d.on(T,"afterUpdate",function(w){y.emit(l.AFTER_UPDATE,w)}),d.on(T,"collisionStart",function(w){var A=w.pairs,b,R;A.length>0&&(b=A[0].bodyA,R=A[0].bodyB),y.emit(l.COLLISION_START,w,b,R)}),d.on(T,"collisionActive",function(w){var A=w.pairs,b,R;A.length>0&&(b=A[0].bodyA,R=A[0].bodyB),y.emit(l.COLLISION_ACTIVE,w,b,R)}),d.on(T,"collisionEnd",function(w){var A=w.pairs,b,R;A.length>0&&(b=A[0].bodyA,R=A[0].bodyB),y.emit(l.COLLISION_END,w,b,R)})},setBounds:function(y,T,E,w,A,b,R,L,B){return y===void 0&&(y=0),T===void 0&&(T=0),E===void 0&&(E=this.scene.sys.scale.width),w===void 0&&(w=this.scene.sys.scale.height),A===void 0&&(A=64),b===void 0&&(b=!0),R===void 0&&(R=!0),L===void 0&&(L=!0),B===void 0&&(B=!0),this.updateWall(b,"left",y-A,T-A,A,w+A*2),this.updateWall(R,"right",y+E,T-A,A,w+A*2),this.updateWall(L,"top",y,T-A,E,A),this.updateWall(B,"bottom",y,T+w,E,A),this},updateWall:function(y,T,E,w,A,b){var R=this.walls[T];y?(R&&p.remove(this.localWorld,R),E+=A/2,w+=b/2,this.walls[T]=this.create(E,w,A,b,{isStatic:!0,friction:0,frictionStatic:0})):(R&&p.remove(this.localWorld,R),this.walls[T]=null)},createDebugGraphic:function(){var y=this.scene.sys.add.graphics({x:0,y:0});return y.setDepth(Number.MAX_VALUE),this.debugGraphic=y,this.drawDebug=!0,y},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(y,T,E){return y===void 0&&(y=0),T===void 0&&(T=1),this.localWorld.gravity.x=y,this.localWorld.gravity.y=T,E!==void 0&&(this.localWorld.gravity.scale=E),this},create:function(y,T,E,w,A){var b=e.rectangle(y,T,E,w,A);return p.add(this.localWorld,b),b},add:function(y){return p.add(this.localWorld,y),this},remove:function(y,T){Array.isArray(y)||(y=[y]);for(var E=0;E<y.length;E++){var w=y[E],A=w.body?w.body:w;a.remove(this.localWorld,A,T)}return this},removeConstraint:function(y,T){return a.remove(this.localWorld,y,T),this},convertTilemapLayer:function(y,T){var E=y.layer,w=y.getTilesWithin(0,0,E.width,E.height,{isColliding:!0});return this.convertTiles(w,T),this},convertTiles:function(y,T){if(y.length===0)return this;for(var E=0;E<y.length;E++)new c(this,y[E],T);return this},nextGroup:function(y){return u.nextGroup(y)},nextCategory:function(){return u.nextCategory()},pause:function(){return this.enabled=!1,this.emit(l.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(l.RESUME),this},update:function(y,T){if(!(!this.enabled||!this.autoUpdate)){var E=this.engine,w=this.runner,A=E.timing,b=this.correction;w.isFixed?T=this.getDelta(y,T):(T=y-w.timePrev||w.delta,w.timePrev=y,w.deltaHistory.push(T),w.deltaHistory=w.deltaHistory.slice(-w.deltaSampleSize),T=Math.min.apply(null,w.deltaHistory),T=T<w.deltaMin?w.deltaMin:T,T=T>w.deltaMax?w.deltaMax:T,b=T/w.delta,w.delta=T),w.timeScalePrev!==0&&(b*=A.timeScale/w.timeScalePrev),A.timeScale===0&&(b=0),w.timeScalePrev=A.timeScale,w.correction=b,w.frameCounter+=1,y-w.counterTimestamp>=1e3&&(w.fps=w.frameCounter*((y-w.counterTimestamp)/1e3),w.counterTimestamp=y,w.frameCounter=0),s.update(E,T,b)}},step:function(y,T){s.update(this.engine,y,T)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(y){var T=y.hasOwnProperty("body")?y.body:y;return a.get(this.localWorld,T.id,T.type)!==null},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(!!this.drawDebug){var y=this.debugConfig,T=this.engine,E=this.debugGraphic,w=a.allBodies(this.localWorld);this.debugGraphic.clear(),y.showBroadphase&&T.broadphase.controller&&this.renderGrid(T.broadphase,E,y.broadphaseColor,.5),y.showBounds&&this.renderBodyBounds(w,E,y.boundsColor,.5),(y.showBody||y.showStaticBody)&&this.renderBodies(w),y.showJoint&&this.renderJoints(),(y.showAxes||y.showAngleIndicator)&&this.renderBodyAxes(w,E,y.showAxes,y.angleColor,.5),y.showVelocity&&this.renderBodyVelocity(w,E,y.velocityColor,1,2),y.showSeparations&&this.renderSeparations(T.pairs.list,E,y.separationColor),y.showCollisions&&this.renderCollisions(T.pairs.list,E,y.collisionColor)}},renderGrid:function(y,T,E,w){T.lineStyle(1,E,w);for(var A=o.keys(y.buckets),b=0;b<A.length;b++){var R=A[b];if(!(y.buckets[R].length<2)){var L=R.split(/C|R/);T.strokeRect(parseInt(L[1],10)*y.bucketWidth,parseInt(L[2],10)*y.bucketHeight,y.bucketWidth,y.bucketHeight)}}return this},renderSeparations:function(y,T,E){T.lineStyle(1,E,1);for(var w=0;w<y.length;w++){var A=y[w];if(!!A.isActive){var b=A.collision,R=b.bodyA,L=b.bodyB,B=R.position,D=L.position,G=b.penetration,X=!R.isStatic&&!L.isStatic?4:1;L.isStatic&&(X=0),T.lineBetween(D.x,D.y,D.x-G.x*X,D.y-G.y*X),X=!R.isStatic&&!L.isStatic?4:1,R.isStatic&&(X=0),T.lineBetween(B.x,B.y,B.x-G.x*X,B.y-G.y*X)}}return this},renderCollisions:function(y,T,E){T.lineStyle(1,E,.5),T.fillStyle(E,1);var w,A;for(w=0;w<y.length;w++)if(A=y[w],!!A.isActive)for(var b=0;b<A.activeContacts.length;b++){var R=A.activeContacts[b],L=R.vertex;T.fillRect(L.x-2,L.y-2,5,5)}for(w=0;w<y.length;w++)if(A=y[w],!!A.isActive){var B=A.collision,D=A.activeContacts;if(D.length>0){var G=D[0].vertex.x,X=D[0].vertex.y;D.length===2&&(G=(D[0].vertex.x+D[1].vertex.x)/2,X=(D[0].vertex.y+D[1].vertex.y)/2),B.bodyB===B.supports[0].body||B.bodyA.isStatic?T.lineBetween(G-B.normal.x*8,X-B.normal.y*8,G,X):T.lineBetween(G+B.normal.x*8,X+B.normal.y*8,G,X)}}return this},renderBodyBounds:function(y,T,E,w){T.lineStyle(1,E,w);for(var A=0;A<y.length;A++){var b=y[A];if(!!b.render.visible){var R=b.bounds;if(R)T.strokeRect(R.min.x,R.min.y,R.max.x-R.min.x,R.max.y-R.min.y);else for(var L=b.parts,B=L.length>1?1:0;B<L.length;B++){var D=L[B];T.strokeRect(D.bounds.min.x,D.bounds.min.y,D.bounds.max.x-D.bounds.min.x,D.bounds.max.y-D.bounds.min.y)}}}return this},renderBodyAxes:function(y,T,E,w,A){T.lineStyle(1,w,A);for(var b=0;b<y.length;b++){var R=y[b],L=R.parts;if(!!R.render.visible){var B,D,G;if(E)for(D=L.length>1?1:0;D<L.length;D++)for(B=L[D],G=0;G<B.axes.length;G++){var X=B.axes[G];T.lineBetween(B.position.x,B.position.y,B.position.x+X.x*20,B.position.y+X.y*20)}else for(D=L.length>1?1:0;D<L.length;D++)for(B=L[D],G=0;G<B.axes.length;G++)T.lineBetween(B.position.x,B.position.y,(B.vertices[0].x+B.vertices[B.vertices.length-1].x)/2,(B.vertices[0].y+B.vertices[B.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(y,T,E,w,A){T.lineStyle(A,E,w);for(var b=0;b<y.length;b++){var R=y[b];!R.render.visible||T.lineBetween(R.position.x,R.position.y,R.position.x+(R.position.x-R.positionPrev.x)*2,R.position.y+(R.position.y-R.positionPrev.y)*2)}return this},renderBodies:function(y){for(var T=this.debugGraphic,E=this.debugConfig,w=E.showBody,A=E.showStaticBody,b=E.showSleeping,R=E.showInternalEdges,L=E.showConvexHulls,B=E.renderFill,D=E.renderLine,G=E.staticBodySleepOpacity,X=E.sleepFillColor,H=E.sleepLineColor,K=E.hullColor,$=0;$<y.length;$++){var N=y[$];if(!!N.render.visible&&!(!A&&N.isStatic||!w&&!N.isStatic)){var I=N.render.lineColor,z=N.render.lineOpacity,U=N.render.lineThickness,W=N.render.fillColor,V=N.render.fillOpacity;b&&N.isSleeping&&(N.isStatic?(z*=G,V*=G):(I=H,W=X)),B||(W=null),D||(I=null),this.renderBody(N,T,R,I,z,U,W,V);var Z=N.parts.length;L&&Z>1&&this.renderConvexHull(N,T,K,U)}}},renderBody:function(y,T,E,w,A,b,R,L){w===void 0&&(w=null),A===void 0&&(A=null),b===void 0&&(b=1),R===void 0&&(R=null),L===void 0&&(L=null);for(var B=this.debugConfig,D=B.sensorFillColor,G=B.sensorLineColor,X=y.parts,H=X.length,K=H>1?1:0;K<H;K++){var $=X[K],N=$.render,I=N.opacity;if(!(!N.visible||I===0||$.isSensor&&!B.showSensors)){var z=$.circleRadius;if(T.beginPath(),$.isSensor?(R!==null&&T.fillStyle(D,L*I),w!==null&&T.lineStyle(b,G,A*I)):(R!==null&&T.fillStyle(R,L*I),w!==null&&T.lineStyle(b,w,A*I)),z)T.arc($.position.x,$.position.y,z,0,2*Math.PI);else{var U=$.vertices,W=U.length;T.moveTo(U[0].x,U[0].y);for(var V=1;V<W;V++){var Z=U[V];if(!U[V-1].isInternal||E?T.lineTo(Z.x,Z.y):T.moveTo(Z.x,Z.y),V<W&&Z.isInternal&&!E){var J=(V+1)%W;T.moveTo(U[J].x,U[J].y)}}T.closePath()}R!==null&&T.fillPath(),w!==null&&T.strokePath()}}if(B.showPositions&&!y.isStatic){var tt=y.position.x,st=y.position.y,at=Math.ceil(B.positionSize/2);T.fillStyle(B.positionColor,1),T.fillRect(tt-at,st-at,B.positionSize,B.positionSize)}return this},renderConvexHull:function(y,T,E,w){w===void 0&&(w=1);var A=y.parts,b=A.length;if(b>1){var R=y.vertices;T.lineStyle(w,E),T.beginPath(),T.moveTo(R[0].x,R[0].y);for(var L=1;L<R.length;L++)T.lineTo(R[L].x,R[L].y);T.lineTo(R[0].x,R[0].y),T.strokePath()}return this},renderJoints:function(){for(var y=this.debugGraphic,T=a.allConstraints(this.localWorld),E=0;E<T.length;E++){var w=T[E].render,A=w.lineColor,b=w.lineOpacity,R=w.lineThickness,L=w.pinSize,B=w.anchorColor,D=w.anchorSize;this.renderConstraint(T[E],y,A,b,R,L,B,D)}},renderConstraint:function(y,T,E,w,A,b,R,L){var B=y.render;if(!B.visible||!y.pointA||!y.pointB)return this;T.lineStyle(A,E,w);var D=y.bodyA,G=y.bodyB,X,H;if(D?X=g.add(D.position,y.pointA):X=y.pointA,B.type==="pin")T.strokeCircle(X.x,X.y,b);else{if(G?H=g.add(G.position,y.pointB):H=y.pointB,T.beginPath(),T.moveTo(X.x,X.y),B.type==="spring")for(var K=g.sub(H,X),$=g.perp(g.normalise(K)),N=Math.ceil(o.clamp(y.length/5,12,20)),I,z=1;z<N;z+=1)I=z%2===0?1:-1,T.lineTo(X.x+K.x*(z/N)+$.x*I*4,X.y+K.y*(z/N)+$.y*I*4);T.lineTo(H.x,H.y)}return T.strokePath(),B.anchors&&L>0&&(T.fillStyle(R),T.fillCircle(X.x,X.y,L),T.fillCircle(H.x,H.y,L)),this},resetCollisionIDs:function(){return f._nextCollidingGroupId=1,f._nextNonCollidingGroupId=-1,f._nextCategory=1,this},shutdown:function(){d.off(this.engine),this.removeAllListeners(),p.clear(this.localWorld,!1),s.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});m.exports=x},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(m,C,t){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var e=t(540),f=t(0),r=t(20),o=new f({Extends:e,initialize:function(s,n,l){e.call(this,n),this.scene=s,this.systems=s.sys,this.pluginKey=l,s.sys.events.once(r.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Canvas:t(369),WebGL:t(383)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(107),f=t(17),r={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(92),f=t(17),r={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(198),r=t(2),o=t(1411),a=t(382),s=t(58),n=new e({Extends:s,initialize:function(i){i.renderTarget=r(i,"renderTarget",1),i.fragShader=r(i,"fragShader",o),i.vertShader=r(i,"vertShader",a),i.attributes=r(i,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),i.batchSize=1,i.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],s.call(this,i),this.isPostFX=!0,this.gameObject,this.colorMatrix=new f,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){s.prototype.boot.call(this);var l=this.manager.UTILITY_PIPELINE;this.fullFrame1=l.fullFrame1,this.fullFrame2=l.fullFrame2,this.halfFrame1=l.halfFrame1,this.halfFrame2=l.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(l){this.bindAndDraw(l)},copyFrame:function(l,i,h,u,d){this.manager.copyFrame(l,i,h,u,d)},copyToGame:function(l){this.manager.copyToGame(l)},drawFrame:function(l,i,h){this.manager.drawFrame(l,i,h,this.colorMatrix)},blendFrames:function(l,i,h,u,d){this.manager.blendFrames(l,i,h,u,d)},blendFramesAdditive:function(l,i,h,u,d){this.manager.blendFramesAdditive(l,i,h,u,d)},clearFrame:function(l,i){this.manager.clearFrame(l,i)},blitFrame:function(l,i,h,u,d,c){this.manager.blitFrame(l,i,h,u,d,c)},copyFrameRect:function(l,i,h,u,d,c,p,g){this.manager.copyFrameRect(l,i,h,u,d,c,p,g)},bindAndDraw:function(l,i,h,u,d){h===void 0&&(h=!0),u===void 0&&(u=!0);var c=this.gl,p=this.renderer;this.bind(d),this.set1i("uMainSampler",0),i?(c.viewport(0,0,i.width,i.height),c.bindFramebuffer(c.FRAMEBUFFER,i.framebuffer),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,i.texture,0),h&&(u?c.clearColor(0,0,0,0):c.clearColor(0,0,0,1),c.clear(c.COLOR_BUFFER_BIT))):(p.popFramebuffer(!1,!1,!1),p.currentFramebuffer||c.viewport(0,0,p.width,p.height)),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,l.texture),c.bufferData(c.ARRAY_BUFFER,this.vertexData,c.STATIC_DRAW),c.drawArrays(c.TRIANGLES,0,6),i?(c.bindTexture(c.TEXTURE_2D,null),c.bindFramebuffer(c.FRAMEBUFFER,null)):p.resetTextures()}});m.exports=n},function(m,C){m.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join(`
`)},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=t(201),r={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)};r=e(!1,r,f.CENTER),r=e(!1,r,f.ORIENTATION),r=e(!1,r,f.SCALE_MODE),r=e(!1,r,f.ZOOM),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(144),f=t(17),r={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(18),f=t(0),r=t(20),o=t(2),a=t(24),s=new f({initialize:function(l){this.scene=l,this.systems=l.sys,this.settings=l.sys.settings,this.key=l.sys.settings.key,this.manager=l.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,l.sys.events.once(r.BOOT,this.boot,this),l.sys.events.on(r.START,this.pluginStart,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(r.SHUTDOWN,this.shutdown,this)},start:function(n,l){return n===void 0&&(n=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",n,l),this},restart:function(n){var l=this.key;return this.manager.queueOp("stop",l),this.manager.queueOp("start",l,n),this},transition:function(n){n===void 0&&(n={});var l=o(n,"target",!1),i=this.manager.getScene(l);if(!l||!this.checkValidTransition(i))return!1;var h=o(n,"duration",1e3);this._elapsed=0,this._target=i,this._duration=h,this._willSleep=o(n,"sleep",!1),this._willRemove=o(n,"remove",!1);var u=o(n,"onUpdate",null);u&&(this._onUpdate=u,this._onUpdateScope=o(n,"onUpdateScope",this.scene));var d=o(n,"allowInput",!1);this.settings.transitionAllowInput=d;var c=i.sys.settings;return c.isTransition=!0,c.transitionFrom=this.scene,c.transitionDuration=h,c.transitionAllowInput=d,o(n,"moveAbove",!1)?this.manager.moveAbove(this.key,l):o(n,"moveBelow",!1)&&this.manager.moveBelow(this.key,l),i.sys.isSleeping()?i.sys.wake(o(n,"data")):this.manager.start(l,o(n,"data")),this.systems.events.emit(r.TRANSITION_OUT,i,h),this.systems.events.on(r.UPDATE,this.step,this),!0},checkValidTransition:function(n){return!(!n||n.sys.isActive()||n.sys.isTransitioning()||n===this.scene||this.systems.isTransitioning())},step:function(n,l){this._elapsed+=l,this.transitionProgress=e(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var n=this._target.sys,l=this._target.sys.settings;this.systems.events.off(r.UPDATE,this.step,this),n.events.emit(r.TRANSITION_COMPLETE,this.scene),l.isTransition=!1,l.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(n,l,i,h){return this.manager.add(n,l,i,h)},launch:function(n,l){return n&&n!==this.key&&this.manager.queueOp("start",n,l),this},run:function(n,l){return n&&n!==this.key&&this.manager.queueOp("run",n,l),this},pause:function(n,l){return n===void 0&&(n=this.key),this.manager.queueOp("pause",n,l),this},resume:function(n,l){return n===void 0&&(n=this.key),this.manager.queueOp("resume",n,l),this},sleep:function(n,l){return n===void 0&&(n=this.key),this.manager.queueOp("sleep",n,l),this},wake:function(n,l){return n===void 0&&(n=this.key),this.manager.queueOp("wake",n,l),this},switch:function(n){return n!==this.key&&this.manager.queueOp("switch",this.key,n),this},stop:function(n,l){return n===void 0&&(n=this.key),this.manager.queueOp("stop",n,l),this},setActive:function(n,l,i){l===void 0&&(l=this.key);var h=this.manager.getScene(l);return h&&h.sys.setActive(n,i),this},setVisible:function(n,l){l===void 0&&(l=this.key);var i=this.manager.getScene(l);return i&&i.sys.setVisible(n),this},isSleeping:function(n){return n===void 0&&(n=this.key),this.manager.isSleeping(n)},isActive:function(n){return n===void 0&&(n=this.key),this.manager.isActive(n)},isPaused:function(n){return n===void 0&&(n=this.key),this.manager.isPaused(n)},isVisible:function(n){return n===void 0&&(n=this.key),this.manager.isVisible(n)},swapPosition:function(n,l){return l===void 0&&(l=this.key),n!==l&&this.manager.swapPosition(n,l),this},moveAbove:function(n,l){return l===void 0&&(l=this.key),n!==l&&this.manager.moveAbove(n,l),this},moveBelow:function(n,l){return l===void 0&&(l=this.key),n!==l&&this.manager.moveBelow(n,l),this},remove:function(n){return n===void 0&&(n=this.key),this.manager.remove(n),this},moveUp:function(n){return n===void 0&&(n=this.key),this.manager.moveUp(n),this},moveDown:function(n){return n===void 0&&(n=this.key),this.manager.moveDown(n),this},bringToTop:function(n){return n===void 0&&(n=this.key),this.manager.bringToTop(n),this},sendToBack:function(n){return n===void 0&&(n=this.key),this.manager.sendToBack(n),this},get:function(n){return this.manager.getScene(n)},getIndex:function(n){return n===void 0&&(n=this.key),this.manager.getIndex(n)},shutdown:function(){var n=this.systems.events;n.off(r.SHUTDOWN,this.shutdown,this),n.off(r.POST_UPDATE,this.step,this),n.off(r.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",s,"scenePlugin"),m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=t(1417),r={CanvasTexture:t(423),Events:t(106),FilterMode:f,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)};r=e(!1,r,f),m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={LINEAR:0,NEAREST:1};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(17),f=t(1419),r={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)};r=e(!1,r,f.ORIENTATION),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e={ORIENTATION:t(29)};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(63),r=function(o,a,s,n,l,i,h,u){h===void 0&&(h=!0),o<0&&(o=0),a<0&&(a=0);for(var d=e(o,a,s,n,null,u),c=l-o,p=i-a,g=0;g<d.length;g++){var x=d[g].x+c,y=d[g].y+p;x>=0&&x<u.width&&y>=0&&y<u.height&&u.data[y][x]&&u.data[y][x].copy(d[g])}h&&f(l-1,i-1,s+2,n+2,u)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(542),r=function(o,a,s,n,l,i){s||(s={}),Array.isArray(o)||(o=[o]);var h=i.tilemapLayer;n||(n=h.scene),l||(l=n.cameras.main);var u=e(0,0,i.width,i.height,null,i),d=[],c;for(c=0;c<u.length;c++){var p=u[c];if(o.indexOf(p.index)!==-1){var g=h.tileToWorldXY(p.x,p.y,void 0,l,i);s.x=g.x,s.y=g.y,d.push(n.make.sprite(s))}}if(typeof a=="number")for(c=0;c<o.length;c++)f(o[c],a,0,0,i.width,i.height,i);else if(Array.isArray(a))for(c=0;c<o.length;c++)f(o[c],a[c],0,0,i.width,i.height,i);return d};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(63),r=t(72),o=function(a,s,n,l,i,h,u){for(var d=u.collideIndexes.indexOf(a)!==-1,c=e(s,n,l,i,null,u),p=0;p<c.length;p++)c[p].index=a,r(c[p],d);h&&f(s-1,n-1,l+2,i+2,u)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(r,o,a,s,n,l,i,h){var u=e(a,s,n,l,i,h);return u.filter(r,o)};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){f===void 0&&(f=0),r===void 0&&(r=!1);var a=0,s,n,l;if(r){for(n=o.height-1;n>=0;n--)for(s=o.width-1;s>=0;s--)if(l=o.data[n][s],l&&l.index===e){if(a===f)return l;a+=1}}else for(n=0;n<o.height;n++)for(s=0;s<o.width;s++)if(l=o.data[n][s],l&&l.index===e){if(a===f)return l;a+=1}return null};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(r,o,a,s,n,l,i,h){var u=e(a,s,n,l,i,h);return u.find(r,o)||null};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(r,o,a,s,n,l,i,h){var u=e(a,s,n,l,i,h);u.forEach(r,o)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(544),r=t(545),o=t(547),a=t(1),s=t(548),n=function(l){return l===e.ORTHOGONAL?f:l===e.HEXAGONAL?r:l===e.STAGGERED?s:l===e.ISOMETRIC?o:a};m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(158),f=t(3),r=new f,o=function(a,s,n,l,i){return i.tilemapLayer.worldToTileXY(a,s,!0,r,l),e(r.x,r.y,n,i)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(483),f=t(26),r=t(484),o=t(1),a=t(3),s=function(u,d){return r.RectangleToTriangle(d,u)},n=new a,l=new a,i=new a,h=function(u,d,c,p){if(u===void 0)return[];var g=o;u instanceof e.Circle?g=r.CircleToRectangle:u instanceof e.Rectangle?g=r.RectangleToRectangle:u instanceof e.Triangle?g=s:u instanceof e.Line&&(g=r.LineToRectangle),p.tilemapLayer.worldToTileXY(u.left,u.top,!0,l,c);var x=l.x,y=l.y;p.tilemapLayer.worldToTileXY(u.right,u.bottom,!0,i,c);var T=Math.ceil(i.x),E=Math.ceil(i.y),w=Math.max(T-x,1),A=Math.max(E-y,1),b=f(x,y,w,A,d,p),R=p.tileWidth,L=p.tileHeight;p.tilemapLayer&&(R*=p.tilemapLayer.scaleX,L*=p.tilemapLayer.scaleY);for(var B=[],D=new e.Rectangle(0,0,R,L),G=0;G<b.length;G++){var X=b[G];p.tilemapLayer.tileToWorldXY(X.x,X.y,n,c),D.x=n.x,D.y=n.y,g(u,D)&&B.push(X)}return B};m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(1),r=t(253),o=function(a){return a===e.ORTHOGONAL?r:f};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(550),r=t(551),o=t(1),a=t(552),s=t(553),n=function(l){return l===e.ORTHOGONAL?s:l===e.ISOMETRIC?r:l===e.HEXAGONAL?f:l===e.STAGGERED?a:o};m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(554),r=t(1),o=t(555),a=t(254),s=function(n){return n===e.ORTHOGONAL?a:n===e.HEXAGONAL?f:n===e.STAGGERED?o:r};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(1),r=t(255),o=function(a){return a===e.ORTHOGONAL?r:f};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(556),r=t(557),o=t(1),a=t(558),s=t(559),n=function(l){return l===e.ORTHOGONAL?s:l===e.ISOMETRIC?r:l===e.HEXAGONAL?f:l===e.STAGGERED?a:o};m.exports=n},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(29),f=t(560),r=t(1),o=t(561),a=t(256),s=function(n){return n===e.ORTHOGONAL?a:n===e.HEXAGONAL?f:n===e.STAGGERED?o:r};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(562),f=t(3),r=new f,o=function(a,s,n,l){l.tilemapLayer.worldToTileXY(a,s,!0,r,n);var i=r.x,h=r.y;return e(i,h,l)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(257),f=t(3),r=new f,o=function(a,s,n,l,i,h){return h.tilemapLayer.worldToTileXY(s,n,!0,r,i,h),e(a,r.x,r.y,l,h)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(63),f=t(257),r=function(o,a,s,n,l){if(n===void 0&&(n=!0),!Array.isArray(o))return null;Array.isArray(o[0])||(o=[o]);for(var i=o.length,h=o[0].length,u=0;u<i;u++)for(var d=0;d<h;d++){var c=o[u][d];f(c,a+d,s+u,!1,l)}n&&e(a-1,s-1,h+2,i+2,l)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(210),r=function(o,a,s,n,l,i){var h,u=e(o,a,s,n,{},i);if(!l)for(l=[],h=0;h<u.length;h++)l.indexOf(u[h].index)===-1&&l.push(u[h].index);for(h=0;h<u.length;h++)u[h].index=f(l)};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(563),f=t(3),r=new f,o=function(a,s,n,l,i,h){return h.tilemapLayer.worldToTileXY(a,s,!0,r,i,h),e(r.x,r.y,n,l,h)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(397),r=new f(105,210,231,150),o=new f(243,134,48,200),a=new f(40,39,37,150),s=function(n,l,i){l===void 0&&(l={});var h=l.tileColor!==void 0?l.tileColor:r,u=l.collidingTileColor!==void 0?l.collidingTileColor:o,d=l.faceColor!==void 0?l.faceColor:a,c=e(0,0,i.width,i.height,null,i);n.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),n.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var p=0;p<c.length;p++){var g=c[p],x=g.width,y=g.height,T=g.pixelX,E=g.pixelY,w=g.collides?u:h;w!==null&&(n.fillStyle(w.color,w.alpha/255),n.fillRect(T,E,x,y)),T+=1,E+=1,x-=2,y-=2,d!==null&&(n.lineStyle(1,d.color,d.alpha/255),g.faceTop&&n.lineBetween(T,E,T+x,E),g.faceRight&&n.lineBetween(T+x,E,T+x,E+y),g.faceBottom&&n.lineBetween(T,E+y,T+x,E+y),g.faceLeft&&n.lineBetween(T,E,T,E+y))}};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),r=t(160),o=function(a,s,n,l,i){s===void 0&&(s=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;h++)r(a[h],s,l);if(i)for(var u=0;u<l.height;u++)for(var d=0;d<l.width;d++){var c=l.data[u][d];c&&a.indexOf(c.index)!==-1&&e(c,s)}n&&f(0,0,l.width,l.height,l)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),r=t(160),o=function(a,s,n,l,i,h){if(n===void 0&&(n=!0),l===void 0&&(l=!0),h===void 0&&(h=!0),!(a>s)){for(var u=a;u<=s;u++)r(u,n,i);if(h)for(var d=0;d<i.height;d++)for(var c=0;c<i.width;c++){var p=i.data[d][c];p&&p.index>=a&&p.index<=s&&e(p,n)}l&&f(0,0,i.width,i.height,i)}};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),r=t(160),o=function(a,s,n,l){s===void 0&&(s=!0),n===void 0&&(n=!0),Array.isArray(a)||(a=[a]);for(var i=0;i<l.height;i++)for(var h=0;h<l.width;h++){var u=l.data[i][h];u&&a.indexOf(u.index)===-1&&(e(u,s),r(u.index,s,l))}n&&f(0,0,l.width,l.height,l)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),r=t(126),o=function(a,s,n,l){s===void 0&&(s=!0),n===void 0&&(n=!0);for(var i=0;i<l.height;i++)for(var h=0;h<l.width;h++){var u=l.data[i][h];if(!!u){for(var d in a)if(!!r(u.properties,d)){var c=a[d];Array.isArray(c)||(c=[c]);for(var p=0;p<c.length;p++)u.properties[d]===c[p]&&e(u,s)}}}n&&f(0,0,l.width,l.height,l)};m.exports=o},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(72),f=t(63),r=function(o,a,s){o===void 0&&(o=!0),a===void 0&&(a=!0);for(var n=0;n<s.height;n++)for(var l=0;l<s.width;l++){var i=s.data[n][l];if(!!i){var h=i.getCollisionGroup();h&&h.objects&&h.objects.length>0&&e(i,o)}}a&&f(0,0,s.width,s.height,s)};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f,r,o){if(typeof e=="number")o.callbacks[e]=f!==null?{callback:f,callbackContext:r}:void 0;else for(var a=0,s=e.length;a<s;a++)o.callbacks[e[a]]=f!==null?{callback:f,callbackContext:r}:void 0};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(r,o,a,s,n,l,i){for(var h=e(r,o,a,s,null,i),u=0;u<h.length;u++)h[u].setCollisionCallback(n,l)};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=t(131),r=function(o,a,s,n,l){var i=e(o,a,s,n,null,l),h=i.map(function(d){return d.index});f(h);for(var u=0;u<i.length;u++)i[u].index=h[u]};m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(r,o,a,s,n,l,i){for(var h=e(a,s,n,l,null,i),u=0;u<h.length;u++)h[u]&&(h[u].index===r?h[u].index=o:h[u].index===o&&(h[u].index=r))};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(26),f=function(r,o,a,s,n,l){if(!!n){var i,h=e(r,o,a,s,null,l),u=0;for(i=0;i<n.length;i++)u+=n[i].weight;if(!(u<=0))for(i=0;i<h.length;i++){for(var d=Math.random()*u,c=0,p=-1,g=0;g<n.length;g++)if(c+=n[g].weight,d<=c){var x=n[g].index;p=Array.isArray(x)?x[Math.floor(Math.random()*x.length)]:x;break}h[i].index=p}}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){for(var r=0;r<e.length;r++){var o=e[r],a=r;if(o.name&&o.name!==""&&(a=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var s={},n={},l,i,h;if(Array.isArray(o.edgecolors))for(l=0;l<o.edgecolors.length;l++)h=1+l,i=o.edgecolors[l],i.name!==""&&(s[h]=i.name);if(Array.isArray(o.cornercolors))for(l=0;l<o.cornercolors.length;l++)h=1+l,i=o.cornercolors[l],i.name!==""&&(n[h]=i.name);if(Array.isArray(o.colors))for(l=0;l<o.colors.length;l++)i=o.colors[l],h=1+l,i.name!==""&&(s[h]=n[h]=i.name);for(var u=[s,n,s,n,s,n,s,n],d=0;d<o.wangtiles.length;d++){var c=o.wangtiles[d],p=f[c.tileid]||(f[c.tileid]={});p=p.wangid||(p.wangid={});for(var g=[],x=0;x<Math.min(u.length,c.wangid.length);x++){if(i=c.wangid[x],i===0){g.push(void 0);continue}var y=u[x][i];if(y!==void 0){g.push(y);continue}g.push(i)}p[a]=g}}}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(1),f=t(1);e=t(1457),f=t(1458),m.exports={renderWebGL:e,renderCanvas:f}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(12),f=function(r,o,a){var s=o.cull(a),n=s.length,l=a.alpha*o.alpha;if(!(n===0||l<=0)){var i=o.gidMap,h=r.pipelines.set(o.pipeline,o),u=e.getTintAppendFloatAlpha,d=o.scrollFactorX,c=o.scrollFactorY,p=o.x,g=o.y,x=o.scaleX,y=o.scaleY;r.pipelines.preBatch(o);for(var T=0;T<n;T++){var E=s[T],w=i[E.index];if(!!w){var A=w.getTileTextureCoordinates(E.index);if(A!==null){var b=w.glTexture,R=h.setTexture2D(b,o),L=w.tileWidth,B=w.tileHeight,D=A.x,G=A.y,X=w.tileWidth*.5,H=w.tileHeight*.5,K=u(E.tint,l*E.alpha);h.batchTexture(o,b,b.width,b.height,p+(X+E.pixelX)*x,g+(H+E.pixelY)*y,E.width,E.height,x,y,E.rotation,E.flipX,E.flipY,d,c,X,H,D,G,L,B,K,K,K,K,!1,0,0,a,null,!0,R)}}}r.pipelines.postBatch(o)}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(25),f=new e,r=new e,o=new e,a=function(s,n,l,i){var h=n.cull(l),u=h.length,d=l.alpha*n.alpha;if(!(u===0||d<=0)){var c=f,p=r,g=o;p.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),c.copyFrom(l.matrix);var x=s.currentContext,y=n.gidMap;x.save(),i?(c.multiplyWithOffset(i,-l.scrollX*n.scrollFactorX,-l.scrollY*n.scrollFactorY),p.e=n.x,p.f=n.y,c.multiply(p,g),g.copyToContext(x)):(p.e-=l.scrollX*n.scrollFactorX,p.f-=l.scrollY*n.scrollFactorY,p.copyToContext(x)),(!s.antialias||n.scaleX>1||n.scaleY>1)&&(x.imageSmoothingEnabled=!1);for(var T=0;T<u;T++){var E=h[T],w=y[E.index];if(!!w){var A=w.image.getSourceImage(),b=w.getTileTextureCoordinates(E.index);if(b!==null){var R=w.tileWidth,L=w.tileHeight,B=R*.5,D=L*.5;x.save(),x.translate(E.pixelX+B,E.pixelY+D),E.rotation!==0&&x.rotate(E.rotation),(E.flipX||E.flipY)&&x.scale(E.flipX?-1:1,E.flipY?-1:1),x.globalAlpha=d*E.alpha,x.drawImage(A,b.x,b.y,R,L,-B,-D,R,L),x.restore()}}}x.restore()}};m.exports=a},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(16),f=t(262);e.register("tilemap",function(r){var o=r!==void 0?r:{};return f(this.scene,o.key,o.tileWidth,o.tileHeight,o.width,o.height,o.data,o.insertNull)})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(5),f=t(262);e.register("tilemap",function(r,o,a,s,n,l,i){return r===null&&(r=void 0),o===null&&(o=void 0),a===null&&(a=void 0),s===null&&(s=void 0),n===null&&(n=void 0),f(this.scene,r,o,a,s,n,l,i)})},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Clock:t(1462),TimerEvent:t(582)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(0),f=t(24),r=t(20),o=t(582),a=t(93),s=new e({initialize:function(l){this.scene=l,this.systems=l.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],l.sys.events.once(r.BOOT,this.boot,this),l.sys.events.on(r.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var n=this.systems.events;n.on(r.PRE_UPDATE,this.preUpdate,this),n.on(r.UPDATE,this.update,this),n.once(r.SHUTDOWN,this.shutdown,this)},addEvent:function(n){var l;return n instanceof o?(l=n,this.removeEvent(l),l.elapsed=l.startAt,l.hasDispatched=!1,l.repeatCount=l.repeat===-1||l.loop?999999999999:l.repeat):l=new o(n),this._pendingInsertion.push(l),l},delayedCall:function(n,l,i,h){return this.addEvent({delay:n,callback:l,args:i,callbackScope:h})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(n){Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++){var i=n[l];a(this._pendingRemoval,i),a(this._pendingInsertion,i),a(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var n=this._pendingRemoval.length,l=this._pendingInsertion.length;if(!(n===0&&l===0)){var i,h;for(i=0;i<n;i++){h=this._pendingRemoval[i];var u=this._active.indexOf(h);u>-1&&this._active.splice(u,1),h.destroy()}for(i=0;i<l;i++)h=this._pendingInsertion[i],this._active.push(h);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(n,l){if(this.now=n,!this.paused){l*=this.timeScale;for(var i=0;i<this._active.length;i++){var h=this._active[i];if(!h.paused&&(h.elapsed+=l*h.timeScale,h.elapsed>=h.delay)){var u=h.elapsed-h.delay;h.elapsed=h.delay,!h.hasDispatched&&h.callback&&(h.hasDispatched=!0,h.callback.apply(h.callbackScope,h.args)),h.repeatCount>0?(h.repeatCount--,h.elapsed=u,h.hasDispatched=!1):this._pendingRemoval.push(h)}}}},shutdown:function(){var n;for(n=0;n<this._pendingInsertion.length;n++)this._pendingInsertion[n].destroy();for(n=0;n<this._active.length;n++)this._active[n].destroy();for(n=0;n<this._pendingRemoval.length;n++)this._pendingRemoval[n].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var l=this.systems.events;l.off(r.PRE_UPDATE,this.preUpdate,this),l.off(r.UPDATE,this.update,this),l.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});f.register("Clock",s,"time"),m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(100),f=t(17),r={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)};r=f(!1,r,e),m.exports=r},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="active"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="complete"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="loop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="repeat"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="start"},function(m,C){/**
 * @author       samme
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="stop"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="update"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="yoyo"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(93),f=t(0),r=t(585),o=t(24),a=t(20),s=t(586),n=t(587),l=t(100),i=t(163),h=new f({initialize:function(d){this.scene=d,this.systems=d.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,d.sys.events.once(a.BOOT,this.boot,this),d.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var u=this.systems.events;u.on(a.PRE_UPDATE,this.preUpdate,this),u.on(a.UPDATE,this.update,this),u.once(a.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(u){return n(this,u)},timeline:function(u){var d=n(this,u);return d.paused||(this._add.push(d),this._toProcess++),d},create:function(u){return i(this,u)},add:function(u){var d=i(this,u);return this._add.push(d),this._toProcess++,d},existing:function(u){return this._add.push(u),this._toProcess++,this},addCounter:function(u){var d=r(this,u);return this._add.push(d),this._toProcess++,d},stagger:function(u,d){return s(u,d)},preUpdate:function(){if(this._toProcess!==0){var u=this._destroy,d=this._active,c=this._pending,p,g;for(p=0;p<u.length;p++){g=u[p];var x=d.indexOf(g);x===-1?(x=c.indexOf(g),x>-1&&(g.state=l.REMOVED,c.splice(x,1))):(g.state=l.REMOVED,d.splice(x,1))}for(u.length=0,u=this._add,p=0;p<u.length;p++)g=u[p],g.state===l.PENDING_ADD&&(g.init()?(g.play(),this._active.push(g)):this._pending.push(g));u.length=0,this._toProcess=0}},update:function(u,d){var c=this._active,p;d*=this.timeScale;for(var g=0;g<c.length;g++)p=c[g],p.update(u,d)&&(this._destroy.push(p),this._toProcess++)},remove:function(u){return e(this._add,u),e(this._pending,u),e(this._active,u),e(this._destroy,u),u.state=l.REMOVED,this},makeActive:function(u){if(this._add.indexOf(u)!==-1||this._active.indexOf(u)!==-1)return this;var d=this._pending.indexOf(u);return d!==-1&&this._pending.splice(d,1),this._add.push(u),u.state=l.PENDING_ADD,this._toProcess++,this},each:function(u,d){for(var c=[null],p=1;p<arguments.length;p++)c.push(arguments[p]);for(var g in this.list)c[0]=this.list[g],u.apply(d,c)},getAllTweens:function(){for(var u=this._active,d=[],c=0;c<u.length;c++)d.push(u[c]);return d},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(u,d){d===void 0&&(d=!1);var c=this._active,p,g=[],x,y;for(Array.isArray(u)||(u=[u]),x=0;x<c.length;x++)for(p=c[x],y=0;y<u.length;y++)p.hasTarget(u[y])&&g.push(p);if(d)for(c=this._pending,x=0;x<c.length;x++)for(p=c[x],y=0;y<u.length;y++)p.hasTarget(u[y])&&g.push(p);return g},isTweening:function(u){for(var d=this._active,c,p=0;p<d.length;p++)if(c=d[p],c.hasTarget(u)&&c.isPlaying())return!0;return!1},killAll:function(){for(var u=this.getAllTweens(),d=0;d<u.length;d++)u[d].stop();return this},killTweensOf:function(u){for(var d=this.getTweensOf(u),c=0;c<d.length;c++)d[c].stop();return this},pauseAll:function(){for(var u=this._active,d=0;d<u.length;d++)u[d].pause();return this},resumeAll:function(){for(var u=this._active,d=0;d<u.length;d++)u[d].resume();return this},setGlobalTimeScale:function(u){return this.timeScale=u,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var u=this.systems.events;u.off(a.PRE_UPDATE,this.preUpdate,this),u.off(a.UPDATE,this.update,this),u.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("TweenManager",h,"tweens"),m.exports=h},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(m,C){/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(f,r){for(var o=new Uint8Array(f),a=o.length,s=r?"data:"+r+";base64,":"",n=0;n<a;n+=3)s+=t[o[n]>>2],s+=t[(o[n]&3)<<4|o[n+1]>>4],s+=t[(o[n+1]&15)<<2|o[n+2]>>6],s+=t[o[n+2]&63];return a%3===2?s=s.substring(0,s.length-1)+"=":a%3===1&&(s=s.substring(0,s.length-2)+"=="),s};m.exports=e},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(6),f=t(18),r=function(o,a,s,n,l){l===void 0&&(l=s);var i=e(o,a,l);return f(i,s,n)};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){for(var r=0;r<f.length;r++)if(!e.hasOwnProperty(f[r]))return!1;return!0};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(77),f=function(r,o){var a=e(r);for(var s in o)a.hasOwnProperty(s)&&(a[s]=o[s]);return a};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return e.replace(/%([0-9]+)/g,function(r,o){return f[Number(o)-1]})};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e,f){return f===0?e.slice(1):e.slice(0,f-1)+e.slice(f)};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t=function(e){return e.split("").reverse().join("")};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={Arcade:t(1366),Matter:t(1494)}},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setBounce:function(e){return this.body.restitution=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setCollisionCategory:function(e){return this.body.collisionFilter.category=e,this},setCollisionGroup:function(e){return this.body.collisionFilter.group=e,this},setCollidesWith:function(e){var f=0;if(!Array.isArray(e))f=e;else for(var r=0;r<e.length;r++)f|=e[r];return this.body.collisionFilter.mask=f,this},setOnCollide:function(e){return this.body.onCollideCallback=e,this},setOnCollideEnd:function(e){return this.body.onCollideEndCallback=e,this},setOnCollideActive:function(e){return this.body.onCollideActiveCallback=e,this},setOnCollideWith:function(e,f){Array.isArray(e)||(e=[e]);for(var r=0;r<e.length;r++){var o=e[r].hasOwnProperty("body")?e[r].body:e[r];this.body.setOnCollideWith(o,f)}return this}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f={applyForce:function(r){return this._tempVec2.set(this.body.position.x,this.body.position.y),e.applyForce(this.body,this._tempVec2,r),this},applyForceFrom:function(r,o){return e.applyForce(this.body,r,o),this},thrust:function(r){var o=this.body.angle;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(r){var o=this.body.angle-Math.PI/2;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(r){var o=this.body.angle+Math.PI/2;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(r){var o=this.body.angle-Math.PI;return this._tempVec2.set(r*Math.cos(o),r*Math.sin(o)),e.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};m.exports=f},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setFriction:function(e,f,r){return this.body.friction=e,f!==void 0&&(this.body.frictionAir=f),r!==void 0&&(this.body.frictionStatic=r),this},setFrictionAir:function(e){return this.body.frictionAir=e,this},setFrictionStatic:function(e){return this.body.frictionStatic=e,this}};m.exports=t},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setIgnoreGravity:function(e){return this.body.ignoreGravity=e,this}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f=t(3),r={setMass:function(o){return e.setMass(this.body,o),this},setDensity:function(o){return e.setDensity(this.body,o),this},centerOfMass:{get:function(){return new f(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};m.exports=r},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={setSensor:function(e){return this.body.isSensor=e,this},isSensor:function(){return this.body.isSensor}};m.exports=t},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(86),f=t(41),r=t(124),o=t(2),a=t(589),s=t(590),n=t(64),l={setRectangle:function(i,h,u){return this.setBody({type:"rectangle",width:i,height:h},u)},setCircle:function(i,h){return this.setBody({type:"circle",radius:i},h)},setPolygon:function(i,h,u){return this.setBody({type:"polygon",sides:h,radius:i},u)},setTrapezoid:function(i,h,u,d){return this.setBody({type:"trapezoid",width:i,height:h,slope:u},d)},setExistingBody:function(i,h){h===void 0&&(h=!0),this.body&&this.world.remove(this.body,!0),this.body=i;for(var u=0;u<i.parts.length;u++)i.parts[u].gameObject=this;var d=this;if(i.destroy=function(){d.world.remove(d.body,!0),d.body.gameObject=null},h&&(this.world.has(i)&&this.world.remove(i,!0),this.world.add(i)),this._originComponent){var c=i.render.sprite.xOffset,p=i.render.sprite.yOffset,g=i.centerOfMass.x,x=i.centerOfMass.y;if(r(g,.5)&&r(x,.5))this.setOrigin(c+.5,p+.5);else{var y=i.centerOffset.x,T=i.centerOffset.y;this.setOrigin(c+y/this.displayWidth,p+T/this.displayHeight)}}return this},setBody:function(i,h){if(!i)return this;var u;typeof i=="string"&&(i={type:i});var d=o(i,"type","rectangle"),c=o(i,"x",this._tempVec2.x),p=o(i,"y",this._tempVec2.y),g=o(i,"width",this.width),x=o(i,"height",this.height);switch(d){case"rectangle":u=e.rectangle(c,p,g,x,h);break;case"circle":var y=o(i,"radius",Math.max(g,x)/2),T=o(i,"maxSides",25);u=e.circle(c,p,y,h,T);break;case"trapezoid":var E=o(i,"slope",.5);u=e.trapezoid(c,p,g,x,E,h);break;case"polygon":var w=o(i,"sides",5),A=o(i,"radius",Math.max(g,x)/2);u=e.polygon(c,p,w,A,h);break;case"fromVertices":case"fromVerts":var b=o(i,"verts",null);if(b)if(typeof b=="string"&&(b=n.fromPath(b)),this.body&&!this.body.hasOwnProperty("temp"))f.setVertices(this.body,b),u=this.body;else{var R=o(i,"flagInternal",!1),L=o(i,"removeCollinear",.01),B=o(i,"minimumArea",10);u=e.fromVertices(c,p,b,h,R,L,B)}break;case"fromPhysicsEditor":u=a.parseBody(c,p,i,h);break;case"fromPhysicsTracer":u=s.parseBody(c,p,i,h);break}return u&&this.setExistingBody(u,i.addToWorld),this}};m.exports=l},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(272),f=t(165),r=t(166),o={setToSleep:function(){return f.set(this.body,!0),this},setAwake:function(){return f.set(this.body,!1),this},setSleepThreshold:function(a){return a===void 0&&(a=60),this.body.sleepThreshold=a,this},setSleepEvents:function(a,s){return this.setSleepStartEvent(a),this.setSleepEndEvent(s),this},setSleepStartEvent:function(a){if(a){var s=this.world;r.on(this.body,"sleepStart",function(n){s.emit(e.SLEEP_START,n,this)})}else r.off(this.body,"sleepStart");return this},setSleepEndEvent:function(a){if(a){var s=this.world;r.on(this.body,"sleepEnd",function(n){s.emit(e.SLEEP_END,n,this)})}else r.off(this.body,"sleepEnd");return this}};m.exports=o},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="afteradd"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="afterremove"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="afterupdate"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="beforeadd"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="beforeremove"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="beforeupdate"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="collisionactive"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="collisionend"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="collisionstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragend"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="drag"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="dragstart"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="pause"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="resume"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="sleepend"},function(m,C){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */m.exports="sleepstart"},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f={setStatic:function(r){return e.setStatic(this.body,r),this},isStatic:function(){return this.body.isStatic}};m.exports=f},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f=t(14),r=t(269),o=t(270),a=4,s={x:{get:function(){return this.body.position.x},set:function(n){this._tempVec2.set(n,this.y),e.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(n){this._tempVec2.set(this.x,n),e.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(n){var l=1/this._scaleX,i=1/this._scaleY;this._scaleX=n,this._scaleX===0?this.renderFlags&=~a:this.renderFlags|=a,e.scale(this.body,l,i),e.scale(this.body,n,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(n){var l=1/this._scaleX,i=1/this._scaleY;this._scaleY=n,this._scaleY===0?this.renderFlags&=~a:this.renderFlags|=a,e.scale(this.body,l,i),e.scale(this.body,this._scaleX,n)}},angle:{get:function(){return o(this.body.angle*f.RAD_TO_DEG)},set:function(n){this.rotation=o(n)*f.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(n){this._rotation=r(n),e.setAngle(this.body,this._rotation)}},setPosition:function(n,l){return n===void 0&&(n=0),l===void 0&&(l=n),this._tempVec2.set(n,l),e.setPosition(this.body,this._tempVec2),this},setRotation:function(n){return n===void 0&&(n=0),this._rotation=r(n),e.setAngle(this.body,n),this},setFixedRotation:function(){return e.setInertia(this.body,1/0),this},setAngle:function(n){return n===void 0&&(n=0),this.angle=n,e.setAngle(this.body,this.rotation),this},setScale:function(n,l,i){n===void 0&&(n=1),l===void 0&&(l=n);var h=1/this._scaleX,u=1/this._scaleY;return this._scaleX=n,this._scaleY=l,e.scale(this.body,h,u,i),e.scale(this.body,n,l,i),this}};m.exports=s},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(41),f={setAngularVelocity:function(r){return e.setAngularVelocity(this.body,r),this},setVelocityX:function(r){return this._tempVec2.set(r,this.body.velocity.y),e.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(r){return this._tempVec2.set(this.body.velocity.x,r),e.setVelocity(this.body,this._tempVec2),this},setVelocity:function(r,o){return this._tempVec2.set(r,o),e.setVelocity(this.body,this._tempVec2),this}};m.exports=f},function(m,C,t){var e={};m.exports=e;var f=t(118),r=t(32);(function(){e.create=function(o){var a={extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0};return r.extend(a,!1,o)},e.reset=function(o){o.extended&&(o.narrowDetections=0,o.narrowphaseTests=0,o.narrowReuse=0,o.narrowReuseCount=0,o.midphaseTests=0,o.broadphaseTests=0,o.narrowEff=0,o.midEff=0,o.broadEff=0,o.collisions=0,o.buckets=0,o.pairs=0,o.bodies=0)},e.update=function(o,a){if(o.extended){var s=a.world,n=f.allBodies(s);o.collisions=o.narrowDetections,o.pairs=a.pairs.list.length,o.bodies=n.length,o.midEff=(o.narrowDetections/(o.midphaseTests||1)).toFixed(2),o.narrowEff=(o.narrowDetections/(o.narrowphaseTests||1)).toFixed(2),o.broadEff=(1-o.broadphaseTests/(n.length||1)).toFixed(2),o.narrowReuse=(o.narrowReuseCount/(o.narrowphaseTests||1)).toFixed(2)}}})()},function(m,C,t){/**
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2020 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var e=t(123),f=t(271),r=t(86),o=t(41),a=t(1392),s=t(84),n=t(0),l=t(118),i=t(591),h=t(128),u=t(273),d=t(50),c=t(1394),p=t(2),g=t(6),x=t(597),y=t(1525),T=t(1526),E=t(1399),w=t(1527),A=t(127),b=t(250),R=t(598),L=t(595),B=t(24),D=t(1400),G=t(599),X=t(274),H=t(20),K=t(592),$=t(83),N=t(64),I=t(1402),z=new n({initialize:function(W){this.scene=W,this.systems=W.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=o,this.composite=l,this.detector=u,this.grid=x,this.pair=b,this.pairs=R,this.query=D,this.resolver=G,this.sat=X,this.constraint=h,this.bodies=r,this.composites=i,this.axes=f,this.bounds=s,this.svg=K,this.vector=$,this.vertices=N,this.verts=N,this._tempVec2=$.create(),g(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),g(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),g(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),G._restingThresh=g(this.config,"restingThresh",4),G._restingThreshTangent=g(this.config,"restingThreshTangent",6),G._positionDampen=g(this.config,"positionDampen",.9),G._positionWarming=g(this.config,"positionWarming",.8),G._frictionNormalMultiplier=g(this.config,"frictionNormalMultiplier",5),W.sys.events.once(H.BOOT,this.boot,this),W.sys.events.on(H.START,this.start,this)},boot:function(){this.world=new I(this.scene,this.config),this.add=new c(this.world),this.bodyBounds=new a,this.systems.events.once(H.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new I(this.scene,this.config),this.add=new c(this.world));var U=this.systems.events;U.on(H.UPDATE,this.world.update,this.world),U.on(H.POST_UPDATE,this.world.postUpdate,this.world),U.once(H.SHUTDOWN,this.shutdown,this)},getConfig:function(){var U=this.systems.game.config.physics,W=this.systems.settings.physics,V=A(p(W,"matter",{}),p(U,"matter",{}));return V},enableAttractorPlugin:function(){return L.register(y),L.use(E,y),this},enableWrapPlugin:function(){return L.register(w),L.use(E,w),this},enableCollisionEventsPlugin:function(){return L.register(T),L.use(E,T),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(U,W){this.world.step(U,W)},containsPoint:function(U,W,V){U=this.getMatterBodies(U);var Z=$.create(W,V),J=D.point(U,Z);return J.length>0},intersectPoint:function(U,W,V){V=this.getMatterBodies(V);var Z=$.create(U,W),J=[],tt=D.point(V,Z);return tt.forEach(function(st){J.indexOf(st)===-1&&J.push(st)}),J},intersectRect:function(U,W,V,Z,J,tt){J===void 0&&(J=!1),tt=this.getMatterBodies(tt);var st={min:{x:U,y:W},max:{x:U+V,y:W+Z}},at=[],lt=D.region(tt,st,J);return lt.forEach(function(ut){at.indexOf(ut)===-1&&at.push(ut)}),at},intersectRay:function(U,W,V,Z,J,tt){J===void 0&&(J=1),tt=this.getMatterBodies(tt);for(var st=[],at=D.ray(tt,$.create(U,W),$.create(V,Z),J),lt=0;lt<at.length;lt++)st.push(at[lt].body);return st},intersectBody:function(U,W){W=this.getMatterBodies(W);for(var V=[],Z=D.collides(U,W),J=0;J<Z.length;J++){var tt=Z[J];tt.bodyA===U?V.push(tt.bodyB):V.push(tt.bodyA)}return V},overlap:function(U,W,V,Z,J){V===void 0&&(V=null),Z===void 0&&(Z=null),J===void 0&&(J=V),Array.isArray(U)||(U=[U]),U=this.getMatterBodies(U),W=this.getMatterBodies(W);for(var tt=!1,st=0;st<U.length;st++)for(var at=U[st],lt=D.collides(at,W),ut=0;ut<lt.length;ut++){var mt=lt[ut],dt=mt.bodyA.id===at.id?mt.bodyB:mt.bodyA;if(!Z||Z.call(J,at,dt,mt)){if(tt=!0,V)V.call(J,at,dt,mt);else if(!Z)return!0}}return tt},setCollisionCategory:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(V){V.collisionFilter.category=W}),this},setCollisionGroup:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(V){V.collisionFilter.group=W}),this},setCollidesWith:function(U,W){U=this.getMatterBodies(U);var V=0;if(!Array.isArray(W))V=W;else for(var Z=0;Z<W.length;Z++)V|=W[Z];return U.forEach(function(J){J.collisionFilter.mask=V}),this},getMatterBodies:function(U){if(!U)return this.world.getAllBodies();Array.isArray(U)||(U=[U]);for(var W=[],V=0;V<U.length;V++){var Z=U[V].hasOwnProperty("body")?U[V].body:U[V];W.push(Z)}return W},setVelocity:function(U,W,V){U=this.getMatterBodies(U);var Z=this._tempVec2;return Z.x=W,Z.y=V,U.forEach(function(J){o.setVelocity(J,Z)}),this},setVelocityX:function(U,W){U=this.getMatterBodies(U);var V=this._tempVec2;return V.x=W,U.forEach(function(Z){V.y=Z.velocity.y,o.setVelocity(Z,V)}),this},setVelocityY:function(U,W){U=this.getMatterBodies(U);var V=this._tempVec2;return V.y=W,U.forEach(function(Z){V.x=Z.velocity.x,o.setVelocity(Z,V)}),this},setAngularVelocity:function(U,W){return U=this.getMatterBodies(U),U.forEach(function(V){o.setAngularVelocity(V,W)}),this},applyForce:function(U,W){U=this.getMatterBodies(U);var V=this._tempVec2;return U.forEach(function(Z){V.x=Z.position.x,V.y=Z.position.y,o.applyForce(Z,V,W)}),this},applyForceFromPosition:function(U,W,V,Z){U=this.getMatterBodies(U);var J=this._tempVec2;return U.forEach(function(tt){Z===void 0&&(Z=tt.angle),J.x=V*Math.cos(Z),J.y=V*Math.sin(Z),o.applyForce(tt,W,J)}),this},applyForceFromAngle:function(U,W,V){U=this.getMatterBodies(U);var Z=this._tempVec2;return U.forEach(function(J){V===void 0&&(V=J.angle),Z.x=W*Math.cos(V),Z.y=W*Math.sin(V),o.applyForce(J,{x:J.position.x,y:J.position.y},Z)}),this},getConstraintLength:function(U){var W=U.pointA.x,V=U.pointA.y,Z=U.pointB.x,J=U.pointB.y;return U.bodyA&&(W+=U.bodyA.position.x,V+=U.bodyA.position.y),U.bodyB&&(Z+=U.bodyB.position.x,J+=U.bodyB.position.y),d(W,V,Z,J)},alignBody:function(U,W,V,Z){U=U.hasOwnProperty("body")?U.body:U;var J;switch(Z){case e.TOP_LEFT:case e.LEFT_TOP:J=this.bodyBounds.getTopLeft(U,W,V);break;case e.TOP_CENTER:J=this.bodyBounds.getTopCenter(U,W,V);break;case e.TOP_RIGHT:case e.RIGHT_TOP:J=this.bodyBounds.getTopRight(U,W,V);break;case e.LEFT_CENTER:J=this.bodyBounds.getLeftCenter(U,W,V);break;case e.CENTER:J=this.bodyBounds.getCenter(U,W,V);break;case e.RIGHT_CENTER:J=this.bodyBounds.getRightCenter(U,W,V);break;case e.LEFT_BOTTOM:case e.BOTTOM_LEFT:J=this.bodyBounds.getBottomLeft(U,W,V);break;case e.BOTTOM_CENTER:J=this.bodyBounds.getBottomCenter(U,W,V);break;case e.BOTTOM_RIGHT:case e.RIGHT_BOTTOM:J=this.bodyBounds.getBottomRight(U,W,V);break}return J&&o.setPosition(U,J),this},shutdown:function(){var U=this.systems.events;this.world&&(U.off(H.UPDATE,this.world.update,this.world),U.off(H.POST_UPDATE,this.world.postUpdate,this.world)),U.off(H.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(H.START,this.start,this),this.scene=null,this.systems=null}});B.register("MatterPhysics",z,"matterPhysics"),m.exports=z},function(m,C,t){var e=t(594),f={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Body.create",function(){f.Body.init(this)}),r.before("Engine.update",function(o){f.Engine.update(o)})},Body:{init:function(r){r.plugin.attractors=r.plugin.attractors||[]}},Engine:{update:function(r){for(var o=e.Composite.allBodies(r.world),a=0;a<o.length;a++){var s=o[a],n=s.plugin.attractors;if(n&&n.length>0)for(var l=0;l<o.length;l++){var i=o[l];if(a!==l)for(var h=0;h<n.length;h++){var u=n[h],d=u;e.Common.isFunction(u)&&(d=u(s,i)),d&&e.Body.applyForce(i,i.position,d)}}}}},Attractors:{gravityConstant:.001,gravity:function(r,o){var a=e.Vector.sub(o.position,r.position),s=e.Vector.magnitudeSquared(a)||1e-4,n=e.Vector.normalise(a),l=-f.Attractors.gravityConstant*(r.mass*o.mass/s),i=e.Vector.mult(n,l);e.Body.applyForce(r,r.position,e.Vector.neg(i)),e.Body.applyForce(o,o.position,i)}}};m.exports=f},function(m,C){/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@photonstorm.com>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var t={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(e){e.after("Engine.create",function(){e.Events.on(this,"collisionStart",function(f){f.pairs.map(function(r){var o=r.bodyA,a=r.bodyB;o.gameObject&&o.gameObject.emit("collide",o,a,r),a.gameObject&&a.gameObject.emit("collide",a,o,r),e.Events.trigger(o,"onCollide",{pair:r}),e.Events.trigger(a,"onCollide",{pair:r}),o.onCollideCallback&&o.onCollideCallback(r),a.onCollideCallback&&a.onCollideCallback(r),o.onCollideWith[a.id]&&o.onCollideWith[a.id](a,r),a.onCollideWith[o.id]&&a.onCollideWith[o.id](o,r)})}),e.Events.on(this,"collisionActive",function(f){f.pairs.map(function(r){var o=r.bodyA,a=r.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,a,r),a.gameObject&&a.gameObject.emit("collideActive",a,o,r),e.Events.trigger(o,"onCollideActive",{pair:r}),e.Events.trigger(a,"onCollideActive",{pair:r}),o.onCollideActiveCallback&&o.onCollideActiveCallback(r),a.onCollideActiveCallback&&a.onCollideActiveCallback(r)})}),e.Events.on(this,"collisionEnd",function(f){f.pairs.map(function(r){var o=r.bodyA,a=r.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,a,r),a.gameObject&&a.gameObject.emit("collideEnd",a,o,r),e.Events.trigger(o,"onCollideEnd",{pair:r}),e.Events.trigger(a,"onCollideEnd",{pair:r}),o.onCollideEndCallback&&o.onCollideEndCallback(r),a.onCollideEndCallback&&a.onCollideEndCallback(r)})})})}};m.exports=t},function(m,C,t){var e=t(594),f={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(r){r.after("Engine.update",function(){f.Engine.update(this)})},Engine:{update:function(r){for(var o=r.world,a=e.Composite.allBodies(o),s=e.Composite.allComposites(o),n=0;n<a.length;n+=1){var l=a[n];l.plugin.wrap&&f.Body.wrap(l,l.plugin.wrap)}for(n=0;n<s.length;n+=1){var i=s[n];i.plugin.wrap&&f.Composite.wrap(i,i.plugin.wrap)}}},Bounds:{wrap:function(r,o){var a=null,s=null;if(typeof o.min.x!="undefined"&&typeof o.max.x!="undefined"&&(r.min.x>o.max.x?a=o.min.x-r.max.x:r.max.x<o.min.x&&(a=o.max.x-r.min.x)),typeof o.min.y!="undefined"&&typeof o.max.y!="undefined"&&(r.min.y>o.max.y?s=o.min.y-r.max.y:r.max.y<o.min.y&&(s=o.max.y-r.min.y)),a!==null||s!==null)return{x:a||0,y:s||0}}},Body:{wrap:function(r,o){var a=f.Bounds.wrap(r.bounds,o);return a&&e.Body.translate(r,a),a}},Composite:{bounds:function(r){for(var o=e.Composite.allBodies(r),a=[],s=0;s<o.length;s+=1){var n=o[s];a.push(n.bounds.min,n.bounds.max)}return e.Bounds.create(a)},wrap:function(r,o){var a=f.Bounds.wrap(f.Composite.bounds(r),o);return a&&e.Composite.translate(r,a),a}}};m.exports=f},function(m,C,t){(function(e){/**
* @author       Richard Davey <rich@photonstorm.com>
* @copyright    2020 Photon Storm Ltd.
* @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/var f=t(33),r=t(17),o={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};o.Sound=t(1492),o=r(!1,o,f),m.exports=o,e.Phaser=o}).call(this,t(600))}])})},9242:(module,__unused_webpack_exports,__webpack_require__)=>{(function(m,C){module.exports=C(__webpack_require__(2260))})(window,function(__WEBPACK_EXTERNAL_MODULE_phaser__){return function(rt){var m={};function C(t){if(m[t])return m[t].exports;var e=m[t]={i:t,l:!1,exports:{}};return rt[t].call(e.exports,e,e.exports,C),e.l=!0,e.exports}return C.m=rt,C.c=m,C.d=function(t,e,f){C.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:f})},C.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},C.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return C.d(e,"a",e),e},C.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},C.p="",C(C.s=0)}({"./src/NineSlice.js":function(module,exports,__webpack_require__){"use strict";eval(`

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.EVENTS = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _phaser = __webpack_require__(/*! phaser */ "phaser");

var _phaser2 = _interopRequireDefault(_phaser);

var _murmur = __webpack_require__(/*! ./murmur */ "./src/murmur.js");

var _murmur2 = _interopRequireDefault(_murmur);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var defaultSliceConfig = function defaultSliceConfig(sc) {
  var defaulted = sc;
  if (typeof defaulted.sourceLayout.width === 'number') {
    // this means sourceLayout is a cornerconfig and should be used for all
    // four corners
    var _defaulted$sourceLayo = defaulted.sourceLayout,
        width = _defaulted$sourceLayo.width,
        height = _defaulted$sourceLayo.height;
    // we only need to assign one fallback will handle the rest

    defaulted.sourceLayout = { topLeft: { width: width, height: height } };
  }
  var sl = defaulted.sourceLayout;

  sl.topRight = sl.topRight || sl.topLeft;
  sl.bottomRight = sl.bottomRight || sl.topLeft;
  sl.bottomLeft = sl.bottomLeft || sl.topLeft;

  var maxTopHeight = Math.max(sl.topLeft.height, sl.topRight.height);
  var maxRightWidth = Math.max(sl.topRight.width, sl.bottomRight.width);
  var maxBottomHeight = Math.max(sl.bottomLeft.height, sl.bottomRight.height);
  var maxLeftWidth = Math.max(sl.topLeft.width, sl.bottomLeft.width);

  if (!defaulted.safeOffsets) {
    defaulted.safeOffsets = {
      top: maxTopHeight,
      right: maxRightWidth,
      bottom: maxBottomHeight,
      left: maxLeftWidth
    };
  }

  if (typeof defaulted.minSizing === 'undefined' || defaulted.minSizing !== false) {
    var offsets = defaulted.safeOffsets;
    defaulted.minSizing = {
      width: offsets ? Math.max(offsets.left + offsets.right, maxLeftWidth + maxRightWidth) : maxLeftWidth + maxRightWidth,
      height: offsets ? Math.max(offsets.top + offsets.bottom, maxTopHeight + maxBottomHeight) : maxTopHeight + maxBottomHeight
    };
  } else {
    defaulted.minSizing = false;
  }

  return defaulted;
};

var shortSliceLayout = function shortSliceLayout(sc) {
  return {
    tl: { x: sc.topLeft.width, y: sc.topLeft.height },
    tr: { x: sc.topRight.width, y: sc.topRight.height },
    bl: { x: sc.bottomLeft.width, y: sc.bottomLeft.height },
    br: { x: sc.bottomRight.width, y: sc.bottomRight.height }
  };
};

var BASE = '__BASE';
var MISSING = '__MISSING';

var EVENTS = exports.EVENTS = {
  UPDATE_SAFE_BOUNDS: 'updatesafebounds'
};

var NineSlice = function (_Phaser$GameObjects$R) {
  _inherits(NineSlice, _Phaser$GameObjects$R);

  /**\r
   * @param {Phaser.Scene} scene the parent scene for this NineSlice\r
   * @param {SliceConfig} _sliceConfig specifies details of where we source\r
   *    texture data and how the slice is laied out based on that texture.\r
   * @param {PositionConfig} positionConfig describes positioning of the slice\r
   *    in the scene. If unspecified x and y position will be 0 and the width\r
   *    and height will be computed from the source texture.\r
   */
  function NineSlice(scene, _sliceConfig) {
    var positionConfig = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

    _classCallCheck(this, NineSlice);

    var _this = _possibleConstructorReturn(this, (NineSlice.__proto__ || Object.getPrototypeOf(NineSlice)).call(this, scene, 0, 0, 32, 32));

    _this.initFrames = _this.initFrames.bind(_this);
    _this.getUsableBounds = _this.getUsableBounds.bind(_this);
    _this.drawFrames = _this.drawFrames.bind(_this);
    _this.resize = _this.resize.bind(_this);
    _this.updateSafeBounds = _this.updateSafeBounds.bind(_this);
    _this.enableDebugDraw = _this.enableDebugDraw.bind(_this);

    _this.events = new _phaser2.default.Events.EventEmitter();
    _this.sliceConfig = defaultSliceConfig(_sliceConfig);
    _this._safeBounds = new _phaser2.default.Geom.Rectangle();

    var _this$sliceConfig = _this.sliceConfig,
        sourceKey = _this$sliceConfig.sourceKey,
        sourceFrame = _this$sliceConfig.sourceFrame;

    _this.sourceTex = scene.sys.textures.get(_this.sliceConfig.sourceKey);
    if (!sourceKey) {
      throw new Error('NineSlice requires a texture sourceKey to be specified.');
    }
    if (!_this.sourceTex || _this.sourceTex.key === MISSING) {
      throw new Error('Expected source image ' + sourceKey + ' not found.');
    }

    // use this to reduce chance we'll overwrite an existing frame
    _this._framePrefix = '' + (0, _murmur2.default)(JSON.stringify({ sourceKey: sourceKey, sourceFrame: sourceFrame }, 404));
    // this constructs a namespaced frame name
    _this.mkFrameName = function (n) {
      return _this._framePrefix + '-' + n;
    };
    // store constructed frames so we have direct access to the frame for the
    // specific corners
    _this._frameCache = {};

    var frameName = typeof sourceFrame === 'string' || typeof sourceFrame === 'number' ? sourceFrame : BASE;
    _this.sourceFrame = _this.sourceTex.get(frameName);

    // construct 9 frames for mortal men, doomed to die
    _this.initFrames();

    // We've gotten everything setup that is necessary for normal operation so
    // we can unblock a bunch of the NineSlice specific stuff.
    _this._initalized = true;

    var x = positionConfig.x,
        y = positionConfig.y,
        width = positionConfig.width,
        height = positionConfig.height;

    _this.setPosition(x || 0, y || 0);
    _this.resize(width || _this.sourceFrame.width, height || _this.sourceFrame.height);
    _this.updateSafeBounds();
    return _this;
  }

  _createClass(NineSlice, [{
    key: 'updateSafeBounds',
    value: function updateSafeBounds() {
      if (!this._initalized) {
        return;
      }

      var _sliceConfig$safeOffs = this.sliceConfig.safeOffsets,
          top = _sliceConfig$safeOffs.top,
          right = _sliceConfig$safeOffs.right,
          bottom = _sliceConfig$safeOffs.bottom,
          left = _sliceConfig$safeOffs.left;

      var newX = this.x + left;
      var newY = this.y + top;
      var newW = this.width - (left + right);
      var newH = this.height - (top + bottom);

      var _safeBounds = this._safeBounds,
          x = _safeBounds.x,
          y = _safeBounds.y,
          width = _safeBounds.width,
          height = _safeBounds.height;

      if (newX !== x || newY !== y || newW !== width || newH !== height) {
        this._safeBounds.setTo(this.x + left, this.y + top, this.width - (left + right), this.height - (top + bottom));
        this.events.emit(EVENTS.UPDATE_SAFE_BOUNDS, this, this._safeBounds);
      }
      if (this._g) {
        this._g.lineStyle(1, 0x00ff00);
        this._g.strokeRectShape(this._safeBounds);
      }
    }
  }, {
    key: 'resize',
    value: function resize(_w, _h) {
      var _ref = this.sliceConfig || {},
          minSizing = _ref.minSizing;

      var h = minSizing ? Math.max(minSizing.height, _h) : _h;
      var w = minSizing ? Math.max(minSizing.width, _w) : _w;

      if (h > _h || w > _w) {
        var err = 'Attempted to set NineSlice size less than minimum (' + _w + 'x' + _h + ').';
        // eslint-disable-next-line no-console
        console.error(err);
      }

      _get(NineSlice.prototype.__proto__ || Object.getPrototypeOf(NineSlice.prototype), 'resize', this).call(this, w, h);
      if (!this._initalized) {
        return;
      }

      if (this._g) {
        this._g.clear();
      }
      this.drawFrames();
      this.updateSafeBounds();
    }
  }, {
    key: 'initFrames',
    value: function initFrames() {
      var _this2 = this;

      var tex = this.sourceTex;
      var texW = this.sourceFrame.width;
      var texH = this.sourceFrame.height;
      var texX = this.sourceFrame.cutX;
      var texY = this.sourceFrame.cutY;

      var addFrame = function addFrame(_name, x, y, w, h) {
        var name = _this2.mkFrameName(_name);
        if (!tex.has(name)) {
          _this2._frameCache[_name] = tex.add(name, 0, texX + x, texY + y, w, h);
        } else {
          _this2._frameCache[_name] = tex.frames[name];
        }
      };

      var sl = shortSliceLayout(this.sliceConfig.sourceLayout);

      addFrame('topLeft', 0, 0, sl.tl.x, sl.tl.y);
      addFrame('topRight', texW - sl.tr.x, 0, sl.tr.x, sl.tr.y);
      addFrame('bottomRight', texW - sl.br.x, texH - sl.br.y, sl.br.x, sl.br.y);
      addFrame('bottomLeft', 0, texH - sl.bl.y, sl.bl.x, sl.bl.y);

      addFrame('topMiddle', sl.tl.x, 0, texW - (sl.tl.x + sl.tr.x), Math.max(sl.tl.y, sl.tr.y));

      addFrame('bottomMiddle', sl.bl.x, texH - Math.max(sl.bl.y, sl.br.y), texW - (sl.bl.x + sl.br.x), Math.max(sl.bl.y, sl.br.y));

      addFrame('leftMiddle', 0, sl.tl.y, Math.max(sl.tl.x, sl.bl.x), texH - (sl.tl.y + sl.bl.y));

      addFrame('rightMiddle', texW - Math.max(sl.tr.x, sl.br.x), sl.tr.y, Math.max(sl.tr.x, sl.br.x), texH - sl.tr.y - sl.br.y);

      var cLeftX = Math.min(sl.tl.x, sl.bl.x);
      var cTopY = Math.min(sl.tl.y, sl.tr.y);
      addFrame('center', cLeftX, cTopY, texW - cLeftX - Math.min(sl.tr.x, sl.br.x), texH - cTopY - Math.min(sl.br.y, sl.bl.y));
    }
  }, {
    key: 'getUsableBounds',
    value: function getUsableBounds() {
      if (!this._initalized) {
        return null;
      }

      return this._safeBounds;
    }
  }, {
    key: 'drawFrames',
    value: function drawFrames() {
      var _this3 = this;

      if (!this._initalized) {
        return;
      }

      if (this._g) {
        this._g.lineStyle(1, 0xff0000);
      }

      var sl = shortSliceLayout(this.sliceConfig.sourceLayout);
      var frame = this._frameCache;

      var draw = function draw(curFrame, x, y, wantWidth, wantHeight) {
        if (wantWidth > 0 && wantHeight > 0) {
          if (_this3._g) {
            _this3._g.strokeRect(_this3.x + x, _this3.y + y, wantWidth, wantHeight);
          }

          var frameImage = _this3.scene.make.image({
            key: _this3.sourceTex.key,
            frame: curFrame.name,
            x: 0,
            y: 0
          });

          var scaleX = wantWidth / curFrame.width;
          var scaleY = wantHeight / curFrame.height;

          frameImage.setOrigin(0).setScale(scaleX, scaleY);

          _this3.draw(frameImage, x, y);
          frameImage.destroy();
        }
      };

      var minLeftX = Math.min(sl.tl.x, sl.bl.x);
      var minRightX = Math.min(sl.tr.x, sl.br.x);

      var minTopY = Math.min(sl.tl.y, sl.tr.y);
      var minBottomY = Math.min(sl.bl.y, sl.br.y);

      this.clear();

      // first draw everything that needs to be scaled; this is more complicated
      // than necessary because some fool (me) thought it was a good idea to
      // support unique offsets per corner. \u{1F926}
      draw(frame.center, minLeftX, minTopY, this.width - minLeftX - minRightX, this.height - minTopY - minBottomY);
      draw(frame.topMiddle, sl.tl.x, 0, this.width - sl.tl.x - sl.tr.x, frame.topMiddle.height);
      draw(frame.bottomMiddle, sl.bl.x, this.height - frame.bottomMiddle.height, this.width - sl.bl.x - sl.br.x, frame.bottomMiddle.height);
      draw(frame.leftMiddle, 0, sl.tl.y, frame.leftMiddle.width, this.height - sl.tl.y - sl.bl.y);
      draw(frame.rightMiddle, this.width - sl.tr.x, sl.tr.y, frame.rightMiddle.width, this.height - sl.tr.y - sl.br.y);

      // everything else since it's important that they draw atop other edges
      draw(frame.topLeft, 0, 0, sl.tl.x, sl.tl.y);
      draw(frame.topRight, this.width - sl.tr.x, 0, sl.tr.x, sl.tr.y);
      draw(frame.bottomRight, this.width - sl.br.x, this.height - sl.br.y, sl.br.x, sl.br.y);
      draw(frame.bottomLeft, 0, this.height - sl.bl.y, sl.bl.x, sl.bl.y);
    }
  }, {
    key: 'enableDebugDraw',
    value: function enableDebugDraw() {
      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;

      if (this._g) {
        this._g.clear();
      }

      if (enabled) {
        this._g = this.scene.add.graphics(this.x, this.y);
      } else {
        this._g = null;
      }
      this.drawFrames();
      this.updateSafeBounds();
    }
  }, {
    key: 'y',
    get: function get() {
      return this._y;
    },
    set: function set(y) {
      if (this._y !== y) {
        if (this._g) {
          this._g.clear();
          this.drawFrames();
        }
        this._y = y;
        this.updateSafeBounds();
      }
    }
  }, {
    key: 'x',
    get: function get() {
      return this._x;
    },
    set: function set(x) {
      if (this._x !== x) {
        if (this._g) {
          this._g.clear();
          this.drawFrames();
        }
        this._x = x;
        this.updateSafeBounds();
      }
    }
  }]);

  return NineSlice;
}(_phaser2.default.GameObjects.RenderTexture);

exports.default = NineSlice;

//# sourceURL=webpack://NineSlice/./src/NineSlice.js?`)},"./src/Plugin.js":function(module,exports,__webpack_require__){"use strict";eval(`

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _phaser = __webpack_require__(/*! phaser */ "phaser");

var _phaser2 = _interopRequireDefault(_phaser);

var _NineSlice = __webpack_require__(/*! ./NineSlice */ "./src/NineSlice.js");

var _NineSlice2 = _interopRequireDefault(_NineSlice);

var _processOffsetsArray5 = __webpack_require__(/*! ./processOffsetsArray */ "./src/processOffsetsArray.js");

var _processOffsetsArray6 = _interopRequireDefault(_processOffsetsArray5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Plugin = function (_Phaser$Plugins$BaseP) {
  _inherits(Plugin, _Phaser$Plugins$BaseP);

  function Plugin(mgr) {
    _classCallCheck(this, Plugin);

    var _this = _possibleConstructorReturn(this, (Plugin.__proto__ || Object.getPrototypeOf(Plugin)).call(this, mgr));

    mgr.registerGameObject('nineslice', _this.addNineSlice, _this.makeNineSlice);
    return _this;
  }

  _createClass(Plugin, [{
    key: 'addNineSlice',
    value: function addNineSlice() {
      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      var slice = mkNineSlice(this.scene, args);
      this.displayList.add(slice);
      return slice;
    }
  }, {
    key: 'makeNineSlice',
    value: function makeNineSlice() {
      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
        args[_key2] = arguments[_key2];
      }

      return mkNineSlice(this.scene, args);
    }
  }]);

  return Plugin;
}(_phaser2.default.Plugins.BasePlugin);

exports.default = Plugin;


var mkNineSlice = function mkNineSlice(scene, args) {
  if (args.length === 2) {
    return new _NineSlice2.default(scene, args[0], args[1]);
  }

  if (args.length < 6) {
    throw new Error('Expected at least 6 arguments to NineSlice creator, received ' + args.length + '.');
  }
  if (args.length > 7) {
    // eslint-disable-next-line no-console
    console.error('Expected less than 7 arguments for NineSlice creation, received ' + args.length + '.');
  }

  var _args = _slicedToArray(args, 6),
      x = _args[0],
      y = _args[1],
      width = _args[2],
      height = _args[3],
      keyCfg = _args[4],
      offsetCfg = _args[5];

  var sliceConfig = {};
  var placement = { x: x, y: y, width: width, height: height

    // extract the key and (optional) frame for the texture source
  };if (typeof keyCfg === 'string') {
    sliceConfig.sourceKey = keyCfg;
  } else {
    var key = keyCfg.key,
        frame = keyCfg.frame;

    sliceConfig.sourceKey = key;
    if (typeof frame === 'string' || typeof frame === 'number') {
      sliceConfig.sourceFrame = keyCfg.frame;
    }
  }

  // extract the layout config
  if (typeof offsetCfg === 'number') {
    // it's a uniform offset for all corners
    sliceConfig.sourceLayout = { width: offsetCfg, height: offsetCfg };
  } else if (Array.isArray(offsetCfg)) {
    var _processOffsetsArray = (0, _processOffsetsArray6.default)(offsetCfg),
        _processOffsetsArray2 = _slicedToArray(_processOffsetsArray, 4),
        top = _processOffsetsArray2[0],
        right = _processOffsetsArray2[1],
        bottom = _processOffsetsArray2[2],
        left = _processOffsetsArray2[3];

    sliceConfig.sourceLayout = {
      topLeft: { width: left, height: top },
      topRight: { width: right, height: top },
      bottomRight: { width: right, height: bottom },
      bottomLeft: { width: left, height: bottom }
    };
  } else {
    // assume that we're dealing with { width, height }
    sliceConfig.sourceLayout = offsetCfg;
  }

  if (args.length > 6) {
    if (typeof args[6] === 'number') {
      var n = args[6];
      sliceConfig.safeOffsets = { top: n, right: n, bottom: n, left: n };
    } else if (Array.isArray(args[6])) {
      var _processOffsetsArray3 = (0, _processOffsetsArray6.default)(args[6]),
          _processOffsetsArray4 = _slicedToArray(_processOffsetsArray3, 4),
          _top = _processOffsetsArray4[0],
          _right = _processOffsetsArray4[1],
          _bottom = _processOffsetsArray4[2],
          _left = _processOffsetsArray4[3];

      sliceConfig.safeOffsets = { top: _top, right: _right, bottom: _bottom, left: _left };
    } else {
      throw new Error('Expected argument number or array for argument 7, got ' + _typeof(args[6]) + '.');
    }
  }

  return new _NineSlice2.default(scene, sliceConfig, placement);
};

var DefaultCfg = {
  key: 'NineSlice',
  plugin: Plugin,
  start: true
};

Plugin.DefaultCfg = DefaultCfg;

//# sourceURL=webpack://NineSlice/./src/Plugin.js?`)},"./src/index.js":function(module,exports,__webpack_require__){"use strict";eval(`

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _NineSlice = __webpack_require__(/*! ./NineSlice */ "./src/NineSlice.js");

Object.defineProperty(exports, 'NineSlice', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_NineSlice).default;
  }
});
Object.defineProperty(exports, 'EVENTS', {
  enumerable: true,
  get: function get() {
    return _NineSlice.EVENTS;
  }
});

var _Plugin = __webpack_require__(/*! ./Plugin */ "./src/Plugin.js");

Object.defineProperty(exports, 'Plugin', {
  enumerable: true,
  get: function get() {
    return _interopRequireDefault(_Plugin).default;
  }
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

//# sourceURL=webpack://NineSlice/./src/index.js?`)},"./src/murmur.js":function(module,exports,__webpack_require__){"use strict";eval(`

Object.defineProperty(exports, "__esModule", {
  value: true
});
/**\r
 * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)\r
 *\r
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>\r
 * @see http://github.com/garycourt/murmurhash-js\r
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>\r
 * @see http://sites.google.com/site/murmurhash/\r
 *\r
 * @param {string} key ASCII only\r
 * @param {number} seed Positive integer only\r
 * @return {number} 32-bit positive integer hash\r
 */

var murmurhash3_32_gc = function murmurhash3_32_gc(key, seed) {
  var remainder, bytes, h1, h1b, c1, c2, k1, i;

  remainder = key.length & 3; // key.length % 4
  bytes = key.length - remainder;
  h1 = seed;
  c1 = 0xcc9e2d51;
  c2 = 0x1b873593;
  i = 0;

  while (i < bytes) {
    k1 = key.charCodeAt(i) & 0xff | (key.charCodeAt(++i) & 0xff) << 8 | (key.charCodeAt(++i) & 0xff) << 16 | (key.charCodeAt(++i) & 0xff) << 24;
    ++i;

    k1 = (k1 & 0xffff) * c1 + (((k1 >>> 16) * c1 & 0xffff) << 16) & 0xffffffff;
    k1 = k1 << 15 | k1 >>> 17;
    k1 = (k1 & 0xffff) * c2 + (((k1 >>> 16) * c2 & 0xffff) << 16) & 0xffffffff;

    h1 ^= k1;
    h1 = h1 << 13 | h1 >>> 19;
    h1b = (h1 & 0xffff) * 5 + (((h1 >>> 16) * 5 & 0xffff) << 16) & 0xffffffff;
    h1 = (h1b & 0xffff) + 0x6b64 + (((h1b >>> 16) + 0xe654 & 0xffff) << 16);
  }

  k1 = 0;

  /* eslint-disable no-fallthrough */
  switch (remainder) {
    case 3:
      k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;
    case 2:
      k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;
    case 1:
      k1 ^= key.charCodeAt(i) & 0xff;
      k1 = (k1 & 0xffff) * c1 + (((k1 >>> 16) * c1 & 0xffff) << 16) & 0xffffffff;
      k1 = k1 << 15 | k1 >>> 17;
      k1 = (k1 & 0xffff) * c2 + (((k1 >>> 16) * c2 & 0xffff) << 16) & 0xffffffff;
      h1 ^= k1;
  }
  /* eslint-enable no-fallthrough */

  h1 ^= key.length;

  h1 ^= h1 >>> 16;
  h1 = (h1 & 0xffff) * 0x85ebca6b + (((h1 >>> 16) * 0x85ebca6b & 0xffff) << 16) & 0xffffffff;
  h1 ^= h1 >>> 13;
  h1 = (h1 & 0xffff) * 0xc2b2ae35 + (((h1 >>> 16) * 0xc2b2ae35 & 0xffff) << 16) & 0xffffffff;
  h1 ^= h1 >>> 16;

  return h1 >>> 0;
};

exports.default = murmurhash3_32_gc;

//# sourceURL=webpack://NineSlice/./src/murmur.js?`)},"./src/processOffsetsArray.js":function(module,exports,__webpack_require__){"use strict";eval(`

Object.defineProperty(exports, "__esModule", {
  value: true
});
var processsOffsetArray = function processsOffsetArray(arr) {
  switch (arr.length) {
    case 1:
      // topRightBottomLeft
      return [arr[0], arr[0], arr[0], arr[0]];
    case 2:
      // topBottom rightLeft
      return [arr[0], arr[1], arr[0], arr[1]];
    case 3:
      // top rightLeft bottom
      return [arr[0], arr[1], arr[2], arr[1]];
    case 4:
      // top right bottom left
      return arr;
  }
  throw new Error('Received \${arr.length} offset values, expected 1 to 4.');
};

exports.default = processsOffsetArray;

//# sourceURL=webpack://NineSlice/./src/processOffsetsArray.js?`)},0:function(module,exports,__webpack_require__){eval(`module.exports = __webpack_require__(/*! ./src/index.js */"./src/index.js");


//# sourceURL=webpack://NineSlice/multi_./src/index.js?`)},phaser:function(module,exports){eval(`module.exports = __WEBPACK_EXTERNAL_MODULE_phaser__;

//# sourceURL=webpack://NineSlice/external_%7B%22umd%22:%22phaser%22,%22commonjs2%22:%22phaser%22,%22commonjs%22:%22phaser%22,%22amd%22:%22phaser%22,%22root%22:%22Phaser%22%7D?`)}})})},885:(rt,m,C)=>{var t=C(8086),e=C(8767);m.protocol=5;var f=m.PacketType={CONNECT:0,DISCONNECT:1,EVENT:2,ACK:3,CONNECT_ERROR:4},r=Number.isInteger||function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i},o=function(i){return typeof i=="string"},a=function(i){return Object.prototype.toString.call(i)==="[object Object]"};function s(){}s.prototype.encode=function(i){return[t.encode(i)]};function n(){}e(n.prototype),n.prototype.add=function(i){var h=t.decode(i);this.checkPacket(h),this.emit("decoded",h)};function l(i){switch(i.type){case f.CONNECT:return i.data===void 0||a(i.data);case f.DISCONNECT:return i.data===void 0;case f.CONNECT_ERROR:return o(i.data)||a(i.data);default:return Array.isArray(i.data)}}n.prototype.checkPacket=function(i){var h=r(i.type)&&i.type>=f.CONNECT&&i.type<=f.CONNECT_ERROR;if(!h)throw new Error("invalid packet type");if(!o(i.nsp))throw new Error("invalid namespace");if(!l(i))throw new Error("invalid payload");var u=i.id===void 0||r(i.id);if(!u)throw new Error("invalid packet id")},n.prototype.destroy=function(){},m.Encoder=s,m.Decoder=n},5933:(rt,m,C)=>{var t;(function(){function e(q,ot,pt){return q.call.apply(q.bind,arguments)}function f(q,ot,pt){if(!q)throw Error();if(2<arguments.length){var ct=Array.prototype.slice.call(arguments,2);return function(){var St=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(St,ct),q.apply(ot,St)}}return function(){return q.apply(ot,arguments)}}function r(q,ot,pt){return r=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?e:f,r.apply(null,arguments)}var o=Date.now||function(){return+new Date};function a(q,ot){this.a=q,this.o=ot||q,this.c=this.o.document}var s=!!window.FontFace;function n(q,ot,pt,ct){if(ot=q.c.createElement(ot),pt)for(var St in pt)pt.hasOwnProperty(St)&&(St=="style"?ot.style.cssText=pt[St]:ot.setAttribute(St,pt[St]));return ct&&ot.appendChild(q.c.createTextNode(ct)),ot}function l(q,ot,pt){q=q.c.getElementsByTagName(ot)[0],q||(q=document.documentElement),q.insertBefore(pt,q.lastChild)}function i(q){q.parentNode&&q.parentNode.removeChild(q)}function h(q,ot,pt){ot=ot||[],pt=pt||[];for(var ct=q.className.split(/\s+/),St=0;St<ot.length;St+=1){for(var wt=!1,Ft=0;Ft<ct.length;Ft+=1)if(ot[St]===ct[Ft]){wt=!0;break}wt||ct.push(ot[St])}for(ot=[],St=0;St<ct.length;St+=1){for(wt=!1,Ft=0;Ft<pt.length;Ft+=1)if(ct[St]===pt[Ft]){wt=!0;break}wt||ot.push(ct[St])}q.className=ot.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function u(q,ot){for(var pt=q.className.split(/\s+/),ct=0,St=pt.length;ct<St;ct++)if(pt[ct]==ot)return!0;return!1}function d(q){return q.o.location.hostname||q.a.location.hostname}function c(q,ot,pt){function ct(){Yt&&St&&wt&&(Yt(Ft),Yt=null)}ot=n(q,"link",{rel:"stylesheet",href:ot,media:"all"});var St=!1,wt=!0,Ft=null,Yt=pt||null;s?(ot.onload=function(){St=!0,ct()},ot.onerror=function(){St=!0,Ft=Error("Stylesheet failed to load"),ct()}):setTimeout(function(){St=!0,ct()},0),l(q,"head",ot)}function p(q,ot,pt,ct){var St=q.c.getElementsByTagName("head")[0];if(St){var wt=n(q,"script",{src:ot}),Ft=!1;return wt.onload=wt.onreadystatechange=function(){Ft||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(Ft=!0,pt&&pt(null),wt.onload=wt.onreadystatechange=null,wt.parentNode.tagName=="HEAD"&&St.removeChild(wt))},St.appendChild(wt),setTimeout(function(){Ft||(Ft=!0,pt&&pt(Error("Script load timeout")))},ct||5e3),wt}return null}function g(){this.a=0,this.c=null}function x(q){return q.a++,function(){q.a--,T(q)}}function y(q,ot){q.c=ot,T(q)}function T(q){q.a==0&&q.c&&(q.c(),q.c=null)}function E(q){this.a=q||"-"}E.prototype.c=function(q){for(var ot=[],pt=0;pt<arguments.length;pt++)ot.push(arguments[pt].replace(/[\W_]+/g,"").toLowerCase());return ot.join(this.a)};function w(q,ot){this.c=q,this.f=4,this.a="n";var pt=(ot||"n4").match(/^([nio])([1-9])$/i);pt&&(this.a=pt[1],this.f=parseInt(pt[2],10))}function A(q){return L(q)+" "+(q.f+"00")+" 300px "+b(q.c)}function b(q){var ot=[];q=q.split(/,\s*/);for(var pt=0;pt<q.length;pt++){var ct=q[pt].replace(/['"]/g,"");ct.indexOf(" ")!=-1||/^\d/.test(ct)?ot.push("'"+ct+"'"):ot.push(ct)}return ot.join(",")}function R(q){return q.a+q.f}function L(q){var ot="normal";return q.a==="o"?ot="oblique":q.a==="i"&&(ot="italic"),ot}function B(q){var ot=4,pt="n",ct=null;return q&&((ct=q.match(/(normal|oblique|italic)/i))&&ct[1]&&(pt=ct[1].substr(0,1).toLowerCase()),(ct=q.match(/([1-9]00|normal|bold)/i))&&ct[1]&&(/bold/i.test(ct[1])?ot=7:/[1-9]00/.test(ct[1])&&(ot=parseInt(ct[1].substr(0,1),10)))),pt+ot}function D(q,ot){this.c=q,this.f=q.o.document.documentElement,this.h=ot,this.a=new E("-"),this.j=ot.events!==!1,this.g=ot.classes!==!1}function G(q){q.g&&h(q.f,[q.a.c("wf","loading")]),H(q,"loading")}function X(q){if(q.g){var ot=u(q.f,q.a.c("wf","active")),pt=[],ct=[q.a.c("wf","loading")];ot||pt.push(q.a.c("wf","inactive")),h(q.f,pt,ct)}H(q,"inactive")}function H(q,ot,pt){q.j&&q.h[ot]&&(pt?q.h[ot](pt.c,R(pt)):q.h[ot]())}function K(){this.c={}}function $(q,ot,pt){var ct=[],St;for(St in ot)if(ot.hasOwnProperty(St)){var wt=q.c[St];wt&&ct.push(wt(ot[St],pt))}return ct}function N(q,ot){this.c=q,this.f=ot,this.a=n(this.c,"span",{"aria-hidden":"true"},this.f)}function I(q){l(q.c,"body",q.a)}function z(q){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(q.c)+";"+("font-style:"+L(q)+";font-weight:"+(q.f+"00")+";")}function U(q,ot,pt,ct,St,wt){this.g=q,this.j=ot,this.a=ct,this.c=pt,this.f=St||3e3,this.h=wt||void 0}U.prototype.start=function(){var q=this.c.o.document,ot=this,pt=o(),ct=new Promise(function(Ft,Yt){function Ht(){o()-pt>=ot.f?Yt():q.fonts.load(A(ot.a),ot.h).then(function(ne){1<=ne.length?Ft():setTimeout(Ht,25)},function(){Yt()})}Ht()}),St=null,wt=new Promise(function(Ft,Yt){St=setTimeout(Yt,ot.f)});Promise.race([wt,ct]).then(function(){St&&(clearTimeout(St),St=null),ot.g(ot.a)},function(){ot.j(ot.a)})};function W(q,ot,pt,ct,St,wt,Ft){this.v=q,this.B=ot,this.c=pt,this.a=ct,this.s=Ft||"BESbswy",this.f={},this.w=St||3e3,this.u=wt||null,this.m=this.j=this.h=this.g=null,this.g=new N(this.c,this.s),this.h=new N(this.c,this.s),this.j=new N(this.c,this.s),this.m=new N(this.c,this.s),q=new w(this.a.c+",serif",R(this.a)),q=z(q),this.g.a.style.cssText=q,q=new w(this.a.c+",sans-serif",R(this.a)),q=z(q),this.h.a.style.cssText=q,q=new w("serif",R(this.a)),q=z(q),this.j.a.style.cssText=q,q=new w("sans-serif",R(this.a)),q=z(q),this.m.a.style.cssText=q,I(this.g),I(this.h),I(this.j),I(this.m)}var V={D:"serif",C:"sans-serif"},Z=null;function J(){if(Z===null){var q=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);Z=!!q&&(536>parseInt(q[1],10)||parseInt(q[1],10)===536&&11>=parseInt(q[2],10))}return Z}W.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=o(),st(this)};function tt(q,ot,pt){for(var ct in V)if(V.hasOwnProperty(ct)&&ot===q.f[V[ct]]&&pt===q.f[V[ct]])return!0;return!1}function st(q){var ot=q.g.a.offsetWidth,pt=q.h.a.offsetWidth,ct;(ct=ot===q.f.serif&&pt===q.f["sans-serif"])||(ct=J()&&tt(q,ot,pt)),ct?o()-q.A>=q.w?J()&&tt(q,ot,pt)&&(q.u===null||q.u.hasOwnProperty(q.a.c))?lt(q,q.v):lt(q,q.B):at(q):lt(q,q.v)}function at(q){setTimeout(r(function(){st(this)},q),50)}function lt(q,ot){setTimeout(r(function(){i(this.g.a),i(this.h.a),i(this.j.a),i(this.m.a),ot(this.a)},q),0)}function ut(q,ot,pt){this.c=q,this.a=ot,this.f=0,this.m=this.j=!1,this.s=pt}var mt=null;ut.prototype.g=function(q){var ot=this.a;ot.g&&h(ot.f,[ot.a.c("wf",q.c,R(q).toString(),"active")],[ot.a.c("wf",q.c,R(q).toString(),"loading"),ot.a.c("wf",q.c,R(q).toString(),"inactive")]),H(ot,"fontactive",q),this.m=!0,dt(this)},ut.prototype.h=function(q){var ot=this.a;if(ot.g){var pt=u(ot.f,ot.a.c("wf",q.c,R(q).toString(),"active")),ct=[],St=[ot.a.c("wf",q.c,R(q).toString(),"loading")];pt||ct.push(ot.a.c("wf",q.c,R(q).toString(),"inactive")),h(ot.f,ct,St)}H(ot,"fontinactive",q),dt(this)};function dt(q){--q.f==0&&q.j&&(q.m?(q=q.a,q.g&&h(q.f,[q.a.c("wf","active")],[q.a.c("wf","loading"),q.a.c("wf","inactive")]),H(q,"active")):X(q.a))}function xt(q){this.j=q,this.a=new K,this.h=0,this.f=this.g=!0}xt.prototype.load=function(q){this.c=new a(this.j,q.context||this.j),this.g=q.events!==!1,this.f=q.classes!==!1,Ct(this,new D(this.c,q),q)};function Tt(q,ot,pt,ct,St){var wt=--q.h==0;(q.f||q.g)&&setTimeout(function(){var Ft=St||null,Yt=ct||null||{};if(pt.length===0&&wt)X(ot.a);else{ot.f+=pt.length,wt&&(ot.j=wt);var Ht,ne=[];for(Ht=0;Ht<pt.length;Ht++){var ee=pt[Ht],ge=Yt[ee.c],Re=ot.a,ze=ee;if(Re.g&&h(Re.f,[Re.a.c("wf",ze.c,R(ze).toString(),"loading")]),H(Re,"fontloading",ze),Re=null,mt===null)if(window.FontFace){var ze=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),ti=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);mt=ze?42<parseInt(ze[1],10):!ti}else mt=!1;mt?Re=new U(r(ot.g,ot),r(ot.h,ot),ot.c,ee,ot.s,ge):Re=new W(r(ot.g,ot),r(ot.h,ot),ot.c,ee,ot.s,Ft,ge),ne.push(Re)}for(Ht=0;Ht<ne.length;Ht++)ne[Ht].start()}},0)}function Ct(q,ot,pt){var St=[],ct=pt.timeout;G(ot);var St=$(q.a,pt,q.c),wt=new ut(q.c,ot,ct);for(q.h=St.length,ot=0,pt=St.length;ot<pt;ot++)St[ot].load(function(Ft,Yt,Ht){Tt(q,wt,Ft,Yt,Ht)})}function Et(q,ot){this.c=q,this.a=ot}Et.prototype.load=function(q){function ot(){if(wt["__mti_fntLst"+ct]){var Ft=wt["__mti_fntLst"+ct](),Yt=[],Ht;if(Ft)for(var ne=0;ne<Ft.length;ne++){var ee=Ft[ne].fontfamily;Ft[ne].fontStyle!=null&&Ft[ne].fontWeight!=null?(Ht=Ft[ne].fontStyle+Ft[ne].fontWeight,Yt.push(new w(ee,Ht))):Yt.push(new w(ee))}q(Yt)}else setTimeout(function(){ot()},50)}var pt=this,ct=pt.a.projectId,St=pt.a.version;if(ct){var wt=pt.c.o;p(this.c,(pt.a.api||"https://fast.fonts.net/jsapi")+"/"+ct+".js"+(St?"?v="+St:""),function(Ft){Ft?q([]):(wt["__MonotypeConfiguration__"+ct]=function(){return pt.a},ot())}).id="__MonotypeAPIScript__"+ct}else q([])};function vt(q,ot){this.c=q,this.a=ot}vt.prototype.load=function(q){var ot,pt,ct=this.a.urls||[],St=this.a.families||[],wt=this.a.testStrings||{},Ft=new g;for(ot=0,pt=ct.length;ot<pt;ot++)c(this.c,ct[ot],x(Ft));var Yt=[];for(ot=0,pt=St.length;ot<pt;ot++)if(ct=St[ot].split(":"),ct[1])for(var Ht=ct[1].split(","),ne=0;ne<Ht.length;ne+=1)Yt.push(new w(ct[0],Ht[ne]));else Yt.push(new w(ct[0]));y(Ft,function(){q(Yt,wt)})};function It(q,ot){q?this.c=q:this.c=Pt,this.a=[],this.f=[],this.g=ot||""}var Pt="https://fonts.googleapis.com/css";function Rt(q,ot){for(var pt=ot.length,ct=0;ct<pt;ct++){var St=ot[ct].split(":");St.length==3&&q.f.push(St.pop());var wt="";St.length==2&&St[1]!=""&&(wt=":"),q.a.push(St.join(wt))}}function Jt(q){if(q.a.length==0)throw Error("No fonts to load!");if(q.c.indexOf("kit=")!=-1)return q.c;for(var ot=q.a.length,pt=[],ct=0;ct<ot;ct++)pt.push(q.a[ct].replace(/ /g,"+"));return ot=q.c+"?family="+pt.join("%7C"),0<q.f.length&&(ot+="&subset="+q.f.join(",")),0<q.g.length&&(ot+="&text="+encodeURIComponent(q.g)),ot}function qt(q){this.f=q,this.a=[],this.c={}}var zt={latin:"BESbswy","latin-ext":"\xE7\xF6\xFC\u011F\u015F",cyrillic:"\u0439\u044F\u0416",greek:"\u03B1\u03B2\u03A3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Nt={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Vt={i:"i",italic:"i",n:"n",normal:"n"},$t=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Wt(q){for(var ot=q.f.length,pt=0;pt<ot;pt++){var ct=q.f[pt].split(":"),St=ct[0].replace(/\+/g," "),wt=["n4"];if(2<=ct.length){var Ft,Yt=ct[1];if(Ft=[],Yt)for(var Yt=Yt.split(","),Ht=Yt.length,ne=0;ne<Ht;ne++){var ee;if(ee=Yt[ne],ee.match(/^[\w-]+$/)){var ge=$t.exec(ee.toLowerCase());if(ge==null)ee="";else{if(ee=ge[2],ee=ee==null||ee==""?"n":Vt[ee],ge=ge[1],ge==null||ge=="")ge="4";else var Re=Nt[ge],ge=Re||(isNaN(ge)?"4":ge.substr(0,1));ee=[ee,ge].join("")}}else ee="";ee&&Ft.push(ee)}0<Ft.length&&(wt=Ft),ct.length==3&&(ct=ct[2],Ft=[],ct=ct?ct.split(","):Ft,0<ct.length&&(ct=zt[ct[0]])&&(q.c[St]=ct))}for(q.c[St]||(ct=zt[St])&&(q.c[St]=ct),ct=0;ct<wt.length;ct+=1)q.a.push(new w(St,wt[ct]))}}function de(q,ot){this.c=q,this.a=ot}var Ce={Arimo:!0,Cousine:!0,Tinos:!0};de.prototype.load=function(q){var ot=new g,pt=this.c,ct=new It(this.a.api,this.a.text),St=this.a.families;Rt(ct,St);var wt=new qt(St);Wt(wt),c(pt,Jt(ct),x(ot)),y(ot,function(){q(wt.a,wt.c,Ce)})};function ve(q,ot){this.c=q,this.a=ot}ve.prototype.load=function(q){var ot=this.a.id,pt=this.c.o;ot?p(this.c,(this.a.api||"https://use.typekit.net")+"/"+ot+".js",function(ct){if(ct)q([]);else if(pt.Typekit&&pt.Typekit.config&&pt.Typekit.config.fn){ct=pt.Typekit.config.fn;for(var St=[],wt=0;wt<ct.length;wt+=2)for(var Ft=ct[wt],Yt=ct[wt+1],Ht=0;Ht<Yt.length;Ht++)St.push(new w(Ft,Yt[Ht]));try{pt.Typekit.load({events:!1,classes:!1,async:!0})}catch(ne){}q(St)}},2e3):q([])};function pe(q,ot){this.c=q,this.f=ot,this.a=[]}pe.prototype.load=function(q){var ot=this.f.id,pt=this.c.o,ct=this;ot?(pt.__webfontfontdeckmodule__||(pt.__webfontfontdeckmodule__={}),pt.__webfontfontdeckmodule__[ot]=function(St,wt){for(var Ft=0,Yt=wt.fonts.length;Ft<Yt;++Ft){var Ht=wt.fonts[Ft];ct.a.push(new w(Ht.name,B("font-weight:"+Ht.weight+";font-style:"+Ht.style)))}q(ct.a)},p(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+d(this.c)+"/"+ot+".js",function(St){St&&q([])})):q([])};var me=new xt(window);me.a.c.custom=function(q,ot){return new vt(ot,q)},me.a.c.fontdeck=function(q,ot){return new pe(ot,q)},me.a.c.monotype=function(q,ot){return new Et(ot,q)},me.a.c.typekit=function(q,ot){return new ve(ot,q)},me.a.c.google=function(q,ot){return new de(ot,q)};var Oe={load:r(me.load,me)};t=function(){return Oe}.call(m,C,m,rt),t!==void 0&&(rt.exports=t)})()},2281:rt=>{"use strict";var m="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),C=64,t={},e=0,f=0,r;function o(n){var l="";do l=m[n%C]+l,n=Math.floor(n/C);while(n>0);return l}function a(n){var l=0;for(f=0;f<n.length;f++)l=l*C+t[n.charAt(f)];return l}function s(){var n=o(+new Date);return n!==r?(e=0,r=n):n+"."+o(e++)}for(;f<C;f++)t[m[f]]=f;s.encode=o,s.decode=a,rt.exports=s},1761:(rt,m,C)=>{var t={"./Actions.js":1875,"./Airtower.js":27,"./Buddy.js":7446,"./Chat.js":1252,"./Error.js":2151,"./Get.js":8165,"./Igloo.js":608,"./Ignore.js":7389,"./Item.js":6703,"./Join.js":4150,"./Login.js":7752,"./MiniGame.js":3462,"./Ninja.js":1369,"./Stampbook.js":9442,"./Waddle.js":2062};function e(r){var o=f(r);return C(o)}function f(r){if(!C.o(t,r)){var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}return t[r]}e.keys=function(){return Object.keys(t)},e.resolve=f,rt.exports=e,e.id=1761}},__webpack_module_cache__={};function __webpack_require__(rt){var m=__webpack_module_cache__[rt];if(m!==void 0)return m.exports;var C=__webpack_module_cache__[rt]={id:rt,loaded:!1,exports:{}};return __webpack_modules__[rt].call(C.exports,C,C.exports,__webpack_require__),C.loaded=!0,C.exports}__webpack_require__.n=rt=>{var m=rt&&rt.__esModule?()=>rt.default:()=>rt;return __webpack_require__.d(m,{a:m}),m},__webpack_require__.d=(rt,m)=>{for(var C in m)__webpack_require__.o(m,C)&&!__webpack_require__.o(rt,C)&&Object.defineProperty(rt,C,{enumerable:!0,get:m[C]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(rt){if(typeof window=="object")return window}}(),__webpack_require__.hmd=rt=>(rt=Object.create(rt),rt.children||(rt.children=[]),Object.defineProperty(rt,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+rt.id)}}),rt),__webpack_require__.o=(rt,m)=>Object.prototype.hasOwnProperty.call(rt,m),__webpack_require__.r=rt=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(rt,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(rt,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var rt={};__webpack_require__.r(rt),__webpack_require__.d(rt,{Decoder:()=>Sn,Encoder:()=>Ru,PacketType:()=>Qt,protocol:()=>Au});var m=__webpack_require__(2260),C=__webpack_require__.n(m);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(O,v){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var M in P)P.hasOwnProperty(M)&&(S[M]=P[M])},t(O,v)};function e(O,v){t(O,v);function S(){this.constructor=O}O.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}var f=function(){return f=Object.assign||function(v){for(var S,P=1,M=arguments.length;P<M;P++){S=arguments[P];for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&(v[F]=S[F])}return v},f.apply(this,arguments)};function r(O,v){var S={};for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&v.indexOf(P)<0&&(S[P]=O[P]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,P=Object.getOwnPropertySymbols(O);M<P.length;M++)v.indexOf(P[M])<0&&Object.prototype.propertyIsEnumerable.call(O,P[M])&&(S[P[M]]=O[P[M]]);return S}function o(O,v,S,P){var M=arguments.length,F=M<3?v:P===null?P=Object.getOwnPropertyDescriptor(v,S):P,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(O,v,S,P);else for(var k=O.length-1;k>=0;k--)(Y=O[k])&&(F=(M<3?Y(F):M>3?Y(v,S,F):Y(v,S))||F);return M>3&&F&&Object.defineProperty(v,S,F),F}function a(O,v){return function(S,P){v(S,P,O)}}function s(O,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,v)}function n(O,v,S,P){function M(F){return F instanceof S?F:new S(function(Y){Y(F)})}return new(S||(S=Promise))(function(F,Y){function k(_){try{j(P.next(_))}catch(it){Y(it)}}function Q(_){try{j(P.throw(_))}catch(it){Y(it)}}function j(_){_.done?F(_.value):M(_.value).then(k,Q)}j((P=P.apply(O,v||[])).next())})}function l(O,v){var S={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},P,M,F,Y;return Y={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function k(j){return function(_){return Q([j,_])}}function Q(j){if(P)throw new TypeError("Generator is already executing.");for(;S;)try{if(P=1,M&&(F=j[0]&2?M.return:j[0]?M.throw||((F=M.return)&&F.call(M),0):M.next)&&!(F=F.call(M,j[1])).done)return F;switch(M=0,F&&(j=[j[0]&2,F.value]),j[0]){case 0:case 1:F=j;break;case 4:return S.label++,{value:j[1],done:!1};case 5:S.label++,M=j[1],j=[0];continue;case 7:j=S.ops.pop(),S.trys.pop();continue;default:if(F=S.trys,!(F=F.length>0&&F[F.length-1])&&(j[0]===6||j[0]===2)){S=0;continue}if(j[0]===3&&(!F||j[1]>F[0]&&j[1]<F[3])){S.label=j[1];break}if(j[0]===6&&S.label<F[1]){S.label=F[1],F=j;break}if(F&&S.label<F[2]){S.label=F[2],S.ops.push(j);break}F[2]&&S.ops.pop(),S.trys.pop();continue}j=v.call(O,S)}catch(_){j=[6,_],M=0}finally{P=F=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}function i(O,v,S,P){P===void 0&&(P=S),O[P]=v[S]}function h(O,v){for(var S in O)S!=="default"&&!v.hasOwnProperty(S)&&(v[S]=O[S])}function u(O){var v=typeof Symbol=="function"&&Symbol.iterator,S=v&&O[v],P=0;if(S)return S.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&P>=O.length&&(O=void 0),{value:O&&O[P++],done:!O}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(O,v){var S=typeof Symbol=="function"&&O[Symbol.iterator];if(!S)return O;var P=S.call(O),M,F=[],Y;try{for(;(v===void 0||v-- >0)&&!(M=P.next()).done;)F.push(M.value)}catch(k){Y={error:k}}finally{try{M&&!M.done&&(S=P.return)&&S.call(P)}finally{if(Y)throw Y.error}}return F}function c(){for(var O=[],v=0;v<arguments.length;v++)O=O.concat(d(arguments[v]));return O}function p(){for(var O=0,v=0,S=arguments.length;v<S;v++)O+=arguments[v].length;for(var P=Array(O),M=0,v=0;v<S;v++)for(var F=arguments[v],Y=0,k=F.length;Y<k;Y++,M++)P[M]=F[Y];return P}function g(O){return this instanceof g?(this.v=O,this):new g(O)}function x(O,v,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=S.apply(O,v||[]),M,F=[];return M={},Y("next"),Y("throw"),Y("return"),M[Symbol.asyncIterator]=function(){return this},M;function Y(nt){P[nt]&&(M[nt]=function(ht){return new Promise(function(ft,gt){F.push([nt,ht,ft,gt])>1||k(nt,ht)})})}function k(nt,ht){try{Q(P[nt](ht))}catch(ft){it(F[0][3],ft)}}function Q(nt){nt.value instanceof g?Promise.resolve(nt.value.v).then(j,_):it(F[0][2],nt)}function j(nt){k("next",nt)}function _(nt){k("throw",nt)}function it(nt,ht){nt(ht),F.shift(),F.length&&k(F[0][0],F[0][1])}}function y(O){var v,S;return v={},P("next"),P("throw",function(M){throw M}),P("return"),v[Symbol.iterator]=function(){return this},v;function P(M,F){v[M]=O[M]?function(Y){return(S=!S)?{value:g(O[M](Y)),done:M==="return"}:F?F(Y):Y}:F}}function T(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=O[Symbol.asyncIterator],S;return v?v.call(O):(O=typeof u=="function"?u(O):O[Symbol.iterator](),S={},P("next"),P("throw"),P("return"),S[Symbol.asyncIterator]=function(){return this},S);function P(F){S[F]=O[F]&&function(Y){return new Promise(function(k,Q){Y=O[F](Y),M(k,Q,Y.done,Y.value)})}}function M(F,Y,k,Q){Promise.resolve(Q).then(function(j){F({value:j,done:k})},Y)}}function E(O,v){return Object.defineProperty?Object.defineProperty(O,"raw",{value:v}):O.raw=v,O}function w(O){if(O&&O.__esModule)return O;var v={};if(O!=null)for(var S in O)Object.hasOwnProperty.call(O,S)&&(v[S]=O[S]);return v.default=O,v}function A(O){return O&&O.__esModule?O:{default:O}}function b(O,v){if(!v.has(O))throw new TypeError("attempted to get private field on non-instance");return v.get(O)}function R(O,v,S){if(!v.has(O))throw new TypeError("attempted to set private field on non-instance");return v.set(O,S),S}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var L=function(O,v){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var M in P)P.hasOwnProperty(M)&&(S[M]=P[M])},L(O,v)};function B(O,v){L(O,v);function S(){this.constructor=O}O.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}var D=function(){return D=Object.assign||function(v){for(var S,P=1,M=arguments.length;P<M;P++){S=arguments[P];for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&(v[F]=S[F])}return v},D.apply(this,arguments)};function G(O,v){var S={};for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&v.indexOf(P)<0&&(S[P]=O[P]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,P=Object.getOwnPropertySymbols(O);M<P.length;M++)v.indexOf(P[M])<0&&Object.prototype.propertyIsEnumerable.call(O,P[M])&&(S[P[M]]=O[P[M]]);return S}function X(O,v,S,P){var M=arguments.length,F=M<3?v:P===null?P=Object.getOwnPropertyDescriptor(v,S):P,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(O,v,S,P);else for(var k=O.length-1;k>=0;k--)(Y=O[k])&&(F=(M<3?Y(F):M>3?Y(v,S,F):Y(v,S))||F);return M>3&&F&&Object.defineProperty(v,S,F),F}function H(O,v){return function(S,P){v(S,P,O)}}function K(O,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,v)}function $(O,v,S,P){function M(F){return F instanceof S?F:new S(function(Y){Y(F)})}return new(S||(S=Promise))(function(F,Y){function k(_){try{j(P.next(_))}catch(it){Y(it)}}function Q(_){try{j(P.throw(_))}catch(it){Y(it)}}function j(_){_.done?F(_.value):M(_.value).then(k,Q)}j((P=P.apply(O,v||[])).next())})}function N(O,v){var S={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},P,M,F,Y;return Y={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function k(j){return function(_){return Q([j,_])}}function Q(j){if(P)throw new TypeError("Generator is already executing.");for(;S;)try{if(P=1,M&&(F=j[0]&2?M.return:j[0]?M.throw||((F=M.return)&&F.call(M),0):M.next)&&!(F=F.call(M,j[1])).done)return F;switch(M=0,F&&(j=[j[0]&2,F.value]),j[0]){case 0:case 1:F=j;break;case 4:return S.label++,{value:j[1],done:!1};case 5:S.label++,M=j[1],j=[0];continue;case 7:j=S.ops.pop(),S.trys.pop();continue;default:if(F=S.trys,!(F=F.length>0&&F[F.length-1])&&(j[0]===6||j[0]===2)){S=0;continue}if(j[0]===3&&(!F||j[1]>F[0]&&j[1]<F[3])){S.label=j[1];break}if(j[0]===6&&S.label<F[1]){S.label=F[1],F=j;break}if(F&&S.label<F[2]){S.label=F[2],S.ops.push(j);break}F[2]&&S.ops.pop(),S.trys.pop();continue}j=v.call(O,S)}catch(_){j=[6,_],M=0}finally{P=F=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}function I(O,v,S,P){P===void 0&&(P=S),O[P]=v[S]}function z(O,v){for(var S in O)S!=="default"&&!v.hasOwnProperty(S)&&(v[S]=O[S])}function U(O){var v=typeof Symbol=="function"&&Symbol.iterator,S=v&&O[v],P=0;if(S)return S.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&P>=O.length&&(O=void 0),{value:O&&O[P++],done:!O}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(O,v){var S=typeof Symbol=="function"&&O[Symbol.iterator];if(!S)return O;var P=S.call(O),M,F=[],Y;try{for(;(v===void 0||v-- >0)&&!(M=P.next()).done;)F.push(M.value)}catch(k){Y={error:k}}finally{try{M&&!M.done&&(S=P.return)&&S.call(P)}finally{if(Y)throw Y.error}}return F}function V(){for(var O=[],v=0;v<arguments.length;v++)O=O.concat(W(arguments[v]));return O}function Z(){for(var O=0,v=0,S=arguments.length;v<S;v++)O+=arguments[v].length;for(var P=Array(O),M=0,v=0;v<S;v++)for(var F=arguments[v],Y=0,k=F.length;Y<k;Y++,M++)P[M]=F[Y];return P}function J(O){return this instanceof J?(this.v=O,this):new J(O)}function tt(O,v,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=S.apply(O,v||[]),M,F=[];return M={},Y("next"),Y("throw"),Y("return"),M[Symbol.asyncIterator]=function(){return this},M;function Y(nt){P[nt]&&(M[nt]=function(ht){return new Promise(function(ft,gt){F.push([nt,ht,ft,gt])>1||k(nt,ht)})})}function k(nt,ht){try{Q(P[nt](ht))}catch(ft){it(F[0][3],ft)}}function Q(nt){nt.value instanceof J?Promise.resolve(nt.value.v).then(j,_):it(F[0][2],nt)}function j(nt){k("next",nt)}function _(nt){k("throw",nt)}function it(nt,ht){nt(ht),F.shift(),F.length&&k(F[0][0],F[0][1])}}function st(O){var v,S;return v={},P("next"),P("throw",function(M){throw M}),P("return"),v[Symbol.iterator]=function(){return this},v;function P(M,F){v[M]=O[M]?function(Y){return(S=!S)?{value:J(O[M](Y)),done:M==="return"}:F?F(Y):Y}:F}}function at(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=O[Symbol.asyncIterator],S;return v?v.call(O):(O=typeof U=="function"?U(O):O[Symbol.iterator](),S={},P("next"),P("throw"),P("return"),S[Symbol.asyncIterator]=function(){return this},S);function P(F){S[F]=O[F]&&function(Y){return new Promise(function(k,Q){Y=O[F](Y),M(k,Q,Y.done,Y.value)})}}function M(F,Y,k,Q){Promise.resolve(Q).then(function(j){F({value:j,done:k})},Y)}}function lt(O,v){return Object.defineProperty?Object.defineProperty(O,"raw",{value:v}):O.raw=v,O}function ut(O){if(O&&O.__esModule)return O;var v={};if(O!=null)for(var S in O)Object.hasOwnProperty.call(O,S)&&(v[S]=O[S]);return v.default=O,v}function mt(O){return O&&O.__esModule?O:{default:O}}function dt(O,v){if(!v.has(O))throw new TypeError("attempted to get private field on non-instance");return v.get(O)}function xt(O,v,S){if(!v.has(O))throw new TypeError("attempted to set private field on non-instance");return v.set(O,S),S}var Tt=__webpack_require__(2991),Ct=Object.prototype.toString;function Et(O){switch(Ct.call(O)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return ve(O,Error)}}function vt(O,v){return Ct.call(O)==="[object "+v+"]"}function It(O){return vt(O,"ErrorEvent")}function Pt(O){return vt(O,"DOMError")}function Rt(O){return vt(O,"DOMException")}function Jt(O){return vt(O,"String")}function qt(O){return O===null||typeof O!="object"&&typeof O!="function"}function zt(O){return vt(O,"Object")}function Nt(O){return typeof Event!="undefined"&&ve(O,Event)}function Vt(O){return typeof Element!="undefined"&&ve(O,Element)}function $t(O){return vt(O,"RegExp")}function Wt(O){return Boolean(O&&O.then&&typeof O.then=="function")}function de(O){return zt(O)&&"nativeEvent"in O&&"preventDefault"in O&&"stopPropagation"in O}function Ce(O){return typeof O=="number"&&O!==O}function ve(O,v){try{return O instanceof v}catch(S){return!1}}function pe(O,v){try{for(var S=O,P=5,M=80,F=[],Y=0,k=0,Q=" > ",j=Q.length,_=void 0;S&&Y++<P&&(_=me(S,v),!(_==="html"||Y>1&&k+F.length*j+_.length>=M));)F.push(_),k+=_.length,S=S.parentNode;return F.reverse().join(Q)}catch(it){return"<unknown>"}}function me(O,v){var S=O,P=[],M,F,Y,k,Q;if(!S||!S.tagName)return"";P.push(S.tagName.toLowerCase());var j=v&&v.length?v.filter(function(it){return S.getAttribute(it)}).map(function(it){return[it,S.getAttribute(it)]}):null;if(j&&j.length)j.forEach(function(it){P.push("["+it[0]+'="'+it[1]+'"]')});else if(S.id&&P.push("#"+S.id),M=S.className,M&&Jt(M))for(F=M.split(/\s+/),Q=0;Q<F.length;Q++)P.push("."+F[Q]);var _=["type","name","title","alt"];for(Q=0;Q<_.length;Q++)Y=_[Q],k=S.getAttribute(Y),k&&P.push("["+Y+'="'+k+'"]');return P.join("")}function Oe(){var O=(0,Tt.R)();try{return O.document.location.href}catch(v){return""}}function q(O,v){return v===void 0&&(v=0),typeof O!="string"||v===0||O.length<=v?O:O.substr(0,v)+"..."}function ot(O,v){var S=O,P=S.length;if(P<=150)return S;v>P&&(v=P);var M=Math.max(v-60,0);M<5&&(M=0);var F=Math.min(M+140,P);return F>P-5&&(F=P),F===P&&(M=Math.max(F-140,0)),S=S.slice(M,F),M>0&&(S="'{snip} "+S),F<P&&(S+=" {snip}"),S}function pt(O,v){if(!Array.isArray(O))return"";for(var S=[],P=0;P<O.length;P++){var M=O[P];try{S.push(String(M))}catch(F){S.push("[value cannot be serialized]")}}return S.join(v)}function ct(O,v){return Jt(O)?$t(v)?v.test(O):typeof v=="string"?O.indexOf(v)!==-1:!1:!1}function St(O){return O.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function wt(O,v,S){if(v in O){var P=O[v],M=S(P);if(typeof M=="function")try{Yt(M,P)}catch(F){}O[v]=M}}function Ft(O,v,S){Object.defineProperty(O,v,{value:S,writable:!0,configurable:!0})}function Yt(O,v){var S=v.prototype||{};O.prototype=v.prototype=S,Ft(O,"__sentry_original__",v)}function Ht(O){return O.__sentry_original__}function ne(O){return Object.keys(O).map(function(v){return encodeURIComponent(v)+"="+encodeURIComponent(O[v])}).join("&")}function ee(O){var v=O;if(Et(O))v=D({message:O.message,name:O.name,stack:O.stack},Re(O));else if(Nt(O)){var S=O;v=D({type:S.type,target:ge(S.target),currentTarget:ge(S.currentTarget)},Re(S)),typeof CustomEvent!="undefined"&&ve(O,CustomEvent)&&(v.detail=S.detail)}return v}function ge(O){try{return Vt(O)?pe(O):Object.prototype.toString.call(O)}catch(v){return"<unknown>"}}function Re(O){var v={};for(var S in O)Object.prototype.hasOwnProperty.call(O,S)&&(v[S]=O[S]);return v}function ze(O,v){v===void 0&&(v=40);var S=Object.keys(ee(O));if(S.sort(),!S.length)return"[object has no keys]";if(S[0].length>=v)return q(S[0],v);for(var P=S.length;P>0;P--){var M=S.slice(0,P).join(", ");if(!(M.length>v))return P===S.length?M:q(M,v)}return""}function ti(O){var v,S;if(zt(O)){var P={};try{for(var M=U(Object.keys(O)),F=M.next();!F.done;F=M.next()){var Y=F.value;typeof O[Y]!="undefined"&&(P[Y]=ti(O[Y]))}}catch(k){v={error:k}}finally{try{F&&!F.done&&(S=M.return)&&S.call(M)}finally{if(v)throw v.error}}return P}return Array.isArray(O)?O.map(ti):O}function Ui(O){var v;switch(!0){case O==null:v=new String(O);break;case(typeof O=="symbol"||typeof O=="bigint"):v=Object(O);break;case isPrimitive(O):v=new O.constructor(O);break;default:v=O;break}return v}function Ue(){var O=(0,Tt.R)(),v=O.crypto||O.msCrypto;if(v!==void 0&&v.getRandomValues){var S=new Uint16Array(8);v.getRandomValues(S),S[3]=S[3]&4095|16384,S[4]=S[4]&16383|32768;var P=function(M){for(var F=M.toString(16);F.length<4;)F="0"+F;return F};return P(S[0])+P(S[1])+P(S[2])+P(S[3])+P(S[4])+P(S[5])+P(S[6])+P(S[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(M){var F=Math.random()*16|0,Y=M==="x"?F:F&3|8;return Y.toString(16)})}function ei(O){if(!O)return{};var v=O.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!v)return{};var S=v[6]||"",P=v[8]||"";return{host:v[4],path:v[5],protocol:v[2],relative:v[5]+S+P}}function gi(O){return O.exception&&O.exception.values?O.exception.values[0]:void 0}function Fe(O){var v=O.message,S=O.event_id;if(v)return v;var P=gi(O);return P?P.type&&P.value?P.type+": "+P.value:P.type||P.value||S||"<unknown>":S||"<unknown>"}function ii(O,v,S){var P=O.exception=O.exception||{},M=P.values=P.values||[],F=M[0]=M[0]||{};F.value||(F.value=v||""),F.type||(F.type=S||"Error")}function Ve(O,v){var S=gi(O);if(!!S){var P={type:"generic",handled:!0},M=S.mechanism;if(S.mechanism=D(D(D({},P),M),v),v&&"data"in v){var F=D(D({},M&&M.data),v.data);S.mechanism.data=F}}}var Si=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function Li(O){var v=O.match(Si)||[],S=parseInt(v[1],10),P=parseInt(v[2],10),M=parseInt(v[3],10);return{buildmetadata:v[5],major:isNaN(S)?void 0:S,minor:isNaN(P)?void 0:P,patch:isNaN(M)?void 0:M,prerelease:v[4]}}function jr(O,v,S){S===void 0&&(S=5);var P=v.lineno||0,M=O.length,F=Math.max(Math.min(M,P-1),0);v.pre_context=O.slice(Math.max(0,F-S),F).map(function(Y){return snipLine(Y,0)}),v.context_line=snipLine(O[Math.min(M-1,F)],v.colno||0),v.post_context=O.slice(Math.min(F+1,M),F+1+S).map(function(Y){return snipLine(Y,0)})}function Kr(O){return O.split(/[\?#]/,1)[0]}function us(O){if(O&&O.__sentry_captured__)return!0;try{Ft(O,"__sentry_captured__",!0)}catch(v){}return!1}var He=__webpack_require__(1170),ke=typeof __SENTRY_DEBUG__=="undefined"?!0:__SENTRY_DEBUG__,Yi=(0,Tt.R)(),fs="Sentry Logger ",Fi=["debug","info","warn","error","log","assert"];function Bi(O){var v=(0,Tt.R)();if(!("console"in v))return O();var S=v.console,P={};Fi.forEach(function(M){var F=S[M]&&S[M].__sentry_original__;M in v.console&&F&&(P[M]=S[M],S[M]=F)});try{return O()}finally{Object.keys(P).forEach(function(M){S[M]=P[M]})}}function Ii(){var O=!1,v={enable:function(){O=!0},disable:function(){O=!1}};return ke?Fi.forEach(function(S){v[S]=function(){for(var P=[],M=0;M<arguments.length;M++)P[M]=arguments[M];O&&Bi(function(){var F;(F=Yi.console)[S].apply(F,V([fs+"["+S+"]:"],P))})}}):Fi.forEach(function(S){v[S]=function(){}}),v}var Ut;ke?Ut=(0,Tt.Y)("logger",Ii):Ut=Ii();var Xi=__webpack_require__(2176),Wi=typeof __SENTRY_DEBUG__=="undefined"?!0:__SENTRY_DEBUG__;function Ye(O){return new si(function(v){v(O)})}function Di(O){return new si(function(v,S){S(O)})}var si=function(){function O(v){var S=this;this._state=0,this._handlers=[],this._resolve=function(P){S._setResult(1,P)},this._reject=function(P){S._setResult(2,P)},this._setResult=function(P,M){if(S._state===0){if(Wt(M)){M.then(S._resolve,S._reject);return}S._state=P,S._value=M,S._executeHandlers()}},this._executeHandlers=function(){if(S._state!==0){var P=S._handlers.slice();S._handlers=[],P.forEach(function(M){M[0]||(S._state===1&&M[1](S._value),S._state===2&&M[2](S._value),M[0]=!0)})}};try{v(this._resolve,this._reject)}catch(P){this._reject(P)}}return O.prototype.then=function(v,S){var P=this;return new O(function(M,F){P._handlers.push([!1,function(Y){if(!v)M(Y);else try{M(v(Y))}catch(k){F(k)}},function(Y){if(!S)F(Y);else try{M(S(Y))}catch(k){F(k)}}]),P._executeHandlers()})},O.prototype.catch=function(v){return this.then(function(S){return S},v)},O.prototype.finally=function(v){var S=this;return new O(function(P,M){var F,Y;return S.then(function(k){Y=!1,F=k,v&&v()},function(k){Y=!0,F=k,v&&v()}).then(function(){if(Y){M(F);return}P(F)})})},O}(),cs=100,Vi=function(){function O(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return O.clone=function(v){var S=new O;return v&&(S._breadcrumbs=c(v._breadcrumbs),S._tags=f({},v._tags),S._extra=f({},v._extra),S._contexts=f({},v._contexts),S._user=v._user,S._level=v._level,S._span=v._span,S._session=v._session,S._transactionName=v._transactionName,S._fingerprint=v._fingerprint,S._eventProcessors=c(v._eventProcessors),S._requestSession=v._requestSession),S},O.prototype.addScopeListener=function(v){this._scopeListeners.push(v)},O.prototype.addEventProcessor=function(v){return this._eventProcessors.push(v),this},O.prototype.setUser=function(v){return this._user=v||{},this._session&&this._session.update({user:v}),this._notifyScopeListeners(),this},O.prototype.getUser=function(){return this._user},O.prototype.getRequestSession=function(){return this._requestSession},O.prototype.setRequestSession=function(v){return this._requestSession=v,this},O.prototype.setTags=function(v){return this._tags=f(f({},this._tags),v),this._notifyScopeListeners(),this},O.prototype.setTag=function(v,S){var P;return this._tags=f(f({},this._tags),(P={},P[v]=S,P)),this._notifyScopeListeners(),this},O.prototype.setExtras=function(v){return this._extra=f(f({},this._extra),v),this._notifyScopeListeners(),this},O.prototype.setExtra=function(v,S){var P;return this._extra=f(f({},this._extra),(P={},P[v]=S,P)),this._notifyScopeListeners(),this},O.prototype.setFingerprint=function(v){return this._fingerprint=v,this._notifyScopeListeners(),this},O.prototype.setLevel=function(v){return this._level=v,this._notifyScopeListeners(),this},O.prototype.setTransactionName=function(v){return this._transactionName=v,this._notifyScopeListeners(),this},O.prototype.setTransaction=function(v){return this.setTransactionName(v)},O.prototype.setContext=function(v,S){var P;return S===null?delete this._contexts[v]:this._contexts=f(f({},this._contexts),(P={},P[v]=S,P)),this._notifyScopeListeners(),this},O.prototype.setSpan=function(v){return this._span=v,this._notifyScopeListeners(),this},O.prototype.getSpan=function(){return this._span},O.prototype.getTransaction=function(){var v=this.getSpan();return v&&v.transaction},O.prototype.setSession=function(v){return v?this._session=v:delete this._session,this._notifyScopeListeners(),this},O.prototype.getSession=function(){return this._session},O.prototype.update=function(v){if(!v)return this;if(typeof v=="function"){var S=v(this);return S instanceof O?S:this}return v instanceof O?(this._tags=f(f({},this._tags),v._tags),this._extra=f(f({},this._extra),v._extra),this._contexts=f(f({},this._contexts),v._contexts),v._user&&Object.keys(v._user).length&&(this._user=v._user),v._level&&(this._level=v._level),v._fingerprint&&(this._fingerprint=v._fingerprint),v._requestSession&&(this._requestSession=v._requestSession)):zt(v)&&(v=v,this._tags=f(f({},this._tags),v.tags),this._extra=f(f({},this._extra),v.extra),this._contexts=f(f({},this._contexts),v.contexts),v.user&&(this._user=v.user),v.level&&(this._level=v.level),v.fingerprint&&(this._fingerprint=v.fingerprint),v.requestSession&&(this._requestSession=v.requestSession)),this},O.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},O.prototype.addBreadcrumb=function(v,S){var P=typeof S=="number"?Math.min(S,cs):cs;if(P<=0)return this;var M=f({timestamp:(0,He.yW)()},v);return this._breadcrumbs=c(this._breadcrumbs,[M]).slice(-P),this._notifyScopeListeners(),this},O.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},O.prototype.applyToEvent=function(v,S){if(this._extra&&Object.keys(this._extra).length&&(v.extra=f(f({},this._extra),v.extra)),this._tags&&Object.keys(this._tags).length&&(v.tags=f(f({},this._tags),v.tags)),this._user&&Object.keys(this._user).length&&(v.user=f(f({},this._user),v.user)),this._contexts&&Object.keys(this._contexts).length&&(v.contexts=f(f({},this._contexts),v.contexts)),this._level&&(v.level=this._level),this._transactionName&&(v.transaction=this._transactionName),this._span){v.contexts=f({trace:this._span.getTraceContext()},v.contexts);var P=this._span.transaction&&this._span.transaction.name;P&&(v.tags=f({transaction:P},v.tags))}return this._applyFingerprint(v),v.breadcrumbs=c(v.breadcrumbs||[],this._breadcrumbs),v.breadcrumbs=v.breadcrumbs.length>0?v.breadcrumbs:void 0,v.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(c(Hi(),this._eventProcessors),v,S)},O.prototype.setSDKProcessingMetadata=function(v){return this._sdkProcessingMetadata=f(f({},this._sdkProcessingMetadata),v),this},O.prototype._notifyEventProcessors=function(v,S,P,M){var F=this;return M===void 0&&(M=0),new si(function(Y,k){var Q=v[M];if(S===null||typeof Q!="function")Y(S);else{var j=Q(f({},S),P);Wt(j)?j.then(function(_){return F._notifyEventProcessors(v,_,P,M+1).then(Y)}).then(null,k):F._notifyEventProcessors(v,j,P,M+1).then(Y).then(null,k)}})},O.prototype._notifyScopeListeners=function(){var v=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(function(S){S(v)}),this._notifyingListeners=!1)},O.prototype._applyFingerprint=function(v){v.fingerprint=v.fingerprint?Array.isArray(v.fingerprint)?v.fingerprint:[v.fingerprint]:[],this._fingerprint&&(v.fingerprint=v.fingerprint.concat(this._fingerprint)),v.fingerprint&&!v.fingerprint.length&&delete v.fingerprint},O}();function Hi(){return(0,Tt.Y)("globalEventProcessors",function(){return[]})}function qi(O){Hi().push(O)}var Ns=function(){function O(v){this.errors=0,this.sid=Ue(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var S=(0,He.ph)();this.timestamp=S,this.started=S,v&&this.update(v)}return O.prototype.update=function(v){if(v===void 0&&(v={}),v.user&&(!this.ipAddress&&v.user.ip_address&&(this.ipAddress=v.user.ip_address),!this.did&&!v.did&&(this.did=v.user.id||v.user.email||v.user.username)),this.timestamp=v.timestamp||(0,He.ph)(),v.ignoreDuration&&(this.ignoreDuration=v.ignoreDuration),v.sid&&(this.sid=v.sid.length===32?v.sid:Ue()),v.init!==void 0&&(this.init=v.init),!this.did&&v.did&&(this.did=""+v.did),typeof v.started=="number"&&(this.started=v.started),this.ignoreDuration)this.duration=void 0;else if(typeof v.duration=="number")this.duration=v.duration;else{var S=this.timestamp-this.started;this.duration=S>=0?S:0}v.release&&(this.release=v.release),v.environment&&(this.environment=v.environment),!this.ipAddress&&v.ipAddress&&(this.ipAddress=v.ipAddress),!this.userAgent&&v.userAgent&&(this.userAgent=v.userAgent),typeof v.errors=="number"&&(this.errors=v.errors),v.status&&(this.status=v.status)},O.prototype.close=function(v){v?this.update({status:v}):this.status==="ok"?this.update({status:"exited"}):this.update()},O.prototype.toJSON=function(){return ti({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did=="number"||typeof this.did=="string"?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},O}(),_i=4,Gs=100,zs=function(){function O(v,S,P){S===void 0&&(S=new Vi),P===void 0&&(P=_i),this._version=P,this._stack=[{}],this.getStackTop().scope=S,v&&this.bindClient(v)}return O.prototype.isOlderThan=function(v){return this._version<v},O.prototype.bindClient=function(v){var S=this.getStackTop();S.client=v,v&&v.setupIntegrations&&v.setupIntegrations()},O.prototype.pushScope=function(){var v=Vi.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:v}),v},O.prototype.popScope=function(){return this.getStack().length<=1?!1:!!this.getStack().pop()},O.prototype.withScope=function(v){var S=this.pushScope();try{v(S)}finally{this.popScope()}},O.prototype.getClient=function(){return this.getStackTop().client},O.prototype.getScope=function(){return this.getStackTop().scope},O.prototype.getStack=function(){return this._stack},O.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},O.prototype.captureException=function(v,S){var P=this._lastEventId=S&&S.event_id?S.event_id:Ue(),M=S;if(!S){var F=void 0;try{throw new Error("Sentry syntheticException")}catch(Y){F=Y}M={originalException:v,syntheticException:F}}return this._invokeClient("captureException",v,f(f({},M),{event_id:P})),P},O.prototype.captureMessage=function(v,S,P){var M=this._lastEventId=P&&P.event_id?P.event_id:Ue(),F=P;if(!P){var Y=void 0;try{throw new Error(v)}catch(k){Y=k}F={originalException:v,syntheticException:Y}}return this._invokeClient("captureMessage",v,S,f(f({},F),{event_id:M})),M},O.prototype.captureEvent=function(v,S){var P=S&&S.event_id?S.event_id:Ue();return v.type!=="transaction"&&(this._lastEventId=P),this._invokeClient("captureEvent",v,f(f({},S),{event_id:P})),P},O.prototype.lastEventId=function(){return this._lastEventId},O.prototype.addBreadcrumb=function(v,S){var P=this.getStackTop(),M=P.scope,F=P.client;if(!(!M||!F)){var Y=F.getOptions&&F.getOptions()||{},k=Y.beforeBreadcrumb,Q=k===void 0?null:k,j=Y.maxBreadcrumbs,_=j===void 0?Gs:j;if(!(_<=0)){var it=(0,He.yW)(),nt=f({timestamp:it},v),ht=Q?Bi(function(){return Q(nt,S)}):nt;ht!==null&&M.addBreadcrumb(ht,_)}}},O.prototype.setUser=function(v){var S=this.getScope();S&&S.setUser(v)},O.prototype.setTags=function(v){var S=this.getScope();S&&S.setTags(v)},O.prototype.setExtras=function(v){var S=this.getScope();S&&S.setExtras(v)},O.prototype.setTag=function(v,S){var P=this.getScope();P&&P.setTag(v,S)},O.prototype.setExtra=function(v,S){var P=this.getScope();P&&P.setExtra(v,S)},O.prototype.setContext=function(v,S){var P=this.getScope();P&&P.setContext(v,S)},O.prototype.configureScope=function(v){var S=this.getStackTop(),P=S.scope,M=S.client;P&&M&&v(P)},O.prototype.run=function(v){var S=Pn(this);try{v(this)}finally{Pn(S)}},O.prototype.getIntegration=function(v){var S=this.getClient();if(!S)return null;try{return S.getIntegration(v)}catch(P){return Wi&&Ut.warn("Cannot retrieve integration "+v.id+" from the current Hub"),null}},O.prototype.startSpan=function(v){return this._callExtensionMethod("startSpan",v)},O.prototype.startTransaction=function(v,S){return this._callExtensionMethod("startTransaction",v,S)},O.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},O.prototype.captureSession=function(v){if(v===void 0&&(v=!1),v)return this.endSession();this._sendSessionUpdate()},O.prototype.endSession=function(){var v=this.getStackTop(),S=v&&v.scope,P=S&&S.getSession();P&&P.close(),this._sendSessionUpdate(),S&&S.setSession()},O.prototype.startSession=function(v){var S=this.getStackTop(),P=S.scope,M=S.client,F=M&&M.getOptions()||{},Y=F.release,k=F.environment,Q=(0,Tt.R)(),j=(Q.navigator||{}).userAgent,_=new Ns(f(f(f({release:Y,environment:k},P&&{user:P.getUser()}),j&&{userAgent:j}),v));if(P){var it=P.getSession&&P.getSession();it&&it.status==="ok"&&it.update({status:"exited"}),this.endSession(),P.setSession(_)}return _},O.prototype._sendSessionUpdate=function(){var v=this.getStackTop(),S=v.scope,P=v.client;if(!!S){var M=S.getSession&&S.getSession();M&&P&&P.captureSession&&P.captureSession(M)}},O.prototype._invokeClient=function(v){for(var S,P=[],M=1;M<arguments.length;M++)P[M-1]=arguments[M];var F=this.getStackTop(),Y=F.scope,k=F.client;k&&k[v]&&(S=k)[v].apply(S,c(P,[Y]))},O.prototype._callExtensionMethod=function(v){for(var S=[],P=1;P<arguments.length;P++)S[P-1]=arguments[P];var M=ts(),F=M.__SENTRY__;if(F&&F.extensions&&typeof F.extensions[v]=="function")return F.extensions[v].apply(this,S);Wi&&Ut.warn("Extension method "+v+" couldn't be found, doing nothing.")},O}();function ts(){var O=(0,Tt.R)();return O.__SENTRY__=O.__SENTRY__||{extensions:{},hub:void 0},O}function Pn(O){var v=ts(),S=Ei(v);return Us(v,O),S}function be(){var O=ts();return(!An(O)||Ei(O).isOlderThan(_i))&&Us(O,new zs),(0,Xi.KV)()?$r(O):Ei(O)}function ku(){IS_DEBUG_BUILD&&logger.warn("Function `getActiveDomain` is deprecated and will be removed in a future version.");var O=ts().__SENTRY__;return O&&O.extensions&&O.extensions.domain&&O.extensions.domain.active}function $r(O){try{var v=ts().__SENTRY__,S=v&&v.extensions&&v.extensions.domain&&v.extensions.domain.active;if(!S)return Ei(O);if(!An(S)||Ei(S).isOlderThan(_i)){var P=Ei(O).getStackTop();Us(S,new zs(P.client,Vi.clone(P.scope)))}return Ei(S)}catch(M){return Ei(O)}}function An(O){return!!(O&&O.__SENTRY__&&O.__SENTRY__.hub)}function Ei(O){return(0,Tt.Y)("hub",function(){return new zs},O)}function Us(O,v){if(!O)return!1;var S=O.__SENTRY__=O.__SENTRY__||{};return S.hub=v,!0}var we=typeof __SENTRY_DEBUG__=="undefined"?!0:__SENTRY_DEBUG__;function Jr(O,v){v.debug===!0&&(we?Ut.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var S=be(),P=S.getScope();P&&P.update(v.initialScope);var M=new O(v);S.bindClient(M)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ys=function(O,v){return Ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var M in P)P.hasOwnProperty(M)&&(S[M]=P[M])},Ys(O,v)};function Zu(O,v){Ys(O,v);function S(){this.constructor=O}O.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}var Te=function(){return Te=Object.assign||function(v){for(var S,P=1,M=arguments.length;P<M;P++){S=arguments[P];for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&(v[F]=S[F])}return v},Te.apply(this,arguments)};function ju(O,v){var S={};for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&v.indexOf(P)<0&&(S[P]=O[P]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,P=Object.getOwnPropertySymbols(O);M<P.length;M++)v.indexOf(P[M])<0&&Object.prototype.propertyIsEnumerable.call(O,P[M])&&(S[P[M]]=O[P[M]]);return S}function Ku(O,v,S,P){var M=arguments.length,F=M<3?v:P===null?P=Object.getOwnPropertyDescriptor(v,S):P,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(O,v,S,P);else for(var k=O.length-1;k>=0;k--)(Y=O[k])&&(F=(M<3?Y(F):M>3?Y(v,S,F):Y(v,S))||F);return M>3&&F&&Object.defineProperty(v,S,F),F}function $u(O,v){return function(S,P){v(S,P,O)}}function Ju(O,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,v)}function Qu(O,v,S,P){function M(F){return F instanceof S?F:new S(function(Y){Y(F)})}return new(S||(S=Promise))(function(F,Y){function k(_){try{j(P.next(_))}catch(it){Y(it)}}function Q(_){try{j(P.throw(_))}catch(it){Y(it)}}function j(_){_.done?F(_.value):M(_.value).then(k,Q)}j((P=P.apply(O,v||[])).next())})}function qu(O,v){var S={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},P,M,F,Y;return Y={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function k(j){return function(_){return Q([j,_])}}function Q(j){if(P)throw new TypeError("Generator is already executing.");for(;S;)try{if(P=1,M&&(F=j[0]&2?M.return:j[0]?M.throw||((F=M.return)&&F.call(M),0):M.next)&&!(F=F.call(M,j[1])).done)return F;switch(M=0,F&&(j=[j[0]&2,F.value]),j[0]){case 0:case 1:F=j;break;case 4:return S.label++,{value:j[1],done:!1};case 5:S.label++,M=j[1],j=[0];continue;case 7:j=S.ops.pop(),S.trys.pop();continue;default:if(F=S.trys,!(F=F.length>0&&F[F.length-1])&&(j[0]===6||j[0]===2)){S=0;continue}if(j[0]===3&&(!F||j[1]>F[0]&&j[1]<F[3])){S.label=j[1];break}if(j[0]===6&&S.label<F[1]){S.label=F[1],F=j;break}if(F&&S.label<F[2]){S.label=F[2],S.ops.push(j);break}F[2]&&S.ops.pop(),S.trys.pop();continue}j=v.call(O,S)}catch(_){j=[6,_],M=0}finally{P=F=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}function _u(O,v,S,P){P===void 0&&(P=S),O[P]=v[S]}function tf(O,v){for(var S in O)S!=="default"&&!v.hasOwnProperty(S)&&(v[S]=O[S])}function Xs(O){var v=typeof Symbol=="function"&&Symbol.iterator,S=v&&O[v],P=0;if(S)return S.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&P>=O.length&&(O=void 0),{value:O&&O[P++],done:!O}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ws(O,v){var S=typeof Symbol=="function"&&O[Symbol.iterator];if(!S)return O;var P=S.call(O),M,F=[],Y;try{for(;(v===void 0||v-- >0)&&!(M=P.next()).done;)F.push(M.value)}catch(k){Y={error:k}}finally{try{M&&!M.done&&(S=P.return)&&S.call(P)}finally{if(Y)throw Y.error}}return F}function ni(){for(var O=[],v=0;v<arguments.length;v++)O=O.concat(Ws(arguments[v]));return O}function ef(){for(var O=0,v=0,S=arguments.length;v<S;v++)O+=arguments[v].length;for(var P=Array(O),M=0,v=0;v<S;v++)for(var F=arguments[v],Y=0,k=F.length;Y<k;Y++,M++)P[M]=F[Y];return P}function ds(O){return this instanceof ds?(this.v=O,this):new ds(O)}function sf(O,v,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=S.apply(O,v||[]),M,F=[];return M={},Y("next"),Y("throw"),Y("return"),M[Symbol.asyncIterator]=function(){return this},M;function Y(nt){P[nt]&&(M[nt]=function(ht){return new Promise(function(ft,gt){F.push([nt,ht,ft,gt])>1||k(nt,ht)})})}function k(nt,ht){try{Q(P[nt](ht))}catch(ft){it(F[0][3],ft)}}function Q(nt){nt.value instanceof ds?Promise.resolve(nt.value.v).then(j,_):it(F[0][2],nt)}function j(nt){k("next",nt)}function _(nt){k("throw",nt)}function it(nt,ht){nt(ht),F.shift(),F.length&&k(F[0][0],F[0][1])}}function nf(O){var v,S;return v={},P("next"),P("throw",function(M){throw M}),P("return"),v[Symbol.iterator]=function(){return this},v;function P(M,F){v[M]=O[M]?function(Y){return(S=!S)?{value:ds(O[M](Y)),done:M==="return"}:F?F(Y):Y}:F}}function rf(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=O[Symbol.asyncIterator],S;return v?v.call(O):(O=typeof Xs=="function"?Xs(O):O[Symbol.iterator](),S={},P("next"),P("throw"),P("return"),S[Symbol.asyncIterator]=function(){return this},S);function P(F){S[F]=O[F]&&function(Y){return new Promise(function(k,Q){Y=O[F](Y),M(k,Q,Y.done,Y.value)})}}function M(F,Y,k,Q){Promise.resolve(Q).then(function(j){F({value:j,done:k})},Y)}}function af(O,v){return Object.defineProperty?Object.defineProperty(O,"raw",{value:v}):O.raw=v,O}function of(O){if(O&&O.__esModule)return O;var v={};if(O!=null)for(var S in O)Object.hasOwnProperty.call(O,S)&&(v[S]=O[S]);return v.default=O,v}function hf(O){return O&&O.__esModule?O:{default:O}}function lf(O,v){if(!v.has(O))throw new TypeError("attempted to get private field on non-instance");return v.get(O)}function uf(O,v,S){if(!v.has(O))throw new TypeError("attempted to set private field on non-instance");return v.set(O,S),S}var Qr=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],qr=function(){function O(v){v===void 0&&(v={}),this._options=v,this.name=O.id}return O.prototype.setupOnce=function(v,S){v(function(P){var M=S();if(M){var F=M.getIntegration(O);if(F){var Y=M.getClient(),k=Y?Y.getOptions():{},Q=_r(F._options,k);return ta(P,Q)?null:P}}return P})},O.id="InboundFilters",O}();function _r(O,v){return O===void 0&&(O={}),v===void 0&&(v={}),{allowUrls:ni(O.whitelistUrls||[],O.allowUrls||[],v.whitelistUrls||[],v.allowUrls||[]),denyUrls:ni(O.blacklistUrls||[],O.denyUrls||[],v.blacklistUrls||[],v.denyUrls||[]),ignoreErrors:ni(O.ignoreErrors||[],v.ignoreErrors||[],Qr),ignoreInternal:O.ignoreInternal!==void 0?O.ignoreInternal:!0}}function ta(O,v){return v.ignoreInternal&&ra(O)?(we&&Ut.warn(`Event dropped due to being internal Sentry Error.
Event: `+Fe(O)),!0):ea(O,v.ignoreErrors)?(we&&Ut.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Fe(O)),!0):ia(O,v.denyUrls)?(we&&Ut.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Fe(O)+`.
Url: `+vs(O)),!0):sa(O,v.allowUrls)?!1:(we&&Ut.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Fe(O)+`.
Url: `+vs(O)),!0)}function ea(O,v){return!v||!v.length?!1:na(O).some(function(S){return v.some(function(P){return ct(S,P)})})}function ia(O,v){if(!v||!v.length)return!1;var S=vs(O);return S?v.some(function(P){return ct(S,P)}):!1}function sa(O,v){if(!v||!v.length)return!0;var S=vs(O);return S?v.some(function(P){return ct(S,P)}):!0}function na(O){if(O.message)return[O.message];if(O.exception)try{var v=O.exception.values&&O.exception.values[0]||{},S=v.type,P=S===void 0?"":S,M=v.value,F=M===void 0?"":M;return[""+F,P+": "+F]}catch(Y){return we&&Ut.error("Cannot extract message for event "+Fe(O)),[]}return[]}function ra(O){try{return O.exception.values[0].type==="SentryError"}catch(v){}return!1}function Rn(O){O===void 0&&(O=[]);for(var v=O.length-1;v>=0;v--){var S=O[v];if(S&&S.filename!=="<anonymous>"&&S.filename!=="[native code]")return S.filename||null}return null}function vs(O){try{if(O.stacktrace)return Rn(O.stacktrace.frames);var v;try{v=O.exception.values[0].stacktrace.frames}catch(S){}return v?Rn(v):null}catch(S){return we&&Ut.error("Cannot extract url for event "+Fe(O)),null}}var Mn,aa=function(){function O(){this.name=O.id}return O.prototype.setupOnce=function(){Mn=Function.prototype.toString,Function.prototype.toString=function(){for(var v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];var P=Ht(this)||this;return Mn.apply(P,v)}},O.id="FunctionToString",O}(),oa=50;function ha(){for(var O=[],v=0;v<arguments.length;v++)O[v]=arguments[v];var S=O.sort(function(P,M){return P[0]-M[0]}).map(function(P){return P[1]});return function(P,M){var F,Y,k,Q;M===void 0&&(M=0);var j=[];try{for(var _=U(P.split(`
`).slice(M)),it=_.next();!it.done;it=_.next()){var nt=it.value;try{for(var ht=(k=void 0,U(S)),ft=ht.next();!ft.done;ft=ht.next()){var gt=ft.value,yt=gt(nt);if(yt){j.push(yt);break}}}catch(Ot){k={error:Ot}}finally{try{ft&&!ft.done&&(Q=ht.return)&&Q.call(ht)}finally{if(k)throw k.error}}}}catch(Ot){F={error:Ot}}finally{try{it&&!it.done&&(Y=_.return)&&Y.call(_)}finally{if(F)throw F.error}}return la(j)}}function la(O){if(!O.length)return[];var v=O,S=v[0].function||"",P=v[v.length-1].function||"";return(S.indexOf("captureMessage")!==-1||S.indexOf("captureException")!==-1)&&(v=v.slice(1)),P.indexOf("sentryWrapped")!==-1&&(v=v.slice(0,-1)),v.slice(0,oa).map(function(M){return D(D({},M),{filename:M.filename||v[0].filename,function:M.function||"?"})}).reverse()}var Vs="<anonymous>";function Ci(O){try{return!O||typeof O!="function"?Vs:O.name||Vs}catch(v){return Vs}}function ff(){try{return new ErrorEvent(""),!0}catch(O){return!1}}function cf(){try{return new DOMError(""),!0}catch(O){return!1}}function df(){try{return new DOMException(""),!0}catch(O){return!1}}function ps(){if(!("fetch"in(0,Tt.R)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(O){return!1}}function Hs(O){return O&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(O.toString())}function ua(){if(!ps())return!1;var O=(0,Tt.R)();if(Hs(O.fetch))return!0;var v=!1,S=O.document;if(S&&typeof S.createElement=="function")try{var P=S.createElement("iframe");P.hidden=!0,S.head.appendChild(P),P.contentWindow&&P.contentWindow.fetch&&(v=Hs(P.contentWindow.fetch)),S.head.removeChild(P)}catch(M){ke&&Ut.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",M)}return v}function vf(){return"ReportingObserver"in getGlobalObject()}function fa(){if(!ps())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(O){return!1}}function ca(){var O=(0,Tt.R)(),v=O.chrome,S=v&&v.app&&v.app.runtime,P="history"in O&&!!O.history.pushState&&!!O.history.replaceState;return!S&&P}var xe=(0,Tt.R)(),es={},bn={};function da(O){if(!bn[O])switch(bn[O]=!0,O){case"console":va();break;case"dom":Ca();break;case"xhr":xa();break;case"fetch":pa();break;case"history":ya();break;case"error":wa();break;case"unhandledrejection":Oa();break;default:ke&&Ut.warn("unknown instrumentation type:",O);return}}function wi(O,v){es[O]=es[O]||[],es[O].push(v),da(O)}function Ze(O,v){var S,P;if(!(!O||!es[O]))try{for(var M=U(es[O]||[]),F=M.next();!F.done;F=M.next()){var Y=F.value;try{Y(v)}catch(k){ke&&Ut.error(`Error while triggering instrumentation handler.
Type: `+O+`
Name: `+Ci(Y)+`
Error:`,k)}}}catch(k){S={error:k}}finally{try{F&&!F.done&&(P=M.return)&&P.call(M)}finally{if(S)throw S.error}}}function va(){"console"in xe&&Fi.forEach(function(O){O in xe.console&&wt(xe.console,O,function(v){return function(){for(var S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];Ze("console",{args:S,level:O}),v&&v.apply(xe.console,S)}})})}function pa(){!ua()||wt(xe,"fetch",function(O){return function(){for(var v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];var P={args:v,fetchData:{method:ma(v),url:ga(v)},startTimestamp:Date.now()};return Ze("fetch",D({},P)),O.apply(xe,v).then(function(M){return Ze("fetch",D(D({},P),{endTimestamp:Date.now(),response:M})),M},function(M){throw Ze("fetch",D(D({},P),{endTimestamp:Date.now(),error:M})),M})}})}function ma(O){return O===void 0&&(O=[]),"Request"in xe&&ve(O[0],Request)&&O[0].method?String(O[0].method).toUpperCase():O[1]&&O[1].method?String(O[1].method).toUpperCase():"GET"}function ga(O){return O===void 0&&(O=[]),typeof O[0]=="string"?O[0]:"Request"in xe&&ve(O[0],Request)?O[0].url:String(O[0])}function xa(){if("XMLHttpRequest"in xe){var O=XMLHttpRequest.prototype;wt(O,"open",function(v){return function(){for(var S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];var M=this,F=S[1],Y=M.__sentry_xhr__={method:Jt(S[0])?S[0].toUpperCase():S[0],url:S[1]};Jt(F)&&Y.method==="POST"&&F.match(/sentry_key/)&&(M.__sentry_own_request__=!0);var k=function(){if(M.readyState===4){try{Y.status_code=M.status}catch(Q){}Ze("xhr",{args:S,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:M})}};return"onreadystatechange"in M&&typeof M.onreadystatechange=="function"?wt(M,"onreadystatechange",function(Q){return function(){for(var j=[],_=0;_<arguments.length;_++)j[_]=arguments[_];return k(),Q.apply(M,j)}}):M.addEventListener("readystatechange",k),v.apply(M,S)}}),wt(O,"send",function(v){return function(){for(var S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];return this.__sentry_xhr__&&S[0]!==void 0&&(this.__sentry_xhr__.body=S[0]),Ze("xhr",{args:S,startTimestamp:Date.now(),xhr:this}),v.apply(this,S)}})}}var ms;function ya(){if(!ca())return;var O=xe.onpopstate;xe.onpopstate=function(){for(var S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];var M=xe.location.href,F=ms;if(ms=M,Ze("history",{from:F,to:M}),O)try{return O.apply(this,S)}catch(Y){}};function v(S){return function(){for(var P=[],M=0;M<arguments.length;M++)P[M]=arguments[M];var F=P.length>2?P[2]:void 0;if(F){var Y=ms,k=String(F);ms=k,Ze("history",{from:Y,to:k})}return S.apply(this,P)}}wt(xe.history,"pushState",v),wt(xe.history,"replaceState",v)}var Ta=1e3,gs,xs;function Sa(O,v){if(!O||O.type!==v.type)return!0;try{if(O.target!==v.target)return!0}catch(S){}return!1}function Ea(O){if(O.type!=="keypress")return!1;try{var v=O.target;if(!v||!v.tagName)return!0;if(v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.isContentEditable)return!1}catch(S){}return!0}function Ln(O,v){return v===void 0&&(v=!1),function(S){if(!(!S||xs===S)&&!Ea(S)){var P=S.type==="keypress"?"input":S.type;gs===void 0?(O({event:S,name:P,global:v}),xs=S):Sa(xs,S)&&(O({event:S,name:P,global:v}),xs=S),clearTimeout(gs),gs=xe.setTimeout(function(){gs=void 0},Ta)}}}function Ca(){if("document"in xe){var O=Ze.bind(null,"dom"),v=Ln(O,!0);xe.document.addEventListener("click",v,!1),xe.document.addEventListener("keypress",v,!1),["EventTarget","Node"].forEach(function(S){var P=xe[S]&&xe[S].prototype;!P||!P.hasOwnProperty||!P.hasOwnProperty("addEventListener")||(wt(P,"addEventListener",function(M){return function(F,Y,k){if(F==="click"||F=="keypress")try{var Q=this,j=Q.__sentry_instrumentation_handlers__=Q.__sentry_instrumentation_handlers__||{},_=j[F]=j[F]||{refCount:0};if(!_.handler){var it=Ln(O);_.handler=it,M.call(this,F,it,k)}_.refCount+=1}catch(nt){}return M.call(this,F,Y,k)}}),wt(P,"removeEventListener",function(M){return function(F,Y,k){if(F==="click"||F=="keypress")try{var Q=this,j=Q.__sentry_instrumentation_handlers__||{},_=j[F];_&&(_.refCount-=1,_.refCount<=0&&(M.call(this,F,_.handler,k),_.handler=void 0,delete j[F]),Object.keys(j).length===0&&delete Q.__sentry_instrumentation_handlers__)}catch(it){}return M.call(this,F,Y,k)}}))})}}var ks=null;function wa(){ks=xe.onerror,xe.onerror=function(O,v,S,P,M){return Ze("error",{column:P,error:M,line:S,msg:O,url:v}),ks?ks.apply(this,arguments):!1}}var Zs=null;function Oa(){Zs=xe.onunhandledrejection,xe.onunhandledrejection=function(O){return Ze("unhandledrejection",O),Zs?Zs.apply(this,arguments):!0}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var js=function(O,v){return js=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var M in P)P.hasOwnProperty(M)&&(S[M]=P[M])},js(O,v)};function ys(O,v){js(O,v);function S(){this.constructor=O}O.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}var ye=function(){return ye=Object.assign||function(v){for(var S,P=1,M=arguments.length;P<M;P++){S=arguments[P];for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&(v[F]=S[F])}return v},ye.apply(this,arguments)};function pf(O,v){var S={};for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&v.indexOf(P)<0&&(S[P]=O[P]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,P=Object.getOwnPropertySymbols(O);M<P.length;M++)v.indexOf(P[M])<0&&Object.prototype.propertyIsEnumerable.call(O,P[M])&&(S[P[M]]=O[P[M]]);return S}function mf(O,v,S,P){var M=arguments.length,F=M<3?v:P===null?P=Object.getOwnPropertyDescriptor(v,S):P,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(O,v,S,P);else for(var k=O.length-1;k>=0;k--)(Y=O[k])&&(F=(M<3?Y(F):M>3?Y(v,S,F):Y(v,S))||F);return M>3&&F&&Object.defineProperty(v,S,F),F}function gf(O,v){return function(S,P){v(S,P,O)}}function xf(O,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,v)}function yf(O,v,S,P){function M(F){return F instanceof S?F:new S(function(Y){Y(F)})}return new(S||(S=Promise))(function(F,Y){function k(_){try{j(P.next(_))}catch(it){Y(it)}}function Q(_){try{j(P.throw(_))}catch(it){Y(it)}}function j(_){_.done?F(_.value):M(_.value).then(k,Q)}j((P=P.apply(O,v||[])).next())})}function Tf(O,v){var S={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},P,M,F,Y;return Y={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function k(j){return function(_){return Q([j,_])}}function Q(j){if(P)throw new TypeError("Generator is already executing.");for(;S;)try{if(P=1,M&&(F=j[0]&2?M.return:j[0]?M.throw||((F=M.return)&&F.call(M),0):M.next)&&!(F=F.call(M,j[1])).done)return F;switch(M=0,F&&(j=[j[0]&2,F.value]),j[0]){case 0:case 1:F=j;break;case 4:return S.label++,{value:j[1],done:!1};case 5:S.label++,M=j[1],j=[0];continue;case 7:j=S.ops.pop(),S.trys.pop();continue;default:if(F=S.trys,!(F=F.length>0&&F[F.length-1])&&(j[0]===6||j[0]===2)){S=0;continue}if(j[0]===3&&(!F||j[1]>F[0]&&j[1]<F[3])){S.label=j[1];break}if(j[0]===6&&S.label<F[1]){S.label=F[1],F=j;break}if(F&&S.label<F[2]){S.label=F[2],S.ops.push(j);break}F[2]&&S.ops.pop(),S.trys.pop();continue}j=v.call(O,S)}catch(_){j=[6,_],M=0}finally{P=F=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}function Sf(O,v,S,P){P===void 0&&(P=S),O[P]=v[S]}function Ef(O,v){for(var S in O)S!=="default"&&!v.hasOwnProperty(S)&&(v[S]=O[S])}function Fn(O){var v=typeof Symbol=="function"&&Symbol.iterator,S=v&&O[v],P=0;if(S)return S.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&P>=O.length&&(O=void 0),{value:O&&O[P++],done:!O}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")}function ki(O,v){var S=typeof Symbol=="function"&&O[Symbol.iterator];if(!S)return O;var P=S.call(O),M,F=[],Y;try{for(;(v===void 0||v-- >0)&&!(M=P.next()).done;)F.push(M.value)}catch(k){Y={error:k}}finally{try{M&&!M.done&&(S=P.return)&&S.call(P)}finally{if(Y)throw Y.error}}return F}function Bn(){for(var O=[],v=0;v<arguments.length;v++)O=O.concat(ki(arguments[v]));return O}function Cf(){for(var O=0,v=0,S=arguments.length;v<S;v++)O+=arguments[v].length;for(var P=Array(O),M=0,v=0;v<S;v++)for(var F=arguments[v],Y=0,k=F.length;Y<k;Y++,M++)P[M]=F[Y];return P}function Ts(O){return this instanceof Ts?(this.v=O,this):new Ts(O)}function wf(O,v,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=S.apply(O,v||[]),M,F=[];return M={},Y("next"),Y("throw"),Y("return"),M[Symbol.asyncIterator]=function(){return this},M;function Y(nt){P[nt]&&(M[nt]=function(ht){return new Promise(function(ft,gt){F.push([nt,ht,ft,gt])>1||k(nt,ht)})})}function k(nt,ht){try{Q(P[nt](ht))}catch(ft){it(F[0][3],ft)}}function Q(nt){nt.value instanceof Ts?Promise.resolve(nt.value.v).then(j,_):it(F[0][2],nt)}function j(nt){k("next",nt)}function _(nt){k("throw",nt)}function it(nt,ht){nt(ht),F.shift(),F.length&&k(F[0][0],F[0][1])}}function Of(O){var v,S;return v={},P("next"),P("throw",function(M){throw M}),P("return"),v[Symbol.iterator]=function(){return this},v;function P(M,F){v[M]=O[M]?function(Y){return(S=!S)?{value:Ts(O[M](Y)),done:M==="return"}:F?F(Y):Y}:F}}function Pf(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=O[Symbol.asyncIterator],S;return v?v.call(O):(O=typeof Fn=="function"?Fn(O):O[Symbol.iterator](),S={},P("next"),P("throw"),P("return"),S[Symbol.asyncIterator]=function(){return this},S);function P(F){S[F]=O[F]&&function(Y){return new Promise(function(k,Q){Y=O[F](Y),M(k,Q,Y.done,Y.value)})}}function M(F,Y,k,Q){Promise.resolve(Q).then(function(j){F({value:j,done:k})},Y)}}function Af(O,v){return Object.defineProperty?Object.defineProperty(O,"raw",{value:v}):O.raw=v,O}function Rf(O){if(O&&O.__esModule)return O;var v={};if(O!=null)for(var S in O)Object.hasOwnProperty.call(O,S)&&(v[S]=O[S]);return v.default=O,v}function Mf(O){return O&&O.__esModule?O:{default:O}}function bf(O,v){if(!v.has(O))throw new TypeError("attempted to get private field on non-instance");return v.get(O)}function Lf(O,v,S){if(!v.has(O))throw new TypeError("attempted to set private field on non-instance");return v.set(O,S),S}var In="6.19.7",Pa=Object.setPrototypeOf||({__proto__:[]}instanceof Array?Aa:Ra);function Aa(O,v){return O.__proto__=v,O}function Ra(O,v){for(var S in v)Object.prototype.hasOwnProperty.call(O,S)||(O[S]=v[S]);return O}var Pe=function(O){B(v,O);function v(S){var P=this.constructor,M=O.call(this,S)||this;return M.message=S,M.name=P.prototype.constructor.name,Pa(M,P.prototype),M}return v}(Error),Ma=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ba(O){return O==="http"||O==="https"}function is(O,v){v===void 0&&(v=!1);var S=O.host,P=O.path,M=O.pass,F=O.port,Y=O.projectId,k=O.protocol,Q=O.publicKey;return k+"://"+Q+(v&&M?":"+M:"")+("@"+S+(F?":"+F:"")+"/"+(P&&P+"/")+Y)}function La(O){var v=Ma.exec(O);if(!v)throw new Pe("Invalid Sentry Dsn: "+O);var S=W(v.slice(1),6),P=S[0],M=S[1],F=S[2],Y=F===void 0?"":F,k=S[3],Q=S[4],j=Q===void 0?"":Q,_=S[5],it="",nt=_,ht=nt.split("/");if(ht.length>1&&(it=ht.slice(0,-1).join("/"),nt=ht.pop()),nt){var ft=nt.match(/^\d+/);ft&&(nt=ft[0])}return Dn({host:k,pass:Y,path:it,projectId:nt,port:j,protocol:P,publicKey:M})}function Dn(O){return"user"in O&&!("publicKey"in O)&&(O.publicKey=O.user),{user:O.publicKey||"",protocol:O.protocol,publicKey:O.publicKey||"",pass:O.pass||"",host:O.host,port:O.port||"",path:O.path||"",projectId:O.projectId}}function Fa(O){if(!!ke){var v=O.port,S=O.projectId,P=O.protocol,M=["protocol","publicKey","host","projectId"];if(M.forEach(function(F){if(!O[F])throw new Pe("Invalid Sentry Dsn: "+F+" missing")}),!S.match(/^\d+$/))throw new Pe("Invalid Sentry Dsn: Invalid projectId "+S);if(!ba(P))throw new Pe("Invalid Sentry Dsn: Invalid protocol "+P);if(v&&isNaN(parseInt(v,10)))throw new Pe("Invalid Sentry Dsn: Invalid port "+v);return!0}}function Ss(O){var v=typeof O=="string"?La(O):Dn(O);return Fa(v),v}function Ba(){var O=typeof WeakSet=="function",v=O?new WeakSet:[];function S(M){if(O)return v.has(M)?!0:(v.add(M),!1);for(var F=0;F<v.length;F++){var Y=v[F];if(Y===M)return!0}return v.push(M),!1}function P(M){if(O)v.delete(M);else for(var F=0;F<v.length;F++)if(v[F]===M){v.splice(F,1);break}}return[S,P]}function Ni(O,v,S){v===void 0&&(v=1/0),S===void 0&&(S=1/0);try{return Gn("",O,v,S)}catch(P){return{ERROR:"**non-serializable** ("+P+")"}}}function Nn(O,v,S){v===void 0&&(v=3),S===void 0&&(S=100*1024);var P=Ni(O,v);return Na(P)>S?Nn(O,v-1,S):P}function Gn(O,v,S,P,M){S===void 0&&(S=1/0),P===void 0&&(P=1/0),M===void 0&&(M=Ba());var F=W(M,2),Y=F[0],k=F[1],Q=v;if(Q&&typeof Q.toJSON=="function")try{return Q.toJSON()}catch(gt){}if(v===null||["number","boolean","string"].includes(typeof v)&&!Ce(v))return v;var j=Ia(O,v);if(!j.startsWith("[object "))return j;if(S===0)return j.replace("object ","");if(Y(v))return"[Circular ~]";var _=Array.isArray(v)?[]:{},it=0,nt=Et(v)||Nt(v)?ee(v):v;for(var ht in nt)if(!!Object.prototype.hasOwnProperty.call(nt,ht)){if(it>=P){_[ht]="[MaxProperties ~]";break}var ft=nt[ht];_[ht]=Gn(ht,ft,S-1,P,M),it+=1}return k(v),_}function Ia(O,v){try{return O==="domain"&&v&&typeof v=="object"&&v._events?"[Domain]":O==="domainEmitter"?"[DomainEmitter]":typeof __webpack_require__.g!="undefined"&&v===__webpack_require__.g?"[Global]":typeof window!="undefined"&&v===window?"[Window]":typeof document!="undefined"&&v===document?"[Document]":de(v)?"[SyntheticEvent]":typeof v=="number"&&v!==v?"[NaN]":v===void 0?"[undefined]":typeof v=="function"?"[Function: "+Ci(v)+"]":typeof v=="symbol"?"["+String(v)+"]":typeof v=="bigint"?"[BigInt: "+String(v)+"]":"[object "+Object.getPrototypeOf(v).constructor.name+"]"}catch(S){return"**non-serializable** ("+S+")"}}function Da(O){return~-encodeURI(O).split(/%..|./).length}function Na(O){return Da(JSON.stringify(O))}var zn=[];function Un(O){return O.reduce(function(v,S){return v.every(function(P){return S.name!==P.name})&&v.push(S),v},[])}function Ga(O){var v=O.defaultIntegrations&&ni(O.defaultIntegrations)||[],S=O.integrations,P=ni(Un(v));Array.isArray(S)?P=ni(P.filter(function(Y){return S.every(function(k){return k.name!==Y.name})}),Un(S)):typeof S=="function"&&(P=S(P),P=Array.isArray(P)?P:[P]);var M=P.map(function(Y){return Y.name}),F="Debug";return M.indexOf(F)!==-1&&P.push.apply(P,ni(P.splice(M.indexOf(F),1))),P}function za(O){zn.indexOf(O.name)===-1&&(O.setupOnce(qi,be),zn.push(O.name),we&&Ut.log("Integration installed: "+O.name))}function Ua(O){var v={};return Ga(O).forEach(function(S){v[S.name]=S,za(S)}),Ft(v,"initialized",!0),v}var Yn="Not capturing exception because it's already been captured.",Ya=function(){function O(v,S){this._integrations={},this._numProcessing=0,this._backend=new v(S),this._options=S,S.dsn&&(this._dsn=Ss(S.dsn))}return O.prototype.captureException=function(v,S,P){var M=this;if(us(v)){we&&Ut.log(Yn);return}var F=S&&S.event_id;return this._process(this._getBackend().eventFromException(v,S).then(function(Y){return M._captureEvent(Y,S,P)}).then(function(Y){F=Y})),F},O.prototype.captureMessage=function(v,S,P,M){var F=this,Y=P&&P.event_id,k=qt(v)?this._getBackend().eventFromMessage(String(v),S,P):this._getBackend().eventFromException(v,P);return this._process(k.then(function(Q){return F._captureEvent(Q,P,M)}).then(function(Q){Y=Q})),Y},O.prototype.captureEvent=function(v,S,P){if(S&&S.originalException&&us(S.originalException)){we&&Ut.log(Yn);return}var M=S&&S.event_id;return this._process(this._captureEvent(v,S,P).then(function(F){M=F})),M},O.prototype.captureSession=function(v){if(!this._isEnabled()){we&&Ut.warn("SDK not enabled, will not capture session.");return}typeof v.release!="string"?we&&Ut.warn("Discarded session because of missing or non-string release"):(this._sendSession(v),v.update({init:!1}))},O.prototype.getDsn=function(){return this._dsn},O.prototype.getOptions=function(){return this._options},O.prototype.getTransport=function(){return this._getBackend().getTransport()},O.prototype.flush=function(v){var S=this;return this._isClientDoneProcessing(v).then(function(P){return S.getTransport().close(v).then(function(M){return P&&M})})},O.prototype.close=function(v){var S=this;return this.flush(v).then(function(P){return S.getOptions().enabled=!1,P})},O.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=Ua(this._options))},O.prototype.getIntegration=function(v){try{return this._integrations[v.id]||null}catch(S){return we&&Ut.warn("Cannot retrieve integration "+v.id+" from the current Client"),null}},O.prototype._updateSessionFromEvent=function(v,S){var P,M,F=!1,Y=!1,k=S.exception&&S.exception.values;if(k){Y=!0;try{for(var Q=Xs(k),j=Q.next();!j.done;j=Q.next()){var _=j.value,it=_.mechanism;if(it&&it.handled===!1){F=!0;break}}}catch(ft){P={error:ft}}finally{try{j&&!j.done&&(M=Q.return)&&M.call(Q)}finally{if(P)throw P.error}}}var nt=v.status==="ok",ht=nt&&v.errors===0||nt&&F;ht&&(v.update(Te(Te({},F&&{status:"crashed"}),{errors:v.errors||Number(Y||F)})),this.captureSession(v))},O.prototype._sendSession=function(v){this._getBackend().sendSession(v)},O.prototype._isClientDoneProcessing=function(v){var S=this;return new si(function(P){var M=0,F=1,Y=setInterval(function(){S._numProcessing==0?(clearInterval(Y),P(!0)):(M+=F,v&&M>=v&&(clearInterval(Y),P(!1)))},F)})},O.prototype._getBackend=function(){return this._backend},O.prototype._isEnabled=function(){return this.getOptions().enabled!==!1&&this._dsn!==void 0},O.prototype._prepareEvent=function(v,S,P){var M=this,F=this.getOptions(),Y=F.normalizeDepth,k=Y===void 0?3:Y,Q=F.normalizeMaxBreadth,j=Q===void 0?1e3:Q,_=Te(Te({},v),{event_id:v.event_id||(P&&P.event_id?P.event_id:Ue()),timestamp:v.timestamp||(0,He.yW)()});this._applyClientOptions(_),this._applyIntegrationsMetadata(_);var it=S;P&&P.captureContext&&(it=Vi.clone(it).update(P.captureContext));var nt=Ye(_);return it&&(nt=it.applyToEvent(_,P)),nt.then(function(ht){return ht&&(ht.sdkProcessingMetadata=Te(Te({},ht.sdkProcessingMetadata),{normalizeDepth:Ni(k)+" ("+typeof k+")"})),typeof k=="number"&&k>0?M._normalizeEvent(ht,k,j):ht})},O.prototype._normalizeEvent=function(v,S,P){if(!v)return null;var M=Te(Te(Te(Te(Te({},v),v.breadcrumbs&&{breadcrumbs:v.breadcrumbs.map(function(F){return Te(Te({},F),F.data&&{data:Ni(F.data,S,P)})})}),v.user&&{user:Ni(v.user,S,P)}),v.contexts&&{contexts:Ni(v.contexts,S,P)}),v.extra&&{extra:Ni(v.extra,S,P)});return v.contexts&&v.contexts.trace&&(M.contexts.trace=v.contexts.trace),M.sdkProcessingMetadata=Te(Te({},M.sdkProcessingMetadata),{baseClientNormalized:!0}),M},O.prototype._applyClientOptions=function(v){var S=this.getOptions(),P=S.environment,M=S.release,F=S.dist,Y=S.maxValueLength,k=Y===void 0?250:Y;"environment"in v||(v.environment="environment"in S?P:"production"),v.release===void 0&&M!==void 0&&(v.release=M),v.dist===void 0&&F!==void 0&&(v.dist=F),v.message&&(v.message=q(v.message,k));var Q=v.exception&&v.exception.values&&v.exception.values[0];Q&&Q.value&&(Q.value=q(Q.value,k));var j=v.request;j&&j.url&&(j.url=q(j.url,k))},O.prototype._applyIntegrationsMetadata=function(v){var S=Object.keys(this._integrations);S.length>0&&(v.sdk=v.sdk||{},v.sdk.integrations=ni(v.sdk.integrations||[],S))},O.prototype._sendEvent=function(v){this._getBackend().sendEvent(v)},O.prototype._captureEvent=function(v,S,P){return this._processEvent(v,S,P).then(function(M){return M.event_id},function(M){we&&Ut.error(M)})},O.prototype._processEvent=function(v,S,P){var M=this,F=this.getOptions(),Y=F.beforeSend,k=F.sampleRate,Q=this.getTransport();function j(it,nt){Q.recordLostEvent&&Q.recordLostEvent(it,nt)}if(!this._isEnabled())return Di(new Pe("SDK not enabled, will not capture event."));var _=v.type==="transaction";return!_&&typeof k=="number"&&Math.random()>k?(j("sample_rate","event"),Di(new Pe("Discarding event because it's not included in the random sample (sampling rate = "+k+")"))):this._prepareEvent(v,P,S).then(function(it){if(it===null)throw j("event_processor",v.type||"event"),new Pe("An event processor returned null, will not send event.");var nt=S&&S.data&&S.data.__sentry__===!0;if(nt||_||!Y)return it;var ht=Y(it,S);return Xa(ht)}).then(function(it){if(it===null)throw j("before_send",v.type||"event"),new Pe("`beforeSend` returned `null`, will not send event.");var nt=P&&P.getSession&&P.getSession();return!_&&nt&&M._updateSessionFromEvent(nt,it),M._sendEvent(it),it}).then(null,function(it){throw it instanceof Pe?it:(M.captureException(it,{data:{__sentry__:!0},originalException:it}),new Pe(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: `+it))})},O.prototype._process=function(v){var S=this;this._numProcessing+=1,v.then(function(P){return S._numProcessing-=1,P},function(P){return S._numProcessing-=1,P})},O}();function Xa(O){var v="`beforeSend` method has to return `null` or a valid event.";if(Wt(O))return O.then(function(S){if(!(zt(S)||S===null))throw new Pe(v);return S},function(S){throw new Pe("beforeSend rejected with "+S)});if(!(zt(O)||O===null))throw new Pe(v);return O}var Xn="7",Ff=function(){function O(v,S,P){S===void 0&&(S={}),this.dsn=v,this._dsnObject=Ss(v),this.metadata=S,this._tunnel=P}return O.prototype.getDsn=function(){return this._dsnObject},O.prototype.forceEnvelope=function(){return!!this._tunnel},O.prototype.getBaseApiEndpoint=function(){return Ks(this._dsnObject)},O.prototype.getStoreEndpoint=function(){return Hn(this._dsnObject)},O.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return $s(this._dsnObject)},O.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return ss(this._dsnObject,this._tunnel)},O}();function Es(O,v,S){return{initDsn:O,metadata:v||{},dsn:Ss(O),tunnel:S}}function Ks(O){var v=O.protocol?O.protocol+":":"",S=O.port?":"+O.port:"";return v+"//"+O.host+S+(O.path?"/"+O.path:"")+"/api/"}function Wn(O,v){return""+Ks(O)+O.projectId+"/"+v+"/"}function Vn(O){return ne({sentry_key:O.publicKey,sentry_version:Xn})}function Hn(O){return Wn(O,"store")}function $s(O){return Hn(O)+"?"+Vn(O)}function Wa(O){return Wn(O,"envelope")}function ss(O,v){return v||Wa(O)+"?"+Vn(O)}function Bf(O,v,S){var P=["Sentry sentry_version="+Xn];return P.push("sentry_client="+v+"/"+S),P.push("sentry_key="+O.publicKey),O.pass&&P.push("sentry_secret="+O.pass),{"Content-Type":"application/json","X-Sentry-Auth":P.join(", ")}}function Va(O,v){var S=Ss(O),P=Ks(S)+"embed/error-page/",M="dsn="+is(S);for(var F in v)if(F!=="dsn")if(F==="user"){if(!v.user)continue;v.user.name&&(M+="&name="+encodeURIComponent(v.user.name)),v.user.email&&(M+="&email="+encodeURIComponent(v.user.email))}else M+="&"+encodeURIComponent(F)+"="+encodeURIComponent(v[F]);return P+"?"+M}function Cs(O,v){return v===void 0&&(v=[]),[O,v]}function If(O,v){var S=__read(O,2),P=S[0],M=S[1];return[P,__spread(M,[v])]}function Ha(O){var v=W(O,2),S=W(v[1],1),P=W(S[0],1),M=P[0];return M.type}function ws(O){var v=W(O,2),S=v[0],P=v[1],M=JSON.stringify(S);return P.reduce(function(F,Y){var k=W(Y,2),Q=k[0],j=k[1],_=qt(j)?String(j):JSON.stringify(j);return F+`
`+JSON.stringify(Q)+`
`+_},M)}function Js(O){if(!(!O.metadata||!O.metadata.sdk)){var v=O.metadata.sdk,S=v.name,P=v.version;return{name:S,version:P}}}function kn(O,v){return v&&(O.sdk=O.sdk||{},O.sdk.name=O.sdk.name||v.name,O.sdk.version=O.sdk.version||v.version,O.sdk.integrations=ni(O.sdk.integrations||[],v.integrations||[]),O.sdk.packages=ni(O.sdk.packages||[],v.packages||[])),O}function Zn(O,v){var S=Js(v),P=Te(Te({sent_at:new Date().toISOString()},S&&{sdk:S}),!!v.tunnel&&{dsn:is(v.dsn)}),M="aggregates"in O?"sessions":"session",F=[{type:M},O],Y=Cs(P,[F]);return[Y,M]}function ka(O,v){var S=Ws(Zn(O,v),2),P=S[0],M=S[1];return{body:ws(P),type:M,url:ss(v.dsn,v.tunnel)}}function Za(O,v){var S=Js(v),P=O.type||"event",M=(O.sdkProcessingMetadata||{}).transactionSampling,F=M||{},Y=F.method,k=F.rate;kn(O,v.metadata.sdk),O.tags=O.tags||{},O.extra=O.extra||{},O.sdkProcessingMetadata&&O.sdkProcessingMetadata.baseClientNormalized||(O.tags.skippedNormalization=!0,O.extra.normalizeDepth=O.sdkProcessingMetadata?O.sdkProcessingMetadata.normalizeDepth:"unset"),delete O.sdkProcessingMetadata;var Q=Te(Te({event_id:O.event_id,sent_at:new Date().toISOString()},S&&{sdk:S}),!!v.tunnel&&{dsn:is(v.dsn)}),j=[{type:P,sample_rates:[{id:Y,rate:k}]},O];return Cs(Q,[j])}function ja(O,v){var S=Js(v),P=O.type||"event",M=P==="transaction"||!!v.tunnel,F=(O.sdkProcessingMetadata||{}).transactionSampling,Y=F||{},k=Y.method,Q=Y.rate;kn(O,v.metadata.sdk),O.tags=O.tags||{},O.extra=O.extra||{},O.sdkProcessingMetadata&&O.sdkProcessingMetadata.baseClientNormalized||(O.tags.skippedNormalization=!0,O.extra.normalizeDepth=O.sdkProcessingMetadata?O.sdkProcessingMetadata.normalizeDepth:"unset"),delete O.sdkProcessingMetadata;var j;try{j=JSON.stringify(O)}catch(gt){O.tags.JSONStringifyError=!0,O.extra.JSONStringifyError=gt;try{j=JSON.stringify(Ni(O))}catch(yt){var _=yt;j=JSON.stringify({message:"JSON.stringify error after renormalization",extra:{message:_.message,stack:_.stack}})}}var it={body:j,type:P,url:M?ss(v.dsn,v.tunnel):$s(v.dsn)};if(M){var nt=Te(Te({event_id:O.event_id,sent_at:new Date().toISOString()},S&&{sdk:S}),!!v.tunnel&&{dsn:is(v.dsn)}),ht=[{type:P,sample_rates:[{id:k,rate:Q}]},it.body],ft=Cs(nt,[ht]);it.body=ws(ft)}return it}var Ka=function(){function O(){}return O.prototype.sendEvent=function(v){return Ye({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:"skipped"})},O.prototype.close=function(v){return Ye(!0)},O}(),$a=function(){function O(v){this._options=v,this._options.dsn||we&&Ut.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return O.prototype.eventFromException=function(v,S){throw new Pe("Backend has to implement `eventFromException` method")},O.prototype.eventFromMessage=function(v,S,P){throw new Pe("Backend has to implement `eventFromMessage` method")},O.prototype.sendEvent=function(v){if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var S=Es(this._options.dsn,this._options._metadata,this._options.tunnel),P=Za(v,S);this._newTransport.send(P).then(null,function(M){we&&Ut.error("Error while sending event:",M)})}else this._transport.sendEvent(v).then(null,function(M){we&&Ut.error("Error while sending event:",M)})},O.prototype.sendSession=function(v){if(!this._transport.sendSession){we&&Ut.warn("Dropping session because custom transport doesn't implement sendSession");return}if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var S=Es(this._options.dsn,this._options._metadata,this._options.tunnel),P=Ws(Zn(v,S),1),M=P[0];this._newTransport.send(M).then(null,function(F){we&&Ut.error("Error while sending session:",F)})}else this._transport.sendSession(v).then(null,function(F){we&&Ut.error("Error while sending session:",F)})},O.prototype.getTransport=function(){return this._transport},O.prototype._setupTransport=function(){return new Ka},O}(),ri;(function(O){O.Fatal="fatal",O.Error="error",O.Warning="warning",O.Log="log",O.Info="info",O.Debug="debug",O.Critical="critical"})(ri||(ri={}));var Df=null,Zi="?",Ja=10,Qa=20,qa=30,_a=40,to=50;function ns(O,v,S,P){var M={filename:O,function:v,in_app:!0};return S!==void 0&&(M.lineno=S),P!==void 0&&(M.colno=P),M}var eo=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,io=/\((\S*)(?::(\d+))(?::(\d+))\)/,so=function(O){var v=eo.exec(O);if(v){var S=v[2]&&v[2].indexOf("eval")===0;if(S){var P=io.exec(v[2]);P&&(v[2]=P[1],v[3]=P[2],v[4]=P[3])}var M=ki(jn(v[1]||Zi,v[2]),2),F=M[0],Y=M[1];return ns(Y,F,v[3]?+v[3]:void 0,v[4]?+v[4]:void 0)}},no=[qa,so],ro=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ao=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,oo=function(O){var v,S=ro.exec(O);if(S){var P=S[3]&&S[3].indexOf(" > eval")>-1;if(P){var M=ao.exec(S[3]);M&&(S[1]=S[1]||"eval",S[3]=M[1],S[4]=M[2],S[5]="")}var F=S[3],Y=S[1]||Zi;return v=ki(jn(Y,F),2),Y=v[0],F=v[1],ns(F,Y,S[4]?+S[4]:void 0,S[5]?+S[5]:void 0)}},ho=[to,oo],lo=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,uo=function(O){var v=lo.exec(O);return v?ns(v[2],v[1]||Zi,+v[3],v[4]?+v[4]:void 0):void 0},fo=[_a,uo],co=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,vo=function(O){var v=co.exec(O);return v?ns(v[2],v[3]||Zi,+v[1]):void 0},po=[Ja,vo],mo=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,go=function(O){var v=mo.exec(O);return v?ns(v[5],v[3]||v[4]||Zi,+v[1],+v[2]):void 0},xo=[Qa,go],jn=function(O,v){var S=O.indexOf("safari-extension")!==-1,P=O.indexOf("safari-web-extension")!==-1;return S||P?[O.indexOf("@")!==-1?O.split("@")[0]:Zi,S?"safari-extension:"+v:"safari-web-extension:"+v]:[O,v]};function Kn(O){var v=qs(O),S={type:O&&O.name,value:Eo(O)};return v.length&&(S.stacktrace={frames:v}),S.type===void 0&&S.value===""&&(S.value="Unrecoverable error caught"),S}function yo(O,v,S){var P={exception:{values:[{type:Nt(O)?O.constructor.name:S?"UnhandledRejection":"Error",value:"Non-Error "+(S?"promise rejection":"exception")+" captured with keys: "+ze(O)}]},extra:{__serialized__:Nn(O)}};if(v){var M=qs(v);M.length&&(P.stacktrace={frames:M})}return P}function Qs(O){return{exception:{values:[Kn(O)]}}}function qs(O){var v=O.stacktrace||O.stack||"",S=So(O);try{return ha(po,xo,no,fo,ho)(v,S)}catch(P){}return[]}var To=/Minified React error #\d+;/i;function So(O){if(O){if(typeof O.framesToPop=="number")return O.framesToPop;if(To.test(O.message))return 1}return 0}function Eo(O){var v=O&&O.message;return v?v.error&&typeof v.error.message=="string"?v.error.message:v:"No error message"}function Co(O,v,S){var P=v&&v.syntheticException||void 0,M=_s(O,P,S);return Ve(M),M.level=ri.Error,v&&v.event_id&&(M.event_id=v.event_id),Ye(M)}function wo(O,v,S,P){v===void 0&&(v=ri.Info);var M=S&&S.syntheticException||void 0,F=tn(O,M,P);return F.level=v,S&&S.event_id&&(F.event_id=S.event_id),Ye(F)}function _s(O,v,S,P){var M;if(It(O)&&O.error){var F=O;return Qs(F.error)}if(Pt(O)||Rt(O)){var Y=O;if("stack"in O)M=Qs(O);else{var k=Y.name||(Pt(Y)?"DOMError":"DOMException"),Q=Y.message?k+": "+Y.message:k;M=tn(Q,v,S),ii(M,Q)}return"code"in Y&&(M.tags=ye(ye({},M.tags),{"DOMException.code":""+Y.code})),M}if(Et(O))return Qs(O);if(zt(O)||Nt(O)){var j=O;return M=yo(j,v,P),Ve(M,{synthetic:!0}),M}return M=tn(O,v,S),ii(M,""+O,void 0),Ve(M,{synthetic:!0}),M}function tn(O,v,S){var P={message:O};if(S&&v){var M=qs(v);M.length&&(P.stacktrace={frames:M})}return P}function $n(O){var v=[];function S(){return O===void 0||v.length<O}function P(Y){return v.splice(v.indexOf(Y),1)[0]}function M(Y){if(!S())return Di(new Pe("Not adding Promise due to buffer limit reached."));var k=Y();return v.indexOf(k)===-1&&v.push(k),k.then(function(){return P(k)}).then(null,function(){return P(k).then(null,function(){})}),k}function F(Y){return new si(function(k,Q){var j=v.length;if(!j)return k(!0);var _=setTimeout(function(){Y&&Y>0&&k(!1)},Y);v.forEach(function(it){Ye(it).then(function(){--j||(clearTimeout(_),k(!0))},Q)})})}return{$:v,add:M,drain:F}}var Oo=60*1e3;function Po(O,v){v===void 0&&(v=Date.now());var S=parseInt(""+O,10);if(!isNaN(S))return S*1e3;var P=Date.parse(""+O);return isNaN(P)?Oo:P-v}function en(O,v){return O[v]||O.all||0}function Jn(O,v,S){return S===void 0&&(S=Date.now()),en(O,v)>S}function Qn(O,v,S){var P,M,F,Y;S===void 0&&(S=Date.now());var k=D({},O),Q=v["x-sentry-rate-limits"],j=v["retry-after"];if(Q)try{for(var _=U(Q.trim().split(",")),it=_.next();!it.done;it=_.next()){var nt=it.value,ht=nt.split(":",2),ft=parseInt(ht[0],10),gt=(isNaN(ft)?60:ft)*1e3;if(!ht[1])k.all=S+gt;else try{for(var yt=(F=void 0,U(ht[1].split(";"))),Ot=yt.next();!Ot.done;Ot=yt.next()){var bt=Ot.value;k[bt]=S+gt}}catch(At){F={error:At}}finally{try{Ot&&!Ot.done&&(Y=yt.return)&&Y.call(yt)}finally{if(F)throw F.error}}}}catch(At){P={error:At}}finally{try{it&&!it.done&&(M=_.return)&&M.call(_)}finally{if(P)throw P.error}}else j&&(k.all=S+Po(j,S));return k}function qn(O){return O>=200&&O<300?"success":O===429?"rate_limit":O>=400&&O<500?"invalid":O>=500?"failed":"unknown"}var Nf="error",Gf="transaction",zf="attachment",Uf="session",Ao=30;function _n(O,v,S){S===void 0&&(S=$n(O.bufferSize||Ao));var P={},M=function(Y){return S.drain(Y)};function F(Y){var k=Ha(Y),Q=k==="event"?"error":k,j={category:Q,body:ws(Y)};if(Jn(P,Q))return Di({status:"rate_limit",reason:tr(P,Q)});var _=function(){return v(j).then(function(it){var nt=it.body,ht=it.headers,ft=it.reason,gt=it.statusCode,yt=qn(gt);return ht&&(P=Qn(P,ht)),yt==="success"?Ye({status:yt,reason:ft}):Di({status:yt,reason:ft||nt||(yt==="rate_limit"?tr(P,Q):"Unknown transport error")})})};return S.add(_)}return{send:F,flush:M}}function tr(O,v){return"Too many "+v+" requests, backing off until: "+new Date(en(O,v)).toISOString()}function Ro(O){O.then(null,function(v){console.error(v)})}var Xe=typeof __SENTRY_DEBUG__=="undefined"?!0:__SENTRY_DEBUG__,je=(0,Tt.R)(),Os;function sn(){if(Os)return Os;if(Hs(je.fetch))return Os=je.fetch.bind(je);var O=je.document,v=je.fetch;if(O&&typeof O.createElement=="function")try{var S=O.createElement("iframe");S.hidden=!0,O.head.appendChild(S);var P=S.contentWindow;P&&P.fetch&&(v=P.fetch),O.head.removeChild(S)}catch(M){Xe&&Ut.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",M)}return Os=v.bind(je)}function Mo(O,v){var S=Object.prototype.toString.call(je&&je.navigator)==="[object Navigator]",P=S&&typeof je.navigator.sendBeacon=="function";if(P){var M=je.navigator.sendBeacon.bind(je.navigator);return M(O,v)}if(ps()){var F=sn();return Ro(F(O,{body:v,method:"POST",credentials:"omit",keepalive:!0}))}}function bo(O,v){v===void 0&&(v=sn());function S(P){var M=ye({body:P.body,method:"POST",referrerPolicy:"origin"},O.requestOptions);return v(O.url,M).then(function(F){return F.text().then(function(Y){return{body:Y,headers:{"x-sentry-rate-limits":F.headers.get("X-Sentry-Rate-Limits"),"retry-after":F.headers.get("Retry-After")},reason:F.statusText,statusCode:F.status}})})}return _n({bufferSize:O.bufferSize},S)}function Lo(O,v,S){var P=[{type:"client_report"},{timestamp:S||(0,He.yW)(),discarded_events:O}];return Cs(v?{dsn:v}:{},[P])}function nn(O){var v=O;return v==="event"?"error":v}var rn=(0,Tt.R)(),er=function(){function O(v){var S=this;this.options=v,this._buffer=$n(30),this._rateLimits={},this._outcomes={},this._api=Es(v.dsn,v._metadata,v.tunnel),this.url=$s(this._api.dsn),this.options.sendClientReports&&rn.document&&rn.document.addEventListener("visibilitychange",function(){rn.document.visibilityState==="hidden"&&S._flushOutcomes()})}return O.prototype.sendEvent=function(v){return this._sendRequest(ja(v,this._api),v)},O.prototype.sendSession=function(v){return this._sendRequest(ka(v,this._api),v)},O.prototype.close=function(v){return this._buffer.drain(v)},O.prototype.recordLostEvent=function(v,S){var P;if(!!this.options.sendClientReports){var M=nn(S)+":"+v;Xe&&Ut.log("Adding outcome: "+M),this._outcomes[M]=(P=this._outcomes[M],(P!=null?P:0)+1)}},O.prototype._flushOutcomes=function(){if(!!this.options.sendClientReports){var v=this._outcomes;if(this._outcomes={},!Object.keys(v).length){Xe&&Ut.log("No outcomes to flush");return}Xe&&Ut.log(`Flushing outcomes:
`+JSON.stringify(v,null,2));var S=ss(this._api.dsn,this._api.tunnel),P=Object.keys(v).map(function(F){var Y=ki(F.split(":"),2),k=Y[0],Q=Y[1];return{reason:Q,category:k,quantity:v[F]}}),M=Lo(P,this._api.tunnel&&is(this._api.dsn));try{Mo(S,ws(M))}catch(F){Xe&&Ut.error(F)}}},O.prototype._handleResponse=function(v){var S=v.requestType,P=v.response,M=v.headers,F=v.resolve,Y=v.reject,k=qn(P.status);if(this._rateLimits=Qn(this._rateLimits,M),this._isRateLimited(S)&&Xe&&Ut.warn("Too many "+S+" requests, backing off until: "+this._disabledUntil(S)),k==="success"){F({status:k});return}Y(P)},O.prototype._disabledUntil=function(v){var S=nn(v);return new Date(en(this._rateLimits,S))},O.prototype._isRateLimited=function(v){var S=nn(v);return Jn(this._rateLimits,S)},O}(),Fo=function(O){ys(v,O);function v(S,P){P===void 0&&(P=sn());var M=O.call(this,S)||this;return M._fetch=P,M}return v.prototype._sendRequest=function(S,P){var M=this;if(this._isRateLimited(S.type))return this.recordLostEvent("ratelimit_backoff",S.type),Promise.reject({event:P,type:S.type,reason:"Transport for "+S.type+" requests locked till "+this._disabledUntil(S.type)+" due to too many requests.",status:429});var F={body:S.body,method:"POST",referrerPolicy:fa()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(F,this.options.fetchParameters),this.options.headers!==void 0&&(F.headers=this.options.headers),this._buffer.add(function(){return new si(function(Y,k){M._fetch(S.url,F).then(function(Q){var j={"x-sentry-rate-limits":Q.headers.get("X-Sentry-Rate-Limits"),"retry-after":Q.headers.get("Retry-After")};M._handleResponse({requestType:S.type,response:Q,headers:j,resolve:Y,reject:k})}).catch(k)})}).then(void 0,function(Y){throw Y instanceof Pe?M.recordLostEvent("queue_overflow",S.type):M.recordLostEvent("network_error",S.type),Y})},v}(er),Bo=4;function Io(O){function v(S){return new si(function(P,M){var F=new XMLHttpRequest;F.onreadystatechange=function(){if(F.readyState===Bo){var k={body:F.response,headers:{"x-sentry-rate-limits":F.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":F.getResponseHeader("Retry-After")},reason:F.statusText,statusCode:F.status};P(k)}},F.open("POST",O.url);for(var Y in O.headers)Object.prototype.hasOwnProperty.call(O.headers,Y)&&F.setRequestHeader(Y,O.headers[Y]);F.send(S.body)})}return _n({bufferSize:O.bufferSize},v)}var Do=function(O){ys(v,O);function v(){return O!==null&&O.apply(this,arguments)||this}return v.prototype._sendRequest=function(S,P){var M=this;return this._isRateLimited(S.type)?(this.recordLostEvent("ratelimit_backoff",S.type),Promise.reject({event:P,type:S.type,reason:"Transport for "+S.type+" requests locked till "+this._disabledUntil(S.type)+" due to too many requests.",status:429})):this._buffer.add(function(){return new si(function(F,Y){var k=new XMLHttpRequest;k.onreadystatechange=function(){if(k.readyState===4){var j={"x-sentry-rate-limits":k.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":k.getResponseHeader("Retry-After")};M._handleResponse({requestType:S.type,response:k,headers:j,resolve:F,reject:Y})}},k.open("POST",S.url);for(var Q in M.options.headers)Object.prototype.hasOwnProperty.call(M.options.headers,Q)&&k.setRequestHeader(Q,M.options.headers[Q]);k.send(S.body)})}).then(void 0,function(F){throw F instanceof Pe?M.recordLostEvent("queue_overflow",S.type):M.recordLostEvent("network_error",S.type),F})},v}(er),No=function(O){ys(v,O);function v(){return O!==null&&O.apply(this,arguments)||this}return v.prototype.eventFromException=function(S,P){return Co(S,P,this._options.attachStacktrace)},v.prototype.eventFromMessage=function(S,P,M){return P===void 0&&(P=ri.Info),wo(S,P,M,this._options.attachStacktrace)},v.prototype._setupTransport=function(){if(!this._options.dsn)return O.prototype._setupTransport.call(this);var S=ye(ye({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata}),P=Es(S.dsn,S._metadata,S.tunnel),M=ss(P.dsn,P.tunnel);if(this._options.transport)return new this._options.transport(S);if(ps()){var F=ye({},S.fetchParameters);return this._newTransport=bo({requestOptions:F,url:M}),new Fo(S)}return this._newTransport=Io({url:M,headers:S.headers}),new Do(S)},v}($a);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var an=function(O,v){return an=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,P){S.__proto__=P}||function(S,P){for(var M in P)P.hasOwnProperty(M)&&(S[M]=P[M])},an(O,v)};function Yf(O,v){an(O,v);function S(){this.constructor=O}O.prototype=v===null?Object.create(v):(S.prototype=v.prototype,new S)}var ir=function(){return ir=Object.assign||function(v){for(var S,P=1,M=arguments.length;P<M;P++){S=arguments[P];for(var F in S)Object.prototype.hasOwnProperty.call(S,F)&&(v[F]=S[F])}return v},ir.apply(this,arguments)};function Xf(O,v){var S={};for(var P in O)Object.prototype.hasOwnProperty.call(O,P)&&v.indexOf(P)<0&&(S[P]=O[P]);if(O!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,P=Object.getOwnPropertySymbols(O);M<P.length;M++)v.indexOf(P[M])<0&&Object.prototype.propertyIsEnumerable.call(O,P[M])&&(S[P[M]]=O[P[M]]);return S}function Wf(O,v,S,P){var M=arguments.length,F=M<3?v:P===null?P=Object.getOwnPropertyDescriptor(v,S):P,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(O,v,S,P);else for(var k=O.length-1;k>=0;k--)(Y=O[k])&&(F=(M<3?Y(F):M>3?Y(v,S,F):Y(v,S))||F);return M>3&&F&&Object.defineProperty(v,S,F),F}function Vf(O,v){return function(S,P){v(S,P,O)}}function Hf(O,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(O,v)}function kf(O,v,S,P){function M(F){return F instanceof S?F:new S(function(Y){Y(F)})}return new(S||(S=Promise))(function(F,Y){function k(_){try{j(P.next(_))}catch(it){Y(it)}}function Q(_){try{j(P.throw(_))}catch(it){Y(it)}}function j(_){_.done?F(_.value):M(_.value).then(k,Q)}j((P=P.apply(O,v||[])).next())})}function Zf(O,v){var S={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},P,M,F,Y;return Y={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function k(j){return function(_){return Q([j,_])}}function Q(j){if(P)throw new TypeError("Generator is already executing.");for(;S;)try{if(P=1,M&&(F=j[0]&2?M.return:j[0]?M.throw||((F=M.return)&&F.call(M),0):M.next)&&!(F=F.call(M,j[1])).done)return F;switch(M=0,F&&(j=[j[0]&2,F.value]),j[0]){case 0:case 1:F=j;break;case 4:return S.label++,{value:j[1],done:!1};case 5:S.label++,M=j[1],j=[0];continue;case 7:j=S.ops.pop(),S.trys.pop();continue;default:if(F=S.trys,!(F=F.length>0&&F[F.length-1])&&(j[0]===6||j[0]===2)){S=0;continue}if(j[0]===3&&(!F||j[1]>F[0]&&j[1]<F[3])){S.label=j[1];break}if(j[0]===6&&S.label<F[1]){S.label=F[1],F=j;break}if(F&&S.label<F[2]){S.label=F[2],S.ops.push(j);break}F[2]&&S.ops.pop(),S.trys.pop();continue}j=v.call(O,S)}catch(_){j=[6,_],M=0}finally{P=F=0}if(j[0]&5)throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}}function jf(O,v,S,P){P===void 0&&(P=S),O[P]=v[S]}function Kf(O,v){for(var S in O)S!=="default"&&!v.hasOwnProperty(S)&&(v[S]=O[S])}function sr(O){var v=typeof Symbol=="function"&&Symbol.iterator,S=v&&O[v],P=0;if(S)return S.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&P>=O.length&&(O=void 0),{value:O&&O[P++],done:!O}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")}function Go(O,v){var S=typeof Symbol=="function"&&O[Symbol.iterator];if(!S)return O;var P=S.call(O),M,F=[],Y;try{for(;(v===void 0||v-- >0)&&!(M=P.next()).done;)F.push(M.value)}catch(k){Y={error:k}}finally{try{M&&!M.done&&(S=P.return)&&S.call(P)}finally{if(Y)throw Y.error}}return F}function zo(){for(var O=[],v=0;v<arguments.length;v++)O=O.concat(Go(arguments[v]));return O}function $f(){for(var O=0,v=0,S=arguments.length;v<S;v++)O+=arguments[v].length;for(var P=Array(O),M=0,v=0;v<S;v++)for(var F=arguments[v],Y=0,k=F.length;Y<k;Y++,M++)P[M]=F[Y];return P}function Ps(O){return this instanceof Ps?(this.v=O,this):new Ps(O)}function Jf(O,v,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var P=S.apply(O,v||[]),M,F=[];return M={},Y("next"),Y("throw"),Y("return"),M[Symbol.asyncIterator]=function(){return this},M;function Y(nt){P[nt]&&(M[nt]=function(ht){return new Promise(function(ft,gt){F.push([nt,ht,ft,gt])>1||k(nt,ht)})})}function k(nt,ht){try{Q(P[nt](ht))}catch(ft){it(F[0][3],ft)}}function Q(nt){nt.value instanceof Ps?Promise.resolve(nt.value.v).then(j,_):it(F[0][2],nt)}function j(nt){k("next",nt)}function _(nt){k("throw",nt)}function it(nt,ht){nt(ht),F.shift(),F.length&&k(F[0][0],F[0][1])}}function Qf(O){var v,S;return v={},P("next"),P("throw",function(M){throw M}),P("return"),v[Symbol.iterator]=function(){return this},v;function P(M,F){v[M]=O[M]?function(Y){return(S=!S)?{value:Ps(O[M](Y)),done:M==="return"}:F?F(Y):Y}:F}}function qf(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=O[Symbol.asyncIterator],S;return v?v.call(O):(O=typeof sr=="function"?sr(O):O[Symbol.iterator](),S={},P("next"),P("throw"),P("return"),S[Symbol.asyncIterator]=function(){return this},S);function P(F){S[F]=O[F]&&function(Y){return new Promise(function(k,Q){Y=O[F](Y),M(k,Q,Y.done,Y.value)})}}function M(F,Y,k,Q){Promise.resolve(Q).then(function(j){F({value:j,done:k})},Y)}}function _f(O,v){return Object.defineProperty?Object.defineProperty(O,"raw",{value:v}):O.raw=v,O}function tc(O){if(O&&O.__esModule)return O;var v={};if(O!=null)for(var S in O)Object.hasOwnProperty.call(O,S)&&(v[S]=O[S]);return v.default=O,v}function ec(O){return O&&O.__esModule?O:{default:O}}function ic(O,v){if(!v.has(O))throw new TypeError("attempted to get private field on non-instance");return v.get(O)}function sc(O,v,S){if(!v.has(O))throw new TypeError("attempted to set private field on non-instance");return v.set(O,S),S}function Be(O){for(var v=[],S=1;S<arguments.length;S++)v[S-1]=arguments[S];var P=be();if(P&&P[O])return P[O].apply(P,zo(v));throw new Error("No hub defined or "+O+" was not found on the hub, please open a bug report.")}function Uo(O,v){var S=new Error("Sentry syntheticException");return Be("captureException",O,{captureContext:v,originalException:O,syntheticException:S})}function nc(O,v){var S=new Error(O),P=typeof v=="string"?v:void 0,M=typeof v!="string"?{captureContext:v}:void 0;return Be("captureMessage",O,P,__assign({originalException:O,syntheticException:S},M))}function rc(O){return Be("captureEvent",O)}function ac(O){Be("configureScope",O)}function oc(O){Be("addBreadcrumb",O)}function hc(O,v){Be("setContext",O,v)}function lc(O){Be("setExtras",O)}function uc(O){Be("setTags",O)}function fc(O,v){Be("setExtra",O,v)}function cc(O,v){Be("setTag",O,v)}function dc(O){Be("setUser",O)}function Yo(O){Be("withScope",O)}function vc(O){for(var v=[],S=1;S<arguments.length;S++)v[S-1]=arguments[S];Be.apply(void 0,__spread(["_invokeClient",O],v))}function pc(O,v){return Be("startTransaction",__assign({},O),v)}var As=(0,Tt.R)(),on=0;function nr(){return on>0}function Xo(){on+=1,setTimeout(function(){on-=1})}function ji(O,v,S){if(v===void 0&&(v={}),typeof O!="function")return O;try{var P=O.__sentry_wrapped__;if(P)return P;if(Ht(O))return O}catch(k){return O}var M=function(){var k=Array.prototype.slice.call(arguments);try{S&&typeof S=="function"&&S.apply(this,arguments);var Q=k.map(function(j){return ji(j,v)});return O.apply(this,Q)}catch(j){throw Xo(),Yo(function(_){_.addEventProcessor(function(it){return v.mechanism&&(ii(it,void 0,void 0),Ve(it,v.mechanism)),it.extra=ye(ye({},it.extra),{arguments:k}),it}),Uo(j)}),j}};try{for(var F in O)Object.prototype.hasOwnProperty.call(O,F)&&(M[F]=O[F])}catch(k){}Yt(M,O),Ft(O,"__sentry_wrapped__",M);try{var Y=Object.getOwnPropertyDescriptor(M,"name");Y.configurable&&Object.defineProperty(M,"name",{get:function(){return O.name}})}catch(k){}return M}function Wo(O){if(O===void 0&&(O={}),!!As.document){if(!O.eventId){Xe&&Ut.error("Missing eventId option in showReportDialog call");return}if(!O.dsn){Xe&&Ut.error("Missing dsn option in showReportDialog call");return}var v=As.document.createElement("script");v.async=!0,v.src=Va(O.dsn,O),O.onLoad&&(v.onload=O.onLoad);var S=As.document.head||As.document.body;S&&S.appendChild(v)}}var Vo=["fatal","error","warning","log","info","debug","critical"];function Ho(O){return Vo.indexOf(O)!==-1}function ko(O){return O==="warn"?ri.Warning:Ho(O)?O:ri.Log}var rr=function(){function O(v){this.name=O.id,this._options=ye({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},v)}return O.prototype.addSentryBreadcrumb=function(v){!this._options.sentry||be().addBreadcrumb({category:"sentry."+(v.type==="transaction"?"transaction":"event"),event_id:v.event_id,level:v.level,message:Fe(v)},{event:v})},O.prototype.setupOnce=function(){this._options.console&&wi("console",jo),this._options.dom&&wi("dom",Zo(this._options.dom)),this._options.xhr&&wi("xhr",Ko),this._options.fetch&&wi("fetch",$o),this._options.history&&wi("history",Jo)},O.id="Breadcrumbs",O}();function Zo(O){function v(S){var P,M=typeof O=="object"?O.serializeAttribute:void 0;typeof M=="string"&&(M=[M]);try{P=S.event.target?pe(S.event.target,M):pe(S.event,M)}catch(F){P="<unknown>"}P.length!==0&&be().addBreadcrumb({category:"ui."+S.name,message:P},{event:S.event,name:S.name,global:S.global})}return v}function jo(O){var v={category:"console",data:{arguments:O.args,logger:"console"},level:ko(O.level),message:pt(O.args," ")};if(O.level==="assert")if(O.args[0]===!1)v.message="Assertion failed: "+(pt(O.args.slice(1)," ")||"console.assert"),v.data.arguments=O.args.slice(1);else return;be().addBreadcrumb(v,{input:O.args,level:O.level})}function Ko(O){if(O.endTimestamp){if(O.xhr.__sentry_own_request__)return;var v=O.xhr.__sentry_xhr__||{},S=v.method,P=v.url,M=v.status_code,F=v.body;be().addBreadcrumb({category:"xhr",data:{method:S,url:P,status_code:M},type:"http"},{xhr:O.xhr,input:F});return}}function $o(O){!O.endTimestamp||O.fetchData.url.match(/sentry_key/)&&O.fetchData.method==="POST"||(O.error?be().addBreadcrumb({category:"fetch",data:O.fetchData,level:ri.Error,type:"http"},{data:O.error,input:O.args}):be().addBreadcrumb({category:"fetch",data:ye(ye({},O.fetchData),{status_code:O.response.status}),type:"http"},{input:O.args,response:O.response}))}function Jo(O){var v=(0,Tt.R)(),S=O.from,P=O.to,M=ei(v.location.href),F=ei(S),Y=ei(P);F.path||(F=M),M.protocol===Y.protocol&&M.host===Y.host&&(P=Y.relative),M.protocol===F.protocol&&M.host===F.host&&(S=F.relative),be().addBreadcrumb({category:"navigation",data:{from:S,to:P}})}var Qo=function(O){ys(v,O);function v(S){S===void 0&&(S={});var P=this;return S._metadata=S._metadata||{},S._metadata.sdk=S._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:In}],version:In},P=O.call(this,No,S)||this,P}return v.prototype.showReportDialog=function(S){S===void 0&&(S={});var P=(0,Tt.R)().document;if(!!P){if(!this._isEnabled()){Xe&&Ut.error("Trying to call showReportDialog with Sentry Client disabled");return}Wo(ye(ye({},S),{dsn:S.dsn||this.getDsn()}))}},v.prototype._prepareEvent=function(S,P,M){return S.platform=S.platform||"javascript",O.prototype._prepareEvent.call(this,S,P,M)},v.prototype._sendEvent=function(S){var P=this.getIntegration(rr);P&&P.addSentryBreadcrumb(S),O.prototype._sendEvent.call(this,S)},v}(Ya),qo=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],_o=function(){function O(v){this.name=O.id,this._options=ye({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},v)}return O.prototype.setupOnce=function(){var v=(0,Tt.R)();this._options.setTimeout&&wt(v,"setTimeout",ar),this._options.setInterval&&wt(v,"setInterval",ar),this._options.requestAnimationFrame&&wt(v,"requestAnimationFrame",th),this._options.XMLHttpRequest&&"XMLHttpRequest"in v&&wt(XMLHttpRequest.prototype,"send",eh);var S=this._options.eventTarget;if(S){var P=Array.isArray(S)?S:qo;P.forEach(ih)}},O.id="TryCatch",O}();function ar(O){return function(){for(var v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];var P=v[0];return v[0]=ji(P,{mechanism:{data:{function:Ci(O)},handled:!0,type:"instrument"}}),O.apply(this,v)}}function th(O){return function(v){return O.apply(this,[ji(v,{mechanism:{data:{function:"requestAnimationFrame",handler:Ci(O)},handled:!0,type:"instrument"}})])}}function eh(O){return function(){for(var v=[],S=0;S<arguments.length;S++)v[S]=arguments[S];var P=this,M=["onload","onerror","onprogress","onreadystatechange"];return M.forEach(function(F){F in P&&typeof P[F]=="function"&&wt(P,F,function(Y){var k={mechanism:{data:{function:F,handler:Ci(Y)},handled:!0,type:"instrument"}},Q=Ht(Y);return Q&&(k.mechanism.data.handler=Ci(Q)),ji(Y,k)})}),O.apply(this,v)}}function ih(O){var v=(0,Tt.R)(),S=v[O]&&v[O].prototype;!S||!S.hasOwnProperty||!S.hasOwnProperty("addEventListener")||(wt(S,"addEventListener",function(P){return function(M,F,Y){try{typeof F.handleEvent=="function"&&(F.handleEvent=ji(F.handleEvent.bind(F),{mechanism:{data:{function:"handleEvent",handler:Ci(F),target:O},handled:!0,type:"instrument"}}))}catch(k){}return P.apply(this,[M,ji(F,{mechanism:{data:{function:"addEventListener",handler:Ci(F),target:O},handled:!0,type:"instrument"}}),Y])}}),wt(S,"removeEventListener",function(P){return function(M,F,Y){var k=F;try{var Q=k&&k.__sentry_wrapped__;Q&&P.call(this,M,Q,Y)}catch(j){}return P.call(this,M,k,Y)}}))}var hn=function(){function O(v){this.name=O.id,this._installFunc={onerror:sh,onunhandledrejection:nh},this._options=ye({onerror:!0,onunhandledrejection:!0},v)}return O.prototype.setupOnce=function(){Error.stackTraceLimit=50;var v=this._options;for(var S in v){var P=this._installFunc[S];P&&v[S]&&(oh(S),P(),this._installFunc[S]=void 0)}},O.id="GlobalHandlers",O}();function sh(){wi("error",function(O){var v=ki(lr(),2),S=v[0],P=v[1];if(!!S.getIntegration(hn)){var M=O.msg,F=O.url,Y=O.line,k=O.column,Q=O.error;if(!(nr()||Q&&Q.__sentry_own_request__)){var j=Q===void 0&&Jt(M)?ah(M,F,Y,k):or(_s(Q||M,void 0,P,!1),F,Y,k);j.level=ri.Error,hr(S,Q,j,"onerror")}}})}function nh(){wi("unhandledrejection",function(O){var v=ki(lr(),2),S=v[0],P=v[1];if(!!S.getIntegration(hn)){var M=O;try{"reason"in O?M=O.reason:"detail"in O&&"reason"in O.detail&&(M=O.detail.reason)}catch(Y){}if(nr()||M&&M.__sentry_own_request__)return!0;var F=qt(M)?rh(M):_s(M,void 0,P,!0);F.level=ri.Error,hr(S,M,F,"onunhandledrejection")}})}function rh(O){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(O)}]}}}function ah(O,v,S,P){var M=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,F=It(O)?O.message:O,Y="Error",k=F.match(M);k&&(Y=k[1],F=k[2]);var Q={exception:{values:[{type:Y,value:F}]}};return or(Q,v,S,P)}function or(O,v,S,P){var M=O.exception=O.exception||{},F=M.values=M.values||[],Y=F[0]=F[0]||{},k=Y.stacktrace=Y.stacktrace||{},Q=k.frames=k.frames||[],j=isNaN(parseInt(P,10))?void 0:P,_=isNaN(parseInt(S,10))?void 0:S,it=Jt(v)&&v.length>0?v:Oe();return Q.length===0&&Q.push({colno:j,filename:it,function:"?",in_app:!0,lineno:_}),O}function oh(O){Xe&&Ut.log("Global Handler attached: "+O)}function hr(O,v,S,P){Ve(S,{handled:!1,type:P}),O.captureEvent(S,{originalException:v})}function lr(){var O=be(),v=O.getClient(),S=v&&v.getOptions().attachStacktrace;return[O,S]}var hh="cause",lh=5,uh=function(){function O(v){v===void 0&&(v={}),this.name=O.id,this._key=v.key||hh,this._limit=v.limit||lh}return O.prototype.setupOnce=function(){qi(function(v,S){var P=be().getIntegration(O);return P?fh(P._key,P._limit,v,S):v})},O.id="LinkedErrors",O}();function fh(O,v,S,P){if(!S.exception||!S.exception.values||!P||!ve(P.originalException,Error))return S;var M=ur(v,P.originalException,O);return S.exception.values=Bn(M,S.exception.values),S}function ur(O,v,S,P){if(P===void 0&&(P=[]),!ve(v[S],Error)||P.length+1>=O)return P;var M=Kn(v[S]);return ur(O,v[S],S,Bn([M],P))}var ch=function(){function O(){this.name=O.id}return O.prototype.setupOnce=function(v,S){v(function(P){var M=S().getIntegration(O);if(M){try{if(dh(P,M._previousEvent))return Xe&&Ut.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(F){return M._previousEvent=P}return M._previousEvent=P}return P})},O.id="Dedupe",O}();function dh(O,v){return v?!!(vh(O,v)||ph(O,v)):!1}function vh(O,v){var S=O.message,P=v.message;return!(!S&&!P||S&&!P||!S&&P||S!==P||!cr(O,v)||!fr(O,v))}function ph(O,v){var S=dr(v),P=dr(O);return!(!S||!P||S.type!==P.type||S.value!==P.value||!cr(O,v)||!fr(O,v))}function fr(O,v){var S=vr(O),P=vr(v);if(!S&&!P)return!0;if(S&&!P||!S&&P||(S=S,P=P,P.length!==S.length))return!1;for(var M=0;M<P.length;M++){var F=P[M],Y=S[M];if(F.filename!==Y.filename||F.lineno!==Y.lineno||F.colno!==Y.colno||F.function!==Y.function)return!1}return!0}function cr(O,v){var S=O.fingerprint,P=v.fingerprint;if(!S&&!P)return!0;if(S&&!P||!S&&P)return!1;S=S,P=P;try{return S.join("")===P.join("")}catch(M){return!1}}function dr(O){return O.exception&&O.exception.values&&O.exception.values[0]}function vr(O){var v=O.exception;if(v)try{return v.values[0].stacktrace.frames}catch(S){return}else if(O.stacktrace)return O.stacktrace.frames}var Gi=(0,Tt.R)(),mh=function(){function O(){this.name=O.id}return O.prototype.setupOnce=function(){qi(function(v){if(be().getIntegration(O)){if(!Gi.navigator&&!Gi.location&&!Gi.document)return v;var S=v.request&&v.request.url||Gi.location&&Gi.location.href,P=(Gi.document||{}).referrer,M=(Gi.navigator||{}).userAgent,F=ye(ye(ye({},v.request&&v.request.headers),P&&{Referer:P}),M&&{"User-Agent":M}),Y=ye(ye({},S&&{url:S}),{headers:F});return ye(ye({},v),{request:Y})}return v})},O.id="UserAgent",O}(),gh=[new qr,new aa,new _o,new rr,new hn,new uh,new ch,new mh];function xh(O){if(O===void 0&&(O={}),O.defaultIntegrations===void 0&&(O.defaultIntegrations=gh),O.release===void 0){var v=(0,Tt.R)();v.SENTRY_RELEASE&&v.SENTRY_RELEASE.id&&(O.release=v.SENTRY_RELEASE.id)}O.autoSessionTracking===void 0&&(O.autoSessionTracking=!0),O.sendClientReports===void 0&&(O.sendClientReports=!0),Jr(Qo,O),O.autoSessionTracking&&yh()}function mc(O){O===void 0&&(O={});var v=getCurrentHub(),S=v.getScope();S&&(O.user=__assign(__assign({},S.getUser()),O.user)),O.eventId||(O.eventId=v.lastEventId());var P=v.getClient();P&&P.showReportDialog(O)}function gc(){return getCurrentHub().lastEventId()}function xc(){}function yc(O){O()}function Tc(O){var v=getCurrentHub().getClient();return v?v.flush(O):(IS_DEBUG_BUILD&&logger.warn("Cannot flush events. No client defined."),resolvedSyncPromise(!1))}function Sc(O){var v=getCurrentHub().getClient();return v?v.close(O):(IS_DEBUG_BUILD&&logger.warn("Cannot flush events and disable SDK. No client defined."),resolvedSyncPromise(!1))}function Ec(O){return internalWrap(O)()}function pr(O){O.startSession({ignoreDuration:!0}),O.captureSession()}function yh(){var O=(0,Tt.R)(),v=O.document;if(typeof v=="undefined"){Xe&&Ut.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}var S=be();!S.captureSession||(pr(S),wi("history",function(P){var M=P.from,F=P.to;M===void 0||M===F||pr(be())}))}var Ie=__webpack_require__(8018);class Th{constructor(){this.registerTextMetrics(),this.metrics=this.getTextMetrics()}getTextMetrics(){let v=localStorage.getItem("text_metrics");if(!v)return{};try{return JSON.parse(v)}catch(S){return localStorage.removeItem("text_metrics"),{}}}registerTextMetrics(){let v=this,S=Phaser.GameObjects.GameObjectFactory;S.remove("text"),S.register("text",function(F,Y,k,Q){let j=P(this.scene,F,Y,k,Q);return j._setStyle=j.setStyle,j.setStyle=M,this.displayList.add(j)});function P(F,Y,k,Q,j){v.setMetrics(j);let _=new Phaser.GameObjects.Text(F,Y,k,Q,j);return v.createMetrics(_,j),_}function M(F){v.setMetrics(F),this._setStyle(F),v.createMetrics(this,F)}}setMetrics(v){let S=this.getKey(v);S in this.metrics&&(v.metrics=this.metrics[S])}createMetrics(v,S){let P=this.getKey(S);P in this.metrics||(P=="default"?this.metrics[P]={ascent:0,descent:0,fontSize:0}:this.metrics[P]=v.getTextMetrics(),localStorage.setItem("text_metrics",JSON.stringify(this.metrics)))}getKey(v){if(!v||!v.fontFamily||!v.fontSize)return"default";let S=v.fontSize.toString().replace("px","");return`${v.fontFamily}${S}`}}var jt=__webpack_require__(1288),et=__webpack_require__(1215);class mr extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480);const M=v.add.image(0,0,"prompt","window-button");M.setOrigin(.5,.5047619047619047),this.add(M);const F=v.add.text(0,0,"",{});F.setOrigin(.5,.5),F.text="Ok",F.setStyle({align:"center",fixedWidth:280,fontFamily:"Arial Narrow",fontSize:"40px",fontStyle:"bold"}),this.add(F);const Y=new et.zx(M);Y.spriteName="window-button",Y.callback=()=>this.onClick(),Y.activeFrame=!1}onClick(){this.parentContainer.callback()}}class Sh extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.bg,this.text,this.visible=!1;const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.rectangle(0,-40,708,584);F.isFilled=!0,F.fillColor=164045,this.add(F);const Y=v.add.text(0,0,"",{});Y.setOrigin(.5,.5),Y.text=`You have found a party hat.
Would you like to pick it up?`,Y.setStyle({align:"center",color:"#000000",fixedWidth:628,fixedHeight:136,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(Y);const k=new mr(v,0,130);this.add(k);const Q=v.add.image(0,-182,"main","prompt_coin");this.add(Q),new et.vj(M);const j=new et.X7(F);j.corner=50,this.bg=F,this.text=Y}show(v){this.visible=!0;let S=this.world.client.coins+v;this.text.text=this.getFormatString("game_over",v,S)}callback(){this.flash.close(),this.visible=!1}}class Eh extends jt.Z{constructor(v,S,P){super(v,S,P),this.createBlock(),this.visible=!1,this.textStyle={fontFamily:"Arial",fontSize:"32px",color:"#000000",align:"center",fixedWidth:626,wordWrap:{width:600,useAdvancedWrap:!0}},this.buttonTextStyle={fontFamily:"Arial",fontSize:"40px",color:"#ffffff",align:"center"}}createBlock(){let v=this.scene.add.rectangle(0,0,1520,960);v.isFilled=!0,v.fillColor=0,v.fillAlpha=.2,new et.vj(v),this.add(v)}createBackground(v,S){let P=this.scene.add.nineslice(0,0,v,400,{key:"prompt",frame:S},50);return P.setOrigin(.5),P}createText(){let v=this.scene.add.text(0,0,"",this.textStyle);return v.setOrigin(.5,.5),v}createButton(v,S){let P=this.scene.add.container(0,0);return P.bg=this.scene.add.image(0,0,"prompt",v),P.text=this.scene.add.text(0,0,S,this.buttonTextStyle),P.add(P.bg),P.add(P.text),P.text.setOrigin(.5),P.bg.setOrigin(.5,.5),P.setSize(P.bg.width,P.bg.height),P.component=new et.zx(P.bg),P.component.spriteName=v,P.component.callback=()=>this.visible=!1,P}}class Ch extends Eh{constructor(v,S,P){super(v,S,P),this.bg=this.createBackground(708,"error"),this.text=this.createText(),this.button=this.createButton("error-button","Okay"),this.add([this.bg,this.text,this.button])}show(v,S,P){this.text.text=v,this.button.text.text=S,this.button.component.callback=P,this.text.height=this.text.height>140?this.text.height:140,this.resize(),this.visible=!0}resize(){this.bg.resize(708,this.text.height+this.button.height+100+25),this.text.y=-(this.bg.height/2)+this.text.height/2+50,this.button.y=this.bg.height/2-this.button.height/2-50}}const wh=Ch;class gr extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480);const M=v.add.image(110,0,"prompt","window-button-small");M.setOrigin(.5,.49523809523809526),this.add(M);const F=v.add.image(-110,0,"prompt","window-button-small");F.setOrigin(.5,.49523809523809526),this.add(F);const Y=v.add.text(110,0,"",{});Y.setOrigin(.5,.5),Y.text="No",Y.setStyle({align:"center",fixedWidth:150,fontFamily:"Arial Narrow",fontSize:"40px",fontStyle:"bold"}),this.add(Y);const k=v.add.text(-110,0,"",{});k.setOrigin(.5,.5),k.text="Yes",k.setStyle({align:"center",fixedWidth:150,fontFamily:"Arial Narrow",fontSize:"40px",fontStyle:"bold"}),this.add(k);const Q=new et.zx(M);Q.spriteName="window-button-small",Q.callback=()=>this.onNoClick(),Q.activeFrame=!1;const j=new et.zx(F);j.spriteName="window-button-small",j.callback=()=>this.onYesClick(),j.activeFrame=!1}onYesClick(){this.parentContainer.callback()}onNoClick(){this.parentContainer.noCallback()}}class Oh extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.bg,this.text,this.dual,this.visible=!1;const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.rectangle(0,-40,708,584);F.isFilled=!0,F.fillColor=164045,this.add(F);const Y=v.add.text(0,0,"",{});Y.setOrigin(.5,.5),Y.text=`You have found a party hat.
Would you like to pick it up?`,Y.setStyle({align:"center",color:"#000000",fixedWidth:628,fixedHeight:136,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(Y);const k=new gr(v,0,130);this.add(k),new et.vj(M);const Q=new et.X7(F);Q.corner=50,this.bg=F,this.text=Y,this.dual=k,this.text.setWordWrapWidth(616,!0),this.item=null,this.icon=null,this.doneCallback=()=>{},this.type,this.load=new Phaser.Loader.LoaderPlugin(this.scene),this.prefix="icon/large",this.load.on("filecomplete",this.onFileComplete,this)}get url(){switch(this.type){case"clothing":return"assets/media/clothing/icon/large";case"furniture":return"assets/media/furniture/icon/@5x";case"flooring":return"";case"igloo":return"assets/media/igloos/buildings/icon";default:break}}get iconScale(){switch(this.type){case"clothing":return .75;case"furniture":return .65;case"igloo":return .65;default:return 1}}showItem(v,S=()=>{}){if(this.inventoryIncludes(v))return this.interface.prompt.showError("You already have this item.","Okay",()=>{this.interface.prompt.error.visible=!1,S()});this.show(v,this.crumbs.items[v],"clothing",S)}showFurniture(v,S=()=>{}){this.show(v,this.crumbs.furniture[v],"furniture",S)}showFloor(v,S=()=>{}){if(v===this.world.room.args.flooring)return this.interface.prompt.showError("You already have this flooring.","Okay",()=>{this.interface.prompt.error.visible=!1,S()});this.show(v,this.crumbs.flooring[v],"flooring",S)}showIgloo(v,S=()=>{}){if(this.world.client.igloos.includes(v))return this.interface.prompt.showError("You already have this igloo.","Okay",()=>{this.interface.prompt.error.visible=!1,S()});this.show(v,this.crumbs.igloos[v],"igloo",S)}show(v,S,P,M){!S||(this.item=v,this.type=P,this.doneCallback=M,this.text.text=this.getText(S.name,S.cost),this.visible=!0,this.loadIcon())}inventoryIncludes(v){return Object.values(this.world.client.inventory).flat().includes(v)}getText(v,S){return S<1?`You have found a ${v}.
Would you like to pick it up?`:`Would you like to buy ${v} for ${S} coins. You currently have ${this.world.client.coins} coins.`}loadIcon(){this.icon&&this.icon.destroy();let v=`${this.type}/${this.prefix}/${this.item}`;if(this.scene.textures.exists(v))return this.onFileComplete(v);this.load.image({key:v,url:`${this.url}/${this.item}.png`}),this.load.start()}onFileComplete(v){if(!this.visible||!this.scene.textures.exists(v)||parseInt(v.split("/")[3])!==this.item)return;let P=this.scene.add.image(0,-182,v);P.scale=this.iconScale,this.add(P),this.icon=P}callback(){this.item&&this.sendAddItem(),this.visible=!1}noCallback(){this.visible=!1,this.doneCallback()}sendAddItem(){switch(this.type){case"clothing":this.network.send("add_item",{item:this.item});break;case"furniture":this.network.send("add_furniture",{furniture:this.item});break;case"flooring":this.network.send("update_flooring",{flooring:this.item});break;case"igloo":this.network.send("add_igloo",{igloo:this.item});break;default:break}}}class Ph extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.bg,this.bar,this.progress,this.text,this.spinner,this.visible=!1;const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.rectangle(0,-40,708,584);F.isFilled=!0,F.fillColor=164045,this.add(F);const Y=v.add.image(295,-273,"main","blue-button");this.add(Y);const k=v.add.image(295,-275,"main","blue-x");this.add(k);const Q=v.add.container(0,-21);this.add(Q);const j=v.add.rectangle(0,0,200,40);j.isStroked=!0,j.strokeColor=26265,j.lineWidth=4,Q.add(j);const _=v.add.rectangle(-90,0,180,20);_.scaleX=0,_.setOrigin(0,.5),_.isFilled=!0,Q.add(_);const it=v.add.text(0,19,"",{});it.setOrigin(.5,0),it.setStyle({align:"center",fixedWidth:800,fixedHeight:40,fontFamily:"Arial",fontSize:"32px"}),this.add(it);const nt=v.add.image(0,-101,"load","spinner");this.add(nt),new et.vj(M);const ht=new et.X7(F);ht.corner=50;const ft=new et.zx(Y);ft.spriteName="blue-button",ft.callback=()=>this.close(),this.bg=F,this.bar=Q,this.progress=_,this.text=it,this.spinner=nt,this.scene=v,this.externalScene,this.tween=v.tweens.add({targets:this.spinner,angle:{from:0,to:180},duration:900,repeat:-1,ease:"Cubic"})}show(v,S=0){!v||(this.externalScene=v,this.text.text=this.getString("loading",v.sys.config),this.progress.scaleX=S,v.events.off("create"),v.load.on("progress",P=>this.progress.scaleX=P),v.events.once("create",()=>{this.visible=!1,this.scene.bringToTop()}),this.visible=!0)}showText(v,S=.15){this.text.text=v,this.progress.scaleX=S,this.visible=!0}close(){this.visible=!1;let v=this.externalScene;!v||v.events.once("create",()=>v.scene.stop())}}class Ah extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.bg,this.text,this.single,this.dual,this.visible=!1;const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.rectangle(0,-95,708,324);F.isFilled=!0,F.fillColor=164045,this.add(F);const Y=v.add.text(0,-161,"",{});Y.setOrigin(.5,.5),Y.text=`Message goes here
Message goes here`,Y.setStyle({align:"center",color:"#000000",fixedWidth:628,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(Y);const k=new mr(v,0,-35);this.add(k);const Q=new gr(v,0,-36);Q.visible=!1,this.add(Q),new et.vj(M);const j=new et.X7(F);j.corner=50,this.bg=F,this.text=Y,this.single=k,this.dual=Q}show(v,S,P,M){this.text.text=v,this.dual.visible=!1,this.single.visible=!1,this[S].visible=!0,this.callback=P,this.noCallback=M,this.visible=!0}}class Rh{constructor(v){this.interface=v,this.coin=new Sh(v,760,480),this.error=new wh(v,760,480),this.item=new Oh(v,760,480),this.loading=new Ph(v,760,480),this.window=new Ah(v,760,480),v.add.existing(this.coin),v.add.existing(this.error),v.add.existing(this.item),v.add.existing(this.loading),v.add.existing(this.window)}showCoin(v=0){this.coin.show(v),this.setCursor()}showError(v,S="Okay",P=()=>this.error.visible=!1){this.error.show(v,S,P),this.setCursor()}showItem(v,S=()=>{}){this.item.showItem(v,S),this.setCursor()}showFurniture(v,S=()=>{}){this.item.showFurniture(v,S),this.setCursor()}showFloor(v,S=()=>{}){this.item.showFloor(v,S),this.setCursor()}showIgloo(v,S=()=>{}){this.item.showIgloo(v,S),this.setCursor()}showLoading(v,S=0){this.loading.show(v,S),this.setCursor()}showLoadingText(v=""){this.loading.showText(v),this.setCursor()}closeLoading(){this.loading.close()}showWindow(v,S="single",P=()=>this.window.visible=!1,M=()=>this.window.visible=!1){this.window.show(v,S,P,M),this.setCursor()}hideAll(){this.loading.visible=!1}setCursor(){this.interface.input.setDefaultCursor("default")}}var Mh=Object.defineProperty,bh=(O,v,S)=>v in O?Mh(O,v,{enumerable:!0,configurable:!0,writable:!0,value:S}):O[v]=S,Lh=(O,v,S)=>(bh(O,typeof v!="symbol"?v+"":v,S),S);class Fh extends Ie.Z{constructor(){super(...arguments),Lh(this,"metricsManager",new Th)}create(){this.prompt=new Rh(this),this.loadedScenes=[];let v=this.add.graphics();v.lineStyle(16,this.crumbs.frameColor,1),v.strokeRoundedRect(0,0,1520,960,15)}get loading(){return this.scene.get("Load")}get main(){return this.scene.get("Main")}get iglooEdit(){return this.scene.get("IglooEdit")}showLoading(v="",S=!1){this.hideInterface(),this.scene.isActive("Load")?this.loading.setContent(v,S):this.scene.isSleeping("Load")?this.scene.wake("Load",{text:v,showBar:S}):this.scene.launch("Load",{text:v,showBar:S}),this.bringToTop("Load")}hideLoading(){this.loading&&this.loading.scene.isActive()&&this.scene.sleep("Load")}showInterface(){this.hideLoading(),this.scene.isSleeping("Main")?this.scene.wake("Main"):this.scene.isActive("Main")||this.scene.launch("Main"),this.bringToTop("Main")}hideInterface(v=!0){this.main&&this.main.scene.isActive()&&(this.scene.sleep("Main",{clearChat:v}),this.stopExternals())}showIglooEdit(){this.scene.isSleeping("IglooEdit")?this.scene.wake("IglooEdit"):this.scene.isActive("IglooEdit")||this.scene.launch("IglooEdit"),this.bringToTop("IglooEdit")}bringToTop(v){this.scene.bringToTop(v),this.scene.bringToTop(),this.input.setDefaultCursor("default")}hideIglooEdit(){this.iglooEdit&&this.iglooEdit.scene.isActive()&&this.scene.sleep("IglooEdit")}showEmoteBalloon(v,S){this.main.balloonFactory.showEmoteBalloon(v,S)}showTextBalloon(v,S){this.main.balloonFactory.showTextBalloon(v,S)}showCard(v,S=!1){this.main.playerCard.showCard(v,S)}showBook(v){const S=this.crumbs.books[v];S?this.world.flash.playBook(S):console.log(`Missing crumb for book: ${v}`)}stopExternals(){for(let v of this.loadedScenes){let S=this.scene.get(v);S.scene.isActive()?S.scene.stop():S.scene.isVisible()&&S.events.once("create",()=>S.scene.stop())}}updateBuddies(){this.main.scene.isActive()&&(this.main.playerCard.updateButtons(),this.main.buddy.showPage())}refreshPlayerCard(){this.main.playerCard.visible&&this.main.playerCard.id==this.world.client.id&&this.showCard(this.world.client.id,!0)}}var Bh=Object.defineProperty,xr=Object.getOwnPropertySymbols,Ih=Object.prototype.hasOwnProperty,Dh=Object.prototype.propertyIsEnumerable,ln=(O,v,S)=>v in O?Bh(O,v,{enumerable:!0,configurable:!0,writable:!0,value:S}):O[v]=S,Nh=(O,v)=>{for(var S in v||(v={}))Ih.call(v,S)&&ln(O,S,v[S]);if(xr)for(var S of xr(v))Dh.call(v,S)&&ln(O,S,v[S]);return O},rs=(O,v,S)=>(ln(O,typeof v!="symbol"?v+"":v,S),S);class Me{static setStartPos(v){if(v.x=this.clampX(v.x),v.y=this.clampY(v.y),!this.isBlocked(v))return;let S=v.room.isIgloo?v.crumbs.scenes.igloos[v.room.args.type]:v.crumbs.scenes.rooms[v.room.id];for(let P=0;P<25;P++){let M=this.getRandomPos(S.x,S.y,80);if(!this.isBlocked(v,M.x,M.y))return v.setPos(M.x,M.y)}v.setPos(S.x,S.y)}static getPath(v,S){let P=v.pos,M=this.getSafeTarget(v,P,S),F=Phaser.Math.Distance.BetweenPoints(P,M);if(F>10){let Y=this.getDuration(F,this.speed),k=this.getAngle(P,M);return v.direction=this.getDirection(k),{target:M,duration:Y}}}static getSafeTarget(v,S,P){P=this.clampPos(P);let M=Math.round(Phaser.Math.Distance.BetweenPoints(S,P)),F=(P.x-S.x)/M,Y=(P.y-S.y)/M,k=Nh({},S);for(;M>0&&!this.isBlocked(v,k.x+F,k.y+Y);)k.x+=F,k.y+=Y,M--;return k.x=Math.round(k.x),k.y=Math.round(k.y),k}static getDuration(v,S){return v/S*1e3}static getAngle(v,S){let P=S.x-v.x,M=S.y-v.y,F=Math.floor(Math.atan2(M,P)*(180/Math.PI)-90);return F<0?F+360:F}static getDirection(v){let S=Math.round(v/45)+1;return S>8?1:S}static clampPos(v){return v.x=this.clampX(v.x),v.y=this.clampY(v.y),v}static clampX(v){let S=Math.max(this.minX,Math.min(v,this.maxX));return Math.round(S)}static clampY(v){let S=Math.max(this.minY,Math.min(v,this.maxY));return Math.round(S)}static getRandomPos(v,S,P){let M=this.clampX(v+Phaser.Math.Between(-P,P)),F=this.clampY(S+Phaser.Math.Between(-P,P));return{x:M,y:F}}static isBlocked(v,S=v.x,P=v.y){return v.room.matter.containsPoint(v.room.block,S,P)}}rs(Me,"speed",260),rs(Me,"minX",30),rs(Me,"maxX",1490),rs(Me,"minY",30),rs(Me,"maxY",870);var yr=Object.getOwnPropertySymbols,Gh=Object.prototype.hasOwnProperty,zh=Object.prototype.propertyIsEnumerable,Uh=(O,v)=>{var S={};for(var P in O)Gh.call(O,P)&&v.indexOf(P)<0&&(S[P]=O[P]);if(O!=null&&yr)for(var P of yr(O))v.indexOf(P)<0&&zh.call(O,P)&&(S[P]=O[P]);return S};class Yh{constructor(v,S){this.world=v,this.interface=v.interface,this.network=v.network,this.crumbs=v.crumbs,this.getString=v.getString;let P=S,{user:M}=P,F=Uh(P,["user"]);Object.assign(this,F),this.id=M.id,this.coins=M.coins,this.rank=M.rank,this.joinTime=M.joinTime,this.iglooOpen=!1,this.lastRoom,this.buddies=[],this.ignores=[],this.slots=["color","head","face","neck","body","hand","feet","flag","photo","award"],this.inventory=this.initInventory(),this.stamps=[],this.penguin,this.emoteKeyPressed=!1,this.lastBalloon=Date.now(),this.throttleDelay=100,this.keys=this.crumbs.quick_keys.keys,this.emotes=this.crumbs.quick_keys.emotes,this.keyActions={send_frame:Y=>this.sendFrame(Y),send_wave:()=>this.sendFrame(25,!1),send_sit:()=>this.sendSit(this.input.mousePointer),show_crosshair:()=>this.showCrosshair(),emote_key:()=>this.emoteKeyPressed=!0,send_emote:Y=>this.sendEmote(Y),send_safe:Y=>this.sendSafe(Y)},this.lockRotation=!1,this.input.on("pointermove",Y=>this.onPointerMove(Y)),this.input.keyboard.on("keydown",Y=>this.onKeyDown(Y))}get isTweening(){return this.penguin.isTweening}get visible(){return this.penguin.visible}get activeSeat(){return this.interface.main.waddle.activeSeat}get input(){return this.interface.main.input}get isBalloonThrottled(){let v=Date.now();return v-this.lastBalloon<this.throttleDelay?!0:(this.lastBalloon=v,!1)}get isModerator(){return this.rank>1}get isRoot(){return this.rank===3}initInventory(){let v=Object.fromEntries(this.slots.map(S=>[S,[]]));for(let S of this.inventory){let P=this.crumbs.items[S].type,M=this.slots[P-1];v[M].push(S)}return v}onPointerMove(v){this.interface.main.crosshair.visible&&this.interface.main.onCrosshairMove(v),!(!this.visible||this.isTweening||this.lockRotation)&&this.penguin.rotate(v.x,v.y)}onPointerUp(v,S){v.button!=0||!this.visible||this.activeSeat||S[0]&&S[0].isButton||this.penguin.move(v.x,v.y)}onKeyDown(v){let S=v.key.toLowerCase();this.emoteKeyPressed?this.processEmote(S):this.processKey(S)}processEmote(v){this.emoteKeyPressed=!1,v in this.emotes&&this.sendEmote(this.emotes[v])}processKey(v){if(v in this.keys){let S=this.keys[v];this.keyActions[S.action](S.value||null)}}sendFrame(v,S=!0){!this.visible||this.isTweening||(this.lockRotation=!0,this.penguin.playFrame(v,S),this.network.send("send_frame",{set:S,frame:v}))}sendSit(v){!this.visible||this.isTweening||(this.lockRotation=!0,this.penguin.sit(v.x,v.y))}sendSnowball(v,S){!this.visible||this.isTweening||(this.lockRotation=!0,this.interface.main.snowballFactory.throwBall(this.id,v,S),this.network.send("snowball",{x:v,y:S}))}sendEmote(v){!this.visible||this.isBalloonThrottled||(this.interface.showEmoteBalloon(this.id,v),this.network.send("send_emote",{emote:v}))}sendSafe(v){if(!this.visible||this.isBalloonThrottled)return;let S=this.interface.main.safe.safeMessagesMap[v];this.interface.showTextBalloon(this.id,S),this.network.send("send_safe",{safe:v})}showCrosshair(){!this.visible||!this.interface.main||this.interface.main.onSnowballClick()}sendJoinRoom(v,S,P=0,M=0,F=40){if(this.activeSeat)return this.interface.prompt.showError("Please exit your game before leaving the room");this.interface.showLoading(this.getString("joining",S)),this.lockRotation=!1;let Y=Me.getRandomPos(P,M,F);this.network.send("join_room",{room:v,x:Y.x,y:Y.y})}sendJoinLastRoom(){if(this.world.lastRoom){let v=this.crumbs.scenes.rooms[this.world.lastRoom];v&&this.sendJoinRoom(this.world.lastRoom,v.key,v.x,v.y,80)}}sendJoinIgloo(v){if(!(this.world.room.isIgloo&&this.world.room.id==v)){if(this.activeSeat)return this.interface.prompt.showError("Please exit your game before leaving the room");this.interface.showLoading(this.getString("joining","igloo")),this.lockRotation=!1,this.network.send("join_igloo",{igloo:v,x:0,y:0})}}}class Tr{static getTintedCanvas(v,S){let P=v.texture,M=`#${`00000${(S|0).toString(16)}`.substr(-6)}`;P.tintCache=P.tintCache||{};let F=P.tintCache[M],Y;if(F){if(Y=F,Y.tintId==v.name)return Y}else Y=document.createElement("canvas");return this.tintWithMultiply(v,S,Y),Y.tintId=v.name,P.tintCache[M]=Y,Y}static tintWithMultiply(v,S,P){let M=P.getContext("2d"),F=v.source.resolution,Y=v.canvasData.x,k=v.canvasData.y,Q=v.cutWidth,j=v.cutHeight;P.width=Q,P.height=j,M.save(),M.fillStyle=`#${`00000${(S|0).toString(16)}`.substr(-6)}`,M.fillRect(0,0,Q,j),M.globalCompositeOperation="multiply",M.drawImage(v.source.image,Y,k,Q,j,0,0,Q/F,j/F),M.globalCompositeOperation="destination-atop",M.drawImage(v.source.image,Y,k,Q,j,0,0,Q/F,j/F),M.restore()}static batchSprite(v,S,P,M,F){let Y=M.alpha*S.alpha;if(Y===0)return;let k=v.currentContext,Q=v._tempMatrix1,j=v._tempMatrix2,_=P.canvasData,it=_.x,nt=_.y,ht=P.cutWidth,ft=P.cutHeight,gt=P.customPivot,yt=P.source.resolution,Ot=S.displayOriginX,bt=S.displayOriginY,At=-Ot+P.x,Mt=-bt+P.y;if(S.isCropped){let Lt=S._crop;(Lt.flipX!==S.flipX||Lt.flipY!==S.flipY)&&P.updateCropUVs(Lt,S.flipX,S.flipY),ht=Lt.cw,ft=Lt.ch,it=Lt.cx,nt=Lt.cy,At=-Ot+Lt.x,Mt=-bt+Lt.y,S.flipX&&(At>=0?At=-(At+ht):At<0&&(At=Math.abs(At)-ht)),S.flipY&&(Mt>=0?Mt=-(Mt+ft):Mt<0&&(Mt=Math.abs(Mt)-ft))}let Bt=1,Dt=1;S.flipX&&(gt||(At+=-P.realWidth+Ot*2),Bt=-1),S.flipY&&(gt||(Mt+=-P.realHeight+bt*2),Dt=-1),j.applyITRS(S.x,S.y,S.rotation,S.scaleX*Bt,S.scaleY*Dt),Q.copyFrom(M.matrix),F?(Q.multiplyWithOffset(F,-M.scrollX*S.scrollFactorX,-M.scrollY*S.scrollFactorY),j.e=S.x,j.f=S.y):(j.e-=M.scrollX*S.scrollFactorX,j.f-=M.scrollY*S.scrollFactorY),Q.multiply(j),k.save(),Q.setToContext(k),k.globalCompositeOperation=v.blendModes[S.blendMode],k.globalAlpha=Y,k.imageSmoothingEnabled=!(!v.antialias||P.source.scaleMode),S.mask&&S.mask.preRenderCanvas(v,S,M);let Gt=S.tintTopLeft;S.isTinted?((S.cachedTint!=Gt||S.tintedCanvas.tintId!=P.name)&&(S.cachedTint=Gt,S.tintedCanvas=this.getTintedCanvas(P,Gt)),k.drawImage(S.tintedCanvas,0,0,ht,ft,At,Mt,ht/yt,ft/yt)):k.drawImage(P.source.image,it,nt,ht,ft,At,Mt,ht/yt,ft/yt),S.mask&&S.mask.postRenderCanvas(v,S,M),k.restore()}}class Xh extends Phaser.GameObjects.Sprite{constructor(v,S,P,M,F){super(v,S,P,M,F),this.cachedTint,this.tintedCanvas}renderCanvas(v,S,P,M){P.addToRenderList(S),Tr.batchSprite(v,S,S.frame,P,M)}}class Sr{constructor(v){this.world=v}loadSprite(v,S,P){if(!v.active)return;let M;return S=="penguin_body"?(M=new Xh(v.room,0,0,S,"1_1"),M.tint=this.world.getColor(v.color),v.bodySprite=M,v.room.add.existing(M)):M=v.room.add.sprite(0,0,S,"1_1"),M.depth=P,v.add(M),M}}class Wh extends Sr{constructor(v){super(v.room.world),this.penguin=v,this.equipped=this.penguin.items.equipped,this.load=new Phaser.Loader.LoaderPlugin(v.room),this.url="assets/media/clothing/sprites",this.load.on("filecomplete",this.onFileComplete,this),this.load.on("loaderror",this.onLoadError,this),this.load.on("complete",this.onComplete,this)}loadItems(){for(let v in this.equipped){let S=this.equipped[v];S.id>0&&this.loadItem(S.id,v)}this.load.start()}loadItem(v,S){if(v==0)return this.removeItem(S);let P=`${S}/${v}`;if(this.world.textures.exists(P))return this.onFileComplete(P);this.load.multiatlas({key:P,atlasURL:`${this.url}/${v}.json`,path:`${this.url}`})}onFileComplete(v){if(!this.world.textures.exists(v))return;let S=v.split("/")[0],P=this.equipped[S];P.sprite&&this.removeItem(S),P.sprite=this.loadSprite(this.penguin,v,P.depth+1)}onLoadError(v){let S=v.key.split("/")[0];this.equipped[S].sprite&&this.removeItem(S)}onComplete(){this.penguin.sort("depth"),this.penguin.playFrame(this.penguin.frame)}removeItem(v){let S=this.equipped[v];!S||!S.sprite||(S.sprite.destroy(),S.sprite=null)}}var Er=Object.getOwnPropertySymbols,Vh=Object.prototype.hasOwnProperty,Hh=Object.prototype.propertyIsEnumerable,kh=(O,v)=>{var S={};for(var P in O)Vh.call(O,P)&&v.indexOf(P)<0&&(S[P]=O[P]);if(O!=null&&Er)for(var P of Er(O))v.indexOf(P)<0&&Hh.call(O,P)&&(S[P]=O[P]);return S};class Zh{constructor(v){this.penguin=v,this.slots=["photo","flag","color","feet","body","neck","face","head","hand"],this.all=this.setAll()}get equipped(){let v=this.all,{color:S,photo:P,flag:M}=v;return kh(v,["color","photo","flag"])}get equippedFlat(){return this.flatten(this.equipped)}get flat(){return this.flatten(this.all)}flatten(v){return Object.fromEntries(Object.entries(v).map(([S,P])=>[S,P.id]))}setAll(){let v={};for(let S of this.slots)v[S]={id:this.penguin[S],depth:this.slots.indexOf(S)};return v}setItem(v,S){this.all[S].id=v}}class Cr extends jt.Z{constructor(v,S,P){super(S,v.x,v.y),Object.assign(this,v),this.room=S,this.penguinLoader=P,this.items=new Zh(this),this.itemLoader=new Wh(this),this.bodySprite,Me.setStartPos(this),this.depth=this.y,this.tween,this.direction,this.nameTag=P.addName(this),this.balloon,this.balloonTimer,this.textBalloon,this.emoteBalloon,this.on("destroy",()=>this.onDestroy()),this.isButton=!0,this.afterMove,this.load()}get isTweening(){return!!this.tween}get pos(){return{x:this.x,y:this.y}}get playerCard(){return this.interface.main.playerCard}get paperDollLoader(){return this.playerCard.paperDoll.paperDollLoader}onDestroy(){delete this.body}load(){this.penguinLoader.loadPenguin(this),this.itemLoader.loadItems(),this.room.add.existing(this)}update(v,S){this.items.setItem(v,S),S=="color"&&this.bodySprite&&(this.bodySprite.tint=this.world.getColor(v)),S in this.items.equipped&&(this.itemLoader.loadItem(v,S),this.itemLoader.load.start()),this.playerCard.visible&&this.playerCard.id==this.id&&(this.paperDollLoader.loadItem(v,S),this.paperDollLoader.load.start())}move(v,S){let P=Me.getPath(this,{x:v,y:S});P&&this.addMoveTween(P)}setPos(v,S){this.x=v,this.y=S}playFrame(v,S=!0){if(this.isTweening&&(M<9||M>16))return;let P=this.list.filter(F=>F.type=="Sprite"),M=[25,26].includes(v)?this.getSecretFrame(v):v;for(let F of P){let Y=`${F.texture.key}_${M}`;this.world.anims.exists(Y)||this.createAnim(F.texture.key,M),this.checkAnim(Y)?(F.visible=!0,F.anims.play(Y)):F.visible=!1}this.frame=S?v:1}createAnim(v,S){let P=this.crumbs.penguin[S],M=this.generateFrames(v,S,P);this.world.anims.create({key:`${v}_${S}`,frames:M,frameRate:24,repeat:P.repeat||0})}generateFrames(v,S,P){let M={prefix:`${S}_`,frames:P.frames||Phaser.Utils.Array.NumberArray(P.start||1,P.end)},F=this.world.textures.get(v).getFrameNames(!1);return M.frames=M.frames.filter(Y=>F.includes(`${S}_${Y}`)),this.world.anims.generateFrameNames(v,M)}checkAnim(v){let S=this.world.anims.get(v);return S&&S.frames.length>0}getSecretFrame(v){let S=this.items.equippedFlat;for(let P of this.crumbs.secret_frames[v])if(this.checkSecretFrames(S,P))return P.secret_frame;return v}checkSecretFrames(v,S){for(let P in v)if(v[P]!==S[P])return!1;return S.secret_frame in this.crumbs.penguin}addMoveTween(v){this.tween&&this.removeTween(!1),this.playFrame(this.direction+8),this.tween=this.room.tweens.add({targets:this,duration:v.duration,x:Math.round(v.target.x),y:Math.round(v.target.y),onUpdate:()=>this.onMoveUpdate(),onComplete:()=>this.onMoveComplete()})}onMoveUpdate(){this.depth=this.y,this.nameTag&&this.updateNameTag(),this.balloon&&this.updateBalloon()}onMoveComplete(){this.removeTween(),this.afterMove&&(this.afterMove(),this.afterMove=null)}updateNameTag(){this.nameTag.x=this.x,this.nameTag.y=this.y+40,this.nameTag.depth=this.depth+2e3}updateBalloon(){this.balloon.x=this.x,this.balloon.y=this.y-95}removeTween(v=!0){!this.tween||(this.tween.remove(),this.tween=null,v&&this.playFrame(this.direction))}}class jh extends Cr{constructor(v,S,P){super(v,S,P),this.isClient=!0,this.savedPenguins=this.network.savedPenguins,this.save=this.savedPenguins[this.realUsername.toLowerCase()],P.addRing(this)}update(v,S){super.update(v,S),this.save&&S in this.save&&(this.save[S]=v,localStorage.setItem("saved_penguins",JSON.stringify(this.savedPenguins)))}rotate(v,S){let P=Me.getAngle(this.pos,{x:v,y:S+80}),M=Me.getDirection(P);this.playFrame(M)}sit(v,S){let P=Me.getAngle(this.pos,{x:v,y:S+80}),F=Me.getDirection(P)+16;this.playFrame(F),this.network.send("send_frame",{set:!0,frame:F})}move(v,S,P=null){P&&(this.afterMove=()=>this.world.client.sendFrame(P));let M=Me.getPath(this,{x:v,y:S});M&&(this.addMoveTween(M),this.network.send("send_position",{x:M.target.x,y:M.target.y}))}onMoveComplete(){this.world.client.lockRotation=!1,super.onMoveComplete(),this.isTrigger()}isTrigger(){if(!!this.room.triggers){for(let v of this.room.triggers)if(this.room.matter.containsPoint(v,this.x,this.y)&&v.callback)return v.callback()}}}class Kh extends Sr{constructor(v){super(v),this.nameStyle={fontFamily:"Arial",fontSize:"24px",color:"#000000",align:"center",fixedWidth:250},this.mascotStyle={fontFamily:"Arial",fontSize:"24px",color:"#ffffff",stroke:"#414141",strokeThickness:6,align:"center",fixedWidth:250}}loadPenguin(v){this.addPenguin(v),this.addShadow(v),this.addInput(v)}addPenguin(v){this.loadSprite(v,"penguin_body",1),this.loadSprite(v,"penguin",2)}addShadow(v){let S=v.room.add.image(0,0,"penguin_base","shadow");v.addAt(S,0)}addRing(v){let S=v.room.add.image(0,0,"penguin_base","ring");v.addAt(S,0)}addName(v){const S=v.x,P=v.y+40,M=v.character?this.mascotStyle:this.nameStyle;let F=v.room.add.text(S,P,v.username,M);return F.setOrigin(.5),F.depth=v.depth+2e3,F}addInput(v){let S=new Phaser.Geom.Ellipse(0,-20,70,90);v.setInteractive({cursor:"pointer",hitArea:S,hitAreaCallback:Phaser.Geom.Ellipse.Contains}),v.on("pointerup",()=>this.onPenguinClick(v.id))}onPenguinClick(v){this.world.interface.showCard(v)}}class $h{constructor(v){this.world=v,this.penguinLoader=new Kh(v)}createPenguin(v,S){let P=this.world.client;return v.id===P.id?(P.penguin=new jh(v,S,this.penguinLoader),P.penguin):new Cr(v,S,this.penguinLoader)}createPenguins(v,S){let P={};for(let M of v)M.id in P||(P[M.id]=this.createPenguin(M,S));return P}}class Jh{constructor(v){this.world=v,this.scene=v.scene,this.rooms=v.crumbs.scenes.rooms,this.igloos=v.crumbs.scenes.igloos,this.games=v.crumbs.games}create(v){if(v.room)return this.createRoom(v);if(v.igloo)return this.createIgloo(v);if(v.game)return this.createGame(v)}createRoom(v){let S=this.rooms[v.room];return S.key in this.scene.manager.keys?(this.scene.start(S.key),this.scene.get(S.key)):this.scene.add(S.key,S.scene,!0,{id:v.room})}createIgloo(v){let S=this.igloos[v.type];return S.key in this.scene.manager.keys?(this.scene.start(S.key,{args:v}),this.scene.get(S.key)):this.scene.add(S.key,S.scene,!0,{args:v})}createGame(v){const S=this.games[v.game];S?this.world.flash.playGame(S):console.log(`Missing crumb for game: ${v.name}`)}}class Qh extends Ie.Z{constructor(v){super(v),this.client,this.room,this.muteMusic=!1}create(){this.penguinFactory=new $h(this),this.roomFactory=new Jh(this),this.scene.start("FlashController")}setClient(v){this.client=new Yh(this,v)}joinRoom(v){if(!this.room)return this.createRoom(v);this.room.events.once("shutdown",()=>this.createRoom(v)),this.room.stop()}createRoom(v){this.room=this.roomFactory.create(v),v.users&&(this.lastRoom=this.room.id,this.room.waiting=v.users,this.room.events.once("create",()=>this.addPenguins()))}addPenguins(){this.room.penguins=this.penguinFactory.createPenguins(this.room.waiting,this.room)}addPenguin(v){if(!this.room.isReady&&!this.room.getWaiting(v.id))return this.room.waiting.push(v);if(!(v.id in this.room.penguins)){let S=this.penguinFactory.createPenguin(v,this.room);this.room.addPenguin(v.id,S)}}removePenguin(v){if(!this.room.isReady)return this.room.removeWaiting(v);this.room.removePenguin(v)}getRelationship(v){return v===this.client.id?"player":this.isMascot(v)?"mascot":this.isBuddy(v)?this.isOnline(v)?"online":"offline":this.isIgnore(v)?"ignore":"none"}isMascot(v){const S=this.room.penguins[v];return S?S.character:!1}isBuddy(v){return this.client.buddies.map(P=>P.id).includes(v)}isIgnore(v){return this.client.ignores.map(P=>P.id).includes(v)}isOnline(v){return this.client.buddies.find(P=>P.id==v).online}getColor(v){return this.crumbs.colors[v-1]||this.crumbs.colors[0]}}var Ki=__webpack_require__(556);const qh={en:1,pt:2,fr:3,es:4,de:5};class _h{constructor(v){this.controller=v,this.coinsFetched=!1,this.gamePath="",this.gameMusic=0,this.setShell(),this.setEngine(),this.setInterface(),this.setAirtower(),this.setLocale()}getShell(){return Object.keys(this.shell)}getShellGlobals(){return Ki.U}getEngine(){return Object.keys(this.engine)}getInterface(){return Object.keys(this.interface)}getAirtower(){return Object.keys(this.airtower)}getLocale(){return Object.keys(this.locale)}getPlayer(){return{Colour:this.controller.world.client.penguin.color-1}}getCrumbs(){return this.controller.crumbs}getCoins(v){var S;v.coins=(S=parseInt(v.coins))!=null?S:0,this.controller.game.domContainer.style.zIndex=-10,this.coinsFetched||(this.coinsFetched=!0,this.controller.network.send("game_over",{coins:v.coins}))}getMediaPath(){return`${zi}/`}getGameSWFPath(){return this.gamePath}playSound(){return{}}setShell(){const v=this,S=this.controller;this.shell={getLocalizedFrame:()=>qh.en,getGamesPath:()=>`${zi}/dummy/dummy`,getGameContentPath:()=>`${zi}/games`,hideLoading:()=>{S.interface.hideLoading(),S.interface.hideInterface(),S.setVisible(!0)},getMyPlayerHex:()=>S.world.getColor(this.controller.world.client.penguin.color),getPlayerHexFromId:P=>S.world.getColor(P),getMyPlayerNickname:()=>S.world.client.penguin.username,getMyPlayerId:()=>S.world.client.penguin.id,getMyPlayerObject:()=>({}),isItemOnMyPlayer:([P])=>{const M=S.world.client.penguin.items.equipped;for(const F in M)if(M[F].id===P)return!0;return!1},isItemInMyInventory:([P])=>Object.values(S.world.client.inventory).flat().includes(P),getPlayerObjectById:([P])=>{let M={};const F=S.world.client.penguin.items.equipped;for(const Y in F)M[Y]=F[Y].id;return M},isMyPlayerMember:()=>!0,stampEarned:([P])=>{v.shell.stampIsOwnedByMe([P])||S.network.send("stamp_earned",{id:P})},stampIsOwnedByMe:([P])=>S.world.client.stamps.includes(P),startGameMusic(){if(!v.gameMusic)return;const P=v.gameMusic;if(S.cache.audio.exists(P)){S.addMusic();return}S.load.audio(P,`assets/media/music/${P}.mp3`),S.load.once(`filecomplete-audio-${P}`,()=>{S.addMusic()}),S.load.start()},startMusicById:([P])=>{S.stopMusic(),v.gameMusic=P,v.shell.startGameMusic()},stopMusic:()=>{S.stopMusic()},getCurrentServerRoomId:()=>0,sendJoinLastRoom:()=>{S.close()},sendBuyInventory:([P])=>{!S.crumbs.items[P]||([821,8006,8010].includes(P)?S.network.send("ninja_starter_deck",{item:P}):S.network.send("add_item",{item:P}))},startWaddle:([P])=>{P.shift();let M=[];M.push(P[0]),M.push(P[1]),M.push(P[2]),v.airtower.send(["","wjx",M,"str",v.shell.getCurrentServerRoomId()])},getCookie:([P,M])=>{if(P===Ki.U.GAME_COOKIE&&M==="game_ninja")return{mode:3}}}}setEngine(){const v=this;this.engine={sendGameOver:S=>{v.getCoins({coins:S})}}}setInterface(){this.interface={showWindow:([v])=>{},addTickets:([v])=>{}}}setAirtower(){const v=this.controller;this.airtower={addListener:()=>{},removeListener:()=>{},send:([S,P,M,F,Y])=>{v.network.send("airtower_message",{extension:S,action:P,params:M,msgType:F,roomId:Y})}}}setLocale(){this.locale={getText:([v])=>{}}}}const tl="https://cpl-prod.b-cdn.net/assets";class el{constructor(v){this.controller=v,this.bookPath="",this.setShell(),this.setInterface(),this.setStampManager()}getShell(){return Object.keys(this.shell)}getShellGlobals(){return Ki.U}getInterface(){return Object.keys(this.interface)}getStampManager(){return Object.keys(this.stampManager)}getMediaPath(){return`${zi}/books/`}getBookSWFPath(){return this.bookPath}addListeners(){this.controller.world.events.on("COINS_CHANGED",this.handleUpdateCoins,this)}removeListeners(){this.controller.world.events.off("COINS_CHANGED",this.handleUpdateCoins,this)}close(){this.controller.close()}handleItemAdded(){this.bookPath&&(this.controller.game.domContainer.style.zIndex="auto")}handleUpdateCoins(v){this.controller.player["shell.onShellEvent"]([Ki.U.UPDATE_COINS,{coins:v}])}setShell(){const v=this,S=this.controller;this.shell={addListener:()=>{},removeListener:()=>{},onShellEvent:()=>{},getAssetsPath:()=>tl,getLanguageAbbreviation:()=>"EN",getMyPlayerTotalCoins:()=>S.world.client.coins,getMyPlayerHex:()=>S.world.getColor(S.world.client.penguin.color),getMyPlayerId:()=>S.world.client.penguin.id,getPlayerHexFromId:P=>S.world.getColor(P),getMyPlayerObject:()=>({Coins:S.world.client.coins,player_id:S.world.client.penguin.id,colour_id:S.world.client.penguin.color,nickname:S.world.client.penguin.username}),getActivePlayerObject:()=>v.shell.getMyPlayerObject(),isItemInMyInventory:([P])=>Object.values(S.world.client.inventory).flat().includes(P),getLocalizedString:([P])=>P,sendGetNinjaRanks:([P])=>{S.network.send("ninja_ranks")},sendGetNinjaLevel:()=>{S.network.send("ninja_level")},sendGetCards:()=>{S.network.send("ninja_cards")},getGameContentPath:()=>`${zi}/games`,replace_m:([P,M])=>P.replaceAll("%0",M[0]).replaceAll("%1",M[1]).replaceAll("%2",M[2]),isMyPlayer:([P])=>S.world.client.id===P,isPlayerMemberById:([P])=>!0,getPath:([P])=>Ki.I[P]?`${v.getMediaPath()}${Ki.I[P]}`:P}}setInterface(){const v=this,S=this.controller;this.interface={buyInventory:([P])=>{S.game.domContainer.style.zIndex=-10,S.interface.prompt.showItem(P,()=>this.handleItemAdded())},buyFurniture:([P])=>{S.game.domContainer.style.zIndex=-10,S.interface.prompt.showFurniture(P,()=>this.handleItemAdded())},buyFloor:([P])=>{S.game.domContainer.style.zIndex=-10,S.interface.prompt.showFloor(P,()=>this.handleItemAdded())},buyIgloo:([P])=>{S.game.domContainer.style.zIndex=-10,S.interface.prompt.showIgloo(P,()=>this.handleItemAdded())},buyIglooUpgrade:([P])=>{v.interface.buyIgloo([P])},buyIglooFloor:([P])=>{v.interface.buyFloor([P])},closeContent:()=>{v.close()}}}setStampManager(){const v=this,S=this.controller;this.stampManager={getStampBookCoverDetails([P]){S.network.send("stampbook_cover",{id:P})},getPlayersStampBookCategories([P]){S.network.send("stampbook_categories",{id:P})},getPlayersStamps([P]){S.network.send("stampbook_players_stamps",{id:P})},getPlayersAwards([P]){S.network.send("stampbook_players_awards",{id:P})},getMyRecentlyEarnedStamps(){S.network.send("stampbook_recently_earned")},setStampBookCoverDetails([P]){S.network.send("stampbook_update_cover",{details:P[0]})},getHasModifiedStampCover(){console.log("Has modified stamp cover")}}}}const zi="https://cpl-prod.b-cdn.net/assets/media/swf";class il extends Ie.Z{constructor(v){super(v),window.RufflePlayer.config={logLevel:"error",autoplay:"on",polyfills:!1},this.ruffle=window.RufflePlayer.newest(),this.player=this.ruffle.createPlayer(),this.player.style.width="100%",this.player.style.height="100%",this.setVisible(!1),this.flashBridge=new _h(this),this.bookBridge=new el(this),window.FlashBridge=this.flashBridge,window.BookBridge=this.bookBridge}create(){this.add.dom(760,480,this.player),this.sound.pauseOnBlur=!1}setVisible(v){this.player.style.visibility=v?"visible":"hidden"}addMusic(){!this.world.muteMusic&&this.cache.audio.exists(this.flashBridge.gameMusic)&&this.sound.play(this.flashBridge.gameMusic,{loop:!0})}stopMusic(){this.sound.stopByKey(this.flashBridge.gameMusic)}playGame(v){this.flashBridge.coinsFetched=!1,this.flashBridge.gamePath=`${v.key}/${v.entry}`,this.flashBridge.gameMusic=v.music||0,this.player.load({url:`${zi}/games/boot.swf`,allowScriptAccess:!0}).catch(()=>{this.interface.prompt.showError("Ooops, something went wrong loading that game. Please try again.")})}playBook(v){this.bookBridge.bookPath=`${v.key}/${v.entry}`,this.bookBridge.addListeners(),this.game.domContainer.style.zIndex="auto",this.interface.prompt.showLoadingText("Loading content..."),this.player.load({url:`${zi}/books/boot.swf`,allowScriptAccess:!0,wmode:"transparent",contextMenu:!1,menu:!1}).then(()=>{this.interface.prompt.closeLoading()}).catch(()=>{this.interface.prompt.closeLoading(),this.interface.prompt.showError("Ooops, something went wrong loading that book. Please try again.")}),this.setVisible(!0)}close(){this.setVisible(!1),this.stopMusic(),this.game.domContainer.style.zIndex="auto",this.flashBridge.gamePath?(this.flashBridge.gamePath="",this.world.client.sendJoinLastRoom()):(this.bookBridge.bookPath="",this.bookBridge.removeListeners()),setTimeout(()=>{this.player.pause()},100)}}class sl extends Ie.Z{constructor(){super("Load"),this.text,this.bar,this.progress,this.penguin2,this.penguin1,this.rail,this.penguin3}preload(){this.load.pack("load-pack","assets/media/interface/menus/load/load-pack.json")}_create(){const v=this.add.image(0,0,"load","bg");v.setOrigin(0,0);const S=this.add.text(768,608,"",{});S.setOrigin(.5,0),S.setStyle({align:"center",fixedWidth:800,fixedHeight:40,fontFamily:"Arial",fontSize:"32px"}),this.add.image(756,563,"load","bar");const P=this.add.container(760,564),M=this.add.rectangle(0,5,200,40);M.visible=!1,M.isStroked=!0,M.strokeColor=26265,M.lineWidth=4,P.add(M);const F=this.add.sprite(-91,-3,"load","bar_2");F.scaleX=0,F.setOrigin(0,.5),P.add(F);const Y=this.add.sprite(770,258,"load","penguin2_0001");Y.visible=!1;const k=this.add.sprite(637,563,"load","load_0001");k.scaleX=.5,k.scaleY=.5;const Q=this.add.sprite(896,388,"load","penguin1_0001");Q.scaleX=.85,Q.scaleY=.85,Q.visible=!1;const j=this.add.sprite(762,467,"load","rail_0001");j.scaleX=.7,j.scaleY=.7,j.visible=!1;const _=this.add.sprite(754,332,"load","penguin3_0001");_.scaleX=.7,_.scaleY=.7,_.visible=!1,new et.vj(v);const it=new et.fw(Y);it.key="penguin2_",it.end=72;const nt=new et.fw(k);nt.key="load_",nt.end=20;const ht=new et.fw(Q);ht.key="penguin1_",ht.end=16;const ft=new et.fw(j);ft.key="rail_",ft.end=3;const gt=new et.fw(_);gt.key="penguin3_",gt.end=5,this.text=S,this.bar=P,this.progress=F,this.penguin2=Y,this.penguin1=Q,this.rail=j,this.penguin3=_,this.events.emit("scene-awake")}create(v){this.events.on("sleep",this.onSleep,this),this.events.on("wake",this.onWake,this),this._create(),this.setContent(v.text,v.showBar),this.updatePenguinAnim()}onSleep(){}onWake(v,S){this.setContent(S.text,S.showBar),this.updatePenguinAnim()}setContent(v,S){this.text.text=v,this.bar.visible=S}updatePenguinAnim(){const v=Phaser.Math.Between(1,3);v===1?(this.penguin1.visible=!0,this.penguin2.visible=!1,this.penguin3.visible=!1,this.rail.visible=!1):v===2?(this.penguin1.visible=!1,this.penguin2.visible=!0,this.penguin3.visible=!1,this.rail.visible=!1):(this.penguin1.visible=!1,this.penguin2.visible=!1,this.penguin3.visible=!0,this.rail.visible=!0)}}var nl=__webpack_require__(5933);class rl extends Ie.Z{constructor(){super("Start"),this.version_control}_create(){this.add.image(0,0,"load","bg").setOrigin(0,0),this.add.image(766,471,"start","splash_1"),this.add.image(766,379,"start","splash_4");const S=this.add.image(1164,658,"start","splash_3");S.scaleX=.8,S.scaleY=.8,this.add.image(394,678,"start","splash_2"),this.add.image(760,766,"start","bottom");const P=this.add.image(1191,822,"start","penguin2");P.scaleX=.5,P.scaleY=.5;const M=this.add.sprite(964,833,"start","start-button");M.scaleX=1.3168703478205392;const F=this.add.image(760,672,"start","logo");F.scaleX=.9,F.scaleY=.9;const Y=this.add.text(1400,20,"",{});Y.setOrigin(.5,.5),Y.text="v{VERSION}",Y.setStyle({align:"right",color:"#bfbfbfff",fixedWidth:200,fontFamily:"Arial"});const k=this.add.image(558,831,"start","shadow");k.scaleX=.7871480084121332,k.scaleY=.8229734757017847,k.alpha=.4,k.alphaTopLeft=.4,k.alphaTopRight=.4,k.alphaBottomLeft=.4,k.alphaBottomRight=.4;const Q=this.add.image(285,828,"start","penguin1");Q.scaleX=.5,Q.scaleY=.5;const j=this.add.sprite(544,830,"start","start-button");j.scaleX=1.3168703478205392,this.add.image(964,833,"start","Login-text"),this.add.image(544,830,"start","CreateAPenguin-Text");const _=new et.zx(M);_.spriteName="start-button",_.callback=()=>this.onStartClick();const it=new et.zx(j);it.spriteName="create-button",it.callback=()=>this.onCreateClick(),this.version_control=Y,this.events.emit("scene-awake")}create(){this._create(),this.version_control.setText("v1.1.10-beta")}onStartClick(){if(this.network.isSavedPenguins)return this.scene.start("PenguinSelect");this.scene.start("Login")}onCreateClick(){window.open("https://cplegacy.com/register","_blank").focus()}}var al=Object.defineProperty,wr=Object.getOwnPropertySymbols,ol=Object.prototype.hasOwnProperty,hl=Object.prototype.propertyIsEnumerable,Or=(O,v,S)=>v in O?al(O,v,{enumerable:!0,configurable:!0,writable:!0,value:S}):O[v]=S,ll=(O,v)=>{for(var S in v||(v={}))ol.call(v,S)&&Or(O,S,v[S]);if(wr)for(var S of wr(v))hl.call(v,S)&&Or(O,S,v[S]);return O};class as extends Phaser.GameObjects.DOMElement{constructor(v,S,P,M,F,Y=()=>{},k=100,Q=!0,j=null){let _=document.createElement("input");F=ll({backgroundColor:"transparent",border:"transparent",outline:"transparent",pointerEvents:"auto"},F),_.type=M,_.autocomplete="new-password",_.spellcheck=!1,_.maxLength=k,super(v,S,P,_,F),this.callback=Y,this.preventTab=Q,this.validateRegex=j,this.lastValue="";let it=this.getTotalPadding(F.padding);this.phaserText=this.scene.add.text(S,P,"",{fixedWidth:parseInt(F.width.replace("px",""))-it,fontFamily:F.fontFamily,fontSize:F.fontSize,color:F.color}),this.phaserText.setOrigin(.5,.5),this.phaserText.visible=!1,this.addListeners(),this.addInput()}get text(){return this.node.value}setText(v){this.node.value=v,this.lastValue=v}getTotalPadding(v){if(!v)return 0;let S=v.replaceAll("px","").split(" ");return parseInt(S[1])+parseInt(S[3])}addListeners(){this.addListener("focus"),this.addListener("blur"),this.addListener("keydown"),this.addListener("input"),this.scene.events.on("showinput",()=>this.onShow()),this.scene.events.on("hideinput",()=>this.onHide()),this.on("destroy",()=>this.onDestroy())}addInput(){this.on("focus",()=>this.onFocus()),this.on("blur",()=>this.onBlur()),this.on("keydown",v=>this.onKeyDown(v)),this.on("input",()=>this.onInput())}onFocus(){this.clearEmoteKey(),this.scene.game.input.keyboard.enabled=!1}onBlur(){this.clearEmoteKey(),this.scene.game.input.keyboard.enabled=!0}onKeyDown(v){v.key==="Enter"?(v.preventDefault(),this.text||this.node.blur(),this.callback()):v.key==="Tab"&&this.preventTab&&v.preventDefault()}onInput(){this.validateRegex&&!this.validateRegex.test(this.node.value)?this.node.value=this.lastValue:this.lastValue=this.node.value}onShow(){this.phaserText.visible=!1,this.visible=!0}onHide(){this.phaserText.text=this.node.type==="password"?"*".repeat(this.text.length):this.text,this.phaserText.visible=!0,this.visible=!1}onDestroy(){this.scene.events.off("showinput"),this.scene.events.off("hideinput")}setFocus(){this.node.focus()}clearText(){this.setText("")}clearEmoteKey(){this.scene.world.client&&(this.scene.world.client.emoteKeyPressed=!1)}}class Pr extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.password,this.username;const M=v.add.text(34,56,"",{});M.setOrigin(0,.5),M.text="Remember my password",M.setStyle({align:"right",color:"#000000ff",fontFamily:"Arial Narrow",fontSize:"30px"}),M.setLineSpacing(25),this.add(M);const F=v.add.text(34,1,"",{});F.setOrigin(0,.5),F.text="Remember me on this computer",F.setStyle({align:"right",color:"#000000ff",fontFamily:"Arial Narrow",fontSize:"30px"}),F.setLineSpacing(25),this.add(F);const Y=v.add.image(0,55,"login","checkbox");Y.setOrigin(.41509434,.58490566),this.add(Y);const k=v.add.image(0,0,"login","checkbox");k.setOrigin(.41509,.5849),this.add(k);const Q=new et.rF(Y);Q.callback=()=>this.onRememberPasswordClick();const j=new et.rF(k);j.callback=()=>this.onRememberMeClick(),this.password=Y,this.username=k,this.scene=v,k.checked=!1,Y.checked=!1}onRememberMeClick(){this.password.checked&&this.disable(this.password),this.toggle(this.username)}onRememberPasswordClick(){if(!this.password.checked)return this.scene.events.emit("hideinput"),this.scene.waitPrompt.visible=!0;this.disable(this.username),this.disable(this.password)}toggle(v){let S=v.checked?"checkbox":"checkbox-active";v.checked=!v.checked,v.setTexture("login",S)}enable(v){v.checked=!0,v.setTexture("login","checkbox-active")}disable(v){v.checked=!1,v.setTexture("login","checkbox")}}class Ar extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480);const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.rectangle(0,0,724,410);F.isFilled=!0,F.fillColor=164045,this.add(F);const Y=v.add.image(-140,95,"login","wait-button");this.add(Y);const k=v.add.image(140,95,"login","wait-button");this.add(k);const Q=v.add.text(0,-70,"",{});Q.setOrigin(.5,.5),Q.text=`WAIT!
Do other people use this
computer?`,Q.setStyle({align:"center",fixedWidth:600,fontFamily:"Burbank Small",fontSize:"36px",fontStyle:"bold"}),this.add(Q);const j=v.add.text(-140,95,"",{});j.setOrigin(.5,.5),j.text="Yes",j.setStyle({align:"center",fixedWidth:200,fontFamily:"Burbank Small",fontSize:"36px",fontStyle:"bold"}),this.add(j);const _=v.add.text(140,95,"",{});_.setOrigin(.5,.5),_.text="No",_.setStyle({align:"center",fixedWidth:200,fontFamily:"Burbank Small",fontSize:"36px",fontStyle:"bold"}),this.add(_),new et.vj(M);const it=new et.X7(F);it.corner=50;const nt=new et.zx(Y);nt.spriteName="wait-button",nt.callback=()=>this.onYesClick(),nt.activeFrame=!1;const ht=new et.zx(k);ht.spriteName="wait-button",ht.callback=()=>this.onYesClick(),ht.activeFrame=!1,this.scene=v}onYesClick(){this.visible=!1,this.scene.savePrompt.visible=!0,this.scene.savePrompt.startTimer()}}class Rr extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.illustration;const M=v.add.rectangle(-1,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.image(-440,-216,"login","illustration1");F.setOrigin(.01327433628318584,0),this.add(F);const Y=v.add.image(0,0,"login","save-bg");this.add(Y);const k=v.add.image(-303,285,"login","save-button");this.add(k);const Q=v.add.image(21,285,"login","save-button");this.add(Q);const j=v.add.image(343,285,"login","learn-button");this.add(j);const _=v.add.image(487,-334,"main","blue-button");this.add(_);const it=v.add.image(487,-336,"main","blue-x");this.add(it);const nt=v.add.text(-303,285,"",{});nt.setOrigin(.5,.5),nt.text="Save Password",nt.setStyle({align:"center",fixedWidth:300,fontFamily:"Burbank Small",fontSize:"28px",fontStyle:"bold"}),this.add(nt);const ht=v.add.text(21,285,"",{});ht.setOrigin(.5,.5),ht.text=`Don't Save
Password`,ht.setStyle({align:"center",fixedWidth:300,fontFamily:"Burbank Small",fontSize:"28px",fontStyle:"bold"}),this.add(ht);const ft=v.add.text(343,285,"",{});ft.setOrigin(.5,.5),ft.text="Learn More",ft.setStyle({align:"center",fixedWidth:300,fontFamily:"Burbank Small",fontSize:"24px",fontStyle:"bold"}),this.add(ft),new et.vj(M);const gt=new et.zx(k);gt.spriteName="save-button",gt.callback=()=>this.onSaveClick(),gt.activeFrame=!1;const yt=new et.zx(Q);yt.spriteName="save-button",yt.callback=()=>this.close(),yt.activeFrame=!1;const Ot=new et.zx(j);Ot.spriteName="learn-button",Ot.callback=()=>this.close(),Ot.activeFrame=!1;const bt=new et.zx(_);bt.spriteName="blue-button",bt.callback=()=>this.close(),this.illustration=F,this.scene=v,this.timerConfig={delay:2800,callback:this.nextIllustration,callbackScope:this,loop:!0,paused:!0},this.timer=v.time.addEvent(this.timerConfig),this.currentIllustration=1,this.maxIllustration=3}onSaveClick(){this.scene.checks.enable(this.scene.checks.username),this.scene.checks.enable(this.scene.checks.password),this.close()}close(){this.visible=!1,this.stopTimer(),this.scene.events.emit("showinput")}nextIllustration(){!this.visible||(this.currentIllustration++,this.currentIllustration>this.maxIllustration&&(this.currentIllustration=1),this.illustration.setFrame(`illustration${this.currentIllustration}`))}startTimer(){this.illustration.setFrame("illustration1"),this.timer.paused=!1}stopTimer(){this.timer.reset(this.timerConfig)}}class ul extends Ie.Z{constructor(){super("Login"),this.checks,this.waitPrompt,this.savePrompt,this.version_control}_create(){this.add.image(0,1,"load","bg").setOrigin(0,0);const S=this.add.sprite(760,876,"login","small-button"),P=this.add.sprite(760,728,"login","large-button"),M=this.add.sprite(760,604,"login","small-button");this.add.image(1182,556,"login","note");const F=this.add.text(760,876,"",{});F.setOrigin(.5,.5),F.text="Back",F.setStyle({align:"right",color:"#ffffffff",fontFamily:"Arial Narrow",fontSize:"30px"}),F.setLineSpacing(25);const Y=this.add.text(760,747,"",{});Y.setOrigin(.5,.5),Y.text="Create a free account now",Y.setStyle({align:"right",color:"#ffffffff",fontFamily:"Arial Narrow",fontSize:"35px"}),Y.setLineSpacing(25);const k=this.add.text(760,713,"",{});k.setOrigin(.5,.5),k.text="Don't have a penguin?",k.setStyle({align:"right",color:"#000000ff",fontFamily:"Arial Narrow",fontSize:"30px"}),k.setLineSpacing(25);const Q=this.add.text(760,604,"",{});Q.setOrigin(.5,.5),Q.text="Forgot your password?",Q.setStyle({align:"right",color:"#ffffffff",fontFamily:"Arial Narrow",fontSize:"30px"}),Q.setLineSpacing(25);const j=this.add.sprite(760,483,"login","login-button"),_=this.add.text(760,483,"",{});_.setOrigin(.5,.5),_.text="Login",_.setStyle({align:"right",color:"#ffffffff",fontFamily:"Arial Narrow",fontSize:"38px"}),_.setLineSpacing(25);const it=this.add.text(503,258,"",{});it.setOrigin(0,.5),it.text="Password:",it.setStyle({align:"right",color:"#000000ff",fontFamily:"Arial Narrow",fontSize:"30px"}),it.setLineSpacing(25);const nt=this.add.text(448,200,"",{});nt.setOrigin(0,.5),nt.text="Penguin Name:",nt.setStyle({align:"right",color:"#000000ff",fontFamily:"Arial Narrow",fontSize:"30px"}),nt.setLineSpacing(25),this.add.image(815,258,"login","input"),this.add.image(815,200,"login","input");const ht=new Pr(this,568,328);this.add.existing(ht);const ft=new Ar(this,760,480);this.add.existing(ft),ft.visible=!1;const gt=new Rr(this,760,480);this.add.existing(gt),gt.visible=!1;const yt=this.add.text(1400,20,"",{});yt.setOrigin(.5,.5),yt.text="v{VERSION}",yt.setStyle({align:"right",color:"#bfbfbfff",fixedWidth:200,fontFamily:"Arial"});const Ot=new et.rF(S);Ot.callback=()=>this.onBackClick();const bt=new et.fw(S);bt.key="small-button",bt.end=3,bt.repeat=0,bt.onHover=!0;const At=new et.rF(P);At.callback=()=>this.onCreateClick();const Mt=new et.fw(P);Mt.key="large-button",Mt.end=3,Mt.repeat=0,Mt.onHover=!0;const Bt=new et.rF(M);Bt.callback=()=>this.onForgotClick();const Dt=new et.fw(M);Dt.key="small-button",Dt.end=3,Dt.repeat=0,Dt.onHover=!0;const Gt=new et.zx(j);Gt.spriteName="login-button",Gt.callback=()=>this.onLoginSubmit(),this.checks=ht,this.waitPrompt=ft,this.savePrompt=gt,this.version_control=yt,this.events.emit("scene-awake")}create(){this._create(),this.version_control.setText("v1.1.10-beta"),this.network.lastLoginScene="Login",this.waitPrompt.depth=1,this.savePrompt.depth=1;let v={width:"380px",height:"53px",padding:"0 6px 0 6px",filter:"none",fontFamily:"Arial",fontSize:"34px",color:"#000"};this.usernameInput=new as(this,815,200,"text",v,()=>this.onLoginSubmit(),12,!1),this.passwordInput=new as(this,815,259,"password",v,()=>this.onLoginSubmit(),128,!1),this.add.existing(this.usernameInput),this.add.existing(this.passwordInput),this.input.keyboard.on("keydown-ENTER",()=>this.onLoginSubmit())}onLoginSubmit(){let v=this.usernameInput.text,S=this.passwordInput.text;this.interface.showLoading(`Logging in ${v}`),this.scene.stop(),this.network.login("/login",{username:v,password:S},this.checks.username.checked,this.checks.password.checked)}onForgotClick(){window.open("https://cplegacy.com/password-reset","_blank").focus()}onCreateClick(){window.open("https://cplegacy.com/register","_blank").focus()}onBackClick(){this.network.disconnect(),this.scene.start("Start")}}class fl{constructor(v){this.paperDoll=v,this.scene=v.scene,this.scale=.7325,this.photoScale=.7,this.flagScale=.66,this.load=new Phaser.Loader.LoaderPlugin(this.scene),this.url="assets/media/clothing",this.prefix="paper",this.load.on("filecomplete",this.onFileComplete,this),this.load.on("loaderror",this.onLoadError,this),this.load.on("complete",this.onComplete,this)}setColor(v){this.paperDoll.body.tint=this.scene.world.getColor(v)}loadItems(v){for(let S of this.paperDoll.slots){let P=v[S];P>0&&this.loadItem(P,S)}this.load.start()}loadItem(v,S){if(S=="color")return this.setColor(v);if(v==0)return this.removeItem(S);let P=`${this.prefix}/${S}/${v}`;if(this.scene.textures.exists(P))return this.onFileComplete(P);let M=S=="flag"?`${this.url}/icon`:`${this.url}/paper`;this.load.image({key:P,url:`${M}/${v}.png`})}onFileComplete(v){if(!this.paperDoll.visible||!this.scene.textures.exists(v))return;let S=v.split("/")[1],P=this.paperDoll.items[S];switch(P.sprite&&this.removeItem(S),S){case"photo":P.sprite=this.loadPaper(v,S,P.depth,this.photoScale);break;case"flag":P.sprite=this.loadPaper(v,S,P.depth,this.flagScale),P.sprite.x=-149,P.sprite.y=-116;break;default:P.sprite=this.loadPaper(v,S,P.depth);break}}onLoadError(v){if(!this.paperDoll.visible)return;let S=v.key.split("/")[1];this.paperDoll.items[S].sprite&&this.removeItem(S)}onComplete(){!this.paperDoll.visible||this.paperDoll.sort("depth")}loadPaper(v,S,P,M=this.scale){let F=this.scene.add.image(0,0,v);return F.scale=M,F.depth=P,this.paperDoll.fadeIn&&this.fadeIn(F),S=="photo"?this.scene.playerCard.photo.add(F):this.paperDoll.add(F),this.paperDoll.isInputEnabled&&this.addInput(S,F),F}fadeIn(v){v.alpha=0,this.scene.tweens.add({targets:v,alpha:{from:0,to:1},duration:200})}addInput(v,S){S.setInteractive({cursor:"pointer",pixelPerfect:!0}),S.on("pointerdown",()=>this.onPaperClick(v))}onPaperClick(v){this.scene.network.send("remove_item",{type:v})}removeItem(v){let S=this.paperDoll.items[v];!S||!S.sprite||(S.sprite.destroy(),S.sprite=null)}}class cl extends Phaser.GameObjects.Image{constructor(v,S,P,M,F){super(v,S,P,M,F),this.cachedTint,this.tintedCanvas}renderCanvas(v,S,P,M){P.addToRenderList(S),Tr.batchSprite(v,S,S.frame,P,M)}}class un extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.paperdoll,this.fadeIn=!0;const M=v.add.image(0,0,"main","paperdoll/paperdoll");this.add(M),this.paperdoll=M,this.body=new cl(v,0,0,"main","paperdoll/body"),this.body.tint=this.crumbs.colors[0],v.add.existing(this.body),this.addAt(this.body,0),this.body.depth=1,this.paperdoll.depth=2,this.slots=["photo","color","","feet","body","neck","hand","face","head","flag"],this.items=this.setItems(),this.paperDollLoader=new fl(this),this.isInputEnabled=!1}setItems(){let v={};for(let S of this.slots)!S||(v[S]={depth:this.slots.indexOf(S)});return v}removeItems(){for(let v in this.items){let S=this.items[v].sprite;this.items[v].sprite&&(S.destroy(),S=null)}}loadDoll(v,S=!1){this.removeItems(),this.isInputEnabled=S,S?this.enableInput():this.disableInput(),this.paperDollLoader.loadItems(v)}enableInput(){this.body.setInteractive({pixelPerfect:!0}),this.paperdoll.setInteractive({pixelPerfect:!0})}disableInput(){this.body.removeInteractive(),this.paperdoll.removeInteractive()}}class fn extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.bg,this.paperDoll,this.username;const M=v.add.rectangle(0,0,488,664);M.isFilled=!0,M.fillColor=164045,this.add(M);const F=v.add.image(0,0,"login","player_large");this.add(F);const Y=new un(v,0,-45);this.add(Y);const k=v.add.text(0,215,"",{});k.setOrigin(.5,.5),k.setStyle({align:"center",fixedWidth:420,fontFamily:"CCFaceFront",fontSize:"44px",fontStyle:"bold italic",stroke:"#003366",strokeThickness:10,"shadow.color":"#000000ff"}),this.add(k);const Q=new et.X7(M);Q.corner=50;const j=new et.zx(F);j.spriteName="player_large",j.activeFrame=!1,Y.fadeIn=!1,this.bg=M,this.paperDoll=Y,this.username=k,this.button=j}}class cn extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.bg,this.penguinSmall,this.paperDoll,this.username;const M=v.add.rectangle(0,0,688,288);M.isFilled=!0,M.fillColor=164045,this.add(M);const F=v.add.image(0,0,"login","player_small");this.add(F);const Y=new un(v,-212,60);Y.visible=!0,this.add(Y);const k=v.add.text(90,0,"",{});k.setOrigin(.5,.5),k.setStyle({align:"center",fixedWidth:420,fontFamily:"CCFaceFront",fontSize:"48px",fontStyle:"bold italic",stroke:"#003366",strokeThickness:10,"shadow.color":"#000000ff"}),this.add(k);const Q=new et.X7(M);Q.corner=50;const j=new et.zx(F);j.spriteName="player_small",j.activeFrame=!1,Y.fadeIn=!1,this.bg=M,this.penguinSmall=F,this.paperDoll=Y,this.username=k,this.button=j;let _=v.make.graphics();_.fillRoundedRect(0,0,600,196,20);let it=_.createGeometryMask();Y.mask=it}}class dl extends Ie.Z{constructor(){super("PenguinSelect"),this.largeBg,this.smallBg,this.container,this.version_control}_create(){this.add.image(0,0,"load","bg").setOrigin(0,0);const S=this.add.rectangle(760,430,1368,664);S.visible=!1,S.isFilled=!0,S.fillColor=164045;const P=this.add.rectangle(760,430,1308,728);P.visible=!1,P.isFilled=!0,P.fillColor=164045;const M=this.add.sprite(760,876,"login","larger-button"),F=this.add.text(760,876,"",{});F.setOrigin(.5,.5),F.text="Login as a different penguin",F.setStyle({align:"center",color:"#ffffffff",fixedWidth:400,fontFamily:"Arial Narrow",fontSize:"30px"}),F.setLineSpacing(25);const Y=this.add.container(0,0),k=this.add.text(1400,20,"",{});k.setOrigin(.5,.5),k.text="v{VERSION}",k.setStyle({align:"right",color:"#bfbfbfff",fixedWidth:200,fontFamily:"Arial"});const Q=new et.X7(S);Q.corner=50;const j=new et.X7(P);j.corner=50;const _=new et.rF(M);_.callback=()=>this.onBackClick();const it=new et.fw(M);it.key="small-button",it.end=3,it.repeat=0,it.onHover=!0,this.largeBg=S,this.smallBg=P,this.container=Y,this.version_control=k,this.events.emit("scene-awake")}create(){this._create(),this.version_control.setText("v1.1.10-beta"),this.container.depth=1,this.smallBg.depth=2;let v=Object.values(this.network.savedPenguins).slice(0,6),S=v.length,P=S>3?cn:fn,M=[3,5,6].includes(S);switch(P===cn&&M&&(this.smallBg.visible=!0),P===fn&&M&&(this.largeBg.visible=!0),this.createObjects(v,P,M),S){case 1:this.createGrid(1,1,0,0);break;case 2:this.createGrid(2,1,532,0);break;case 3:this.createGrid(3,1,432,0);break;case 4:this.createGrid(2,2,700,300);break;case 5:this.createGrid(2,3,620,220);break;case 6:this.createGrid(2,3,620,220);break;default:this.onError();break}P===cn&&this.updateMasks()}createObjects(v,S,P){for(let M of v){let F=new S(this,0,0);const Y=M.realUsername||M.username;F.paperDoll.loadDoll(M),F.username.text=Y.toUpperCase(),F.button.callback=()=>this.onPenguinClick(M),P&&(F.bg.visible=!1),this.add.existing(F),this.container.add(F)}}createGrid(v,S,P,M){Phaser.Actions.GridAlign(this.container.getAll(),{width:v,height:S,cellWidth:P,cellHeight:M,position:Phaser.Display.Align.BOTTOM_RIGHT});let F=1520-P*v,Y=960-M*S;this.container.x=F/2,this.container.y=Y/2-50}updateMasks(){for(let v of this.container.getAll()){let S=v.paperDoll.mask.geometryMask;if(!S)continue;let P=v.penguinSmall.getWorldTransformMatrix();S.x=P.getX(0,0)-v.penguinSmall.width/2,S.y=P.getY(0,0)-v.penguinSmall.height/2}}onPenguinClick(v){this.scene.start("PenguinLogin",{penguin:v})}onBackClick(){this.scene.start("Login")}onError(){localStorage.removeItem("saved_penguins"),this.scene.start("Login")}}class vl extends Ie.Z{constructor(){super("PenguinLogin"),this.container,this.checks,this.savePrompt,this.waitPrompt,this.version_control}_create(){this.add.image(0,0,"load","bg").setOrigin(0,0);const S=new fn(this,475,430);this.add.existing(S);const P=this.add.sprite(760,876,"login","larger-button"),M=this.add.sprite(955,661,"login","small-button"),F=this.add.sprite(955,604,"login","small-button"),Y=this.add.text(760,876,"",{});Y.setOrigin(.5,.5),Y.text="Login as a different penguin",Y.setStyle({align:"center",color:"#ffffffff",fixedWidth:400,fontFamily:"Arial Narrow",fontSize:"30px"}),Y.setLineSpacing(25);const k=this.add.text(929,661,"",{});k.setOrigin(.5,.5),k.text="Forget my penguin",k.setStyle({color:"#ffffffff",fixedWidth:300,fontFamily:"Arial Narrow",fontSize:"30px"}),k.setLineSpacing(25);const Q=this.add.text(929,604,"",{});Q.setOrigin(.5,.5),Q.text="Forgot your password?",Q.setStyle({color:"#ffffffff",fixedWidth:300,fontFamily:"Arial Narrow",fontSize:"30px"}),Q.setLineSpacing(25);const j=this.add.sprite(935,487,"login","login-button"),_=this.add.text(935,487,"",{});_.setOrigin(.5,.5),_.text="Login",_.setStyle({align:"center",color:"#ffffffff",fixedWidth:100,fontFamily:"Arial Narrow",fontSize:"38px"}),_.setLineSpacing(25);const it=this.add.text(783,194,"",{});it.setOrigin(0,.5),it.text="Password:",it.setStyle({align:"right",color:"#000000ff",fontFamily:"Arial Narrow",fontSize:"30px"}),it.setLineSpacing(25),this.add.image(973,249,"login","input"),this.add.image(1258,760,"login","note");const nt=new Pr(this,806,330);this.add.existing(nt);const ht=new Rr(this,760,480);this.add.existing(ht),ht.visible=!1;const ft=new Ar(this,760,480);this.add.existing(ft),ft.visible=!1;const gt=this.add.text(1400,20,"",{});gt.setOrigin(.5,.5),gt.text="v{VERSION}",gt.setStyle({align:"right",color:"#bfbfbfff",fixedWidth:200,fontFamily:"Arial"});const yt=new et.rF(P);yt.callback=()=>this.onBackClick();const Ot=new et.fw(P);Ot.key="small-button",Ot.end=3,Ot.repeat=0,Ot.onHover=!0;const bt=new et.rF(M);bt.callback=()=>this.onForgetClick();const At=new et.fw(M);At.key="small-button",At.end=3,At.repeat=0,At.onHover=!0;const Mt=new et.rF(F);Mt.callback=()=>this.onForgotClick();const Bt=new et.fw(F);Bt.key="small-button",Bt.end=3,Bt.repeat=0,Bt.onHover=!0;const Dt=new et.zx(j);Dt.spriteName="login-button",Dt.callback=()=>this.onLoginSubmit(),this.container=S,this.checks=nt,this.savePrompt=ht,this.waitPrompt=ft,this.version_control=gt,this.events.emit("scene-awake")}create(v){this._create(),this.version_control.setText("v1.1.10-beta"),this.network.lastLoginScene="PenguinLogin",this.waitPrompt.depth=1,this.savePrompt.depth=1,this.checks.enable(this.checks.username),this.penguin=v.penguin;const S=this.penguin.realUsername||this.penguin.username;this.container.paperDoll.loadDoll(this.penguin),this.container.username.text=S.toUpperCase(),this.container.button.callback=()=>this.onBackClick(this.penguin);let P={width:"380px",height:"53px",padding:"0 6px 0 6px",filter:"none",fontFamily:"Arial",fontSize:"35px",color:"#000"};this.passwordInput=new as(this,973,250,"password",P,()=>this.onLoginSubmit(),128,!1),this.add.existing(this.passwordInput);let M=this.network.getToken(S);this.passwordEdited=!1,M&&(this.passwordInput.setText("password"),this.passwordInput.node.addEventListener("keydown",()=>this.passwordEdited=!0,{once:!0}),this.checks.enable(this.checks.password)),this.input.keyboard.on("keydown-ENTER",()=>this.onLoginSubmit())}onLoginSubmit(){let v=this.penguin.realUsername||this.penguin.username,S=this.passwordInput.text,P=this.network.getToken(v);this.interface.showLoading(`Logging in ${v}`),this.scene.stop(),P&&!this.passwordEdited?this.network.login("/token_login",{username:v,token:P},this.checks.username.checked,this.checks.password.checked):this.network.login("/login",{username:v,password:S},this.checks.username.checked,this.checks.password.checked)}onForgotClick(){window.open("https://cplegacy.com/password-reset","_blank").focus()}onForgetClick(){let v=this.network.savedPenguins;const S=this.penguin.realUsername||this.penguin.username;delete v[S.toLowerCase()],localStorage.setItem("saved_penguins",JSON.stringify(v)),this.scene.start("PenguinSelect")}onBackClick(){this.network.disconnect(),this.scene.start("PenguinSelect")}}class pl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.server,this.buddy,this.safe,this.name,this.full,this.bars,this.name="",this.safe=!1;const M=v.add.image(0,0,"servers","server");this.add(M);const F=v.add.image(322,1,"servers","bar_empty");F.setOrigin(.5161290322580645,.5098039215686274),this.add(F);const Y=v.add.image(277,1,"servers","bar_empty");Y.setOrigin(.5161290322580645,.5098039215686274),this.add(Y);const k=v.add.image(232,1,"servers","bar_empty");k.setOrigin(.5161290322580645,.5098039215686274),this.add(k);const Q=v.add.image(187,1,"servers","bar_empty");Q.setOrigin(.5161290322580645,.5098039215686274),this.add(Q);const j=v.add.image(142,1,"servers","bar_full");j.setOrigin(.5135135135135135,.5084745762711864),this.add(j);const _=v.add.image(-338,0,"servers","offline");_.setOrigin(.509090909090909,.509090909090909),this.add(_);const it=v.add.image(79,1,"servers","safe");it.setOrigin(.509090909090909,.5094339622641509),this.add(it);const nt=v.add.text(-125,0,"",{});nt.setOrigin(.5,.5),nt.setStyle({fixedWidth:350,fontFamily:"Arial",fontSize:"50px"}),this.add(nt);const ht=v.add.image(240,0,"servers","full");ht.setOrigin(.5,.5076923076923077),ht.visible=!1,this.add(ht);const ft=[j,Q,k,Y,F],gt=new et.zx(M);gt.spriteName="server",gt.activeFrame=!1,this.server=M,this.buddy=_,this.safe=it,this.name=nt,this.full=ht,this.bars=ft,this.button=gt}setPopulation(v){for(let[S,P]of this.bars.entries()){let M=S+1<=v?"bar_full":"bar_empty";P.setFrame(M),this.full.visible=v>=6}}}class ml extends Ie.Z{constructor(){super("Servers"),this.version_control}_create(){this.add.image(0,0,"load","bg").setOrigin(0,0);const S=this.add.text(1095,908,"",{});S.setOrigin(0,.5),S.text="Ultimate safe chat",S.setStyle({fixedWidth:200,fontFamily:"Arial Narrow",fontSize:"28px"}),this.add.image(1070,908,"servers","safe_small").setOrigin(.5,.5161290322580645);const M=this.add.text(645,908,"",{});M.setOrigin(0,.5),M.text="Amount of penguins online",M.setStyle({fixedWidth:300,fontFamily:"Arial Narrow",fontSize:"28px"}),this.add.image(620,908,"servers","bar_full_small");const F=this.add.text(277,908,"",{});F.setOrigin(0,.5),F.text="Buddies online",F.setStyle({fixedWidth:200,fontFamily:"Arial Narrow",fontSize:"28px"}),this.add.image(252,908,"servers","online_small");const Y=this.add.image(1300,630,"servers","more");Y.setOrigin(.5,.5027322404371585),Y.visible=!1;const k=this.add.text(760,85,"",{});k.setOrigin(.5,.5),k.text="YOUR SUGGESTED SERVERS",k.setStyle({align:"center",fixedWidth:1200,fontFamily:"CCFaceFront",fontSize:"40px",fontStyle:"bold italic",stroke:"#003366",strokeThickness:10,"shadow.color":"#000000ff"});const Q=this.add.text(1400,20,"",{});Q.setOrigin(.5,.5),Q.text="v{VERSION}",Q.setStyle({align:"right",color:"#bfbfbfff",fixedWidth:200,fontFamily:"Arial"}),this.version_control=Q,this.events.emit("scene-awake")}create(v){this._create(),this.version_control.setText("v1.1.10-beta"),this.createServers(v)}createServers(v){let S=122,P=Object.entries(this.crumbs.worlds).slice(0,5);for(let[M,F]of P){S+=102;let Y=new pl(this,760,S);Y.name.text=M,Y.safe.visible=F.safe;let k=v.populations[M]||1;Y.setPopulation(k),Y.button.callback=()=>this.onServerClick(M,v.username,v.key,k>=6),this.add.existing(Y)}}onServerClick(v,S,P,M){if(M)return this.interface.prompt.showError("Sorry this server is full. Please select another server.");this.interface.showLoading(`${this.getString("joining")} ${v}`),this.scene.stop(),this.network.connectGame(v,S,P)}}class Mr extends jt.Z{constructor(v){let S=-95;super(v.room,v.x,v.y+S),this.penguin=v,this.minWidth=128,this.minHeight=42,this.offsetY=S,this.balloon}addBalloon(v,S){v<this.minWidth&&(v=this.minWidth),S<this.minHeight&&(S=this.minHeight),this.balloon=this.scene.add.nineslice(0,0,v,S,{key:"main",frame:"balloon"},15),this.balloon.setOrigin(.5,1),this.add(this.balloon)}addPointer(v,S){v<this.minWidth&&(v=this.minWidth);let P=this.scene.add.nineslice(0,0,v,40,{key:"main",frame:S},[0,110,0,15]);P.setOrigin(.5,0),this.add(P)}resizeBalloon(v,S){this.balloon.resize(v,S)}updatePosition(){this.x=this.penguin.x,this.y=this.penguin.y+this.offsetY}}class gl extends Mr{constructor(v){super(v);let S=128,P=68;this.emote=this.addEmote(),this.addBalloon(S,P),this.addPointer(S,"balloon-emote"),this.add(this.emote)}addEmote(){return this.scene.add.image(0,-25,"main","emotes/1")}setContent(v){this.updatePosition();let S=`emotes/${v}`;this.world.textures.get("main").has(S)||(S="emotes/1"),this.emote.setFrame(S)}}class xl extends Mr{constructor(v){super(v);let S=256,M=S-28;this.maxLength=60,this.paddingY=16,this.textStyle={fontFamily:"Burbank Small",fontSize:"24px",color:"#000000",align:"center",fixedWidth:M,wordWrap:{width:M,useAdvancedWrap:!0},lineSpacing:-5},this.text=this.addText(),this.addBalloon(S,this.text.height+this.paddingY),this.addPointer(S,"balloon-text"),this.add(this.text)}addText(){let v=this.scene.add.text(0,0,"",this.textStyle);return v.setOrigin(.5,1),v}setContent(v){this.updatePosition(),v=v.substring(0,this.maxLength),this.text.text=v,this.resizeBalloon(this.balloon.width,this.text.height+this.paddingY)}}class yl{constructor(v){this.main=v,this.delay=4500,this.offsetY=-95}get penguins(){return this.main.world.room.penguins}showEmoteBalloon(v,S){if(!S)return;let P=this.penguins[v];!P||!P.visible||(P.emoteBalloon||(P.emoteBalloon=new gl(P),P.room.add.existing(P.emoteBalloon)),P.emoteBalloon.setContent(S),this.updateBalloon(P,P.emoteBalloon))}showTextBalloon(v,S){if(!S)return;let P=this.penguins[v];!P||(this.main.chatLog.addMessage(P.id,P.username,S),P.visible&&(P.textBalloon||(P.textBalloon=new xl(P),P.room.add.existing(P.textBalloon)),P.textBalloon.setContent(S),this.updateBalloon(P,P.textBalloon)))}updateBalloon(v,S){v.balloon&&(v.balloon.visible=!1),S.depth=v.isClient?3001:3e3,S.visible=!0,v.balloon=S,this.addTimer(v,S)}addTimer(v,S){let P={delay:this.delay,callback:()=>this.removeBalloon(v,S)};if(v.balloonTimer){v.balloonTimer.reset(P),v.room.time.addEvent(v.balloonTimer);return}v.balloonTimer=v.room.time.addEvent(P)}removeBalloon(v,S){S.visible=!1,v.balloon=null}}class Tl extends jt.Z{constructor(v,S,P){super(v,S,P),this.textStyle={fontFamily:"Arial",fontSize:"24px",color:"#000000",align:"center"},this.hint=this.createHint(),this.text=this.createText(),this.tween=null,this.add([this.hint,this.text])}createHint(){let v=this.scene.add.nineslice(0,0,176,44,{key:"main",frame:"hint"},10);return v.setOrigin(.5),v}createText(){return this.scene.add.text(0,-14,"",this.textStyle)}showHint(v,S){let P=v.getWorldTransformMatrix();this.x=P.getX(0,0),this.y=P.getY(0,0)-56,this.text.text=S,this.text.x=-Math.round(this.text.width/2),this.text.visible=!1;let M=this.text.width>144?this.text.width+32:176;this.hint.resize(M,44),this.visible=!0,this.tween=this.scene.tweens.add({targets:this,scale:{from:.75,to:1},duration:50,ease:"Linear",onComplete:()=>{this.text.visible=!0}})}hideHint(){this.visible=!1,this.tween&&(this.tween.remove(),this.tween=null)}}const Sl=Tl;class El{constructor(v){this.world=v,this.balls=[],this.speed=800,this.startHeight=-12,this.maxHeight=425,this.minHeight=350,v.events.on("snowballcomplete",(S,P)=>v.room.onSnowballComplete(S,P))}throwBall(v,S,P){let M=this.world.room.penguins[v];if(!M||M.isTweening)return;this.balls.length>9&&this.removeOldestBall();let F=this.createBall(M);S+=Phaser.Math.Between(-20,20),P+=Phaser.Math.Between(-20,20),this.playAnimation(M,S,P),this.world.room.time.addEvent({delay:833,callback:()=>this.addTween(F,S,P)})}removeOldestBall(){let v=this.balls.shift();v.tween&&v.tween.remove(),v.shadow.destroy(),v.destroy()}createBall(v){let S=this.world.room.add.image(v.x,v.y+this.startHeight,"main","snowball/ball");return S.shadow=this.world.room.add.image(v.x,v.y,"main","snowball/shadow"),S.visible=!1,S.shadow.visible=!1,this.balls.push(S),S}playAnimation(v,S,P){let M=Me.getAngle({x:v.x,y:v.y},{x:S,y:P}),Y=Math.max(Math.round(Me.getDirection(M)/2),1)+26;v.playFrame(Y,!1)}addTween(v,S,P){let M=Phaser.Math.Distance.Between(v.x,v.y,S,P),F=Me.getDuration(M,this.speed),Y=this.getPeak(F),k=this.getMidPoint([v.x,v.y],[S,P]),Q=new Phaser.Curves.QuadraticBezier([v.x,v.y,k.x,k.y-Y,S,P]);v.tween=this.world.room.tweens.add({targets:v.shadow,duration:F,y:P,onStart:()=>this.onTweenStart(v),onUpdate:()=>this.onTweenUpdate(v,Q),onComplete:()=>this.onTweenComplete(v)})}onTweenStart(v){v.visible=!0,v.shadow.visible=!0}onTweenUpdate(v,S){let P=S.getPoint(v.tween.totalProgress);v.x=P.x,v.y=P.y,v.shadow.x=P.x,v.depth=v.shadow.y+1,v.shadow.depth=v.shadow.y}onTweenComplete(v){v.active&&(v.setTexture("main","snowball/ground"),this.world.events.emit("snowballcomplete",v.x,v.y))}getPeak(v){let S=Math.max(v/2,this.minHeight);return Math.min(S,this.maxHeight)}getMidPoint([v,S],[P,M]){return{x:(v+P)/2,y:(S+M)/2}}clearBalls(){this.balls=[]}}class Rs extends jt.Z{initMenu(){this.safe&&this.setupSafe(),this.close&&this.setupClose(),this.back=this.createBack()}setupSafe(){this.safe.isFilled=!1,this.safe.setInteractive()}setupClose(){this.close.isFilled=!1,this.close.setInteractive({cursor:"pointer"}),this.close.on("pointerup",()=>this.closeMenu())}createBack(){let v=this.scene.add.rectangle(-this.x,-this.y,1520,960);return v.setOrigin(0),v.setInteractive(),this.add(v),this.sendToBack(v),v.on("pointerover",()=>this.onBackOver()),v.on("pointerout",()=>this.onBackOut()),v.on("pointerup",()=>this.onBackUp()),v}onBackOver(){this.closeMenu()}onBackOut(){}onBackUp(){this.closeMenu()}closeMenu(){this.visible=!1}}class Cl extends Rs{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.safe,this.close;const M=v.add.rectangle(0,-198,200,460);M.isFilled=!0,M.fillColor=65535,M.fillAlpha=.5,this.add(M);const F=v.add.rectangle(0,61,80,80);F.isFilled=!0,F.fillColor=65535,F.fillAlpha=.5,this.add(F);const Y=v.add.image(0,-198,"main","actions");this.add(Y);const k=v.add.image(32,-38,"main","small-box");this.add(k);const Q=v.add.image(32,-102,"main","small-box");this.add(Q);const j=v.add.image(-32,-102,"main","small-box");this.add(j);const _=v.add.image(-32,-38,"main","small-box");this.add(_);const it=v.add.image(0,-198,"main","large-box");this.add(it);const nt=v.add.image(0,-326,"main","large-box");this.add(nt);const ht=v.add.image(0,-198,"main","wave");this.add(ht);const ft=v.add.image(0,-70,"main","sit");this.add(ft);const gt=v.add.image(0,-326,"main","dance");this.add(gt);const yt=new et.zx(k);yt.spriteName="small-box",yt.callback=()=>this.onActionClick(24),yt.activeFrame=!1;const Ot=new et.zx(Q);Ot.spriteName="small-box",Ot.callback=()=>this.onActionClick(22),Ot.activeFrame=!1;const bt=new et.zx(j);bt.spriteName="small-box",bt.callback=()=>this.onActionClick(20),bt.activeFrame=!1;const At=new et.zx(_);At.spriteName="small-box",At.callback=()=>this.onActionClick(18),At.activeFrame=!1;const Mt=new et.zx(it);Mt.spriteName="large-box",Mt.callback=()=>this.onActionClick(25,!1),Mt.activeFrame=!1;const Bt=new et.zx(nt);Bt.spriteName="large-box",Bt.callback=()=>this.onActionClick(26),Bt.activeFrame=!1,this.safe=M,this.close=F,this.initMenu()}onActionClick(v,S=!0){this.world.client.sendFrame(v,S),this.visible=!1}}class Oi extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.icon,this.username;const M=v.add.image(0,0,"main","buddy/item");this.add(M);const F=v.add.image(-137,0,"main","buddy/icon-offline");this.add(F);const Y=v.add.text(25,0,"",{});Y.setOrigin(.5,.5),Y.setStyle({fixedWidth:270,fontFamily:"Arial",fontSize:"24px"}),this.add(Y);const k=new et.zx(M);k.spriteName="buddy/item",k.callback=()=>this.onClick(),k.activeFrame=!1,this.icon=F,this.username=Y,this.id=null}setItem(v){if(!v)return this.clearItem();this.id=v.id,this.username.text=v.username;let P=`buddy/icon-${this.world.getRelationship(v.id)}`;this.icon.setTexture("main",P)}clearItem(){this.id=null,this.username.text="",this.icon.setTexture("main","buddy/icon-offline")}onClick(){this.id&&this.interface.showCard(this.id)}}class wl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.text,this.total,this.items;const M=v.add.image(0,0,"main","card-bg");this.add(M);const F=v.add.text(0,-236,"",{});F.setOrigin(.5,.5),F.text="Your Friends",F.setStyle({align:"center",color:"#000000",fixedWidth:420,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(F);const Y=v.add.image(177,-237,"main","blue-button");this.add(Y);const k=v.add.image(177,-239,"main","blue-x");this.add(k);const Q=v.add.image(177,14,"main","buddy/scroll");this.add(Q);const j=v.add.image(177,195,"main","blue-button");this.add(j);const _=v.add.image(177,-173,"main","blue-button");this.add(_);const it=v.add.image(177,193,"main","blue-arrow");it.flipY=!0,this.add(it);const nt=v.add.image(177,-175,"main","blue-arrow");this.add(nt);const ht=new Oi(v,-26,194);this.add(ht);const ft=new Oi(v,-26,142);this.add(ft);const gt=new Oi(v,-26,90);this.add(gt);const yt=new Oi(v,-26,38);this.add(yt);const Ot=new Oi(v,-26,-14);this.add(Ot);const bt=new Oi(v,-26,-66);this.add(bt);const At=new Oi(v,-26,-118);this.add(At);const Mt=new Oi(v,-26,-170);this.add(Mt);const Bt=v.add.image(-1,255,"main","blue-button");this.add(Bt);const Dt=v.add.image(59,255,"main","blue-button");this.add(Dt);const Gt=v.add.image(119,255,"main","blue-button");this.add(Gt);const Lt=v.add.image(-1,253,"main","buddies-icon");this.add(Lt);const Kt=v.add.image(59,253,"main","online-icon");this.add(Kt);const kt=v.add.image(119,253,"main","ignore-icon");this.add(kt);const Zt=v.add.text(-126,273,"",{});Zt.setOrigin(.5,.5),Zt.setStyle({color:"#003366",fixedWidth:115,fixedHeight:64,fontFamily:"Arial Narrow",fontSize:"24px"}),this.add(Zt);const ae=[Mt,At,bt,Ot,yt,gt,ft,ht],fe=new et.K$(this);fe.handle=M;const _t=new et.zx(Y);_t.spriteName="blue-button",_t.callback=()=>{this.visible=!1};const oe=new et.zx(j);oe.spriteName="blue-button",oe.callback=()=>this.nextPage(),oe.activeFrame=!1;const ie=new et.zx(_);ie.spriteName="blue-button",ie.callback=()=>this.prevPage(),ie.activeFrame=!1;const he=new et.zx(Bt);he.spriteName="blue-button",he.callback=()=>this.switchList("buddies","Your Friends");const te=new et.tk(Bt);te.text="buddy_hint";const se=new et.zx(Dt);se.spriteName="blue-button",se.callback=()=>this.switchList("room","Users in Room");const ce=new et.tk(Dt);ce.text="online_hint";const le=new et.zx(Gt);le.spriteName="blue-button",le.callback=()=>this.switchList("ignores","Ignore List");const ue=new et.tk(Gt);ue.text="ignore_hint",this.text=F,this.total=Zt,this.items=ae,this.listType="buddies",this.page=1,this.pageSize=8,this.showPage()}get penguins(){return this[this.listType]}get maxPage(){return Math.ceil(this.penguins.length/this.pageSize)}get buddies(){return this.world.client.buddies.sort((v,S)=>-(v.online-S.online)||v.username.toLowerCase().localeCompare(S.username.toLowerCase()))}get room(){return Object.values(this.world.room.penguins).map(S=>({id:S.id,username:S.username})).sort((S,P)=>S.username.toLowerCase().localeCompare(P.username.toLowerCase()))}get ignores(){return this.world.client.ignores.sort((v,S)=>v.username.toLowerCase().localeCompare(S.username.toLowerCase()))}showPage(){if(this.visible===!1)return;let v=this.penguins.slice((this.page-1)*this.pageSize,this.page*this.pageSize);for(let[S,P]of this.items.entries()){let M=v[S];M?P.setItem(M):P.setItem(null)}this.listType==="buddies"||this.listType==="ignores"?(this.total.text=`${this.world.client[this.listType].length} Buddies`,this.total.visible=!0):this.total.visible=!1}prevPage(){let v=this.page-1;v<1||(this.page=v,this.showPage())}nextPage(){let v=this.page+1;v>this.maxPage||(this.page=v,this.showPage())}switchList(v,S){this.page=1,this.text.text=S,this.listType=v,this.showPage()}}class Ol extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.bg,this.handle,this.arrow;const M=v.add.image(0,-442,"main","chatlog/bg");this.add(M);const F=v.add.container(0,-2);this.add(F);const Y=v.add.image(0,8,"main","tab");F.add(Y);const k=v.add.image(0,2,"main","tab-arrow");F.add(k),new et.vj(M);const Q=new et.rF(Y);Q.callback=()=>{this.onTabClick()},this.bg=M,this.handle=Y,this.arrow=k,this.defaultY=this.y,this.textStyle={fontFamily:"Burbank Small",fontSize:"24px",color:"#000000",align:"left",fixedWidth:720},this.messages=[],this.numContainers=19,this.containers=this.createContainers(),this.open=!1,this.dragging=!1,v.events.once("update",()=>this.addInput())}addInput(){this.handle.input.draggable=!0,this.scene.input.dragDistanceThreshold=10,this.handle.on("dragstart",()=>this.onTabDragStart()),this.handle.on("drag",v=>this.onTabDrag(v.y)),this.handle.on("dragend",()=>this.onTabDragEnd())}createContainers(){let v=[],S=-15;for(let P=1;P<=this.numContainers;P++){S-=40;let M=this.scene.add.image(0,S,"main","chatlog/message");M.id=null,M.text=this.scene.add.text(0,S,"",this.textStyle),M.text.setOrigin(.5),this.add([M,M.text]),v.push(M);let F=new et.zx(M);F.spriteName="chatlog/message",F.activeFrame=!1,F.callback=()=>this.onMessageClick(M.id)}return v}addMessage(v,S,P){this.messages.length==this.numContainers&&this.messages.pop(),this.messages.unshift({id:v,message:`${S}: ${P}`}),this.updateMessages()}updateMessages(){for(let[v,S]of this.messages.entries()){let P=this.containers[v];P.id=S.id,P.text.text=S.message}this.dragging&&this.checkContainers()}clearMessages(){this.messages=[];for(let v of this.containers)v.id=null,v.text.text=""}onMessageClick(v){v&&this.interface.showCard(v)}onTabClick(){this.dragging||(this.open?this.y=this.defaultY:this.y=220,this.open=!this.open,this.arrow.toggleFlipY(),this.checkContainers())}onTabDragStart(){this.dragging=!0}onTabDrag(v){v>840&&(v=840),v<this.defaultY&&(v=this.defaultY),this.y=Math.round(v),!this.open&&v>222&&(this.open=!0,this.arrow.flipY=!0)}onTabDragEnd(){this.checkContainers(),setTimeout(()=>{this.dragging=!1},200)}checkContainers(){for(let v of this.containers)this.checkContainer(v)}checkContainer(v){let M=v.getWorldTransformMatrix().getY(0,0)-23>0;v.visible=M,v.text.visible=M}}class Pl extends Rs{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.safe,this.close;const M=v.add.rectangle(0,-229,280,520);M.isFilled=!0,M.fillColor=65535,M.fillAlpha=.5,this.add(M);const F=v.add.rectangle(0,61,80,80);F.isFilled=!0,F.fillColor=65535,F.fillAlpha=.5,this.add(F);const Y=v.add.image(0,-229,"main","emotes");this.add(Y);const k=v.add.image(64,-37,"main","small-box");this.add(k);const Q=v.add.image(0,-37,"main","small-box");this.add(Q);const j=v.add.image(-64,-37,"main","small-box");this.add(j);const _=v.add.image(64,-101,"main","small-box");this.add(_);const it=v.add.image(0,-101,"main","small-box");this.add(it);const nt=v.add.image(-64,-101,"main","small-box");this.add(nt);const ht=v.add.image(64,-165,"main","small-box");this.add(ht);const ft=v.add.image(0,-165,"main","small-box");this.add(ft);const gt=v.add.image(-64,-165,"main","small-box");this.add(gt);const yt=v.add.image(64,-229,"main","small-box");this.add(yt);const Ot=v.add.image(0,-229,"main","small-box");this.add(Ot);const bt=v.add.image(-64,-229,"main","small-box");this.add(bt);const At=v.add.image(64,-293,"main","small-box");this.add(At);const Mt=v.add.image(0,-293,"main","small-box");this.add(Mt);const Bt=v.add.image(-64,-293,"main","small-box");this.add(Bt);const Dt=v.add.image(64,-357,"main","small-box");this.add(Dt);const Gt=v.add.image(0,-357,"main","small-box");this.add(Gt);const Lt=v.add.image(-64,-357,"main","small-box");this.add(Lt);const Kt=v.add.image(64,-421,"main","small-box");this.add(Kt);const kt=v.add.image(0,-421,"main","small-box");this.add(kt);const Zt=v.add.image(-64,-421,"main","small-box");this.add(Zt);const ae=v.add.image(64,-37,"main","emotes/16-small");this.add(ae);const fe=v.add.image(0,-37,"main","emotes/12-small");this.add(fe);const _t=v.add.image(-64,-37,"main","emotes/30-small");this.add(_t);const oe=v.add.image(64,-101,"main","emotes/17-small");this.add(oe);const ie=v.add.image(0,-101,"main","emotes/28-small");this.add(ie);const he=v.add.image(-64,-101,"main","emotes/11-small");this.add(he);const te=v.add.image(64,-165,"main","emotes/26-small");this.add(te);const se=v.add.image(0,-165,"main","emotes/10-small");this.add(se);const ce=v.add.image(-64,-165,"main","emotes/9-small");this.add(ce);const le=v.add.image(64,-229,"main","emotes/24-small");this.add(le);const ue=v.add.image(0,-229,"main","emotes/8-small");this.add(ue);const Ee=v.add.image(-64,-229,"main","emotes/7-small");this.add(Ee);const Xt=v.add.image(64,-293,"main","emotes/29-small");this.add(Xt);const Ae=v.add.image(0,-293,"main","emotes/6-small");this.add(Ae);const Se=v.add.image(-64,-293,"main","emotes/5-small");this.add(Se);const We=v.add.image(64,-357,"main","emotes/18-small");this.add(We);const De=v.add.image(0,-357,"main","emotes/4-small");this.add(De);const hi=v.add.image(-64,-357,"main","emotes/3-small");this.add(hi);const $e=v.add.image(64,-421,"main","emotes/13-small");this.add($e);const Ri=v.add.image(0,-421,"main","emotes/2-small");this.add(Ri);const Je=v.add.image(-64,-421,"main","emotes/1-small");this.add(Je);const li=new et.zx(k);li.spriteName="small-box",li.callback=()=>{this.onEmoteClick(16)},li.activeFrame=!1;const Ne=new et.zx(Q);Ne.spriteName="small-box",Ne.callback=()=>{this.onEmoteClick(12)},Ne.activeFrame=!1;const ui=new et.zx(j);ui.spriteName="small-box",ui.callback=()=>{this.onEmoteClick(30)},ui.activeFrame=!1;const Ge=new et.zx(_);Ge.spriteName="small-box",Ge.callback=()=>{this.onEmoteClick(17)},Ge.activeFrame=!1;const Qe=new et.zx(it);Qe.spriteName="small-box",Qe.callback=()=>{this.onEmoteClick(28)},Qe.activeFrame=!1;const fi=new et.zx(nt);fi.spriteName="small-box",fi.callback=()=>{this.onEmoteClick(11)},fi.activeFrame=!1;const ci=new et.zx(ht);ci.spriteName="small-box",ci.callback=()=>{this.onEmoteClick(26)},ci.activeFrame=!1;const di=new et.zx(ft);di.spriteName="small-box",di.callback=()=>{this.onEmoteClick(10)},di.activeFrame=!1;const Mi=new et.zx(gt);Mi.spriteName="small-box",Mi.callback=()=>{this.onEmoteClick(9)},Mi.activeFrame=!1;const vi=new et.zx(yt);vi.spriteName="small-box",vi.callback=()=>{this.onEmoteClick(24)},vi.activeFrame=!1;const qe=new et.zx(Ot);qe.spriteName="small-box",qe.callback=()=>{this.onEmoteClick(8)},qe.activeFrame=!1;const yi=new et.zx(bt);yi.spriteName="small-box",yi.callback=()=>{this.onEmoteClick(7)},yi.activeFrame=!1;const bi=new et.zx(At);bi.spriteName="small-box",bi.callback=()=>{this.onEmoteClick(29)},bi.activeFrame=!1;const Ti=new et.zx(Mt);Ti.spriteName="small-box",Ti.callback=()=>{this.onEmoteClick(6)},Ti.activeFrame=!1;const pi=new et.zx(Bt);pi.spriteName="small-box",pi.callback=()=>{this.onEmoteClick(5)},pi.activeFrame=!1;const _e=new et.zx(Dt);_e.spriteName="small-box",_e.callback=()=>{this.onEmoteClick(18)},_e.activeFrame=!1;const mi=new et.zx(Gt);mi.spriteName="small-box",mi.callback=()=>{this.onEmoteClick(4)},mi.activeFrame=!1;const Qi=new et.zx(Lt);Qi.spriteName="small-box",Qi.callback=()=>{this.onEmoteClick(3)},Qi.activeFrame=!1;const Cn=new et.zx(Kt);Cn.spriteName="small-box",Cn.callback=()=>{this.onEmoteClick(13)},Cn.activeFrame=!1;const wn=new et.zx(kt);wn.spriteName="small-box",wn.callback=()=>{this.onEmoteClick(2)},wn.activeFrame=!1;const On=new et.zx(Zt);On.spriteName="small-box",On.callback=()=>{this.onEmoteClick(1)},On.activeFrame=!1,this.safe=M,this.close=F,this.initMenu()}onEmoteClick(v){this.world.client.sendEmote(v),this.visible=!1}}class Ms extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.icon,this.username;const M=v.add.image(0,0,"main","buddy/item");this.add(M);const F=v.add.image(-137,0,"main","buddy/icon-load");this.add(F);const Y=v.add.text(25,0,"",{});Y.setOrigin(.5,.5),Y.text="Empty",Y.setStyle({fixedWidth:270,fontFamily:"Arial",fontSize:"24px"}),this.add(Y),this.icon=F,this.username=Y,this.id=null,this.spinnerTween=v.tweens.add({targets:this.icon,angle:{from:0,to:180},duration:900,repeat:-1,ease:"Cubic"})}setItem(v){if(this.visible=!0,this.username.text=v||"Empty",v){this.stopSpinner();let S=v.toLowerCase()==this.world.client.penguin.username.toLowerCase()?"player":"none";this.icon.setTexture("main",`buddy/icon-${S}`)}else this.startSpinner(),this.icon.setTexture("main","buddy/icon-load")}hideItem(){this.visible=!1,this.stopSpinner()}startSpinner(){this.spinnerTween.seek(0),this.spinnerTween.resume()}stopSpinner(){this.spinnerTween.pause(),this.icon.angle=0}}class Al extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.text,this.items;const M=v.add.rectangle(0,0,464,360);M.isFilled=!0,M.fillColor=164045,this.add(M);const F=v.add.image(0,-190,"main","tab-2");this.add(F);const Y=new Ms(v,0,100);this.add(Y);const k=new Ms(v,0,48);this.add(k);const Q=new Ms(v,0,-4);this.add(Q);const j=new Ms(v,0,-56);this.add(j);const _=v.add.text(0,-122,"",{});_.setOrigin(.5,.5),_.text="Sled Racing",_.setStyle({align:"center",color:"#000000",fixedWidth:420,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(_);const it=v.add.image(178,-126,"main","blue-button");this.add(it);const nt=v.add.image(178,-128,"main","blue-x");this.add(nt);const ht=[j,Q,k,Y],ft=new et.K$(this);ft.handle=M;const gt=new et.X7(M);gt.corner=50;const yt=new et.zx(it);yt.spriteName="blue-button",yt.callback=()=>this.onClose(),this.text=_,this.items=ht,this.activeWaddleId,this.activeSeat}get activeWaddle(){return this.world.room.waddles[this.activeWaddleId]}getSeat(v,S){return this.world.room[`seats${v}`][S]}onClose(){this.network.send("leave_waddle"),this.leaveSeat(),this.activeWaddleId=null,this.visible=!1}showWaddle(v,S){this.activeWaddleId=v,this.enterSeat(v,S),this.items.map(P=>P.hideItem());for(let[P,M]of this.activeWaddle.entries())this.items[P].setItem(M);this.visible=!0}updateWaddle(v,S,P){let M=this.getSeat(v,S);M.visible=P!=null,this.world.room.waddles[v][S]=P,v==this.activeWaddleId&&this.items[S].setItem(P)}enterSeat(v,S){this.activeSeat=this.getSeat(v,S),this.world.client.penguin.move(this.activeSeat.x,this.activeSeat.y,this.activeSeat.sitFrame)}leaveSeat(){let v=this.activeSeat.x+this.activeSeat.offsetX,S=this.activeSeat.y+this.activeSeat.offsetY;this.activeSeat=null,this.world.client.penguin.move(v,S)}}class re extends Phaser.GameObjects.Image{constructor(v,S,P,M,F){super(v,S!=null?S:760,P!=null?P:480,M||"map",F!=null?F:"igloo/igloo"),this.setOrigin(.5054945054945055,.5058823529411764);const Y=new et.rF(this);Y.callback=()=>this.onClick(),new et.tk(this),this.scene=v,this.id}onClick(){this.id&&this.scene.world.client.sendJoinIgloo(this.id)}reset(){this.id=null,this.__ShowHint.text=null,this.visible=!1}show(v){this.id=v.id,this.__ShowHint.text=v.username,this.visible=!0}}class Pi extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.icon,this.username;const M=v.add.image(0,0,"map","igloo/item_small");this.add(M);const F=v.add.image(-137,0,"map","igloo/icon_none");this.add(F);const Y=v.add.text(25,0,"",{});Y.setOrigin(.5,.5),Y.setStyle({color:"#000",fixedWidth:270,fontFamily:"Arial",fontSize:"24px"}),this.add(Y);const k=new et.zx(M);k.spriteName="igloo/item_small",k.callback=()=>this.onClick(),k.activeFrame=!1,this.icon=F,this.username=Y,this.id}setItem(v){if(!v)return this.clearItem();this.id=v.id,this.username.text=v.username;let S=this.world.getRelationship(v.id);S!="online"&&(S="none");let P=`igloo/icon_${S}`;this.icon.setFrame(P)}clearItem(){this.id=null,this.username.text="",this.icon.setFrame("igloo/icon_none")}onClick(){this.id&&this.world.client.sendJoinIgloo(this.id)}}class Rl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.spinner,this.panel,this.down,this.downButton,this.up,this.upButton,this.iglooSprites,this.items;const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.image(-11,-44,"map","igloo/bg");this.add(F);const Y=new re(v,-336,-50);Y.scaleX=.9,Y.scaleY=.9,Y.flipX=!1,Y.flipY=!1,this.add(Y);const k=new re(v,-277,-30);k.scaleX=.9,k.scaleY=.9,k.flipX=!1,k.flipY=!1,this.add(k);const Q=new re(v,-216,-10);Q.scaleX=.9,Q.scaleY=.9,Q.flipX=!1,Q.flipY=!1,this.add(Q);const j=new re(v,-156,9);j.scaleX=.9,j.scaleY=.9,j.flipX=!1,j.flipY=!1,this.add(j);const _=new re(v,-107,61);_.scaleX=1,_.scaleY=1,_.flipX=!1,_.flipY=!1,this.add(_);const it=new re(v,-224,88);it.scaleX=1,it.scaleY=1,it.flipX=!0,it.flipY=!1,this.add(it);const nt=new re(v,-150,119);nt.scaleX=1,nt.scaleY=1,nt.flipX=!1,nt.flipY=!1,this.add(nt);const ht=new re(v,-89,140);ht.scaleX=1,ht.scaleY=1,ht.flipX=!1,ht.flipY=!1,this.add(ht);const ft=new re(v,-439,-16);ft.scaleX=.9,ft.scaleY=.9,ft.flipX=!0,ft.flipY=!1,this.add(ft);const gt=new re(v,-382,36);gt.scaleX=1,gt.scaleY=1,gt.flipX=!1,gt.flipY=!1,this.add(gt);const yt=new re(v,-323,57);yt.scaleX=1,yt.scaleY=1,yt.flipX=!1,yt.flipY=!1,this.add(yt);const Ot=new re(v,-286,116);Ot.scaleX=1,Ot.scaleY=1,Ot.flipX=!0,Ot.flipY=!1,this.add(Ot);const bt=new re(v,108,67);bt.scaleX=1,bt.scaleY=1,bt.flipX=!0,bt.flipY=!1,this.add(bt);const At=new re(v,81,117);At.scaleX=1,At.scaleY=1,At.flipX=!0,At.flipY=!1,this.add(At);const Mt=new re(v,188,101);Mt.scaleX=1,Mt.scaleY=1,Mt.flipX=!0,Mt.flipY=!1,this.add(Mt);const Bt=new re(v,-121,-144);Bt.scaleX=.8,Bt.scaleY=.8,Bt.flipX=!1,Bt.flipY=!1,this.add(Bt);const Dt=new re(v,-76,-108);Dt.scaleX=.8,Dt.scaleY=.8,Dt.flipX=!1,Dt.flipY=!1,this.add(Dt);const Gt=new re(v,-35,-67);Gt.scaleX=.8,Gt.scaleY=.8,Gt.flipX=!1,Gt.flipY=!1,this.add(Gt);const Lt=new re(v,-46,-7);Lt.scaleX=.9,Lt.scaleY=.9,Lt.flipX=!1,Lt.flipY=!1,this.add(Lt);const Kt=new re(v,135,-49);Kt.scaleX=.9,Kt.scaleY=.9,Kt.flipX=!0,Kt.flipY=!1,this.add(Kt);const kt=new re(v,95,-28);kt.scaleX=.9,kt.scaleY=.9,kt.flipX=!0,kt.flipY=!1,this.add(kt);const Zt=new re(v,44,6);Zt.scaleX=.9,Zt.scaleY=.9,Zt.flipX=!0,Zt.flipY=!1,this.add(Zt);const ae=new re(v,-5,40);ae.scaleX=.9,ae.scaleY=.9,ae.flipX=!1,ae.flipY=!1,this.add(ae);const fe=new re(v,191,-14);fe.scaleX=.9,fe.scaleY=.9,fe.flipX=!1,fe.flipY=!1,this.add(fe);const _t=new re(v,-136,-73);_t.scaleX=.8,_t.scaleY=.8,_t.flipX=!0,_t.flipY=!1,this.add(_t);const oe=new re(v,-189,-75);oe.scaleX=.8,oe.scaleY=.8,oe.flipX=!0,oe.flipY=!1,this.add(oe);const ie=new re(v,-31,-180);ie.scaleX=.8,ie.scaleY=.8,ie.flipX=!1,ie.flipY=!1,this.add(ie);const he=new re(v,10,-156);he.scaleX=.8,he.scaleY=.8,he.flipX=!1,he.flipY=!1,this.add(he);const te=new re(v,71,-140);te.scaleX=.8,te.scaleY=.8,te.flipX=!0,te.flipY=!1,this.add(te);const se=new re(v,37,-107);se.scaleX=.8,se.scaleY=.8,se.flipX=!1,se.flipY=!1,this.add(se);const ce=v.add.image(-485,-268,"map","igloo/note");this.add(ce);const le=v.add.image(476,-286,"main","grey-button");le.angle=6,this.add(le);const ue=v.add.image(476,-288,"main","grey-x");ue.angle=6,this.add(ue);const Ee=v.add.image(-19,-55,"map","igloo/spinner");Ee.setOrigin(.5076923076923077,.5),this.add(Ee);const Xt=v.add.container(268,-238);this.add(Xt);const Ae=v.add.image(197,318,"map","igloo/card");Xt.add(Ae);const Se=v.add.image(5,0,"map","igloo/tape");Se.setOrigin(.5017421602787456,.5),Xt.add(Se);const We=v.add.image(183,72,"map","igloo/item_large");Xt.add(We);const De=v.add.image(18,72,"map","igloo/icon_player");De.setOrigin(.5128205128205128,.5128205128205128),Xt.add(De);const hi=v.add.text(180,72,"",{});hi.setOrigin(.5,.5),hi.setStyle({color:"#000",fixedWidth:270,fontFamily:"Arial",fontSize:"24px"}),Xt.add(hi);const $e=new Pi(v,155,549);Xt.add($e);const Ri=new Pi(v,155,497);Xt.add(Ri);const Je=new Pi(v,155,445);Xt.add(Je);const li=new Pi(v,155,393);Xt.add(li);const Ne=new Pi(v,155,341);Xt.add(Ne);const ui=new Pi(v,155,289);Xt.add(ui);const Ge=new Pi(v,155,237);Xt.add(Ge);const Qe=new Pi(v,155,185);Xt.add(Qe);const fi=v.add.text(0,126,"",{});fi.text="Open Igloos",fi.setStyle({color:"#999",fontFamily:"Burbank Small",fontSize:"22px",fontStyle:"bold"}),Xt.add(fi);const ci=v.add.container(358,549);Xt.add(ci);const di=v.add.image(0,2,"main","grey-button");ci.add(di);const Mi=v.add.image(0,0,"main","grey-arrow");Mi.flipY=!0,ci.add(Mi);const vi=v.add.container(358,180);Xt.add(vi);const qe=v.add.image(0,2,"main","grey-button");vi.add(qe);const yi=v.add.image(0,0,"main","grey-arrow");vi.add(yi);const bi=[ae,Zt,Lt,kt,se,_,At,he,Mt,j,bt,te,Dt,Bt,Kt,fe,it,Ot,yt,ht,nt,Q,k,_t,oe,Gt,ie,Y,gt,ft],Ti=[Qe,Ge,ui,Ne,li,Je,Ri,$e];new et.vj(M);const pi=new et.zx(le);pi.spriteName="grey-button",pi.callback=()=>this.visible=!1;const _e=new et.zx(We);_e.spriteName="igloo/item_large",_e.callback=()=>this.onIglooClick(),_e.activeFrame=!1;const mi=new et.zx(di);mi.spriteName="grey-button",mi.callback=()=>this.nextPage();const Qi=new et.zx(qe);Qi.spriteName="grey-button",Qi.callback=()=>this.prevPage(),this.spinner=Ee,this.panel=Xt,this.down=ci,this.downButton=di,this.up=vi,this.upButton=qe,this.iglooSprites=bi,this.items=Ti,hi.text=this.world.client.penguin.username,this.tween=v.tweens.add({targets:this.spinner,angle:{from:0,to:180},duration:900,repeat:-1,ease:"Cubic",paused:!0}),this.igloos,this.page=1,this.pageSize=8,v.events.on("sleep",this.stopSpinner,this)}get maxPage(){return Math.ceil(this.igloos.length/this.pageSize)}onIglooClick(){this.world.client.sendJoinIgloo(this.world.client.id)}show(){this.iglooSprites.map(v=>v.reset()),this.panel.visible=!1,this.startSpinner(),this.visible=!0,this.interface.input.setDefaultCursor("default"),this.network.send("get_igloos")}setIgloos(v){!this.visible||(this.igloos=v.sort((S,P)=>S.username.toLowerCase().localeCompare(P.username.toLowerCase())),this.panel.visible=!0,this.stopSpinner(),this.showPage())}showPage(){let v=this.igloos.slice((this.page-1)*this.pageSize,this.page*this.pageSize);for(let[S,P]of this.items.entries()){let M=v[S];M?P.setItem(M):P.setItem(null)}this.showIgloos(),this.updateButtons()}prevPage(){let v=this.page-1;v<1||(this.page=v,this.showPage())}nextPage(){let v=this.page+1;v>this.maxPage||(this.page=v,this.showPage())}showIgloos(){let v=this.iglooSprites.length;for(let[S,P]of this.igloos.slice(0,v).entries()){let M=this.iglooSprites[S];M&&M.show(P)}}updateButtons(){let v=this.page>1,S=this.page<this.maxPage;this.upButton.input.enabled=v,this.downButton.input.enabled=S,this.up.alpha=v?1:.6,this.down.alpha=S?1:.6}startSpinner(){this.tween.restart(),this.tween.play(),this.spinner.visible=!0}stopSpinner(){this.tween.pause(),this.spinner.angle=0,this.spinner.visible=!1}}class Ml extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.iglooMap;const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.image(0,-35,"map","bg");F.setOrigin(.5,.5007429420505201),this.add(F);const Y=v.add.image(69,-310,"map","dojo");Y.setOrigin(.5038759689922481,.5056179775280899),this.add(Y);const k=v.add.image(29,-276,"map","mountains");this.add(k);const Q=v.add.image(-12,-30,"map","island");Q.setOrigin(.5005417118093174,.5),this.add(Q);const j=v.add.image(-232,-256,"map","mtn");this.add(j);const _=v.add.image(-181,-179,"map","village");_.setOrigin(.503030303030303,.5041322314049587),this.add(_);const it=v.add.image(-390,-94,"map","beach");this.add(it);const nt=v.add.image(-370,114,"map","dock");nt.setOrigin(.5,.5037037037037037),this.add(nt);const ht=v.add.image(-128,22,"map","town");this.add(ht);const ft=v.add.image(78,30,"map","forts");ft.setOrigin(.5045045045045045,.5045871559633027),this.add(ft);const gt=v.add.image(201,141,"map","igloo");this.add(gt);const yt=v.add.image(264,22,"map","plaza");yt.setOrigin(.5,.5038167938931297),this.add(yt);const Ot=v.add.image(52,-98,"map","rink");Ot.setOrigin(.5023041474654378,.5),this.add(Ot);const bt=v.add.image(291,-84,"map","forest");bt.setOrigin(.5027027027027027,.5057471264367817),this.add(bt);const At=v.add.image(334,-169,"map","cove");At.setOrigin(.5,.5058823529411764),this.add(At);const Mt=v.add.image(168,-214,"map","mine");Mt.setOrigin(.5042016806722689,.5),this.add(Mt);const Bt=v.add.image(402,-210,"map","berg");this.add(Bt);const Dt=v.add.image(419,242,"map","note");Dt.setOrigin(.5017667844522968,.5),this.add(Dt);const Gt=v.add.image(483,-333,"main","grey-button");this.add(Gt);const Lt=v.add.image(483,-335,"main","grey-x");this.add(Lt);const Kt=new Rl(v,0,0);Kt.visible=!1,this.add(Kt),new et.vj(M),new et.vj(F);const kt=new et.zx(Y);kt.spriteName="dojo",kt.callback=()=>this.onRoomClick(321),kt.activeFrame=!1;const Zt=new et.tk(Y);Zt.text="dojoext_hint";const ae=new et.zx(j);ae.spriteName="mtn",ae.callback=()=>this.onRoomClick(230),ae.activeFrame=!1;const fe=new et.tk(j);fe.text="mtn_hint";const _t=new et.zx(_);_t.spriteName="village",_t.callback=()=>this.onRoomClick(200),_t.activeFrame=!1;const oe=new et.tk(_);oe.text="village_hint";const ie=new et.zx(it);ie.spriteName="beach",ie.callback=()=>this.onRoomClick(400),ie.activeFrame=!1;const he=new et.tk(it);he.text="beach_hint";const te=new et.zx(nt);te.spriteName="dock",te.callback=()=>this.onRoomClick(800),te.activeFrame=!1;const se=new et.tk(nt);se.text="dock_hint";const ce=new et.zx(ht);ce.spriteName="town",ce.callback=()=>this.onRoomClick(100),ce.activeFrame=!1;const le=new et.tk(ht);le.text="town_hint";const ue=new et.zx(ft);ue.spriteName="forts",ue.callback=()=>this.onRoomClick(801),ue.activeFrame=!1;const Ee=new et.tk(ft);Ee.text="forts_hint";const Xt=new et.zx(gt);Xt.spriteName="igloo",Xt.callback=()=>this.iglooMap.show(),Xt.activeFrame=!1;const Ae=new et.tk(gt);Ae.text="igloos_hint";const Se=new et.zx(yt);Se.spriteName="plaza",Se.callback=()=>this.onRoomClick(300),Se.activeFrame=!1;const We=new et.tk(yt);We.text="plaza_hint";const De=new et.zx(Ot);De.spriteName="rink",De.callback=()=>this.onRoomClick(802),De.activeFrame=!1;const hi=new et.tk(Ot);hi.text="rink_hint";const $e=new et.zx(bt);$e.spriteName="forest",$e.callback=()=>this.onRoomClick(809),$e.activeFrame=!1;const Ri=new et.tk(bt);Ri.text="forest_hint";const Je=new et.zx(At);Je.spriteName="cove",Je.callback=()=>this.onRoomClick(810),Je.activeFrame=!1;const li=new et.tk(At);li.text="cove_hint";const Ne=new et.zx(Mt);Ne.spriteName="mine",Ne.callback=()=>this.onRoomClick(807),Ne.activeFrame=!1;const ui=new et.tk(Mt);ui.text="shack_hint";const Ge=new et.zx(Bt);Ge.spriteName="berg",Ge.callback=()=>this.onRoomClick(805),Ge.activeFrame=!1,new et.vj(Dt);const Qe=new et.zx(Gt);Qe.spriteName="grey-button",Qe.callback=()=>{this.visible=!1},this.iglooMap=Kt}onRoomClick(v){let S=this.crumbs.scenes.rooms[v];this.world.room.key!==S.key&&(this.visible=!1,this.world.client.sendJoinRoom(v,S.key,S.x,S.y,80))}}class bl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480);const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.rectangle(0,-70,702,504);F.isFilled=!0,F.fillColor=164045,this.add(F);const Y=v.add.text(-44,86,"",{});Y.setOrigin(.5,0),Y.text="to ignore them.",Y.setStyle({color:"#ffffffff",fixedWidth:220,fixedHeight:60,fontFamily:"Burbank Small",fontSize:"28px",fontStyle:"bold","shadow.offsetX":2,"shadow.offsetY":2,"shadow.color":"#003366","shadow.fill":!0}),this.add(Y);const k=v.add.text(226,-22,"",{});k.setOrigin(.5,0),k.text="to report",k.setStyle({color:"#ffffffff",fixedWidth:200,fixedHeight:60,fontFamily:"Burbank Small",fontSize:"28px",fontStyle:"bold","shadow.offsetX":2,"shadow.offsetY":2,"shadow.color":"#003366","shadow.fill":!0}),this.add(k);const Q=v.add.text(21,-76,"",{});Q.setOrigin(.5,0),Q.text=`If someone is breaking the rules, click on
their penguin then click
them to a moderator. You can also click
on`,Q.setStyle({color:"#ffffffff",fixedWidth:562,fixedHeight:220,fontFamily:"Burbank Small",fontSize:"28px",fontStyle:"bold","shadow.offsetX":2,"shadow.offsetY":2,"shadow.color":"#003366","shadow.fill":!0}),Q.setLineSpacing(20),this.add(Q);const j=v.add.text(0,-151,"",{});j.setOrigin(.5,0),j.text="Help keep the island safe!",j.setStyle({align:"center",fixedWidth:600,fontFamily:"CCFaceFront",fontSize:"40px",fontStyle:"bold italic",stroke:"#003366",strokeThickness:10}),this.add(j);const _=v.add.image(300,-268,"main","blue-button");this.add(_);const it=v.add.image(300,-270,"main","blue-x");this.add(it);const nt=v.add.image(90,-5,"main","blue-button");this.add(nt);const ht=v.add.image(90,-6,"main","mod-icon");this.add(ht);const ft=v.add.image(-190,104,"main","blue-button");this.add(ft);const gt=v.add.image(-190,102,"main","ignore-icon");this.add(gt);const yt=v.add.image(0,-222,"main","mod");this.add(yt),new et.vj(M);const Ot=new et.X7(F);Ot.corner=50;const bt=new et.zx(_);bt.spriteName="blue-button",bt.callback=()=>{this.visible=!1};const At=new et.zx(nt);At.spriteName="blue-button";const Mt=new et.zx(ft);Mt.spriteName="blue-button"}}class Ll{constructor(v,S){this.inventory=v,this.scene=v.scene,this.slots=S,this.page=null,this.load=new Phaser.Loader.LoaderPlugin(this.scene),this.url="assets/media/clothing/icon",this.prefix="icon",this.load.on("filecomplete",this.onFileComplete,this),this.load.on("loaderror",this.onLoadError,this)}loadPage(v){this.page=v;for(let[S,P]of this.slots.entries()){P.item&&P.item.destroy(),P.spinner&&P.spinner.destroy();let M=v[S];M?(P.setInteractive(),P.setFrame("large-box"),this.addSpinner(P),this.loadItem(M)):(P.disableInteractive(),P.setFrame("large-box-empty"))}this.load.start()}addSpinner(v){let S=this.scene.add.image(v.x,v.y,"main","spinner");this.inventory.container.add(S),this.scene.tweens.add({targets:S,angle:{from:0,to:180},duration:900,repeat:-1,ease:"Cubic"}),v.spinner=S}loadItem(v){let S=`${this.prefix}/${v}`;if(this.scene.textures.exists(S))return this.onFileComplete(S);this.load.image({key:S,url:`${this.url}/${v}.png`})}onFileComplete(v){if(!this.inventory.visible||!this.scene.textures.exists(v))return;let S=parseInt(v.split("/")[1]),P=this.page.indexOf(S),M=this.slots[P];!M||["large-box","large-box-hover"].includes(M.frame.name)&&this.loadIcon(v,M,S)}onLoadError(v){if(!this.inventory.visible)return;let S=parseInt(v.key.split("/")[1]),P=this.page.indexOf(S),M=this.slots[P];if(!M)return;M.spinner&&M.spinner.destroy();let F=this.scene.add.image(M.x,M.y,"main","x-icon");this.inventory.container.add(F),F.id=S,M.item=F}loadIcon(v,S,P){S.spinner&&S.spinner.destroy();let M=this.scene.add.image(S.x,S.y,v);this.inventory.container.add(M),M.id=P,S.item=M}}class Fl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:460),this.container,this.inventory_bg,this.active_text,this.arrow,this.slots;const M=v.add.container(-56,-272);M.visible=!1,this.add(M);const F=v.add.image(56,270,"main","inventory/bg");M.add(F);const Y=v.add.image(368,245,"main","inventory/scroll");M.add(Y);const k=v.add.image(368,472,"main","grey-button");M.add(k);const Q=v.add.image(368,470,"main","grey-arrow");Q.flipY=!0,M.add(Q);const j=v.add.image(368,2,"main","grey-button");M.add(j);const _=v.add.image(368,0,"main","grey-arrow");M.add(_);const it=v.add.image(264,439,"main","large-box");M.add(it);const nt=v.add.image(132,439,"main","large-box");M.add(nt);const ht=v.add.image(0,439,"main","large-box");M.add(ht);const ft=v.add.image(264,307,"main","large-box");M.add(ft);const gt=v.add.image(132,307,"main","large-box");M.add(gt);const yt=v.add.image(0,307,"main","large-box");M.add(yt);const Ot=v.add.image(264,175,"main","large-box");M.add(Ot);const bt=v.add.image(132,175,"main","large-box");M.add(bt);const At=v.add.image(0,175,"main","large-box");M.add(At);const Mt=v.add.image(264,43,"main","large-box");M.add(Mt);const Bt=v.add.image(132,43,"main","large-box");M.add(Bt);const Dt=v.add.image(0,43,"main","large-box");M.add(Dt);const Gt=v.add.image(131,553,"main","inventory/sort-button");M.add(Gt);const Lt=v.add.text(130,553,"",{});Lt.setOrigin(.5,.5),Lt.text="All Items",Lt.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),M.add(Lt);const Kt=v.add.container(369,-156);this.add(Kt);const kt=v.add.image(8,2,"main","tab");kt.angle=-90,Kt.add(kt);const Zt=v.add.image(0,0,"main","tab-arrow");Zt.angle=-90,Kt.add(Zt);const ae=[Dt,Bt,Mt,At,bt,Ot,yt,gt,ft,ht,nt,it],fe=new et.zx(k);fe.spriteName="grey-button",fe.callback=()=>{this.nextPage()};const _t=new et.zx(j);_t.spriteName="grey-button",_t.callback=()=>{this.prevPage()};const oe=new et.zx(it);oe.spriteName="large-box",oe.callback=()=>{this.onSlotClick(11)},oe.activeFrame=!1;const ie=new et.zx(nt);ie.spriteName="large-box",ie.callback=()=>{this.onSlotClick(10)},ie.activeFrame=!1;const he=new et.zx(ht);he.spriteName="large-box",he.callback=()=>{this.onSlotClick(9)},he.activeFrame=!1;const te=new et.zx(ft);te.spriteName="large-box",te.callback=()=>{this.onSlotClick(8)},te.activeFrame=!1;const se=new et.zx(gt);se.spriteName="large-box",se.callback=()=>{this.onSlotClick(7)},se.activeFrame=!1;const ce=new et.zx(yt);ce.spriteName="large-box",ce.callback=()=>{this.onSlotClick(6)},ce.activeFrame=!1;const le=new et.zx(Ot);le.spriteName="large-box",le.callback=()=>{this.onSlotClick(5)},le.activeFrame=!1;const ue=new et.zx(bt);ue.spriteName="large-box",ue.callback=()=>{this.onSlotClick(4)},ue.activeFrame=!1;const Ee=new et.zx(At);Ee.spriteName="large-box",Ee.callback=()=>{this.onSlotClick(3)},Ee.activeFrame=!1;const Xt=new et.zx(Mt);Xt.spriteName="large-box",Xt.callback=()=>{this.onSlotClick(2)},Xt.activeFrame=!1;const Ae=new et.zx(Bt);Ae.spriteName="large-box",Ae.callback=()=>{this.onSlotClick(1)},Ae.activeFrame=!1;const Se=new et.zx(Dt);Se.spriteName="large-box",Se.callback=()=>{this.onSlotClick(0)},Se.activeFrame=!1;const We=new et.zx(Gt);We.spriteName="inventory/sort-button",We.callback=()=>this.parentContainer.inventorySort.showMenu(),We.activeFrame=!1;const De=new et.rF(kt);De.callback=()=>{this.onTabClick()},this.container=M,this.inventory_bg=F,this.active_text=Lt,this.arrow=Zt,this.slots=ae,this.page=1,this.pageSize=12,this.filter=null,this.inventoryLoader=new Ll(this,this.slots),this.inventory_bg.setInteractive({pixelPerfect:!0})}get inventory(){let v=this.world.client.inventory;return this.filter&&(v=this.filter=="other"?v.flag.concat(v.photo,v.award):v[this.filter]),Object.values(v).flat()}get maxPage(){return Math.ceil(this.inventory.length/this.pageSize)}showPage(){if(!this.visible)return;let v=this.inventory.slice((this.page-1)*this.pageSize,this.page*this.pageSize);this.inventoryLoader.loadPage(v)}prevPage(){let v=this.page-1;v<1||(this.page=v,this.showPage())}nextPage(){let v=this.page+1;v>this.maxPage||(this.page=v,this.showPage())}onTabClick(){this.container.visible?(this.parentContainer.bringToTop(this),this.parentContainer.inventorySort.closeMenu(),this.x-=495):(this.parentContainer.sendToBack(this),this.x+=495),this.container.visible=!this.container.visible,this.arrow.toggleFlipY()}onSlotClick(v){let S=this.slots[v].item;!S||!S.id||!S.active||this.network.send("update_player",{item:S.id})}}class Bl extends Rs{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.safe,this.close,this.other_container;const M=v.add.rectangle(0,0,320,80);M.isFilled=!0,M.fillColor=65535,M.fillAlpha=.5,this.add(M);const F=v.add.rectangle(0,0,295,48);F.isFilled=!0,F.fillColor=65535,F.fillAlpha=.5,this.add(F);const Y=v.add.image(0,-70,"main","list/small");this.add(Y);const k=v.add.text(0,-70,"",{});k.setOrigin(.5,.5),k.text="All Items",k.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(k);const Q=v.add.image(0,-134,"main","list/small_arrow");this.add(Q);const j=v.add.text(0,-134,"",{});j.setOrigin(.5,.5),j.text="Other Items",j.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(j);const _=v.add.image(0,-198,"main","list/small");this.add(_);const it=v.add.text(0,-198,"",{});it.setOrigin(.5,.5),it.text="Colors",it.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(it);const nt=v.add.image(0,-262,"main","list/small");this.add(nt);const ht=v.add.text(0,-262,"",{});ht.setOrigin(.5,.5),ht.text="Feet Items",ht.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(ht);const ft=v.add.image(0,-326,"main","list/small");this.add(ft);const gt=v.add.text(0,-326,"",{});gt.setOrigin(.5,.5),gt.text="Hand Items",gt.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(gt);const yt=v.add.image(0,-390,"main","list/small");this.add(yt);const Ot=v.add.text(0,-390,"",{});Ot.setOrigin(.5,.5),Ot.text="Body Items",Ot.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(Ot);const bt=v.add.image(0,-454,"main","list/small");this.add(bt);const At=v.add.text(0,-454,"",{});At.setOrigin(.5,.5),At.text="Neck Items",At.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(At);const Mt=v.add.image(0,-518,"main","list/small");this.add(Mt);const Bt=v.add.text(0,-518,"",{});Bt.setOrigin(.5,.5),Bt.text="Face Items",Bt.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(Bt);const Dt=v.add.image(0,-582,"main","list/small");this.add(Dt);const Gt=v.add.text(0,-582,"",{});Gt.setOrigin(.5,.5),Gt.text="Head Items",Gt.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),this.add(Gt);const Lt=v.add.container(264,-198);Lt.visible=!1,this.add(Lt);const Kt=v.add.image(0,0,"main","list/small");Lt.add(Kt);const kt=v.add.image(0,64,"main","list/small");Lt.add(kt);const Zt=v.add.image(0,128,"main","list/small");Lt.add(Zt);const ae=v.add.text(0,0,"",{});ae.setOrigin(.5,.5),ae.text="Pins/Flags",ae.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),Lt.add(ae);const fe=v.add.text(0,64,"",{});fe.setOrigin(.5,.5),fe.text="Awards",fe.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),Lt.add(fe);const _t=v.add.text(0,128,"",{});_t.setOrigin(.5,.5),_t.text="Backgrounds",_t.setStyle({align:"center",color:"#000000ff",fixedWidth:268,fontFamily:"Arial",fontSize:"24px"}),Lt.add(_t);const oe=new et.zx(Y);oe.spriteName="list/small",oe.hoverCallback=()=>Lt.visible=!1,oe.callback=()=>this.filterInventory("All Items",null),oe.activeFrame=!1;const ie=new et.zx(Q);ie.spriteName="list/small_arrow",ie.hoverCallback=()=>Lt.visible=!0,ie.callback=()=>this.filterInventory("Other Items","other"),ie.activeFrame=!1;const he=new et.zx(_);he.spriteName="list/small",he.hoverCallback=()=>Lt.visible=!1,he.callback=()=>this.filterInventory("Colors","color"),he.activeFrame=!1;const te=new et.zx(nt);te.spriteName="list/small",te.hoverCallback=()=>Lt.visible=!1,te.callback=()=>this.filterInventory("Feet Items","feet"),te.activeFrame=!1;const se=new et.zx(ft);se.spriteName="list/small",se.hoverCallback=()=>Lt.visible=!1,se.callback=()=>this.filterInventory("Hand Items","hand"),se.activeFrame=!1;const ce=new et.zx(yt);ce.spriteName="list/small",ce.hoverCallback=()=>Lt.visible=!1,ce.callback=()=>this.filterInventory("Body Items","body"),ce.activeFrame=!1;const le=new et.zx(bt);le.spriteName="list/small",le.hoverCallback=()=>Lt.visible=!1,le.callback=()=>this.filterInventory("Neck Items","neck"),le.activeFrame=!1;const ue=new et.zx(Mt);ue.spriteName="list/small",ue.hoverCallback=()=>Lt.visible=!1,ue.callback=()=>this.filterInventory("Face Items","face"),ue.activeFrame=!1;const Ee=new et.zx(Dt);Ee.spriteName="list/small",Ee.hoverCallback=()=>Lt.visible=!1,Ee.callback=()=>this.filterInventory("Head Items","head"),Ee.activeFrame=!1;const Xt=new et.zx(Kt);Xt.spriteName="list/small",Xt.callback=()=>this.filterInventory("Pins/Flags","flag"),Xt.activeFrame=!1;const Ae=new et.zx(kt);Ae.spriteName="list/small",Ae.callback=()=>this.filterInventory("Awards","award"),Ae.activeFrame=!1;const Se=new et.zx(Zt);Se.spriteName="list/small",Se.callback=()=>this.filterInventory("Backgrounds","photo"),Se.activeFrame=!1,this.safe=M,this.close=F,this.other_container=Lt,this.initMenu()}get inventory(){return this.parentContainer.inventory}filterInventory(v,S){this.inventory.active_text.text=v,this.inventory.filter=S,this.inventory.page=1,this.inventory.showPage(),this.closeMenu()}showMenu(){let v=this.getWorldTransformMatrix();this.back.x=-v.getX(0,0),this.back.y=-v.getY(0,0),this.visible=!0}closeMenu(){this.other_container.visible=!1,this.visible=!1}}class Il extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.report_button,this.ignore_button,this.mail_button,this.igloo_button,this.profile_button,this.buddy_button,this.report_icon,this.ignore_icon,this.mail_icon,this.igloo_icon,this.profile_icon,this.buddy_icon;const M=v.add.image(150,0,"main","blue-button-disabled");this.add(M);const F=v.add.image(90,0,"main","blue-button-disabled");this.add(F);const Y=v.add.image(30,0,"main","blue-button-disabled");this.add(Y);const k=v.add.image(-30,0,"main","blue-button-disabled");this.add(k);const Q=v.add.image(-90,0,"main","blue-button-disabled");this.add(Q);const j=v.add.image(-150,0,"main","blue-button-disabled");this.add(j);const _=v.add.image(150,-1,"main","mod-icon-disabled");this.add(_);const it=v.add.image(90,-2,"main","ignore-icon-disabled");this.add(it);const nt=v.add.image(30,-2,"main","mail-icon-disabled");this.add(nt);const ht=v.add.image(-30,-2,"main","igloo-icon-disabled");this.add(ht);const ft=v.add.image(-90,-2,"main","help-icon-disabled");this.add(ft);const gt=v.add.image(-150,-2,"main","buddies-icon-disabled");this.add(gt);const yt=new et.zx(M);yt.spriteName="blue-button",yt.callback=()=>this.onReportClick();const Ot=new et.tk(M);Ot.text="report_player_hint";const bt=new et.zx(F);bt.spriteName="blue-button",bt.callback=()=>this.onIgnoreClick();const At=new et.tk(F);At.text="add_ignore_hint";const Mt=new et.zx(Y);Mt.spriteName="blue-button";const Bt=new et.tk(Y);Bt.text="send_mail_hint";const Dt=new et.zx(k);Dt.spriteName="blue-button",Dt.callback=()=>this.onIglooClick();const Gt=new et.tk(k);Gt.text="visit_home_hint";const Lt=new et.zx(Q);Lt.spriteName="blue-button",Lt.callback=()=>this.onFindClick();const Kt=new et.tk(Q);Kt.text="profile_hint";const kt=new et.zx(j);kt.spriteName="blue-button",kt.callback=()=>this.onBuddyClick();const Zt=new et.tk(j);Zt.text="add_buddy_hint",this.report_button=M,this.ignore_button=F,this.mail_button=Y,this.igloo_button=k,this.profile_button=Q,this.buddy_button=j,this.report_icon=_,this.ignore_icon=it,this.mail_icon=nt,this.igloo_icon=ht,this.profile_icon=ft,this.buddy_icon=gt,this.buttonNames=["buddy","profile","igloo","mail","ignore","report"],this.buttons=this.initButtons()}get username(){return this.parentContainer.username.text}initButtons(){let v={};for(let S of this.buttonNames){let P=this[`${S}_button`],M=this[`${S}_icon`],F=M.frame.name.replace("-disabled",""),Y=P.__ShowHint.text.slice();v[S]={button:P,icon:M,buttonTexture:"blue-button",iconTexture:F,hint:Y}}return v}updateButtons(v){switch(this.resetButtons(),v){case"online":this.enableButton("buddy","buddies-remove-icon","remove_buddy_hint"),this.enableButtons(["profile","igloo","mail","report"]);break;case"offline":this.enableButton("buddy","buddies-remove-icon","remove_buddy_hint"),this.enableButtons(["igloo","mail","report"]);break;case"ignore":this.enableButton("ignore","ignore-remove-icon","remove_ignore_hint"),this.enableButton("report");break;case"mascot":this.enableButtons(["buddy"]),this.enableButton("buddy","gift-icon","free_item_hint");break;default:this.enableButtons(["buddy","mail","ignore","report"]);break}this.world.client.isModerator&&v!=="mascot"&&(this.enableButton("ignore","ignore-icon","kick_player_hint"),this.enableButton("report","mod-icon","ban_player_hint")),["online","offline"].includes(v)||this.network.send("get_igloo_open",{igloo:this.parentContainer.id})}resetButtons(){for(let v of this.buttonNames)this.disableButton(v)}enableButtons(v){for(let S of v)this.enableButton(S)}enableButton(v,S=this.buttons[v].iconTexture,P=this.buttons[v].hint){let M=this.buttons[v];M.button.setInteractive(),M.button.setTexture("main",M.buttonTexture),M.icon.setTexture("main",S),M.button.__ShowHint.text=P}disableButton(v){let S=this.buttons[v];S.button.disableInteractive(),S.button.setTexture("main",`${S.buttonTexture}-disabled`),S.icon.setTexture("main",`${S.iconTexture}-disabled`)}onBuddyClick(){this.buddy_icon.frame.name==="gift-icon"?this.interface.prompt.showItem(35006):this.buddy_icon.frame.name==="buddies-remove-icon"?this.showRemoveBuddy():this.showRequestBuddy()}onFindClick(){this.network.send("buddy_find",{id:this.parentContainer.id})}onIglooClick(){this.world.client.sendJoinIgloo(this.parentContainer.id)}onIgnoreClick(){this.world.client.isModerator?this.showKick():this.ignore_icon.frame.name==="ignore-remove-icon"?this.showRemoveIgnore():this.showAddIgnore()}onReportClick(){this.world.client.isModerator&&this.showBan()}showRequestBuddy(){let v=`Would you like to add ${this.username}
to your buddy list?`;this.interface.prompt.showWindow(v,"dual",()=>{this.network.send("buddy_request",{id:this.parentContainer.id}),this.interface.prompt.showWindow("Request Sent","single")})}showRemoveBuddy(){let v=`Would you like to remove ${this.username}
from your buddy list?`;this.interface.prompt.showWindow(v,"dual",()=>{this.network.send("buddy_remove",{id:this.parentContainer.id}),this.interface.prompt.window.visible=!1})}showAddIgnore(){let v=`Would you like to add ${this.username}
to your ignore list?`;this.interface.prompt.showWindow(v,"dual",()=>{this.network.send("ignore_add",{id:this.parentContainer.id,username:this.username}),this.interface.prompt.showWindow("Done","single")})}showRemoveIgnore(){let v=`Would you like to remove ${this.username}
from your ignore list?`;this.interface.prompt.showWindow(v,"dual",()=>{this.network.send("ignore_remove",{id:this.parentContainer.id}),this.interface.prompt.showWindow("Done","single")})}showMute(){let v=`Mute Player: ${this.username}`;this.interface.prompt.showWindow(v,"dual",()=>{this.network.send("mute_player",{id:this.parentContainer.id}),this.interface.prompt.window.visible=!1})}showKick(){let v=`Kick Player: ${this.username}`;this.interface.prompt.showWindow(v,"dual",()=>{this.network.send("kick_player",{id:this.parentContainer.id}),this.interface.prompt.window.visible=!1})}showBan(){let v=`Ban Player: ${this.username}`;this.interface.prompt.showWindow(v,"dual",()=>{this.network.send("ban_player",{id:this.parentContainer.id}),this.interface.prompt.window.visible=!1})}}class Dl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:460),this.photo,this.paperDoll,this.buttons,this.stats,this.coins,this.stamp_button,this.stamp_icon,this.stamps,this.username,this.inventorySort,this.inventory,this.stripes,this.mod_button;const M=v.add.container(0,-2);this.add(M);const F=v.add.image(0,0,"main","card-photo");M.add(F);const Y=v.add.image(0,0,"main","card-bg-player");this.add(Y);const k=new un(v,0,-7);this.add(k);const Q=new Il(v,0,255);Q.visible=!1,this.add(Q);const j=v.add.container(-13,255);this.add(j);const _=v.add.image(-145,-27,"main","card-coin");j.add(_);const it=v.add.text(35,-24,"",{});it.setOrigin(.5,.5),it.text="Your Coins: 000000",it.setStyle({color:"#000000ff",fixedWidth:300,fontFamily:"Arial",fontSize:"24px"}),j.add(it);const nt=v.add.image(-144,25,"main","blue-button");nt.scaleX=.9,nt.scaleY=.9,j.add(nt);const ht=v.add.image(-144,23,"main","stamp-icon");ht.scaleX=.9,ht.scaleY=.9,j.add(ht);const ft=v.add.text(48,25,"",{});ft.setOrigin(.5,.5),ft.text="Your Stamps: 0/250",ft.setStyle({color:"#000000ff",fixedWidth:325,fontFamily:"Arial",fontSize:"24px"}),j.add(ft);const gt=v.add.text(0,-238,"",{});gt.setOrigin(.5,.5),gt.text="Username",gt.setStyle({align:"center",color:"#000000ff",fixedWidth:360,fontFamily:"Arial",fontSize:"32px",fontStyle:"bold"}),this.add(gt);const yt=v.add.image(-149,-224,"main","card-badge-member");this.add(yt);const Ot=v.add.image(177,-237,"main","blue-button");this.add(Ot);const bt=v.add.image(177,-239,"main","blue-x");this.add(bt);const At=new Bl(v,434,315);At.visible=!1,this.add(At);const Mt=new Fl(v,-135,33);this.add(Mt);const Bt=v.add.image(-149,-185,"main","stripes/4");Bt.setOrigin(.5,.5051546391752577),this.add(Bt);const Dt=v.add.image(-149,-208,"main","card-badge-member-ribbon");Dt.setOrigin(.5061728395061729,.5185185185185185),this.add(Dt);const Gt=v.add.image(165,-174,"main","edit_player_button");Gt.visible=!1,this.add(Gt);const Lt=new et.K$(this);Lt.handle=Y,new et.vj(F);const Kt=new et.zx(nt);Kt.spriteName="blue-button",Kt.callback=()=>this.openStampbook();const kt=new et.zx(Ot);kt.spriteName="blue-button",kt.callback=()=>{this.visible=!1};const Zt=new et.zx(Gt);Zt.spriteName="edit_player_button",Zt.callback=()=>this.openAdminPanel(),this.photo=M,this.paperDoll=k,this.buttons=Q,this.stats=j,this.coins=it,this.stamp_button=nt,this.stamp_icon=ht,this.stamps=ft,this.username=gt,this.inventorySort=At,this.inventory=Mt,this.stripes=Bt,this.mod_button=Gt,this.id=null}showCard(v,S=!1){if(v===this.id&&this.visible&&!S){this.interface.main.showWidget(this);return}if(v in this.world.room.penguins){let P=this.world.room.penguins[v];this._showCard(P,P.items.flat)}else this.network.send("get_player",{id:v})}_showCard(v,S=v){this.username.text=v.username,this.paperDoll.loadDoll(S,v.isClient),v.isClient?(this.coins.text=`Your Coins: ${this.world.client.coins}`,this.stamps.text=`Your Stamps: ${this.world.client.stamps.length}/250`,this.stats.visible=!0,this.buttons.visible=!1,this.inventory.visible=!0,this.inventory.showPage()):(this.stats.visible=!1,this.buttons.visible=!0,this.inventory.visible=!1),this.inventorySort.closeMenu(),this.id=v.id,this.updateButtons(),this.updateStripes(v),!v.isClient&&this.world.client.isModerator&&this.mod_button.setVisible(!0),this.interface.main.showWidget(this)}updateButtons(){if(this.buttons.visible){let v=this.world.getRelationship(this.id);this.buttons.updateButtons(v)}}updateStripes(v){const S=v.joinTime;if(!S)return this.stripes.setFrame("stripes/0");let P=1e3*60*60*24,M=Date.now()-Date.parse(S),F=Math.round(M/P),Y=Math.floor(F/30),k;v.rank>2?k=4:Y<=6?k=0:Y<=12?k=1:Y<=18?k=2:Y<=24?k=3:k=4,this.stripes.setFrame(`stripes/${k}`)}openAdminPanel(){this.id&&window.open(`https://admin.cplegacy.com/users/${this.id}`,"_blank").focus()}openStampbook(){this.interface.showBook("stamp")}}class Nl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.item;const M=v.add.image(0,0,"main","list/small");this.add(M),this.item=M;let F={align:"center",color:"#000000",fontFamily:"Arial",fontSize:"28px"};this.name=v.add.text(0,-15,"",F),this.name.setOrigin(.5,0),this.add(this.name),this.data,this.column,this.safeList,this.frameName="list/small",M.on("pointerover",()=>this.onOver()),M.on("pointerout",()=>this.onOut()),M.on("pointerup",Y=>this.onUp(Y))}get safe(){return this.parentContainer}init(v,S,P){this.data=v,this.column=S,this.updateFrameName(v.menu,P),this.updateNameText(v.name)}updateFrameName(v,S){let P=S>1?"list/wide":"list/small",M=v?"_arrow":"";this.frameName=`${P}${M}`,this.resetFrame(),this.item.setInteractive({cursor:"pointer"})}resetFrame(){this.item.setFrame(this.frameName)}updateNameText(v){this.name.text=v;let S=this.item.width-30;this.name.width>S&&this.name.setFontSize(24),this.name.y=-Math.floor(this.name.height/2),this.name.setFixedSize(S,0)}onOver(){this.item.setFrame(`${this.frameName}-hover`),this.safe.closeLists(this.column),this.data.menu&&(this.safeList?this.safe.showSafeList(this.safeList):this.safeList=this.safe.createSafeList(this.data.menu,this.column+1,this.data.wide,this.x,this.y,this.item.width))}onOut(){this.resetFrame()}onUp(v){v.button==0&&(this.safe.closeMenu(),this.world.client.sendSafe(this.data.id))}}class Gl extends Rs{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.close,this.safe,this.start;const M=v.add.rectangle(0,0,80,80);M.isFilled=!0,M.fillColor=65535,M.fillAlpha=.5,this.add(M);const F=v.add.rectangle(0,-50,256,40);F.isFilled=!0,F.fillColor=65535,F.fillAlpha=.5,this.add(F);const Y=v.add.image(0,-90,"main","list/small");Y.visible=!1,this.add(Y),this.close=M,this.safe=F,this.start=Y,this.initMenu(),this.safeMessagesMap={},this.setSafeMessagesMap(this.crumbs.safe_messages),this.subItems=[],this.cellHeight=64,this.cellWidth={1:268,2:532},this.timer,this.createSafeList(this.crumbs.safe_messages)}setSafeMessagesMap(v){for(let S of v)this.safeMessagesMap[S.id]=S.name,S.menu&&this.setSafeMessagesMap(S.menu)}createSafeList(v,S=0,P=1,M=0,F=0,Y=0){let k=[],Q=this.getListX(S,P,M,Y),j=this.getListY(v.length-1,F);for(let _ of v){let it=new Nl(this.scene,Q,j);it.init(_,S,P),S>0&&this.subItems.push(it),this.add(it),k.push(it),j+=this.cellHeight}return k}showSafeList(v){for(let S of v)S.visible=!0}closeLists(v=0){for(let S of this.subItems)S.column>v&&(S.visible=!1)}getListX(v,S,P,M){if(v<1)return 0;{let F=this.cellWidth[S];return P+M/2+F/2}}getListY(v,S){let P=S||this.start.y-this.cellHeight*v,M=P+this.cellHeight*v;return M>this.start.y&&(P-=M-this.start.y),P}onBackOver(){this.timer=this.scene.time.delayedCall(500,()=>this.closeMenu())}onBackOut(){this.timer&&(this.timer.remove(),this.scene.time.removeEvent(this.timer),this.timer=null)}closeMenu(){this.visible=!1,this.closeLists()}}class zl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.checkbox;const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.rectangle(0,-22,708,600);F.isFilled=!0,F.fillColor=164045,this.add(F);const Y=v.add.text(109,170,"",{});Y.setOrigin(.5,.5),Y.text="88 Buddies",Y.setStyle({color:"#000000ff",fixedWidth:400,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(Y);const k=v.add.image(-132,171,"main","buddy/icon-online");this.add(k);const Q=v.add.image(0,67,"main","help-button");this.add(Q);const j=v.add.text(21,66,"",{});j.setOrigin(.5,.5),j.text="Manage Account",j.setStyle({align:"center",color:"#ffffffff",fixedWidth:562,fontFamily:"Arial Narrow",fontSize:"40px",fontStyle:"bold"}),this.add(j);const _=v.add.text(131,-37,"",{});_.setOrigin(.5,.5),_.text="Mute Music",_.setStyle({color:"#000000ff",fixedWidth:348,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(_);const it=v.add.text(0,-108,"",{});it.setOrigin(.5,.5),it.text="Your penguin is 0 days old",it.setStyle({align:"center",color:"#000000ff",fixedWidth:600,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(it);const nt=v.add.text(0,-156,"",{});nt.setOrigin(.5,.5),nt.text="You're on Server Name",nt.setStyle({align:"center",color:"#000000ff",fixedWidth:600,fontFamily:"Arial Narrow",fontSize:"30px"}),this.add(nt);const ht=v.add.text(0,-238,"",{});ht.setOrigin(.5,.5),ht.text="SETTINGS",ht.setStyle({align:"center",fixedWidth:600,fontFamily:"CCFaceFront",fontSize:"40px",fontStyle:"bold italic",stroke:"#003366",strokeThickness:10}),this.add(ht);const ft=v.add.image(-76,-39,"login","checkbox");ft.setOrigin(.41509,.5849),this.add(ft);const gt=v.add.image(300,-268,"main","blue-button");this.add(gt);const yt=v.add.image(300,-270,"main","blue-x");this.add(yt),new et.vj(M);const Ot=new et.X7(F);Ot.corner=50;const bt=new et.zx(Q);bt.spriteName="help-button",bt.callback=()=>this.openManage();const At=new et.rF(ft);At.callback=()=>this.onMuteClick();const Mt=new et.zx(gt);Mt.spriteName="blue-button",Mt.callback=()=>{this.visible=!1},this.checkbox=ft,this.checkbox.checked=this.world.muteMusic,this.checkbox.checked&&this.checkbox.setTexture("login","checkbox-active");let Bt=1e3*60*60*24,Dt=Date.now()-Date.parse(this.world.client.joinTime),Gt=Math.round(Dt/Bt);nt.text=`You're on ${this.network.worldName}`,it.text=`Your penguin is ${Gt} days old`,Y.text=`You have ${this.world.client.buddies.length} Buddies`}onMuteClick(){this.toggle(this.checkbox),this.world.muteMusic=this.checkbox.checked,this.world.room.music&&(this.world.muteMusic?this.world.room.stopMusic():this.world.room.addMusic())}toggle(v){let S=v.checked?"checkbox":"checkbox-active";v.checked=!v.checked,v.setTexture("login",S)}openManage(){this.visible=!1,this.interface.main.manage.visible=!0}}class Ul extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.verified_text,this.resend_container;const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.rectangle(0,-22,708,600);F.isFilled=!0,F.fillColor=164045,this.add(F);const Y=v.add.text(0,-238,"",{});Y.setOrigin(.5,.5),Y.text="MANAGE ACCOUNT",Y.setStyle({align:"center",fixedWidth:600,fontFamily:"CCFaceFront",fontSize:"40px",fontStyle:"bold italic",stroke:"#003366",strokeThickness:10}),this.add(Y);const k=v.add.image(300,-268,"main","blue-button");this.add(k);const Q=v.add.image(300,-270,"main","blue-x");this.add(Q);const j=v.add.text(0,-72,"",{});j.setOrigin(.5,.5),j.text="Enter new email address:",j.setStyle({align:"center",color:"#000000ff",fixedWidth:600,fontFamily:"Arial Narrow",fontSize:"30px"}),this.add(j);const _=v.add.image(0,-16,"main","buddy/item-hover");this.add(_);const it=v.add.text(0,-150,"",{});it.setOrigin(.5,.5),it.text=`Your email address is: UNVERIFIED
You will be unable to chat until it's verified.`,it.setStyle({align:"center",color:"#000000",fixedWidth:628,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(it);const nt=v.add.image(0,60,"main","help-button");nt.scaleX=.6,nt.scaleY=.6,this.add(nt);const ht=v.add.text(0,60,"",{});ht.setOrigin(.5,.5),ht.text="Change Email",ht.setStyle({align:"center",color:"#ffffffff",fixedWidth:562,fontFamily:"Arial Narrow",fontSize:"30px",fontStyle:"bold"}),this.add(ht);const ft=v.add.container(-760,-480);this.add(ft);const gt=v.add.image(760,683,"main","help-button");gt.scaleX=.6,gt.scaleY=.6,ft.add(gt);const yt=v.add.text(760,683,"",{});yt.setOrigin(.5,.5),yt.text="Resend Verification",yt.setStyle({align:"center",color:"#ffffffff",fixedWidth:562,fontFamily:"Arial Narrow",fontSize:"30px",fontStyle:"bold"}),ft.add(yt),new et.vj(M);const Ot=new et.X7(F);Ot.corner=50;const bt=new et.zx(k);bt.spriteName="blue-button",bt.callback=()=>{this.visible=!1};const At=new et.zx(nt);At.spriteName="help-button",At.callback=()=>this.onChange();const Mt=new et.zx(gt);Mt.spriteName="help-button",Mt.callback=()=>this.onResend(),this.verified_text=it,this.resend_container=ft,this.setVerificationState(),this.scene=v,this.emailInput=null}set visible(v){var S;super.visible=v;const P={width:"320px",height:"53px",padding:"0 6px 0 6px",filter:"none",fontFamily:"Arial",fontSize:"26px",color:"#ffffffff"};v?(this.emailInput=new as(this.scene,0,-16,"text",P,()=>{},48,!1),this.add(this.emailInput)):(this.remove(this.emailInput),(S=this.emailInput)==null||S.destroy())}setVerificationState(){this.verified_text.text=this.world.client.penguin.emailVerified?"Your email address is: VERIFIED":`Your email address is: UNVERIFIED
You will be unable to chat until it's verified.`,this.resend_container.visible=!this.world.client.penguin.emailVerified}onChange(){const v=this.emailInput.text;this.emailInput.clearText(),this.network.send("change_email",{email:v})}onResend(){this.network.send("resend_verification")}}class Yl extends Ie.Z{constructor(){super("Main"),this.chat_box,this.chat_send_button,this.chat_send_icon,this.onlinePopup,this.popup,this.popupText,this.chatLog,this.crosshair,this.request_button,this.mod_m,this.news_new,this.vanish,this.widgetLayer,this.waddle,this.buddy,this.playerCard,this.actionsMenu,this.emotesMenu,this.safe,this.map,this.moderator,this.settings,this.manage,this.version_control,this.hideOnSleep}_create(){const v=this.add.image(760,916,"main","dock"),S=this.add.image(748,923,"main","chat-box");S.visible=!1;const P=this.add.image(246,923,"main","blue-button");this.add.image(246,921,"main","chat-icon");const M=this.add.image(306,923,"main","blue-button");this.add.image(306,921,"main","emote-icon");const F=this.add.image(366,923,"main","blue-button");this.add.image(366,919,"main","action-icon");const Y=this.add.image(426,923,"main","blue-button");this.add.image(426,922,"main","snowball-icon");const k=this.add.image(1026,923,"main","blue-button");k.visible=!1;const Q=this.add.image(1026,921,"main","chat-icon");Q.visible=!1;const j=this.add.image(1086,923,"main","blue-button");this.add.image(1086,921,"main","badge-member");const _=this.add.image(1146,923,"main","blue-button");this.add.image(1146,921,"main","buddies-icon");const it=this.add.image(1206,923,"main","blue-button");this.add.image(1206,921,"main","igloo-icon");const nt=this.add.image(1266,923,"main","blue-button");this.add.image(1266,921,"main","help-icon");const ht=this.add.container(1155,849);ht.visible=!1;const ft=this.add.image(0,11,"main","buddy-online");ht.add(ft);const gt=this.add.text(-6,0,"",{});gt.setOrigin(.5,.5),gt.setStyle({align:"center",color:"#000000",fixedWidth:380,fontFamily:"Arial",fontSize:"24px"}),ht.add(gt);const yt=new Ol(this,760,12);this.add.existing(yt);const Ot=this.add.image(0,1100,"main","crosshair");Ot.visible=!1;const bt=this.add.sprite(96,880,"main","map-button"),At=this.add.image(276,71,"main","buddy-button");At.visible=!1;const Mt=this.add.image(176,58,"main","mail-button"),Bt=this.add.image(1444,78,"main","mod/button"),Dt=this.add.sprite(1444,78,"main","mod/m"),Gt=this.add.image(76,70,"main","news-button"),Lt=this.add.image(100,97,"main","news-new");Lt.visible=!1;const Kt=this.add.image(1210,76,"main","vanish");Kt.scaleX=.5,Kt.scaleY=.5,Kt.visible=!1;const kt=this.add.image(1327,75,"main","discord-button");kt.scaleX=.55,kt.scaleY=.55;const Zt=this.add.layer(),ae=new Al(this,1099,332);ae.visible=!1,Zt.add(ae);const fe=new wl(this,1140,436);fe.visible=!1,Zt.add(fe);const _t=new Dl(this,446,436);_t.visible=!1,Zt.add(_t);const oe=new Cl(this,366,864);this.add.existing(oe),oe.visible=!1;const ie=new Pl(this,306,864);this.add.existing(ie),ie.visible=!1;const he=new Gl(this,246,925);this.add.existing(he),he.visible=!1;const te=new Ml(this,760,480);this.add.existing(te),te.visible=!1;const se=new bl(this,760,480);this.add.existing(se),se.visible=!1;const ce=new zl(this,760,480);this.add.existing(ce),ce.visible=!1;const le=new Ul(this,760,480);this.add.existing(le),le.visible=!1;const ue=this.add.text(1400,20,"",{});ue.setOrigin(.5,.5),ue.text="v{VERSION}",ue.setStyle({align:"right",color:"#bfbfbfff",fixedWidth:200,fontFamily:"Arial"});const Ee=[_t,fe,te,ae,ce,se,le];new et.vj(v),new et.vj(S);const Xt=new et.zx(P);Xt.spriteName="blue-button",Xt.callback=()=>this.safe.visible=!0;const Ae=new et.tk(P);Ae.text="safe_hint";const Se=new et.zx(M);Se.spriteName="blue-button",Se.callback=()=>this.emotesMenu.visible=!0;const We=new et.tk(M);We.text="emote_hint";const De=new et.zx(F);De.spriteName="blue-button",De.callback=()=>this.actionsMenu.visible=!0;const hi=new et.tk(F);hi.text="action_hint";const $e=new et.zx(Y);$e.spriteName="blue-button",$e.callback=()=>this.onSnowballClick();const Ri=new et.tk(Y);Ri.text="throw_hint";const Je=new et.zx(k);Je.spriteName="blue-button",Je.callback=()=>this.onChatSend();const li=new et.tk(k);li.text="send_hint";const Ne=new et.zx(j);Ne.spriteName="blue-button",Ne.callback=()=>this.onPlayerClick();const ui=new et.tk(j);ui.text="player_hint";const Ge=new et.zx(_);Ge.spriteName="blue-button",Ge.callback=()=>this.onBuddyClick();const Qe=new et.tk(_);Qe.text="buddy_hint";const fi=new et.zx(it);fi.spriteName="blue-button",fi.callback=()=>this.onIglooClick();const ci=new et.tk(it);ci.text="home_hint";const di=new et.zx(nt);di.spriteName="blue-button",di.callback=()=>this.settings.visible=!0;const Mi=new et.tk(nt);Mi.text="help_hint";const vi=new et.rF(Ot);vi.callback=()=>this.onCrosshairClick();const qe=new et.zx(bt);qe.spriteName="map-button",qe.callback=()=>this.map.visible=!0,qe.activeFrame=!1;const yi=new et.zx(At);yi.spriteName="buddy-button",yi.callback=()=>this.onRequestClick(),yi.activeFrame=!1;const bi=new et.zx(Mt);bi.spriteName="mail-button",bi.activeFrame=!1;const Ti=new et.rF(Bt);Ti.hoverCallback=()=>this.onModOver(),Ti.hoverOutCallback=()=>this.onModOut(),Ti.callback=()=>this.onModClick();const pi=new et.zx(Gt);pi.spriteName="news-button",pi.callback=()=>this.openCatalogue(),pi.activeFrame=!1;const _e=new et.zx(Kt);_e.spriteName="vanish",_e.callback=()=>this.toggleVanish(),_e.activeFrame=!1;const mi=new et.zx(kt);mi.spriteName="discord-button",mi.callback=()=>this.openDiscord(),mi.activeFrame=!1,this.chat_box=S,this.chat_send_button=k,this.chat_send_icon=Q,this.onlinePopup=ht,this.popup=ft,this.popupText=gt,this.chatLog=yt,this.crosshair=Ot,this.request_button=At,this.mod_m=Dt,this.news_new=Lt,this.vanish=Kt,this.widgetLayer=Zt,this.waddle=ae,this.buddy=fe,this.playerCard=_t,this.actionsMenu=oe,this.emotesMenu=ie,this.safe=he,this.map=te,this.moderator=se,this.settings=ce,this.manage=le,this.version_control=ue,this.hideOnSleep=Ee,this.events.emit("scene-awake")}create(){this._create(),this.version_control.setText("v1.1.10-beta"),this.events.on("sleep",this.onSleep,this),this.setupWidgets(),this.balloonFactory=new yl(this),this.snowballFactory=new El(this.world),this.hint=new Sl(this,0,0),this.add.existing(this.hint),this.hideOnSleep.push(this.hint),this.hint.visible=!1,this.requests=[],this.chatInput=null,this.world.client.penguin.emailVerified&&this.showChatbox(!0),this.input.keyboard.on("keydown-TAB",M=>this.onChatKeyDown(M)),this.input.keyboard.on("keydown-ENTER",M=>this.onChatKeyDown(M));let v=this.cache.json.get("main-anims");this.anims.fromJSON(v);const S=this.crumbs.books.news.entry,P=localStorage.getItem("last-catalogue");S!==P&&this.news_new.setVisible(!0),this.vanish.visible=this.world.client.penguin.rank>1}onSleep(v,S){var P;S.clearChat&&((P=this.chatInput)==null||P.clearText(),this.chatLog.clearMessages()),this.chatLog.open&&this.chatLog.onTabClick(),this.stopCrosshair(),this.waddle.activeSeat=null,this.interface.prompt.hideAll();for(let M of this.hideOnSleep)M.visible=!1;this.map.iglooMap.visible=!1}setupWidgets(){for(let v of this.widgetLayer.list)v.__DraggableContainer&&(v.__DraggableContainer.widgetLayer=this.widgetLayer)}showWidget(v){this.widgetLayer.bringToTop(v),v.visible=!0}onSnowballClick(){this.crosshair.visible=!0,this.crosshair.x=Math.round(this.input.x),this.crosshair.y=Math.round(this.input.y)}onCrosshairMove(v){this.crosshair.x=Math.round(v.x),this.crosshair.y=Math.round(v.y)}onCrosshairClick(){this.stopCrosshair(),this.world.client.sendSnowball(this.crosshair.x,this.crosshair.y)}stopCrosshair(){this.crosshair.visible=!1}onChatKeyDown(v){var S;v.preventDefault(),(S=this.chatInput)==null||S.setFocus()}onChatSend(){let v=this.chatInput.text;this.chatInput.clearText(),this.balloonFactory.showTextBalloon(this.world.client.id,v),this.network.send("send_message",{message:v})}onPlayerClick(){this.playerCard.showCard(this.world.client.id)}onBuddyClick(){this.showWidget(this.buddy),this.buddy.showPage()}onIglooClick(){this.world.client.sendJoinIgloo(this.world.client.id)}onRequestClick(){let v=this.requests.shift();this.requests.length<1&&(this.request_button.visible=!1),v&&(v.requester?this.showAccept(v):this.showRequest(v))}showAccept(v){let S=`${v.username} is now your buddy!`;this.interface.prompt.showWindow(S,"single")}showRequest(v){let S=`${v.username} has asked to be your buddy.
Do you accept?`;this.interface.prompt.showWindow(S,"dual",()=>{this.network.send("buddy_accept",v),this.interface.prompt.window.visible=!1},()=>{this.network.send("buddy_reject",{id:v.id}),this.interface.prompt.window.visible=!1})}addRequest(v){this.requests.some(S=>S.id===v.id&&!S.requester)||(this.requests.push(v),this.request_button.visible=!0,this.bounce(this.request_button))}showOnlinePopup(v){let S=`${v} is online`,P=S.length>18?"buddy-online-large":"buddy-online";this.popupText.text=S,this.popup.setTexture("main",P),this.onlinePopup.visible=!0,this.bounce(this.onlinePopup,20),this.time.addEvent({delay:1e4,callback:()=>this.onlinePopup.visible=!1})}bounce(v,S=-100){v.startY||(v.startY=v.y),this.tweens.add({targets:v,y:{from:v.startY+S,to:v.startY},ease:"Bounce",duration:200})}onModOver(){this.mod_m.play("mod_button")}onModOut(){this.mod_m.stop(),this.mod_m.setFrame("mod/m")}onModClick(){this.onModOut(),this.moderator.visible=!0}openDiscord(){window.open("https://discord.gg/cplegacy","_blank").focus()}openCatalogue(){const v=this.crumbs.books.news.entry;localStorage.setItem("last-catalogue",v),this.news_new.setVisible(!1),this.interface.showBook("news")}showChatbox(v){var S;this.chat_box.setVisible(v),this.chat_send_button.setVisible(v),this.chat_send_icon.setVisible(v);const P={width:"500px",height:"50px",fontFamily:"Burbank Small",fontSize:"24px",color:"#fff"},M=this.world.client.isModerator?/^[a-zA-Z0-9\s!.,'?]*$/:/^[a-zA-Z\s!,'?]*$/;v?(this.chatInput=new as(this,740,923,"text",P,()=>this.onChatSend(),48,!1,M),this.add.existing(this.chatInput)):((S=this.chatInput)==null||S.destroy(),this.chatInput=null)}toggleVanish(){}}class Xl{constructor(v){this.gridView=v,this.scene=v.scene,this.page=null,this.filter,this.load=new Phaser.Loader.LoaderPlugin(this.scene),this.load.on("filecomplete",this.onFileComplete,this),this.load.on("loaderror",this.onLoadError,this)}get url(){return this.filter=="igloo"?"assets/media/igloos/buildings/icon":"assets/media/furniture/icon"}get prefix(){return this.filter=="igloo"?"igloo/icon":"furniture/icon"}get slots(){return this.gridView.slots}loadPage(v,S){this.filter=v,this.page=S;let P=this.slots.length>15?"@2.5x":"@5x";for(let[M,F]of this.slots.entries()){F.filter=v,F.item&&F.item.destroy(),F.quantity&&(F.quantity.visible=!1);let Y=S[M];Y?(F.setInteractive(),F.visible=!0,this.loadItem(Y,P)):(F.disableInteractive(),F.visible=!1)}this.load.start()}loadItem(v,S){let P=`${this.prefix}/${S}/${v}`;if(this.scene.textures.exists(P))return this.onFileComplete(P);let M=this.filter=="igloo"?`${this.url}/${v}.png`:`${this.url}/${S}/${v}.png`;this.load.image({key:P,url:M})}onFileComplete(v){if(!this.gridView.visible||!this.scene.textures.exists(v))return;let S=parseInt(v.split("/")[3]),P=this.page.indexOf(S),M=this.slots[P];M&&M.visible&&M.addIcon(v,S)}onLoadError(v){if(!this.gridView.visible)return;let S=parseInt(v.key.split("/")[3]),P=this.page.indexOf(S),M=this.slots[P];M&&M.visible&&M.addError(S)}}class Wl extends Phaser.GameObjects.Sprite{constructor(v){super(v,0,0,"iglooedit","box/box"),this.world=v.world,this.gridView=this.scene.gridView,this.item,this.quantity,this.filter,this.textStyle={fontFamily:"Arial",fontSize:"70px",fontStyle:"bold",color:"#333333",align:"right",fixedWidth:100};let S=new et.zx(this);S.spriteName="box/box",S.callback=()=>this.onClick(),S.activeFrame=!1,S.start()}onClick(){!this.world.room.isIgloo||this.world.room.id!=this.world.client.id||(this.gridView.visible=!1,this.scene.furniture.visible=!1,this.filter=="igloo"?this.world.room.updateIgloo(this.item.id):this.world.room.loadFurniture(this.item.id))}addIcon(v,S){let P=this.scene.add.image(this.x,this.y,v),M=v.split("/")[2]=="@5x"?1:2;if(this.gridView.container.add(P),P.scale=M,P.id=S,this.item=P,this.filter!="igloo"){let F=this.world.room.getQuantity(S);return this.setQuantity(F)}this.setEnable(this.world.room.args.type!=S)}addError(v){let S=this.scene.add.image(this.x,this.y,"iglooedit","box/x");this.gridView.container.add(S),S.id=v,this.item=S}addQuantity(){let v=this.x+this.width/2-75,S=this.y+this.height/2-55;return this.quantity=this.scene.add.text(v,S,"",this.textStyle),this.quantity.setOrigin(.5),this.gridView.container.add(this.quantity),this.quantity}setQuantity(v){let S=this.quantity?this.quantity:this.addQuantity();this.setEnable(v>0),S.text=v,S.visible=!0,this.gridView.container.bringToTop(S)}setEnable(v){v?this.enable():this.disable()}enable(){this.setInteractive(),this.setFrame("box/box")}disable(){this.disableInteractive(),this.setFrame("box/box-disabled")}}class Vl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:0,P!=null?P:0),this.container,this.pageButtons;const M=v.add.rectangle(760,480,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.6,this.add(M);const F=v.add.image(1472,46,"main","grey-button");this.add(F);const Y=v.add.image(1472,44,"main","grey-x");this.add(Y);const k=v.add.container(0,0);this.add(k);const Q=v.add.container(1393,125);Q.visible=!1,this.add(Q);const j=v.add.image(0,688,"main","grey-button");Q.add(j);const _=v.add.image(0,686,"main","grey-arrow");_.flipY=!0,Q.add(_);const it=v.add.image(0,2,"main","grey-button");Q.add(it);const nt=v.add.image(0,0,"main","grey-arrow");Q.add(nt),new et.vj(M);const ht=new et.zx(F);ht.spriteName="grey-button",ht.callback=()=>this.visible=!1;const ft=new et.zx(j);ft.spriteName="grey-button",ft.callback=()=>this.nextPage();const gt=new et.zx(it);gt.spriteName="grey-button",gt.callback=()=>this.prevPage(),this.container=k,this.pageButtons=Q,this.scene=v,this.maxW=1160,this.maxH=770,this.cellSize=418,this.pad=40,this.offsetY=30,this.slots,this.page=1,this.filter,this.lastSize,this.loader=new Xl(this),M.on("pointerup",()=>this.visible=!1)}get items(){let v=Object.keys(this.world.client.furniture).map(S=>parseInt(S));return this.filter?this.filter=="igloo"?this.world.client.igloos.filter(S=>S!=0):v.filter(S=>{if(this.crumbs.furniture[S].sort==this.filter)return S}):v}get pageSize(){return Math.min(this.items.length,this.maxPageSize)}get maxPage(){return Math.ceil(this.items.length/this.pageSize)}get maxPageSize(){return this.filter=="igloo"?6:54}startGrid(v){if(this.filter=v,this.page=1,this.pageSize==this.lastSize)return this.showPage();this.lastSize=this.pageSize,this.container.removeAll(!0),this.slots=this.createSlots();let S=this.getColumns(this.pageSize),P=Math.ceil(this.pageSize/S);this.createGrid(S,P),this.showPage()}showPage(){if(!this.visible)return;this.pageButtons.visible=this.pageSize>=this.maxPageSize;let v=this.items.slice((this.page-1)*this.pageSize,this.page*this.pageSize);this.loader.loadPage(this.filter,v)}prevPage(){let v=this.page-1;v<1||(this.page=v,this.showPage())}nextPage(){let v=this.page+1;v>this.maxPage||(this.page=v,this.showPage())}createSlots(){let v=[];for(let S=0;S<this.pageSize;S++){let P=new Wl(this.scene);this.container.add(P),v.push(P)}return v}createGrid(v,S,P=this.cellSize){P+=this.pad,Phaser.Actions.GridAlign(this.slots,{width:v,height:S,cellWidth:P,cellHeight:P,position:Phaser.Display.Align.CENTER,x:P/2,y:P/2});let M=P*v,F=P*S,Y=this.getScale(M,F),k=1520-M*Y,Q=960-F*Y;this.container.x=k/2,this.container.y=Q/2-this.offsetY*Y,this.container.scale=Y}getColumns(v){switch(!0){case v<=3:return v;case v==4:return 2;case v<=6:return 3;case v<=12:return 4;case v<=20:return 5;case v<=30:return 6;case v<=42:return 8;case v<=54:return 9;default:break}}getScale(v,S){let P=1,M=1;return v>this.maxW&&(P=this.maxW/v),S>this.maxH&&(M=this.maxH/S),Math.min(P,M)}}class Le extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480),this.title,this.name="",this.musicId=0,this.bold=!1;const M=v.add.image(0,0,"main","buddy/item");this.add(M);const F=v.add.text(1,0,"",{});F.setOrigin(.5,.5),F.setStyle({fixedWidth:300,fontFamily:"Arial",fontSize:"24px"}),this.add(F);const Y=new et.zx(M);Y.spriteName="buddy/item",Y.callback=()=>this.onClick(),Y.activeFrame=!1,this.title=F,v.events.once("scene-awake",this.onAwake,this)}onAwake(){this.title.text=this.name,this.bold&&this.title.setStyle({fontStyle:"bold"})}onClick(){this.network.send("update_music",{music:this.musicId}),this.parentContainer.visible=!1}}class Hl extends jt.Z{constructor(v,S,P){super(v,S!=null?S:760,P!=null?P:480);const M=v.add.rectangle(0,0,1520,960);M.isFilled=!0,M.fillColor=0,M.fillAlpha=.2,this.add(M);const F=v.add.image(0,-24,"iglooedit","music_bg");this.add(F);const Y=v.add.image(338,-275,"main","blue-button");this.add(Y);const k=v.add.image(338,-277,"main","blue-x");this.add(k);const Q=v.add.text(0,-297,"",{});Q.setOrigin(.5,0),Q.text="Music List",Q.setStyle({align:"center",color:"#000",fixedWidth:600,fontFamily:"Arial Narrow",fontSize:"32px"}),this.add(Q);const j=new Le(v,-179,-210);this.add(j);const _=new Le(v,-179,-154);this.add(_);const it=new Le(v,-179,-98);this.add(it);const nt=new Le(v,-179,-42);this.add(nt);const ht=new Le(v,-179,14);this.add(ht);const ft=new Le(v,-179,70);this.add(ft);const gt=new Le(v,-179,126);this.add(gt);const yt=new Le(v,177,-210);this.add(yt);const Ot=new Le(v,177,-154);this.add(Ot);const bt=new Le(v,177,-98);this.add(bt);const At=new Le(v,177,-42);this.add(At);const Mt=new Le(v,177,14);this.add(Mt);const Bt=new Le(v,177,70);this.add(Bt);const Dt=new Le(v,177,126);this.add(Dt);const Gt=new Le(v,-179,220);this.add(Gt),new et.vj(M);const Lt=new et.zx(Y);Lt.spriteName="blue-button",Lt.callback=()=>this.visible=!1,j.name="Brown Puffle Lab",j.musicId=305,j.bold=!1,_.name="Beware the Dragon",_.musicId=286,_.bold=!0,it.name="Planet Y",it.musicId=38,it.bold=!1,nt.name="Pre-historic Rock",nt.musicId=35,nt.bold=!1,ht.name="The Royal Court",ht.musicId=233,ht.bold=!0,ft.name="Puffle Party",ft.musicId=259,ft.bold=!1,gt.name="In the Tower",gt.musicId=235,gt.bold=!1,yt.name="Norman Swarm",yt.musicId=42,yt.bold=!1,Ot.name="To Battle!",Ot.musicId=236,Ot.bold=!0,bt.name="Flipper Jig",bt.musicId=263,bt.bold=!1,At.name="Icy Serenade",At.musicId=256,At.bold=!0,Mt.name="The Way of Sensei",Mt.musicId=24,Mt.bold=!1,Bt.name="Puffle Rescue: In the Cave",Bt.musicId=120,Bt.bold=!1,Dt.name="For Great Justice",Dt.musicId=32,Dt.bold=!1,Gt.name="No Music",Gt.musicId=0,Gt.bold=!1}}class kl extends Ie.Z{constructor(){super("IglooEdit"),this.defaultControls,this.button_lock,this.controls,this.button_furniture,this.furniture,this.iglooMusic,this.gridView}_create(){const v=this.add.container(1426,758),S=this.add.image(0,126,"iglooedit","button/edit");S.setOrigin(.6422018348623854,.5),v.add(S);const P=this.add.image(0,0,"iglooedit","button/lock");P.setOrigin(.5,.5045871559633027),v.add(P);const M=this.add.container(162,359);M.visible=!1;const F=this.add.image(12,504,"iglooedit","note");M.add(F);const Y=this.add.image(1263,520,"iglooedit","button/save");M.add(Y);const k=this.add.image(1263,390,"iglooedit","button/igloo_catalog");k.setOrigin(.5046728971962616,.5),M.add(k);const Q=this.add.image(1263,260,"iglooedit","button/furniture_catalog");Q.setOrigin(.6405228758169934,.5043478260869565),M.add(Q);const j=this.add.image(1263,130,"iglooedit","button/furniture");j.setOrigin(.5,.584),M.add(j);const _=this.add.image(1263,0,"iglooedit","button/music");_.setOrigin(.5039370078740157,.5),M.add(_);const it=this.add.container(1238,294);it.visible=!1;const nt=this.add.image(7,251,"iglooedit","list");it.add(nt);const ht=this.add.image(0,68,"iglooedit","divider");it.add(ht);const ft=this.add.image(0,518,"iglooedit","button/small");it.add(ft);const gt=this.add.image(0,518,"iglooedit","icon/igloo");gt.setOrigin(.5,.5070422535211268),it.add(gt);const yt=this.add.image(0,418,"iglooedit","button/small");it.add(yt);const Ot=this.add.image(0,418,"iglooedit","icon/puffle");Ot.setOrigin(.5074626865671642,.5),it.add(Ot);const bt=this.add.image(0,318,"iglooedit","button/small");it.add(bt);const At=this.add.image(0,318,"iglooedit","icon/wall");At.setOrigin(.5,.5068493150684932),it.add(At);const Mt=this.add.image(0,218,"iglooedit","button/small");it.add(Mt);const Bt=this.add.image(0,218,"iglooedit","icon/room");Bt.setOrigin(.5087719298245614,.5066666666666667),it.add(Bt);const Dt=this.add.image(0,118,"iglooedit","button/small");it.add(Dt);const Gt=this.add.image(0,118,"iglooedit","icon/floor");it.add(Gt);const Lt=this.add.image(0,0,"iglooedit","button/large");it.add(Lt);const Kt=this.add.image(0,0,"iglooedit","icon/all");Kt.setOrigin(.5076923076923077,.5),it.add(Kt);const kt=new Hl(this,760,480);this.add.existing(kt),kt.visible=!1;const Zt=new Vl(this,0,0);this.add.existing(Zt),Zt.visible=!1;const ae=new et.zx(S);ae.spriteName="button/edit",ae.callback=()=>this.onEditClick(),ae.activeFrame=!1;const fe=new et.tk(S);fe.text="edit_igloo_hint";const _t=new et.zx(P);_t.spriteName="button/lock",_t.hoverOutCallback=()=>this.onLockOut(),_t.callback=()=>this.onLockClick(),_t.activeFrame=!1;const oe=new et.tk(P);oe.text="open_igloo_hint";const ie=new et.rF(Y);ie.callback=()=>this.onSaveClick();const he=new et.rF(k);he.callback=()=>this.interface.showBook("igloo_catalog");const te=new et.zx(Q);te.spriteName="button/furniture_catalog",te.callback=()=>this.interface.showBook("igloo_furniture"),te.activeFrame=!1;const se=new et.zx(j);se.spriteName="button/furniture",se.callback=()=>this.onFurnitureClick(),se.activeFrame=!1;const ce=new et.zx(_);ce.spriteName="button/music",ce.callback=()=>kt.visible=!0,ce.activeFrame=!1,new et.vj(nt);const le=new et.zx(ft);le.spriteName="button/small",le.callback=()=>this.showGridView("igloo"),le.activeFrame=!1;const ue=new et.zx(yt);ue.spriteName="button/small",ue.callback=()=>this.showGridView(4),ue.activeFrame=!1;const Ee=new et.zx(bt);Ee.spriteName="button/small",Ee.callback=()=>this.showGridView(2),Ee.activeFrame=!1;const Xt=new et.zx(Mt);Xt.spriteName="button/small",Xt.callback=()=>this.showGridView(1),Xt.activeFrame=!1;const Ae=new et.zx(Dt);Ae.spriteName="button/small",Ae.callback=()=>this.showGridView(3),Ae.activeFrame=!1;const Se=new et.zx(Lt);Se.spriteName="button/large",Se.callback=()=>this.showGridView(),Se.activeFrame=!1,this.defaultControls=v,this.button_lock=P,this.controls=M,this.button_furniture=j,this.furniture=it,this.iglooMusic=kt,this.gridView=Zt,this.events.emit("scene-awake")}create(){this._create(),this.events.on("sleep",()=>this.onSleep());let v=new Phaser.Geom.Polygon([0,0,1520,0,1520,413,1370,200,1130,200,1130,900,1370,900,1370,570,1520,535,1520,960,0,960]);Phaser.Geom.Polygon.Translate(v,-this.furniture.x,-this.furniture.y);let S=this.add.graphics();this.furniture.add(S),S.setInteractive(v,Phaser.Geom.Polygon.Contains),S.on("pointerover",()=>this.furniture.visible=!1)}onSleep(){this.hideControls()}onLockClick(){if(this.world.client.iglooOpen){this.world.client.iglooOpen=!1,this.button_lock.__ShowHint.text="open_igloo_hint",this.network.send("close_igloo");return}let v=`Would you like to open your igloo?
This will add your igloo to the map.`;this.interface.prompt.showWindow(v,"dual",()=>{this.world.client.iglooOpen=!0,this.button_lock.__ShowHint.text="close_igloo_hint",this.network.send("open_igloo"),this.interface.prompt.window.visible=!1})}onLockOut(){this.world.client.iglooOpen&&this.button_lock.setFrame("button/lock-hover")}onEditClick(){this.interface.hideInterface(!1),this.world.room.showEditBg(),this.world.room.hidePenguins(),this.world.room.enableFurnitureInput(),this.showControls()}onSaveClick(){this.saveIgloo(),this.interface.showInterface(),this.world.room.hideEditBg(),this.world.room.showPenguins(),this.world.room.disableFurnitureInput(),this.hideControls()}onFurnitureClick(){this.furniture.visible=!this.furniture.visible}showControls(){this.defaultControls.visible=!1,this.controls.visible=!0,this.setControlsInteractive(!0)}hideControls(){this.defaultControls.visible=!0,this.controls.visible=!1,this.furniture.visible=!1,this.gridView.visible=!1}showGridView(v=null){this.gridView.visible=!0,this.gridView.startGrid(v)}saveIgloo(){this.world.room.selected&&this.world.room.selected.drop();let v=this.world.room.furnitureSprites.map(S=>({furnitureId:S.id,x:S.x,y:S.y,rotation:parseInt(S.currentFrame[0]),frame:parseInt(S.currentFrame[1])}));this.network.send("update_furniture",{furniture:v})}setControlsInteractive(v){let S=v?"setInteractive":"disableInteractive";for(let P of this.controls.list)P[S]()}}let dn="";class Zl extends m.Loader.LoaderPlugin{get cacheBuster(){return dn||""}set cacheBuster(v){dn=v}addFile(v){Array.isArray(v)||(v=[v]),this.cacheBuster.toString().length>0&&v.forEach(S=>{S.url+="?v="+dn}),super.addFile(v)}}m.Plugins.PluginCache.register("Loader",Zl,"load");var jl=Object.defineProperty,br=Object.getOwnPropertySymbols,Kl=Object.prototype.hasOwnProperty,$l=Object.prototype.propertyIsEnumerable,Lr=(O,v,S)=>v in O?jl(O,v,{enumerable:!0,configurable:!0,writable:!0,value:S}):O[v]=S,Fr=(O,v)=>{for(var S in v||(v={}))Kl.call(v,S)&&Lr(O,S,v[S]);if(br)for(var S of br(v))$l.call(v,S)&&Lr(O,S,v[S]);return O};class Jl extends Ie.Z{preload(){this.load.cacheBuster="1.1.10-beta",this.load.on("progress",this.onProgress,this),nl.load(this.crumbs.fonts),this.load.pack("preload","assets/media/preload/preload-pack.json"),this.scene.add("Start",rl),this.scene.add("Login",ul),this.scene.add("PenguinSelect",dl),this.scene.add("PenguinLogin",vl),this.scene.add("Servers",ml),this.scene.add("Main",Yl),this.scene.add("IglooEdit",kl)}create(){let v=this.cache.json.get("crumbs");this.game.crumbs=Fr(Fr({},this.game.crumbs),v),this.interface.hideLoading(),this.scene.start("InterfaceController"),this.scene.start("Start"),this.interface.bringToTop()}onProgress(v){this.interface.loading.progress.scaleX=v}}class Ql extends Ie.Z{create(){this.scene.add("InterfaceController",Fh),this.scene.add("WorldController",Qh),this.scene.add("FlashController",il),this.scene.add("Load",sl),this.interface.showLoading("Loading Content",!0),this.interface.loading.events.once("create",this.onLoadCreate,this)}onLoadCreate(){this.scene.add("Preload",Jl,!0)}}var vn=__webpack_require__(4187);function ql(O,v="",S){let P=O;S=S||typeof location!="undefined"&&location,O==null&&(O=S.protocol+"//"+S.host),typeof O=="string"&&(O.charAt(0)==="/"&&(O.charAt(1)==="/"?O=S.protocol+O:O=S.host+O),/^(https?|wss?):\/\//.test(O)||(typeof S!="undefined"?O=S.protocol+"//"+O:O="https://"+O),P=vn(O)),P.port||(/^(http|ws)$/.test(P.protocol)?P.port="80":/^(http|ws)s$/.test(P.protocol)&&(P.port="443")),P.path=P.path||"/";const F=P.host.indexOf(":")!==-1?"["+P.host+"]":P.host;return P.id=P.protocol+"://"+F+":"+P.port+v,P.href=P.protocol+"://"+F+(S&&S.port===P.port?"":":"+P.port),P}var _l=__webpack_require__(8058);const Ai=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function Br(O){const v=O.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!v||_l))return new XMLHttpRequest}catch(S){}if(!v)try{return new Ai[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(S){}}function Ir(O,...v){return v.reduce((S,P)=>(O.hasOwnProperty(P)&&(S[P]=O[P]),S),{})}const tu=setTimeout,eu=clearTimeout;function bs(O,v){v.useNativeTimers?(O.setTimeoutFn=tu.bind(Ai),O.clearTimeoutFn=eu.bind(Ai)):(O.setTimeoutFn=setTimeout.bind(Ai),O.clearTimeoutFn=clearTimeout.bind(Ai))}var $i=__webpack_require__(3063);const ai=Object.create(null);ai.open="0",ai.close="1",ai.ping="2",ai.pong="3",ai.message="4",ai.upgrade="5",ai.noop="6";const Ls=Object.create(null);Object.keys(ai).forEach(O=>{Ls[ai[O]]=O});const iu={type:"error",data:"parser error"},su=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",nu=typeof ArrayBuffer=="function",ru=O=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O&&O.buffer instanceof ArrayBuffer,au=({type:O,data:v},S,P)=>su&&v instanceof Blob?S?P(v):Dr(v,P):nu&&(v instanceof ArrayBuffer||ru(v))?S?P(v):Dr(new Blob([v]),P):P(ai[O]+(v||"")),Dr=(O,v)=>{const S=new FileReader;return S.onload=function(){const P=S.result.split(",")[1];v("b"+P)},S.readAsDataURL(O)},Nr=au;for(var Ji="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",os=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),Fs=0;Fs<Ji.length;Fs++)os[Ji.charCodeAt(Fs)]=Fs;var Cc=function(O){var v=new Uint8Array(O),S,P=v.length,M="";for(S=0;S<P;S+=3)M+=Ji[v[S]>>2],M+=Ji[(v[S]&3)<<4|v[S+1]>>4],M+=Ji[(v[S+1]&15)<<2|v[S+2]>>6],M+=Ji[v[S+2]&63];return P%3===2?M=M.substring(0,M.length-1)+"=":P%3===1&&(M=M.substring(0,M.length-2)+"=="),M},ou=function(O){var v=O.length*.75,S=O.length,P,M=0,F,Y,k,Q;O[O.length-1]==="="&&(v--,O[O.length-2]==="="&&v--);var j=new ArrayBuffer(v),_=new Uint8Array(j);for(P=0;P<S;P+=4)F=os[O.charCodeAt(P)],Y=os[O.charCodeAt(P+1)],k=os[O.charCodeAt(P+2)],Q=os[O.charCodeAt(P+3)],_[M++]=F<<2|Y>>4,_[M++]=(Y&15)<<4|k>>2,_[M++]=(k&3)<<6|Q&63;return j};const hu=typeof ArrayBuffer=="function",lu=(O,v)=>{if(typeof O!="string")return{type:"message",data:Gr(O,v)};const S=O.charAt(0);return S==="b"?{type:"message",data:uu(O.substring(1),v)}:Ls[S]?O.length>1?{type:Ls[S],data:O.substring(1)}:{type:Ls[S]}:iu},uu=(O,v)=>{if(hu){const S=ou(O);return Gr(S,v)}else return{base64:!0,data:O}},Gr=(O,v)=>{switch(v){case"blob":return O instanceof ArrayBuffer?new Blob([O]):O;case"arraybuffer":default:return O}},zr=lu,Ur=String.fromCharCode(30),fu=(O,v)=>{const S=O.length,P=new Array(S);let M=0;O.forEach((F,Y)=>{Nr(F,!1,k=>{P[Y]=k,++M===S&&v(P.join(Ur))})})},cu=(O,v)=>{const S=O.split(Ur),P=[];for(let M=0;M<S.length;M++){const F=zr(S[M],v);if(P.push(F),F.type==="error")break}return P},Yr=4;class Xr extends $i.Q{constructor(v){super(),this.writable=!1,bs(this,v),this.opts=v,this.query=v.query,this.readyState="",this.socket=v.socket}onError(v,S){const P=new Error(v);return P.type="TransportError",P.description=S,super.emit("error",P),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(v){this.readyState==="open"&&this.write(v)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(v){const S=zr(v,this.socket.binaryType);this.onPacket(S)}onPacket(v){super.emit("packet",v)}onClose(){this.readyState="closed",super.emit("close")}}var Wr=__webpack_require__(2281),pn=__webpack_require__(1830);class du extends Xr{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(v){this.readyState="pausing";const S=()=>{this.readyState="paused",v()};if(this.polling||!this.writable){let P=0;this.polling&&(P++,this.once("pollComplete",function(){--P||S()})),this.writable||(P++,this.once("drain",function(){--P||S()}))}else S()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(v){const S=P=>{if(this.readyState==="opening"&&P.type==="open"&&this.onOpen(),P.type==="close")return this.onClose(),!1;this.onPacket(P)};cu(v,this.socket.binaryType).forEach(S),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const v=()=>{this.write([{type:"close"}])};this.readyState==="open"?v():this.once("open",v)}write(v){this.writable=!1,fu(v,S=>{this.doWrite(S,()=>{this.writable=!0,this.emit("drain")})})}uri(){let v=this.query||{};const S=this.opts.secure?"https":"http";let P="";this.opts.timestampRequests!==!1&&(v[this.opts.timestampParam]=Wr()),!this.supportsBinary&&!v.sid&&(v.b64=1),this.opts.port&&(S==="https"&&Number(this.opts.port)!==443||S==="http"&&Number(this.opts.port)!==80)&&(P=":"+this.opts.port);const M=pn.encode(v),F=this.opts.hostname.indexOf(":")!==-1;return S+"://"+(F?"["+this.opts.hostname+"]":this.opts.hostname)+P+this.opts.path+(M.length?"?"+M:"")}}function vu(){}const pu=function(){return new Br({xdomain:!1}).responseType!=null}();class mu extends du{constructor(v){if(super(v),typeof location!="undefined"){const P=location.protocol==="https:";let M=location.port;M||(M=P?"443":"80"),this.xd=typeof location!="undefined"&&v.hostname!==location.hostname||M!==v.port,this.xs=v.secure!==P}const S=v&&v.forceBase64;this.supportsBinary=pu&&!S}request(v={}){return Object.assign(v,{xd:this.xd,xs:this.xs},this.opts),new oi(this.uri(),v)}doWrite(v,S){const P=this.request({method:"POST",data:v});P.on("success",S),P.on("error",M=>{this.onError("xhr post error",M)})}doPoll(){const v=this.request();v.on("data",this.onData.bind(this)),v.on("error",S=>{this.onError("xhr poll error",S)}),this.pollXhr=v}}class oi extends $i.Q{constructor(v,S){super(),bs(this,S),this.opts=S,this.method=S.method||"GET",this.uri=v,this.async=S.async!==!1,this.data=S.data!==void 0?S.data:null,this.create()}create(){const v=Ir(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");v.xdomain=!!this.opts.xd,v.xscheme=!!this.opts.xs;const S=this.xhr=new Br(v);try{S.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){S.setDisableHeaderCheck&&S.setDisableHeaderCheck(!0);for(let P in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(P)&&S.setRequestHeader(P,this.opts.extraHeaders[P])}}catch(P){}if(this.method==="POST")try{S.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(P){}try{S.setRequestHeader("Accept","*/*")}catch(P){}"withCredentials"in S&&(S.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(S.timeout=this.opts.requestTimeout),S.onreadystatechange=()=>{S.readyState===4&&(S.status===200||S.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof S.status=="number"?S.status:0)},0))},S.send(this.data)}catch(P){this.setTimeoutFn(()=>{this.onError(P)},0);return}typeof document!="undefined"&&(this.index=oi.requestsCount++,oi.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(v){this.emit("data",v),this.onSuccess()}onError(v){this.emit("error",v),this.cleanup(!0)}cleanup(v){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=vu,v)try{this.xhr.abort()}catch(S){}typeof document!="undefined"&&delete oi.requests[this.index],this.xhr=null}}onLoad(){const v=this.xhr.responseText;v!==null&&this.onData(v)}abort(){this.cleanup()}}if(oi.requestsCount=0,oi.requests={},typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Vr);else if(typeof addEventListener=="function"){const O="onpagehide"in Ai?"pagehide":"unload";addEventListener(O,Vr,!1)}}function Vr(){for(let O in oi.requests)oi.requests.hasOwnProperty(O)&&oi.requests[O].abort()}const gu=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?v=>Promise.resolve().then(v):(v,S)=>S(v,0))(),hs=Ai.WebSocket||Ai.MozWebSocket,mn=!0,xu="arraybuffer",Hr=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class gn extends Xr{constructor(v){super(v),this.supportsBinary=!v.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const v=this.uri(),S=this.opts.protocols,P=Hr?{}:Ir(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(P.headers=this.opts.extraHeaders);try{this.ws=mn&&!Hr?S?new hs(v,S):new hs(v):new hs(v,S,P)}catch(M){return this.emit("error",M)}this.ws.binaryType=this.socket.binaryType||xu,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=v=>this.onData(v.data),this.ws.onerror=v=>this.onError("websocket error",v)}write(v){this.writable=!1;for(let S=0;S<v.length;S++){const P=v[S],M=S===v.length-1;Nr(P,this.supportsBinary,F=>{const Y={};mn||(P.options&&(Y.compress=P.options.compress),this.opts.perMessageDeflate&&(typeof F=="string"?Buffer.byteLength(F):F.length)<this.opts.perMessageDeflate.threshold&&(Y.compress=!1));try{mn?this.ws.send(F):this.ws.send(F,Y)}catch(k){}M&&gu(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let v=this.query||{};const S=this.opts.secure?"wss":"ws";let P="";this.opts.port&&(S==="wss"&&Number(this.opts.port)!==443||S==="ws"&&Number(this.opts.port)!==80)&&(P=":"+this.opts.port),this.opts.timestampRequests&&(v[this.opts.timestampParam]=Wr()),this.supportsBinary||(v.b64=1);const M=pn.encode(v),F=this.opts.hostname.indexOf(":")!==-1;return S+"://"+(F?"["+this.opts.hostname+"]":this.opts.hostname)+P+this.opts.path+(M.length?"?"+M:"")}check(){return!!hs&&!("__initialize"in hs&&this.name===gn.prototype.name)}}const yu={websocket:gn,polling:mu};class xi extends $i.Q{constructor(v,S={}){super(),v&&typeof v=="object"&&(S=v,v=null),v?(v=vn(v),S.hostname=v.host,S.secure=v.protocol==="https"||v.protocol==="wss",S.port=v.port,v.query&&(S.query=v.query)):S.host&&(S.hostname=vn(S.host).host),bs(this,S),this.secure=S.secure!=null?S.secure:typeof location!="undefined"&&location.protocol==="https:",S.hostname&&!S.port&&(S.port=this.secure?"443":"80"),this.hostname=S.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=S.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=S.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},S),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=pn.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(v){const S=Tu(this.opts.query);S.EIO=Yr,S.transport=v,this.id&&(S.sid=this.id);const P=Object.assign({},this.opts.transportOptions[v],this.opts,{query:S,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new yu[v](P)}open(){let v;if(this.opts.rememberUpgrade&&xi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)v="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else v=this.transports[0];this.readyState="opening";try{v=this.createTransport(v)}catch(S){this.transports.shift(),this.open();return}v.open(),this.setTransport(v)}setTransport(v){this.transport&&this.transport.removeAllListeners(),this.transport=v,v.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(v){let S=this.createTransport(v),P=!1;xi.priorWebsocketSuccess=!1;const M=()=>{P||(S.send([{type:"ping",data:"probe"}]),S.once("packet",it=>{if(!P)if(it.type==="pong"&&it.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",S),!S)return;xi.priorWebsocketSuccess=S.name==="websocket",this.transport.pause(()=>{P||this.readyState!=="closed"&&(_(),this.setTransport(S),S.send([{type:"upgrade"}]),this.emitReserved("upgrade",S),S=null,this.upgrading=!1,this.flush())})}else{const nt=new Error("probe error");nt.transport=S.name,this.emitReserved("upgradeError",nt)}}))};function F(){P||(P=!0,_(),S.close(),S=null)}const Y=it=>{const nt=new Error("probe error: "+it);nt.transport=S.name,F(),this.emitReserved("upgradeError",nt)};function k(){Y("transport closed")}function Q(){Y("socket closed")}function j(it){S&&it.name!==S.name&&F()}const _=()=>{S.removeListener("open",M),S.removeListener("error",Y),S.removeListener("close",k),this.off("close",Q),this.off("upgrading",j)};S.once("open",M),S.once("error",Y),S.once("close",k),this.once("close",Q),this.once("upgrading",j),S.open()}onOpen(){if(this.readyState="open",xi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let v=0;const S=this.upgrades.length;for(;v<S;v++)this.probe(this.upgrades[v])}}onPacket(v){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",v),this.emitReserved("heartbeat"),v.type){case"open":this.onHandshake(JSON.parse(v.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const S=new Error("server error");S.code=v.data,this.onError(S);break;case"message":this.emitReserved("data",v.data),this.emitReserved("message",v.data);break}}onHandshake(v){this.emitReserved("handshake",v),this.id=v.sid,this.transport.query.sid=v.sid,this.upgrades=this.filterUpgrades(v.upgrades),this.pingInterval=v.pingInterval,this.pingTimeout=v.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(v,S,P){return this.sendPacket("message",v,S,P),this}send(v,S,P){return this.sendPacket("message",v,S,P),this}sendPacket(v,S,P,M){if(typeof S=="function"&&(M=S,S=void 0),typeof P=="function"&&(M=P,P=null),this.readyState==="closing"||this.readyState==="closed")return;P=P||{},P.compress=P.compress!==!1;const F={type:v,data:S,options:P};this.emitReserved("packetCreate",F),this.writeBuffer.push(F),M&&this.once("flush",M),this.flush()}close(){const v=()=>{this.onClose("forced close"),this.transport.close()},S=()=>{this.off("upgrade",S),this.off("upgradeError",S),v()},P=()=>{this.once("upgrade",S),this.once("upgradeError",S)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?P():v()}):this.upgrading?P():v()),this}onError(v){xi.priorWebsocketSuccess=!1,this.emitReserved("error",v),this.onClose("transport error",v)}onClose(v,S){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",v,S),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(v){const S=[];let P=0;const M=v.length;for(;P<M;P++)~this.transports.indexOf(v[P])&&S.push(v[P]);return S}}xi.protocol=Yr;function Tu(O){const v={};for(let S in O)O.hasOwnProperty(S)&&(v[S]=O[S]);return v}const wc=xi.protocol,Su=typeof ArrayBuffer=="function",Eu=O=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O.buffer instanceof ArrayBuffer,kr=Object.prototype.toString,Cu=typeof Blob=="function"||typeof Blob!="undefined"&&kr.call(Blob)==="[object BlobConstructor]",wu=typeof File=="function"||typeof File!="undefined"&&kr.call(File)==="[object FileConstructor]";function xn(O){return Su&&(O instanceof ArrayBuffer||Eu(O))||Cu&&O instanceof Blob||wu&&O instanceof File}function Bs(O,v){if(!O||typeof O!="object")return!1;if(Array.isArray(O)){for(let S=0,P=O.length;S<P;S++)if(Bs(O[S]))return!0;return!1}if(xn(O))return!0;if(O.toJSON&&typeof O.toJSON=="function"&&arguments.length===1)return Bs(O.toJSON(),!0);for(const S in O)if(Object.prototype.hasOwnProperty.call(O,S)&&Bs(O[S]))return!0;return!1}function Ou(O){const v=[],S=O.data,P=O;return P.data=yn(S,v),P.attachments=v.length,{packet:P,buffers:v}}function yn(O,v){if(!O)return O;if(xn(O)){const S={_placeholder:!0,num:v.length};return v.push(O),S}else if(Array.isArray(O)){const S=new Array(O.length);for(let P=0;P<O.length;P++)S[P]=yn(O[P],v);return S}else if(typeof O=="object"&&!(O instanceof Date)){const S={};for(const P in O)Object.prototype.hasOwnProperty.call(O,P)&&(S[P]=yn(O[P],v));return S}return O}function Pu(O,v){return O.data=Tn(O.data,v),O.attachments=void 0,O}function Tn(O,v){if(!O)return O;if(O&&O._placeholder)return v[O.num];if(Array.isArray(O))for(let S=0;S<O.length;S++)O[S]=Tn(O[S],v);else if(typeof O=="object")for(const S in O)Object.prototype.hasOwnProperty.call(O,S)&&(O[S]=Tn(O[S],v));return O}const Au=5;var Qt;(function(O){O[O.CONNECT=0]="CONNECT",O[O.DISCONNECT=1]="DISCONNECT",O[O.EVENT=2]="EVENT",O[O.ACK=3]="ACK",O[O.CONNECT_ERROR=4]="CONNECT_ERROR",O[O.BINARY_EVENT=5]="BINARY_EVENT",O[O.BINARY_ACK=6]="BINARY_ACK"})(Qt||(Qt={}));class Ru{encode(v){return(v.type===Qt.EVENT||v.type===Qt.ACK)&&Bs(v)?(v.type=v.type===Qt.EVENT?Qt.BINARY_EVENT:Qt.BINARY_ACK,this.encodeAsBinary(v)):[this.encodeAsString(v)]}encodeAsString(v){let S=""+v.type;return(v.type===Qt.BINARY_EVENT||v.type===Qt.BINARY_ACK)&&(S+=v.attachments+"-"),v.nsp&&v.nsp!=="/"&&(S+=v.nsp+","),v.id!=null&&(S+=v.id),v.data!=null&&(S+=JSON.stringify(v.data)),S}encodeAsBinary(v){const S=Ou(v),P=this.encodeAsString(S.packet),M=S.buffers;return M.unshift(P),M}}class Sn extends $i.Q{constructor(){super()}add(v){let S;if(typeof v=="string")S=this.decodeString(v),S.type===Qt.BINARY_EVENT||S.type===Qt.BINARY_ACK?(this.reconstructor=new bu(S),S.attachments===0&&super.emitReserved("decoded",S)):super.emitReserved("decoded",S);else if(xn(v)||v.base64)if(this.reconstructor)S=this.reconstructor.takeBinaryData(v),S&&(this.reconstructor=null,super.emitReserved("decoded",S));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+v)}decodeString(v){let S=0;const P={type:Number(v.charAt(0))};if(Qt[P.type]===void 0)throw new Error("unknown packet type "+P.type);if(P.type===Qt.BINARY_EVENT||P.type===Qt.BINARY_ACK){const F=S+1;for(;v.charAt(++S)!=="-"&&S!=v.length;);const Y=v.substring(F,S);if(Y!=Number(Y)||v.charAt(S)!=="-")throw new Error("Illegal attachments");P.attachments=Number(Y)}if(v.charAt(S+1)==="/"){const F=S+1;for(;++S&&!(v.charAt(S)===","||S===v.length););P.nsp=v.substring(F,S)}else P.nsp="/";const M=v.charAt(S+1);if(M!==""&&Number(M)==M){const F=S+1;for(;++S;){const Y=v.charAt(S);if(Y==null||Number(Y)!=Y){--S;break}if(S===v.length)break}P.id=Number(v.substring(F,S+1))}if(v.charAt(++S)){const F=Mu(v.substr(S));if(Sn.isPayloadValid(P.type,F))P.data=F;else throw new Error("invalid payload")}return P}static isPayloadValid(v,S){switch(v){case Qt.CONNECT:return typeof S=="object";case Qt.DISCONNECT:return S===void 0;case Qt.CONNECT_ERROR:return typeof S=="string"||typeof S=="object";case Qt.EVENT:case Qt.BINARY_EVENT:return Array.isArray(S)&&S.length>0;case Qt.ACK:case Qt.BINARY_ACK:return Array.isArray(S)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}function Mu(O){try{return JSON.parse(O)}catch(v){return!1}}class bu{constructor(v){this.packet=v,this.buffers=[],this.reconPack=v}takeBinaryData(v){if(this.buffers.push(v),this.buffers.length===this.reconPack.attachments){const S=Pu(this.reconPack,this.buffers);return this.finishedReconstruction(),S}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Ke(O,v,S){return O.on(v,S),function(){O.off(v,S)}}const Lu=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Zr extends $i.Q{constructor(v,S,P){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=v,this.nsp=S,P&&P.auth&&(this.auth=P.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const v=this.io;this.subs=[Ke(v,"open",this.onopen.bind(this)),Ke(v,"packet",this.onpacket.bind(this)),Ke(v,"error",this.onerror.bind(this)),Ke(v,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...v){return v.unshift("message"),this.emit.apply(this,v),this}emit(v,...S){if(Lu.hasOwnProperty(v))throw new Error('"'+v+'" is a reserved event name');S.unshift(v);const P={type:Qt.EVENT,data:S};if(P.options={},P.options.compress=this.flags.compress!==!1,typeof S[S.length-1]=="function"){const Y=this.ids++,k=S.pop();this._registerAckCallback(Y,k),P.id=Y}const M=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!M||!this.connected)||(this.connected?this.packet(P):this.sendBuffer.push(P)),this.flags={},this}_registerAckCallback(v,S){const P=this.flags.timeout;if(P===void 0){this.acks[v]=S;return}const M=this.io.setTimeoutFn(()=>{delete this.acks[v];for(let F=0;F<this.sendBuffer.length;F++)this.sendBuffer[F].id===v&&this.sendBuffer.splice(F,1);S.call(this,new Error("operation has timed out"))},P);this.acks[v]=(...F)=>{this.io.clearTimeoutFn(M),S.apply(this,[null,...F])}}packet(v){v.nsp=this.nsp,this.io._packet(v)}onopen(){typeof this.auth=="function"?this.auth(v=>{this.packet({type:Qt.CONNECT,data:v})}):this.packet({type:Qt.CONNECT,data:this.auth})}onerror(v){this.connected||this.emitReserved("connect_error",v)}onclose(v){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",v)}onpacket(v){if(v.nsp===this.nsp)switch(v.type){case Qt.CONNECT:if(v.data&&v.data.sid){const M=v.data.sid;this.onconnect(M)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Qt.EVENT:this.onevent(v);break;case Qt.BINARY_EVENT:this.onevent(v);break;case Qt.ACK:this.onack(v);break;case Qt.BINARY_ACK:this.onack(v);break;case Qt.DISCONNECT:this.ondisconnect();break;case Qt.CONNECT_ERROR:this.destroy();const P=new Error(v.data.message);P.data=v.data.data,this.emitReserved("connect_error",P);break}}onevent(v){const S=v.data||[];v.id!=null&&S.push(this.ack(v.id)),this.connected?this.emitEvent(S):this.receiveBuffer.push(Object.freeze(S))}emitEvent(v){if(this._anyListeners&&this._anyListeners.length){const S=this._anyListeners.slice();for(const P of S)P.apply(this,v)}super.emit.apply(this,v)}ack(v){const S=this;let P=!1;return function(...M){P||(P=!0,S.packet({type:Qt.ACK,id:v,data:M}))}}onack(v){const S=this.acks[v.id];typeof S=="function"&&(S.apply(this,v.data),delete this.acks[v.id])}onconnect(v){this.id=v,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(v=>this.emitEvent(v)),this.receiveBuffer=[],this.sendBuffer.forEach(v=>this.packet(v)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(v=>v()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Qt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(v){return this.flags.compress=v,this}get volatile(){return this.flags.volatile=!0,this}timeout(v){return this.flags.timeout=v,this}onAny(v){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(v),this}prependAny(v){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(v),this}offAny(v){if(!this._anyListeners)return this;if(v){const S=this._anyListeners;for(let P=0;P<S.length;P++)if(v===S[P])return S.splice(P,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var Fu=__webpack_require__(3010);class En extends $i.Q{constructor(v,S){var P;super(),this.nsps={},this.subs=[],v&&typeof v=="object"&&(S=v,v=void 0),S=S||{},S.path=S.path||"/socket.io",this.opts=S,bs(this,S),this.reconnection(S.reconnection!==!1),this.reconnectionAttempts(S.reconnectionAttempts||1/0),this.reconnectionDelay(S.reconnectionDelay||1e3),this.reconnectionDelayMax(S.reconnectionDelayMax||5e3),this.randomizationFactor((P=S.randomizationFactor)!==null&&P!==void 0?P:.5),this.backoff=new Fu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(S.timeout==null?2e4:S.timeout),this._readyState="closed",this.uri=v;const M=S.parser||rt;this.encoder=new M.Encoder,this.decoder=new M.Decoder,this._autoConnect=S.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(v){return arguments.length?(this._reconnection=!!v,this):this._reconnection}reconnectionAttempts(v){return v===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=v,this)}reconnectionDelay(v){var S;return v===void 0?this._reconnectionDelay:(this._reconnectionDelay=v,(S=this.backoff)===null||S===void 0||S.setMin(v),this)}randomizationFactor(v){var S;return v===void 0?this._randomizationFactor:(this._randomizationFactor=v,(S=this.backoff)===null||S===void 0||S.setJitter(v),this)}reconnectionDelayMax(v){var S;return v===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=v,(S=this.backoff)===null||S===void 0||S.setMax(v),this)}timeout(v){return arguments.length?(this._timeout=v,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(v){if(~this._readyState.indexOf("open"))return this;this.engine=new xi(this.uri,this.opts);const S=this.engine,P=this;this._readyState="opening",this.skipReconnect=!1;const M=Ke(S,"open",function(){P.onopen(),v&&v()}),F=Ke(S,"error",Y=>{P.cleanup(),P._readyState="closed",this.emitReserved("error",Y),v?v(Y):P.maybeReconnectOnOpen()});if(this._timeout!==!1){const Y=this._timeout;Y===0&&M();const k=this.setTimeoutFn(()=>{M(),S.close(),S.emit("error",new Error("timeout"))},Y);this.opts.autoUnref&&k.unref(),this.subs.push(function(){clearTimeout(k)})}return this.subs.push(M),this.subs.push(F),this}connect(v){return this.open(v)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const v=this.engine;this.subs.push(Ke(v,"ping",this.onping.bind(this)),Ke(v,"data",this.ondata.bind(this)),Ke(v,"error",this.onerror.bind(this)),Ke(v,"close",this.onclose.bind(this)),Ke(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(v){this.decoder.add(v)}ondecoded(v){this.emitReserved("packet",v)}onerror(v){this.emitReserved("error",v)}socket(v,S){let P=this.nsps[v];return P||(P=new Zr(this,v,S),this.nsps[v]=P),P}_destroy(v){const S=Object.keys(this.nsps);for(const P of S)if(this.nsps[P].active)return;this._close()}_packet(v){const S=this.encoder.encode(v);for(let P=0;P<S.length;P++)this.engine.write(S[P],v.options)}cleanup(){this.subs.forEach(v=>v()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(v){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",v),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const v=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const S=this.backoff.duration();this._reconnecting=!0;const P=this.setTimeoutFn(()=>{v.skipReconnect||(this.emitReserved("reconnect_attempt",v.backoff.attempts),!v.skipReconnect&&v.open(M=>{M?(v._reconnecting=!1,v.reconnect(),this.emitReserved("reconnect_error",M)):v.onreconnect()}))},S);this.opts.autoUnref&&P.unref(),this.subs.push(function(){clearTimeout(P)})}}onreconnect(){const v=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",v)}}const ls={};function Is(O,v){typeof O=="object"&&(v=O,O=void 0),v=v||{};const S=ql(O,v.path||"/socket.io"),P=S.source,M=S.id,F=S.path,Y=ls[M]&&F in ls[M].nsps,k=v.forceNew||v["force new connection"]||v.multiplex===!1||Y;let Q;return k?Q=new En(P,v):(ls[M]||(ls[M]=new En(P,v)),Q=ls[M]),S.query&&!v.query&&(v.query=S.queryKey),Q.socket(S.path,v)}Object.assign(Is,{Manager:En,Socket:Zr,io:Is,connect:Is});var Bu=__webpack_require__(9669),Iu=__webpack_require__.n(Bu);const Du=Iu().create({baseURL:"https://api.cplegacy.com",headers:{Accept:"application/json","Content-Type":"application/json"},timeout:1e4});class Nu{constructor(v){this.events={},this.pluginsCache={},this.loadPlugins(v)}loadPlugins(v){this.importPlugins(__webpack_require__(1761));for(let S in this.pluginsCache)if(this.pluginsCache[S].__esModule){let P=new this.pluginsCache[S].default(v);this.loadEvents(P)}}importPlugins(v){v.keys().forEach(S=>this.pluginsCache[S]=v(S))}loadEvents(v){for(let S in v.events)this.events[S]=v.events[S].bind(v)}getEvent(v,S){try{this.events[v](S)}catch(P){console.error(`[PluginManager] Event (${v}) not handled: ${P.stack}`)}}}class Gu{constructor(v){this.plugins=new Nu(v)}handle(v){try{this.fireEvent(v.action,v.args)}catch(S){console.error(S)}}fireEvent(v,S){this.plugins.getEvent(v,S)}}class zu{constructor(v){this.game=v,this.handler=new Gu(this),this.client=null,this.saveUsername=!1,this.savePassword=!1,this.token=null,this.kickMessage="",this.lastLoginScene=null,this.worldName}get interface(){return this.game.scene.getScene("InterfaceController")}get loginScene(){return this.game.scene.getScene("Login")}login(v,S,P,M){this.saveUsername=P,this.savePassword=M,Du.post(v,S).then(F=>{this.interface.hideLoading(),F.data.success?this.game.scene.start("Servers",F.data):this.onLoginError(F.data.message)}).catch(F=>{var Y,k;this.interface.hideLoading(),this.onLoginError((k=(Y=F.response)==null?void 0:Y.data.message)!=null?k:"An unknown error occurred. Please try again.")})}onLoginError(v){if(!this.lastLoginScene){this.game.scene.start("Login");return}this.game.scene.getScene(this.lastLoginScene).events.once("create",()=>{this.loginScene.events.emit("hideinput"),this.interface.prompt.showError(v,"Okay",()=>{this.loginScene.events.emit("showinput"),this.interface.prompt.error.visible=!1})}),this.game.scene.start(this.lastLoginScene)}connectGame(v,S,P){let M=this.savePassword&&Object.keys(this.savedPenguins).length<=6,F={username:S,key:P,createToken:M},Y=this.getToken(S);Y&&(F.token=Y.split(":")[0]),this.connect(v,()=>{this.send("game_auth",F),this.worldName=v},()=>{this.onConnectionLost()})}connect(v,S,P){this.disconnect();let M=this.game.crumbs.worlds[v];this.client=Is.connect(M.host,{parser:__webpack_require__(885),transports:["websocket"],reconnection:!1}),this.client.once("connect",S),this.client.once("disconnect",P),this.client.on("connect_error",()=>this.onConnectionLost()),this.client.on("message",(F,Y)=>this.onMessage({action:F,args:Y}))}disconnect(){this.client&&this.client.disconnect()}send(v,S={}){this.client.emit("message",v,S)}onMessage(v){this.handler.handle(v)}onConnectionLost(){this.disconnect();const v=this.kickMessage||`Connection was lost.
Please click to reload.`;this.game.scene.getScene("InterfaceController").prompt.showError(v,"Okay",()=>{this.kickMessage="",window.location.reload()})}get isSavedPenguins(){return!!localStorage.getItem("saved_penguins")}get savedPenguins(){let v=localStorage.getItem("saved_penguins");if(!v)return{};try{return JSON.parse(v)}catch(S){return{}}}getToken(v){let S=this.savedPenguins[v.toLowerCase()];return S&&S.token?S.token:null}}var Uu=__webpack_require__(9242);const Yu={custom:{families:["Arial:n4,n7","Arial Narrow:n4,n7","Asterisk:n4","Burbank Small:n4,n7","CCComiccrazy:n4","CCFaceFront:i7"],urls:["styles/fonts.css"]}},Xu={1:{key:"Basic",scene:__webpack_require__(5625).Z,x:760,y:660},2:{key:"Candy",scene:__webpack_require__(1804).Z,x:760,y:660},3:{key:"DeluxeBlue",scene:__webpack_require__(8541).Z,x:720,y:600},4:{key:"BigCandy",scene:__webpack_require__(7537).Z,x:720,y:600},5:{key:"Stone",scene:__webpack_require__(9334).Z,x:760,y:660},6:{key:"Snow",scene:__webpack_require__(9892).Z,x:760,y:660},8:{key:"DeluxeStone",scene:__webpack_require__(7968).Z,x:720,y:600},9:{key:"DeluxeSnow",scene:__webpack_require__(9542).Z,x:720,y:600},10:{key:"BambooHut",scene:__webpack_require__(4364).Z,x:770,y:770},11:{key:"LogCabin",scene:__webpack_require__(1885).Z,x:760,y:720},12:{key:"Gym",scene:__webpack_require__(8794).Z,x:760,y:720},13:{key:"SplitLevel",scene:__webpack_require__(8417).Z,x:310,y:700},14:{key:"SplitCandy",scene:__webpack_require__(6847).Z,x:310,y:700},16:{key:"IcePalace",scene:__webpack_require__(3230).Z,x:755,y:755},18:{key:"FishBowl",scene:__webpack_require__(8009).Z,x:755,y:755},20:{key:"Pumpkin",scene:__webpack_require__(3374).Z,x:755,y:755},21:{key:"Backyard",scene:__webpack_require__(7964).Z,x:755,y:755},22:{key:"PinkIcePalace",scene:__webpack_require__(4876).Z,x:755,y:755},23:{key:"Ship",scene:__webpack_require__(8884).Z,x:755,y:755},26:{key:"Restaurant",scene:__webpack_require__(2003).Z,x:755,y:755},27:{key:"TreeHouse",scene:__webpack_require__(8998).Z,x:755,y:755},28:{key:"Theatre",scene:__webpack_require__(4389).Z,x:755,y:755},33:{key:"GreyIcePalace",scene:__webpack_require__(5655).Z,x:755,y:755},35:{key:"CozyCottage",scene:__webpack_require__(8172).Z,x:359,y:436},36:{key:"Estate",scene:__webpack_require__(4085).Z,x:755,y:755},37:{key:"HalfIgloo",scene:__webpack_require__(107).Z,x:755,y:755},39:{key:"DragonsLair",scene:__webpack_require__(503).Z,x:755,y:755},40:{key:"MermaidCove",scene:__webpack_require__(5620).Z,x:359,y:436}},Wu={100:{key:"Town",scene:__webpack_require__(1909).Z,x:760,y:660},110:{key:"Coffee",scene:__webpack_require__(9051).Z,x:640,y:480},111:{key:"Book",scene:__webpack_require__(9588).Z,x:1260,y:560},120:{key:"Dance",scene:__webpack_require__(7005).Z,x:360,y:560},121:{key:"Lounge",scene:__webpack_require__(784).Z,x:1120,y:640},122:{key:"Eco",scene:__webpack_require__(6585).Z,x:1120,y:640},130:{key:"Shop",scene:__webpack_require__(7283).Z,x:1e3,y:560},200:{key:"Village",scene:__webpack_require__(8049).Z,x:832,y:780},210:{key:"Sport",scene:__webpack_require__(2084).Z,x:740,y:680},220:{key:"Lodge",scene:__webpack_require__(781).Z,x:760,y:800},221:{key:"Attic",scene:__webpack_require__(2733).Z,x:966,y:560},230:{key:"Mtn",scene:__webpack_require__(2278).Z,x:760,y:440},300:{key:"Plaza",scene:__webpack_require__(7066).Z,x:760,y:680},310:{key:"Pet",scene:__webpack_require__(2747).Z,x:828,y:520},320:{key:"Dojo",scene:__webpack_require__(7235).Z,x:735,y:585},321:{key:"DojoExt",scene:__webpack_require__(4974).Z,x:735,y:585},330:{key:"Pizza",scene:__webpack_require__(155).Z,x:820,y:545},340:{key:"Stage",scene:__webpack_require__(5790).Z,x:820,y:545},400:{key:"Beach",scene:__webpack_require__(8966).Z,x:540,y:540},410:{key:"Light",scene:__webpack_require__(994).Z,x:840,y:680},411:{key:"Beacon",scene:__webpack_require__(4522).Z,x:273,y:717},800:{key:"Dock",scene:__webpack_require__(6652).Z,x:704,y:480},801:{key:"Forts",scene:__webpack_require__(6468).Z,x:792,y:528},802:{key:"Rink",scene:__webpack_require__(1491).Z,x:770,y:400},804:{key:"Boiler",scene:__webpack_require__(6331).Z,x:1125,y:675},805:{key:"Berg",scene:__webpack_require__(6745).Z,x:652,y:448},806:{key:"Cave",scene:__webpack_require__(6986).Z,x:780,y:700},807:{key:"Shack",scene:__webpack_require__(8781).Z,x:612,y:748},808:{key:"Mine",scene:__webpack_require__(8926).Z,x:360,y:565},809:{key:"Forest",scene:__webpack_require__(6398).Z,x:828,y:612},810:{key:"Cove",scene:__webpack_require__(4334).Z,x:640,y:440},813:{key:"CaveMine",scene:__webpack_require__(3301).Z,x:640,y:440},814:{key:"Lake",scene:__webpack_require__(2291).Z,x:640,y:440},999:{key:"Sled",scene:__webpack_require__(9555).Z}},Vu="https://cpl-prod.b-cdn.net",Hu={width:1520,height:960,transparent:!0,roundPixels:!0,scale:{parent:"cpl-game",mode:C().Scale.ScaleModes.FIT,autoCenter:C().Scale.Center.NO_CENTER,autoRound:!0},dom:{createContainer:!0},plugins:{global:[Uu.Plugin.DefaultCfg]},physics:{default:"matter",matter:{debug:!1,gravity:!1}},loader:{baseURL:Vu},crumbs:{fonts:Yu,scenes:{igloos:Xu,rooms:Wu},frameColor:2270451,iglooIdOffset:2e3}};class Ds extends C().Game{constructor(v){super(v),xh({dsn:"https://fdff3459845c41c49483ec8e75216675@o1169250.ingest.sentry.io/6387419",release:"1.1.10-beta"}),Ds.printYukon(),Ds.printConsoleWarning(),this.setupAds(),this.initContainers(),this.crumbs=v.crumbs,this.network=new zu(this),this.scene.add("Boot",Ql,!0)}initContainers(){const v=document.querySelector(`#${this.config.parent} canvas`);v.onclick=()=>{document.activeElement.blur()}}setupAds(){!this.device.os.desktop||aiptag.cmd.display.push(function(){aipDisplayTag.display("cplegacy-com_728x90"),aipDisplayTag.display("cplegacy-com_728x90_2"),aipDisplayTag.display("cplegacy-com_160x600_1"),aipDisplayTag.display("cplegacy-com_160x600_2")})}static printYukon(){console.log("%cModified version of Yukon, used with MIT attribution %c https://github.com/wizguin/yukon","background: black","background: transparent")}static printConsoleWarning(){console.log("%cSTOP!","color: #c91010; font-size: 42px"),console.log("%cThis console is intended for developers only. Malicious users may attempt to steal your account information by asking you to copy-paste something here.","font-size: 24px")}}window.onload=()=>{new Ds(Hu)}})()})();</script>
<style>/*
! tailwindcss v3.0.24 | MIT License | https://tailwindcss.com
*//*
1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)
2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)
*/

*,
::before,
::after {
  box-sizing: border-box; /* 1 */
  border-width: 0; /* 2 */
  border-style: solid; /* 2 */
  border-color: #e5e7eb; /* 2 */
}

::before,
::after {
  --tw-content: '';
}

/*
1. Use a consistent sensible line-height in all browsers.
2. Prevent adjustments of font size after orientation changes in iOS.
3. Use a more readable tab size.
4. Use the user's configured `sans` font-family by default.
*/

html {
  line-height: 1.5; /* 1 */
  -webkit-text-size-adjust: 100%; /* 2 */
  -moz-tab-size: 4; /* 3 */
  -o-tab-size: 4;
     tab-size: 4; /* 3 */
  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; /* 4 */
}

/*
1. Remove the margin in all browsers.
2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.
*/

body {
  margin: 0; /* 1 */
  line-height: inherit; /* 2 */
}

/*
1. Add the correct height in Firefox.
2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)
3. Ensure horizontal rules are visible by default.
*/

hr {
  height: 0; /* 1 */
  color: inherit; /* 2 */
  border-top-width: 1px; /* 3 */
}

/*
Add the correct text decoration in Chrome, Edge, and Safari.
*/

abbr:where([title]) {
  -webkit-text-decoration: underline dotted;
          text-decoration: underline dotted;
}

/*
Remove the default font size and weight for headings.
*/

h1,
h2,
h3,
h4,
h5,
h6 {
  font-size: inherit;
  font-weight: inherit;
}

/*
Reset links to optimize for opt-in styling instead of opt-out.
*/

a {
  color: inherit;
  text-decoration: inherit;
}

/*
Add the correct font weight in Edge and Safari.
*/

b,
strong {
  font-weight: bolder;
}

/*
1. Use the user's configured `mono` font family by default.
2. Correct the odd `em` font sizing in all browsers.
*/

code,
kbd,
samp,
pre {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/*
Add the correct font size in all browsers.
*/

small {
  font-size: 80%;
}

/*
Prevent `sub` and `sup` elements from affecting the line height in all browsers.
*/

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/*
1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)
2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)
3. Remove gaps between table borders by default.
*/

table {
  text-indent: 0; /* 1 */
  border-color: inherit; /* 2 */
  border-collapse: collapse; /* 3 */
}

/*
1. Change the font styles in all browsers.
2. Remove the margin in Firefox and Safari.
3. Remove default padding in all browsers.
*/

button,
input,
optgroup,
select,
textarea {
  font-family: inherit; /* 1 */
  font-size: 100%; /* 1 */
  line-height: inherit; /* 1 */
  color: inherit; /* 1 */
  margin: 0; /* 2 */
  padding: 0; /* 3 */
}

/*
Remove the inheritance of text transform in Edge and Firefox.
*/

button,
select {
  text-transform: none;
}

/*
1. Correct the inability to style clickable types in iOS and Safari.
2. Remove default button styles.
*/

button,
[type='button'],
[type='reset'],
[type='submit'] {
  -webkit-appearance: button; /* 1 */
  background-color: transparent; /* 2 */
  background-image: none; /* 2 */
}

/*
Use the modern Firefox focus style for all focusable elements.
*/

:-moz-focusring {
  outline: auto;
}

/*
Remove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)
*/

:-moz-ui-invalid {
  box-shadow: none;
}

/*
Add the correct vertical alignment in Chrome and Firefox.
*/

progress {
  vertical-align: baseline;
}

/*
Correct the cursor style of increment and decrement buttons in Safari.
*/

::-webkit-inner-spin-button,
::-webkit-outer-spin-button {
  height: auto;
}

/*
1. Correct the odd appearance in Chrome and Safari.
2. Correct the outline style in Safari.
*/

[type='search'] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/*
Remove the inner padding in Chrome and Safari on macOS.
*/

::-webkit-search-decoration {
  -webkit-appearance: none;
}

/*
1. Correct the inability to style clickable types in iOS and Safari.
2. Change font properties to `inherit` in Safari.
*/

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/*
Add the correct display in Chrome and Safari.
*/

summary {
  display: list-item;
}

/*
Removes the default spacing and border for appropriate elements.
*/

blockquote,
dl,
dd,
h1,
h2,
h3,
h4,
h5,
h6,
hr,
figure,
p,
pre {
  margin: 0;
}

fieldset {
  margin: 0;
  padding: 0;
}

legend {
  padding: 0;
}

ol,
ul,
menu {
  list-style: none;
  margin: 0;
  padding: 0;
}

/*
Prevent resizing textareas horizontally by default.
*/

textarea {
  resize: vertical;
}

/*
1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)
2. Set the default placeholder color to the user's configured gray 400 color.
*/

input::-moz-placeholder, textarea::-moz-placeholder {
  opacity: 1; /* 1 */
  color: #9ca3af; /* 2 */
}

input:-ms-input-placeholder, textarea:-ms-input-placeholder {
  opacity: 1; /* 1 */
  color: #9ca3af; /* 2 */
}

input::placeholder,
textarea::placeholder {
  opacity: 1; /* 1 */
  color: #9ca3af; /* 2 */
}

/*
Set the default cursor for buttons.
*/

button,
[role="button"] {
  cursor: pointer;
}

/*
Make sure disabled buttons don't get the pointer cursor.
*/
:disabled {
  cursor: default;
}

/*
1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)
2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)
   This can trigger a poorly considered lint error in some tools but is included by design.
*/

img,
svg,
video,
canvas,
audio,
iframe,
embed,
object {
  display: block; /* 1 */
  vertical-align: middle; /* 2 */
}

/*
Constrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)
*/

img,
video {
  max-width: 100%;
  height: auto;
}

/*
Ensure the default browser behavior of the `hidden` attribute.
*/

[hidden] {
  display: none;
}

*, ::before, ::after {
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-rotate: 0;
  --tw-skew-x: 0;
  --tw-skew-y: 0;
  --tw-scale-x: 1;
  --tw-scale-y: 1;
  --tw-pan-x:  ;
  --tw-pan-y:  ;
  --tw-pinch-zoom:  ;
  --tw-scroll-snap-strictness: proximity;
  --tw-ordinal:  ;
  --tw-slashed-zero:  ;
  --tw-numeric-figure:  ;
  --tw-numeric-spacing:  ;
  --tw-numeric-fraction:  ;
  --tw-ring-inset:  ;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-color: rgb(59 130 246 / 0.5);
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-shadow: 0 0 #0000;
  --tw-shadow-colored: 0 0 #0000;
  --tw-blur:  ;
  --tw-brightness:  ;
  --tw-contrast:  ;
  --tw-grayscale:  ;
  --tw-hue-rotate:  ;
  --tw-invert:  ;
  --tw-saturate:  ;
  --tw-sepia:  ;
  --tw-drop-shadow:  ;
  --tw-backdrop-blur:  ;
  --tw-backdrop-brightness:  ;
  --tw-backdrop-contrast:  ;
  --tw-backdrop-grayscale:  ;
  --tw-backdrop-hue-rotate:  ;
  --tw-backdrop-invert:  ;
  --tw-backdrop-opacity:  ;
  --tw-backdrop-saturate:  ;
  --tw-backdrop-sepia:  ;
}
.visible {
  visibility: visible;
}
.static {
  position: static;
}
.fixed {
  position: fixed;
}
.mx-auto {
  margin-left: auto;
  margin-right: auto;
}
.block {
  display: block;
}
.flex {
  display: flex;
}
.table {
  display: table;
}
.grid {
  display: grid;
}
.contents {
  display: contents;
}
.hidden {
  display: none;
}
.h-\[90px\] {
  height: 90px;
}
.h-\[600px\] {
  height: 600px;
}
.w-\[728px\] {
  width: 728px;
}
.w-\[160px\] {
  width: 160px;
}
.max-w-7xl {
  max-width: 80rem;
}
.transform {
  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));
}
.resize {
  resize: both;
}
.items-center {
  align-items: center;
}
.justify-center {
  justify-content: center;
}
.border {
  border-width: 1px;
}
.pb-3 {
  padding-bottom: 0.75rem;
}
.pt-3 {
  padding-top: 0.75rem;
}
.italic {
  font-style: italic;
}
.shadow {
  --tw-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
  --tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);
  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);
}
.outline {
  outline-style: solid;
}
.ring {
  --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
  --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);
  box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
}
.blur {
  --tw-blur: blur(8px);
  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);
}
.filter {
  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);
}

*,
::after,
::before {
    box-sizing: border-box;
}

body {
    padding: 0;
    margin: 0;
    background: #22a4f3;
}

.cpl-game {
    min-width: 500px;
    max-width: 1520px;
}

.cpl-game canvas {
    border-radius: 5px;
}

.cpl-game input {
    background: none !important;
}
</style>
	</head>

    <body>
        <div class="max-w-7xl mx-auto pb-3 flex justify-center items-center">
            <div id="cplegacy-com_728x90" class="w-[728px] h-[90px]"></div>
        </div>
        <div class="mx-auto flex justify-center">
            <div id="cplegacy-com_160x600_1" class="w-[160px] h-[600px]"></div>
            <div id="cpl-game" class="cpl-game"><div style="display: block; width: 1520px; height: 960px; padding: 0px; margin-right: 0px; margin-bottom: 0px; position: absolute; overflow: hidden; pointer-events: none; transform: scale(0.998945, 0.998945); transform-origin: left top;"></div><canvas width="1520" height="960" style="width: 1518px; height: 958px; cursor: default;"></canvas></div>
            <div id="cplegacy-com_160x600_2" class="w-[160px] h-[600px]"></div>
        </div>
        <div class="max-w-7xl mx-auto pt-3 flex justify-center items-center">
            <div id="cplegacy-com_728x90_2" class="w-[728px] h-[90px]"></div>
        </div>
    

</body></html>
