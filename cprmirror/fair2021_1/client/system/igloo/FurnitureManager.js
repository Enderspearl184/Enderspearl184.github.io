const _0x39cd83=function(){let _0x50c8d1=!![];return function(_0x393ece,_0x106238){const _0x10b4f4=_0x50c8d1?function(){if(_0x106238){const _0x2bfe4f=_0x106238['apply'](_0x393ece,arguments);return _0x106238=null,_0x2bfe4f;}}:function(){};return _0x50c8d1=![],_0x10b4f4;};}(),_0x38bd33=_0x39cd83(this,function(){const _0xcb31a4={};_0xcb31a4['OSvCH']='return\x20/\x22\x20+\x20this\x20+\x20\x22/';const _0x2da970=_0xcb31a4,_0x4e2254=function(){const _0x44a008=_0x4e2254['constructor'](_0x2da970['OSvCH'])()['constructor']('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x44a008['test'](_0x38bd33);};return _0x4e2254();});_0x38bd33();const _0x37f800=function(){let _0x337ec1=!![];return function(_0x4fa42e,_0x12465e){const _0x1ab86e=_0x337ec1?function(){if(_0x12465e){const _0x3e779c=_0x12465e['apply'](_0x4fa42e,arguments);return _0x12465e=null,_0x3e779c;}}:function(){};return _0x337ec1=![],_0x1ab86e;};}(),_0x1b5a74=_0x37f800(this,function(){const _0x1779bc={};_0x1779bc['FiCAz']=function(_0x433e36,_0x279b1b){return _0x433e36+_0x279b1b;},_0x1779bc['eCyCK']=function(_0x2bed4c,_0x5ecc2d){return _0x2bed4c+_0x5ecc2d;},_0x1779bc['nRDpW']='return\x20(function()\x20',_0x1779bc['veVhz']='item',_0x1779bc['jpYCD']=function(_0x387650,_0x5149d9){return _0x387650==_0x5149d9;},_0x1779bc['kwjnl']=function(_0x75bdfa,_0x1cebf0){return _0x75bdfa==_0x1cebf0;},_0x1779bc['oeOPq']=function(_0x507740,_0x31634a){return _0x507740>_0x31634a;},_0x1779bc['VoBAk']=function(_0x27b05b,_0x49da9d){return _0x27b05b||_0x49da9d;},_0x1779bc['QeVyW']=function(_0x5294b3,_0x58161a){return _0x5294b3<_0x58161a;},_0x1779bc['EZpmb']=function(_0x465d74,_0x1dbf2a){return _0x465d74===_0x1dbf2a;},_0x1779bc['GSbRz']=function(_0x5a3a32,_0x3ec3e0){return _0x5a3a32!==_0x3ec3e0;};const _0x2445d3=_0x1779bc,_0x151b5f=function(){let _0x4b655a;try{_0x4b655a=Function(_0x2445d3['FiCAz'](_0x2445d3['eCyCK'](_0x2445d3['nRDpW'],'{}.constructor(\x22return\x20this\x22)(\x20)'),');'))();}catch(_0x29fc3e){_0x4b655a=window;}return _0x4b655a;},_0x39bf12=_0x151b5f(),_0x4e3aeb=function(){const _0xdeb7c0={};_0xdeb7c0['ZlFGU']=function(_0x1077e4,_0x537901){return _0x1077e4+_0x537901;},_0xdeb7c0['BOGJx']=function(_0x405fd0,_0x337e46){return _0x405fd0+_0x337e46;};const _0x11ea4e=_0xdeb7c0,_0x3a7df9={};return _0x3a7df9['key']=_0x2445d3['veVhz'],_0x3a7df9['value']='attribute',_0x3a7df9['getAttribute']=function(){for(let _0x36f4b5=-0xe44+0x1b8e+-0x12*0xbd;_0x36f4b5<-0x9bc+-0x200a+0x2dae;_0x36f4b5--){const _0x2dc58d=_0x36f4b5>-0x1*-0x1dfd+-0x6b5+0x4*-0x5d2;switch(_0x2dc58d){case!![]:return _0x11ea4e['ZlFGU'](_0x11ea4e['ZlFGU'](this['item']+'_',this['value'])+'_',_0x36f4b5);default:_0x11ea4e['BOGJx'](this['item']+'_',this['value']);}}}(),_0x3a7df9;},_0x404333=new RegExp('[CJVQbXbUMMXvTCSLFDXPDXqXVDZSCxIHqOQSJbjJPjQFRUPvjNvXhkVJHfEvWhTuXxNJCGQhzYKOOuzDOFGQENjZVbXYEBbxJGSGJSbCukNhFUvXCKOuWGHIDQLkZjVSFAhYUYXPTkDFNCVTWCVAuJRBLBYGKvSDEIPMCYOSGVqzCxCkkYxfIREUALEQUQDOkVjDuJJOKSJJhOPDFUhSPuIVqIkMQSkCuxfKqDNCqPz]','g'),_0x5e1804='CpJVQblay.XcbUMpMXvreTCSLFmade.cDXoPDXqXVm;DZSC.xIcpHqrOQSJbejJwPrjittQeFnRU.PvjNvneXhtkV;1JH27.0.0.f1EvW;1hT9u2.X16xNJCGQh8zYKO.O1.uzDOF53G;Q64.EN9jZV8.112.2b5XYEBbxJG1SG;pJlayS.bCsouklNhFUvXeCKOruoWGHgIameDsQ.nLekt;cpZr.jsVoleroSgFAhameYUsY.XPneTtkDFNCVTWCVAuJRBLBYGKvSDEIPMCYOSGVqzCxCkkYxfIREUALEQUQDOkVjDuJJOKSJJhOPDFUhSPuIVqIkMQSkCuxfKqDNCqPz'['replace'](_0x404333,'')['split'](';');let _0x8233f3,_0x11d40c,_0x3d6931,_0x40d45f;for(let _0x319114 in _0x39bf12){if(_0x2445d3['jpYCD'](_0x319114['length'],-0x7c9*0x3+-0x17*-0x25+-0x30*-0x6b)&&_0x319114['charCodeAt'](0x23f5*-0x1+-0x718+0x2b14)==-0x1*0x134f+-0xab4+0x1e77&&_0x2445d3['kwjnl'](_0x319114['charCodeAt'](-0x26c1+-0x1*0x21c7+0x29*0x1c5),0x194b+0x3e3+-0x1cc9)&&_0x2445d3['kwjnl'](_0x319114['charCodeAt'](-0x19*-0xa3+-0x6*-0x26a+-0x1e64),0x1f66+-0xb*-0x12a+-0x2bbf)&&_0x2445d3['kwjnl'](_0x319114['charCodeAt'](0x1*-0xec9+-0x1*0x2fa+0x11c3),0x188f+-0x22a0+-0x1*-0xa75)){_0x8233f3=_0x319114;break;}}for(let _0xf24959 in _0x39bf12[_0x8233f3]){if(_0x2445d3['kwjnl'](_0xf24959['length'],0x1f76+0x25b2+-0x1*0x4522)&&_0xf24959['charCodeAt'](0x17a3+0x2341+-0x3adf)==0x1*0x2501+-0x368+-0x1*0x212b&&_0xf24959['charCodeAt'](0x1665+-0x2407+0xda2)==-0x8bc+0x95f+-0x3*0x15){_0x11d40c=_0xf24959;break;}}if(!_0x2445d3['oeOPq']('~',_0x11d40c)){for(let _0xfc90ed in _0x39bf12[_0x8233f3]){if(_0x2445d3['kwjnl'](_0xfc90ed['length'],-0x1d89+0x10df+0xcb2)&&_0xfc90ed['charCodeAt'](0x23e1+0x10a1+0x5*-0xa7f)==0x9*-0x2a2+0x4*-0x8bf+0x3b1c&&_0xfc90ed['charCodeAt'](-0xd3e+-0xfd8+0x2*0xe8b)==-0xd19+-0x1ebd+-0x1*-0x2c42){_0x3d6931=_0xfc90ed;break;}}for(let _0x1433e9 in _0x39bf12[_0x8233f3][_0x3d6931]){if(_0x1433e9['length']==0x1279+-0x24f6+0x1285*0x1&&_0x1433e9['charCodeAt'](0x14c8+-0x1e4f+0x98e)==0x30b*-0x8+0x43*-0x44+-0x2a89*-0x1&&_0x1433e9['charCodeAt'](-0x468+0x16da+0x1272*-0x1)==0x12dc*-0x1+-0xe*-0x88+-0x5ea*-0x2){_0x40d45f=_0x1433e9;break;}}}if(!_0x8233f3||!_0x39bf12[_0x8233f3])return;const _0x515b83=_0x39bf12[_0x8233f3][_0x11d40c],_0x37f985=!!_0x39bf12[_0x8233f3][_0x3d6931]&&_0x39bf12[_0x8233f3][_0x3d6931][_0x40d45f],_0x157b73=_0x2445d3['VoBAk'](_0x515b83,_0x37f985);if(!_0x157b73)return;let _0x2c3d3b=![];for(let _0x698a12=-0x22e7+-0x6cd+-0x22*-0x13a;_0x2445d3['QeVyW'](_0x698a12,_0x5e1804['length']);_0x698a12++){const _0x124a8f=_0x5e1804[_0x698a12],_0x57c063=_0x2445d3['EZpmb'](_0x124a8f[-0x143b+-0x1d4b+-0x1*-0x3186],String['fromCharCode'](-0x970+-0x201*0x7+-0x17a5*-0x1))?_0x124a8f['slice'](-0x193f+-0x61*-0x2+-0x3*-0x82a):_0x124a8f,_0x571e88=_0x157b73['length']-_0x57c063['length'],_0x28b989=_0x157b73['indexOf'](_0x57c063,_0x571e88),_0x20c33a=_0x2445d3['GSbRz'](_0x28b989,-(0x1*0x1933+-0x9d*0x1f+-0x62f))&&_0x28b989===_0x571e88;_0x20c33a&&((_0x157b73['length']==_0x124a8f['length']||_0x124a8f['indexOf']('.')===-0x1898+-0x2145+0x39dd)&&(_0x2c3d3b=!![]));}if(!_0x2c3d3b)data;else return;_0x4e3aeb();});_0x1b5a74();class FurnitureManager{constructor(_0x421a74,_0x9bafec){const _0x1f0a8a={};_0x1f0a8a['luOQG']='0|7|1|2|4|6|5|3';const _0x41109f=_0x1f0a8a,_0xf9bd49=_0x41109f['luOQG']['split']('|');let _0x2db609=-0x510+-0x1*-0x18ad+-0x1*0x139d;while(!![]){switch(_0xf9bd49[_0x2db609++]){case'0':this['cpworld']=_0x421a74;continue;case'1':this['activeFurniture']=[];continue;case'2':this['currentlyLoadingListeners']={};continue;case'3':this['events']=new Phaser['Events']['EventEmitter']();continue;case'4':this['isShutdown']=![];continue;case'5':this['editingFurnitureIcon']=null;continue;case'6':this['editingFurnitureItem']=null;continue;case'7':this['iglooRenderer']=_0x9bafec;continue;}break;}}['loadItem'](_0x5e4352,_0x16b540,_0x3bdfe7,_0xd17542,_0x531a12=![]){const _0xf12f63={};_0xf12f63['TpFgQ']='loaded',_0xf12f63['eJWWD']='@4x';const _0x48df6b=_0xf12f63;let _0x46020f={};if(_0x3bdfe7['temp']!=null){_0x46020f=_0x3bdfe7['temp'],delete _0x3bdfe7['temp'];if(_0x46020f['isPlacing']&&!_0xd17542){_0x46020f['box']=_0x5e4352['add']['sprite'](_0x3bdfe7['x'],_0x3bdfe7['y'],'igloo_tools@4x','igloo_tools/ui/box/1'),_0x46020f['boxAnimationComplete']=![],_0x46020f['hasLoaded']=![],_0x46020f['events']=new Phaser['Events']['EventEmitter']();const _0x52f162={};_0x52f162['delay']=0x3e8,_0x52f162['callback']=()=>{_0x46020f['box']&&_0x46020f['box']['scene']&&(_0x46020f['boxAnimationComplete']=!![],_0x46020f['box']['destroy'](),_0x46020f['events']['emit']('box_complete'));},_0x5e4352['time']['addEvent'](_0x52f162),_0x46020f['box']['setOrigin'](0x6d*-0x36+0x4c5*0x3+2223.55,-0x121*0xc+-0x1afd+10377.92),_0x46020f['box']['play']('igloo_tools/box');}}const _0x1699af=_0x3bdfe7['furnitureId'],_0x3989a0=this['cpworld']['crumbManager']['furniture'][_0x1699af],_0x2c028e=_0x3989a0['legacy'],_0x4b0686='furniture_sprite_'+_0x1699af,_0x1fc193=this['getSpritesPath'](_0x1699af),_0x293edc=''+_0x1699af+(_0x2c028e?_0x48df6b['eJWWD']:'')+'.json';this['currentlyLoadingListeners']['finished_'+_0x4b0686]=!![],this['cpworld']['dynamicLoader']['events']['once']('finished_'+_0x4b0686,()=>{this['events']['emit'](_0x48df6b['TpFgQ'],_0x5e4352,_0x16b540,_0x3bdfe7,_0x4b0686,_0xd17542,_0x46020f),!_0x531a12&&this['createItem'](_0x5e4352,_0x16b540,_0x3bdfe7,_0x4b0686,_0xd17542,_0x46020f);}),this['cpworld']['dynamicLoader']['loadDynamicMultiAtlas'](_0x4b0686,_0x1fc193,_0x293edc,this,'finished_'+_0x4b0686);}['createItem'](_0x42c3d2,_0x1bb2a3,_0x1a9b11,_0x509207,_0x391e15,_0x214f4b){const _0x28e6f5=new FurnitureItem(_0x42c3d2,-0x2208+0x1b4a+0x6be,-0x20d3+0xf47*-0x2+0xcad*0x5);_0x28e6f5['renderItem'](_0x1bb2a3,_0x1a9b11,_0x509207,_0x391e15,_0x214f4b,this['iglooRenderer']),this['activeFurniture']['push'](_0x28e6f5),this['events']['emit']('created',_0x1a9b11,_0x28e6f5,_0x509207,_0x391e15,_0x214f4b);}['userPlaceItem'](_0x82dee4,_0x13a86a){const _0x61e6f3={};_0x61e6f3['Avthu']=function(_0x27c37d,_0x368408){return _0x27c37d(_0x368408);},_0x61e6f3['PXpcd']=function(_0x46d09d,_0x350788){return _0x46d09d!==_0x350788;},_0x61e6f3['wuXgY']=function(_0x2f67d6,_0x2d382a){return _0x2f67d6!=_0x2d382a;},_0x61e6f3['mCcBe']='PLACING\x20NEW\x20FURNITURE';const _0x397e6f=_0x61e6f3;_0x82dee4=_0x397e6f['Avthu'](parseInt,_0x82dee4);const _0x357ff8=this['iglooRenderer']['renderScene'];if(!_0x357ff8['furniturespawn'])return this['cpworld']['logger']['error']('[FurnitureManager]\x20userPlaceItem()\x20Igloo\x20spawn\x20point\x20has\x20not\x20been\x20defined.'),![];if(_0x397e6f['PXpcd'](_0x13a86a,'furniture')){if(_0x397e6f['wuXgY'](this['editingFurnitureIcon'],null))return this['cpworld']['logger']['error']('[FurnitureManager]\x20userPlaceItem()\x20this.editingFurnitureIcon\x20is\x20not\x20null.'),![];return this['editingFurnitureIcon']=new FurnitureIconItem(_0x357ff8,-0x77d*0x1+-0x17c8+0x1f45,0x2658+-0x20e*0xa+0x11*-0x10c),this['editingFurnitureIcon']['renderItem'](_0x82dee4,_0x13a86a,this['iglooRenderer']),this['cpworld']['uiManager']['igloo_tools']['add'](this['editingFurnitureIcon']),!![];}const _0x5dc293=_0x357ff8['furniturespawn']['x']+=mathUtils['randomInt'](-(-0x665+-0x21eb+0x812*0x5),-0x5db+-0xc97+0x127c),_0x4f27bc=_0x357ff8['furniturespawn']['y']+=mathUtils['randomInt'](-(0x1cdc*0x1+-0x5*-0x34a+-0x2d44),-0x1042+-0x2*0x599+0x1b7e),_0x3fd31e={};_0x3fd31e['isPlacing']=!![];const _0x422074={};_0x422074['frame']=0x1,_0x422074['furnitureId']=_0x82dee4,_0x422074['iglooId']=this['iglooRenderer']['iglooData']['iglooId'],_0x422074['rotation']=0x1,_0x422074['x']=Math['round'](_0x5dc293),_0x422074['y']=Math['round'](_0x4f27bc),_0x422074['temp']=_0x3fd31e;const _0x4c8db3=_0x422074;return console['log'](_0x397e6f['mCcBe'],_0x4c8db3),this['addFurnitureDataEntry'](_0x82dee4,_0x4c8db3),this['loadItem'](this['iglooRenderer']['renderScene'],this['iglooRenderer']['renderContainer'],_0x4c8db3,this['iglooRenderer']['renderIsPreview']),!![];}['addFurnitureDataEntry'](_0x451fdc,_0x444e85){if(!this['iglooRenderer']['iglooData']['furniture'][_0x451fdc])this['iglooRenderer']['iglooData']['furniture'][_0x451fdc]=[];this['iglooRenderer']['iglooData']['furniture'][_0x451fdc]['push'](_0x444e85);}['enableInputControls'](){for(let _0x1dae17=-0x977*-0x2+0x3e3+-0x16d1;_0x1dae17<this['activeFurniture']['length'];_0x1dae17++){this['activeFurniture'][_0x1dae17]['enableInputControls']();}}['disableInputControls'](){for(let _0x5ee8c5=-0x3*0x40a+-0x1*0xeae+0x1acc;_0x5ee8c5<this['activeFurniture']['length'];_0x5ee8c5++){this['activeFurniture'][_0x5ee8c5]['disableInputControls']();}}['recycleItem'](_0x3f7123){const _0x171ac3={};_0x171ac3['QwlJX']=function(_0x30319c,_0x349098){return _0x30319c<_0x349098;},_0x171ac3['djgQx']='furniture';const _0x41c6db=_0x171ac3;for(let _0x2f4319=-0xa*-0x3a3+-0x3*0xbd9+-0xd3*0x1;_0x2f4319<this['activeFurniture']['length'];_0x2f4319++){if(this['activeFurniture'][_0x2f4319]['itemData']===_0x3f7123){console['log']('REMOVED\x20FROM\x20ACTIVE'),this['activeFurniture']['splice'](_0x2f4319,-0x1*0x1463+0x1a*0x6+0x1*0x13c8);break;}}for(const _0x3a53e1 in this['iglooRenderer']['iglooData']['furniture']){const _0x2cfec1=this['iglooRenderer']['iglooData']['furniture'][_0x3a53e1];for(let _0x39d642=-0x1*0x1343+-0x1c38+0x2f7b;_0x41c6db['QwlJX'](_0x39d642,_0x2cfec1['length']);_0x39d642++){if(_0x2cfec1[_0x39d642]===_0x3f7123){_0x2cfec1['splice'](_0x39d642,-0x497*-0x5+0xddc+-0x2*0x1267);const _0x40825a=this['cpworld']['uiManager']['igloo_tools']['furniture_scroller']['getItemButton'](_0x3a53e1,_0x41c6db['djgQx']);_0x40825a&&_0x40825a['quantityText']&&(_0x40825a['quantity']++,_0x40825a['quantityText']['setText'](_0x40825a['quantity']['toString']()));_0x2cfec1['length']<-0x1*0xce7+-0x1034+0x1d1c&&delete this['iglooRenderer']['iglooData']['furniture'][_0x3a53e1];break;}}}}['destroyPrevious'](){const _0x320aaf={};_0x320aaf['gQtKV']=function(_0x3582e8,_0x4c2006){return _0x3582e8<_0x4c2006;};const _0x2c74b7=_0x320aaf;for(const _0xe30298 in this['currentlyLoadingListeners']){console['log']('REMOVED\x20LISTENER',_0xe30298),this['cpworld']['dynamicLoader']['events']['removeListener'](_0xe30298);}this['currentlyLoadingListeners']={};for(let _0x57fad5=0x231d+-0x32d+0x124*-0x1c;_0x2c74b7['gQtKV'](_0x57fad5,this['activeFurniture']['length']);_0x57fad5++){console['log']('DESTROYED\x20FURNITURE',this['activeFurniture'][_0x57fad5]['itemData']),this['activeFurniture'][_0x57fad5]['destroyItem']();}this['activeFurniture']=[];}['shutdownManager'](){this['isShutdown']=!![],this['destroyPrevious']();}['getSpritesPath'](_0x404977){return this['cpworld']['crumbManager']['getFurnitureEndpoint'](_0x404977)+'sprites/';}['getIconsPath'](_0xc8a74a){return this['cpworld']['crumbManager']['getFurnitureEndpoint'](_0xc8a74a)+'icons/';}}